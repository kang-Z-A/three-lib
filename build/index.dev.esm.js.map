{"version":3,"file":"index.dev.esm.js","sources":["../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/Constants.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/geometryUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/computeBoundsUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/ArrayBoxUtilities.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/splitUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/MeshBVHNode.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/sortUtils.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/sortUtils_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/utils/nodeBufferUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/buildUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/build/buildTree.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/math/SeparatingAxisBounds.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/math/MathUtilities.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/math/ExtendedTriangle.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/math/OrientedBox.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/PrimitivePool.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/ExtendedTrianglePool.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/utils/BufferStack.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/shapecast.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/closestPointToPoint.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/ThreeRayIntersectUtilities.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/TriangleUtilities.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/utils/iterationUtils.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/refit.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/utils/intersectUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/utils/iterationUtils_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/raycast.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/raycastFirst.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/intersectsGeometry.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/closestPointToGeometry.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/refit_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/raycast_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/raycastFirst_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/intersectsGeometry_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/closestPointToGeometry_indirect.generated.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/cast/bvhcast.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/core/MeshBVH.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/BufferUtils.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/GeometryRayIntersectUtilities.js","../node_modules/.pnpm/three-mesh-bvh@0.8.3_three@0.170.0/node_modules/three-mesh-bvh/src/utils/ExtensionUtilities.js","../src/hooks/useMeshBvh.ts","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/utils/BufferGeometryUtils.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/loaders/DRACOLoader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/controls/PointerLockControls.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/controls/OrbitControls.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/loaders/RGBELoader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/lines/LineSegmentsGeometry.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/lines/LineMaterial.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/lines/LineSegments2.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/lines/LineGeometry.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/lines/Line2.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/shaders/CopyShader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/postprocessing/Pass.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/postprocessing/ShaderPass.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/postprocessing/MaskPass.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/postprocessing/EffectComposer.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/postprocessing/RenderPass.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/postprocessing/OutlinePass.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/shaders/FXAAShader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/shaders/GammaCorrectionShader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/renderers/CSS3DRenderer.js","../src/utils/rainDrop.ts","../src/utils/mergeMesh.ts","../src/utils/index.ts","../src/utils/eventBus.ts","../src/utils/percent-interceptor.ts","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/libs/stats.module.js","../node_modules/.pnpm/@tweenjs+tween.js@25.0.0/node_modules/@tweenjs/tween.js/dist/tween.esm.js","../src/types/common.ts","../src/utils/objects/myWater.ts","../src/utils/objects/myWater2.ts","../src/utils/objects/imgs/water_noise.png","../src/utils/objects/imgs/water_wave.png","../src/utils/objects/imgs/water_static.png","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/objects/Reflector.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/objects/Refractor.js","../src/utils/objects/waterCube.ts","../node_modules/.pnpm/@vue+shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler.js","../node_modules/.pnpm/@vue+reactivity@3.5.13/node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/objects/Lensflare.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/objects/Sky.js","../src/hooks/useSun.ts","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/libs/fflate.module.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/loaders/EXRLoader.js","../node_modules/.pnpm/three@0.170.0/node_modules/three/examples/jsm/objects/Water.js","../src/hooks/useThree.ts","../src/utils/myPath.ts","../node_modules/.pnpm/suncalc@1.9.0/node_modules/suncalc/suncalc.js"],"sourcesContent":["// Split strategy constants\nexport const CENTER = 0;\nexport const AVERAGE = 1;\nexport const SAH = 2;\n\n// Traversal constants\nexport const NOT_INTERSECTED = 0;\nexport const INTERSECTED = 1;\nexport const CONTAINED = 2;\n\n// SAH cost constants\n// TODO: hone these costs more. The relative difference between them should be the\n// difference in measured time to perform a triangle intersection vs traversing\n// bounds.\nexport const TRIANGLE_INTERSECT_COST = 1.25;\nexport const TRAVERSAL_COST = 1;\n\n\n// Build constants\nexport const BYTES_PER_NODE = 6 * 4 + 4 + 4;\nexport const IS_LEAFNODE_FLAG = 0xFFFF;\n\n// EPSILON for computing floating point error during build\n// https://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics\nexport const FLOAT32_EPSILON = Math.pow( 2, - 24 );\n\nexport const SKIP_GENERATION = Symbol( 'SKIP_GENERATION' );\n","import { BufferAttribute } from 'three';\n\nexport function getVertexCount( geo ) {\n\n\treturn geo.index ? geo.index.count : geo.attributes.position.count;\n\n}\n\nexport function getTriCount( geo ) {\n\n\treturn getVertexCount( geo ) / 3;\n\n}\n\nexport function getIndexArray( vertexCount, BufferConstructor = ArrayBuffer ) {\n\n\tif ( vertexCount > 65535 ) {\n\n\t\treturn new Uint32Array( new BufferConstructor( 4 * vertexCount ) );\n\n\t} else {\n\n\t\treturn new Uint16Array( new BufferConstructor( 2 * vertexCount ) );\n\n\t}\n\n}\n\n// ensures that an index is present on the geometry\nexport function ensureIndex( geo, options ) {\n\n\tif ( ! geo.index ) {\n\n\t\tconst vertexCount = geo.attributes.position.count;\n\t\tconst BufferConstructor = options.useSharedArrayBuffer ? SharedArrayBuffer : ArrayBuffer;\n\t\tconst index = getIndexArray( vertexCount, BufferConstructor );\n\t\tgeo.setIndex( new BufferAttribute( index, 1 ) );\n\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\t\tindex[ i ] = i;\n\n\t\t}\n\n\t}\n\n}\n\n// Computes the set of { offset, count } ranges which need independent BVH roots. Each\n// region in the geometry index that belongs to a different set of material groups requires\n// a separate BVH root, so that triangles indices belonging to one group never get swapped\n// with triangle indices belongs to another group. For example, if the groups were like this:\n//\n// [-------------------------------------------------------------]\n// |__________________|\n//   g0 = [0, 20]  |______________________||_____________________|\n//                      g1 = [16, 40]           g2 = [41, 60]\n//\n// we would need four BVH roots: [0, 15], [16, 20], [21, 40], [41, 60].\nexport function getFullGeometryRange( geo, range ) {\n\n\tconst triCount = getTriCount( geo );\n\tconst drawRange = range ? range : geo.drawRange;\n\tconst start = drawRange.start / 3;\n\tconst end = ( drawRange.start + drawRange.count ) / 3;\n\n\tconst offset = Math.max( 0, start );\n\tconst count = Math.min( triCount, end ) - offset;\n\treturn [ {\n\t\toffset: Math.floor( offset ),\n\t\tcount: Math.floor( count ),\n\t} ];\n\n}\n\nexport function getRootIndexRanges( geo, range ) {\n\n\tif ( ! geo.groups || ! geo.groups.length ) {\n\n\t\treturn getFullGeometryRange( geo, range );\n\n\t}\n\n\tconst ranges = [];\n\tconst rangeBoundaries = new Set();\n\n\tconst drawRange = range ? range : geo.drawRange;\n\tconst drawRangeStart = drawRange.start / 3;\n\tconst drawRangeEnd = ( drawRange.start + drawRange.count ) / 3;\n\tfor ( const group of geo.groups ) {\n\n\t\tconst groupStart = group.start / 3;\n\t\tconst groupEnd = ( group.start + group.count ) / 3;\n\t\trangeBoundaries.add( Math.max( drawRangeStart, groupStart ) );\n\t\trangeBoundaries.add( Math.min( drawRangeEnd, groupEnd ) );\n\n\t}\n\n\n\t// note that if you don't pass in a comparator, it sorts them lexicographically as strings :-(\n\tconst sortedBoundaries = Array.from( rangeBoundaries.values() ).sort( ( a, b ) => a - b );\n\tfor ( let i = 0; i < sortedBoundaries.length - 1; i ++ ) {\n\n\t\tconst start = sortedBoundaries[ i ];\n\t\tconst end = sortedBoundaries[ i + 1 ];\n\n\t\tranges.push( {\n\t\t\toffset: Math.floor( start ),\n\t\t\tcount: Math.floor( end - start ),\n\t\t} );\n\n\t}\n\n\treturn ranges;\n\n}\n\nexport function hasGroupGaps( geometry, range ) {\n\n\tconst vertexCount = getTriCount( geometry );\n\tconst groups = getRootIndexRanges( geometry, range )\n\t\t.sort( ( a, b ) => a.offset - b.offset );\n\n\tconst finalGroup = groups[ groups.length - 1 ];\n\tfinalGroup.count = Math.min( vertexCount - finalGroup.offset, finalGroup.count );\n\n\tlet total = 0;\n\tgroups.forEach( ( { count } ) => total += count );\n\treturn vertexCount !== total;\n\n}\n","import { FLOAT32_EPSILON } from '../Constants.js';\nimport { getTriCount } from './geometryUtils.js';\n\n// computes the union of the bounds of all of the given triangles and puts the resulting box in \"target\".\n// A bounding box is computed for the centroids of the triangles, as well, and placed in \"centroidTarget\".\n// These are computed together to avoid redundant accesses to bounds array.\nexport function getBounds( triangleBounds, offset, count, target, centroidTarget ) {\n\n\tlet minx = Infinity;\n\tlet miny = Infinity;\n\tlet minz = Infinity;\n\tlet maxx = - Infinity;\n\tlet maxy = - Infinity;\n\tlet maxz = - Infinity;\n\n\tlet cminx = Infinity;\n\tlet cminy = Infinity;\n\tlet cminz = Infinity;\n\tlet cmaxx = - Infinity;\n\tlet cmaxy = - Infinity;\n\tlet cmaxz = - Infinity;\n\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\n\n\t\tconst cx = triangleBounds[ i + 0 ];\n\t\tconst hx = triangleBounds[ i + 1 ];\n\t\tconst lx = cx - hx;\n\t\tconst rx = cx + hx;\n\t\tif ( lx < minx ) minx = lx;\n\t\tif ( rx > maxx ) maxx = rx;\n\t\tif ( cx < cminx ) cminx = cx;\n\t\tif ( cx > cmaxx ) cmaxx = cx;\n\n\t\tconst cy = triangleBounds[ i + 2 ];\n\t\tconst hy = triangleBounds[ i + 3 ];\n\t\tconst ly = cy - hy;\n\t\tconst ry = cy + hy;\n\t\tif ( ly < miny ) miny = ly;\n\t\tif ( ry > maxy ) maxy = ry;\n\t\tif ( cy < cminy ) cminy = cy;\n\t\tif ( cy > cmaxy ) cmaxy = cy;\n\n\t\tconst cz = triangleBounds[ i + 4 ];\n\t\tconst hz = triangleBounds[ i + 5 ];\n\t\tconst lz = cz - hz;\n\t\tconst rz = cz + hz;\n\t\tif ( lz < minz ) minz = lz;\n\t\tif ( rz > maxz ) maxz = rz;\n\t\tif ( cz < cminz ) cminz = cz;\n\t\tif ( cz > cmaxz ) cmaxz = cz;\n\n\t}\n\n\ttarget[ 0 ] = minx;\n\ttarget[ 1 ] = miny;\n\ttarget[ 2 ] = minz;\n\n\ttarget[ 3 ] = maxx;\n\ttarget[ 4 ] = maxy;\n\ttarget[ 5 ] = maxz;\n\n\tcentroidTarget[ 0 ] = cminx;\n\tcentroidTarget[ 1 ] = cminy;\n\tcentroidTarget[ 2 ] = cminz;\n\n\tcentroidTarget[ 3 ] = cmaxx;\n\tcentroidTarget[ 4 ] = cmaxy;\n\tcentroidTarget[ 5 ] = cmaxz;\n\n}\n\n// precomputes the bounding box for each triangle; required for quickly calculating tree splits.\n// result is an array of size tris.length * 6 where triangle i maps to a\n// [x_center, x_delta, y_center, y_delta, z_center, z_delta] tuple starting at index i * 6,\n// representing the center and half-extent in each dimension of triangle i\nexport function computeTriangleBounds( geo, target = null, offset = null, count = null ) {\n\n\tconst posAttr = geo.attributes.position;\n\tconst index = geo.index ? geo.index.array : null;\n\tconst triCount = getTriCount( geo );\n\tconst normalized = posAttr.normalized;\n\tlet triangleBounds;\n\tif ( target === null ) {\n\n\t\ttriangleBounds = new Float32Array( triCount * 6 );\n\t\toffset = 0;\n\t\tcount = triCount;\n\n\t} else {\n\n\t\ttriangleBounds = target;\n\t\toffset = offset || 0;\n\t\tcount = count || triCount;\n\n\t}\n\n\t// used for non-normalized positions\n\tconst posArr = posAttr.array;\n\n\t// support for an interleaved position buffer\n\tconst bufferOffset = posAttr.offset || 0;\n\tlet stride = 3;\n\tif ( posAttr.isInterleavedBufferAttribute ) {\n\n\t\tstride = posAttr.data.stride;\n\n\t}\n\n\t// used for normalized positions\n\tconst getters = [ 'getX', 'getY', 'getZ' ];\n\n\tfor ( let tri = offset; tri < offset + count; tri ++ ) {\n\n\t\tconst tri3 = tri * 3;\n\t\tconst tri6 = tri * 6;\n\n\t\tlet ai = tri3 + 0;\n\t\tlet bi = tri3 + 1;\n\t\tlet ci = tri3 + 2;\n\n\t\tif ( index ) {\n\n\t\t\tai = index[ ai ];\n\t\t\tbi = index[ bi ];\n\t\t\tci = index[ ci ];\n\n\t\t}\n\n\t\t// we add the stride and offset here since we access the array directly\n\t\t// below for the sake of performance\n\t\tif ( ! normalized ) {\n\n\t\t\tai = ai * stride + bufferOffset;\n\t\t\tbi = bi * stride + bufferOffset;\n\t\t\tci = ci * stride + bufferOffset;\n\n\t\t}\n\n\t\tfor ( let el = 0; el < 3; el ++ ) {\n\n\t\t\tlet a, b, c;\n\n\t\t\tif ( normalized ) {\n\n\t\t\t\ta = posAttr[ getters[ el ] ]( ai );\n\t\t\t\tb = posAttr[ getters[ el ] ]( bi );\n\t\t\t\tc = posAttr[ getters[ el ] ]( ci );\n\n\t\t\t} else {\n\n\t\t\t\ta = posArr[ ai + el ];\n\t\t\t\tb = posArr[ bi + el ];\n\t\t\t\tc = posArr[ ci + el ];\n\n\t\t\t}\n\n\t\t\tlet min = a;\n\t\t\tif ( b < min ) min = b;\n\t\t\tif ( c < min ) min = c;\n\n\t\t\tlet max = a;\n\t\t\tif ( b > max ) max = b;\n\t\t\tif ( c > max ) max = c;\n\n\t\t\t// Increase the bounds size by float32 epsilon to avoid precision errors when\n\t\t\t// converting to 32 bit float. Scale the epsilon by the size of the numbers being\n\t\t\t// worked with.\n\t\t\tconst halfExtents = ( max - min ) / 2;\n\t\t\tconst el2 = el * 2;\n\t\t\ttriangleBounds[ tri6 + el2 + 0 ] = min + halfExtents;\n\t\t\ttriangleBounds[ tri6 + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\n\n\t\t}\n\n\t}\n\n\treturn triangleBounds;\n\n}\n","export function arrayToBox( nodeIndex32, array, target ) {\n\n\ttarget.min.x = array[ nodeIndex32 ];\n\ttarget.min.y = array[ nodeIndex32 + 1 ];\n\ttarget.min.z = array[ nodeIndex32 + 2 ];\n\n\ttarget.max.x = array[ nodeIndex32 + 3 ];\n\ttarget.max.y = array[ nodeIndex32 + 4 ];\n\ttarget.max.z = array[ nodeIndex32 + 5 ];\n\n\treturn target;\n\n}\n\nexport function makeEmptyBounds( target ) {\n\n\ttarget[ 0 ] = target[ 1 ] = target[ 2 ] = Infinity;\n\ttarget[ 3 ] = target[ 4 ] = target[ 5 ] = - Infinity;\n\n}\n\nexport function getLongestEdgeIndex( bounds ) {\n\n\tlet splitDimIdx = - 1;\n\tlet splitDist = - Infinity;\n\n\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\tconst dist = bounds[ i + 3 ] - bounds[ i ];\n\t\tif ( dist > splitDist ) {\n\n\t\t\tsplitDist = dist;\n\t\t\tsplitDimIdx = i;\n\n\t\t}\n\n\t}\n\n\treturn splitDimIdx;\n\n}\n\n// copies bounds a into bounds b\nexport function copyBounds( source, target ) {\n\n\ttarget.set( source );\n\n}\n\n// sets bounds target to the union of bounds a and b\nexport function unionBounds( a, b, target ) {\n\n\tlet aVal, bVal;\n\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\tconst d3 = d + 3;\n\n\t\t// set the minimum values\n\t\taVal = a[ d ];\n\t\tbVal = b[ d ];\n\t\ttarget[ d ] = aVal < bVal ? aVal : bVal;\n\n\t\t// set the max values\n\t\taVal = a[ d3 ];\n\t\tbVal = b[ d3 ];\n\t\ttarget[ d3 ] = aVal > bVal ? aVal : bVal;\n\n\t}\n\n}\n\n// expands the given bounds by the provided triangle bounds\nexport function expandByTriangleBounds( startIndex, triangleBounds, bounds ) {\n\n\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\tconst tCenter = triangleBounds[ startIndex + 2 * d ];\n\t\tconst tHalf = triangleBounds[ startIndex + 2 * d + 1 ];\n\n\t\tconst tMin = tCenter - tHalf;\n\t\tconst tMax = tCenter + tHalf;\n\n\t\tif ( tMin < bounds[ d ] ) {\n\n\t\t\tbounds[ d ] = tMin;\n\n\t\t}\n\n\t\tif ( tMax > bounds[ d + 3 ] ) {\n\n\t\t\tbounds[ d + 3 ] = tMax;\n\n\t\t}\n\n\t}\n\n}\n\n// compute bounds surface area\nexport function computeSurfaceArea( bounds ) {\n\n\tconst d0 = bounds[ 3 ] - bounds[ 0 ];\n\tconst d1 = bounds[ 4 ] - bounds[ 1 ];\n\tconst d2 = bounds[ 5 ] - bounds[ 2 ];\n\n\treturn 2 * ( d0 * d1 + d1 * d2 + d2 * d0 );\n\n}\n","import { getLongestEdgeIndex, computeSurfaceArea, copyBounds, unionBounds, expandByTriangleBounds } from '../../utils/ArrayBoxUtilities.js';\nimport { CENTER, AVERAGE, SAH, TRIANGLE_INTERSECT_COST, TRAVERSAL_COST } from '../Constants.js';\n\nconst BIN_COUNT = 32;\nconst binsSort = ( a, b ) => a.candidate - b.candidate;\nconst sahBins = new Array( BIN_COUNT ).fill().map( () => {\n\n\treturn {\n\n\t\tcount: 0,\n\t\tbounds: new Float32Array( 6 ),\n\t\trightCacheBounds: new Float32Array( 6 ),\n\t\tleftCacheBounds: new Float32Array( 6 ),\n\t\tcandidate: 0,\n\n\t};\n\n} );\nconst leftBounds = new Float32Array( 6 );\n\nexport function getOptimalSplit( nodeBoundingData, centroidBoundingData, triangleBounds, offset, count, strategy ) {\n\n\tlet axis = - 1;\n\tlet pos = 0;\n\n\t// Center\n\tif ( strategy === CENTER ) {\n\n\t\taxis = getLongestEdgeIndex( centroidBoundingData );\n\t\tif ( axis !== - 1 ) {\n\n\t\t\tpos = ( centroidBoundingData[ axis ] + centroidBoundingData[ axis + 3 ] ) / 2;\n\n\t\t}\n\n\t} else if ( strategy === AVERAGE ) {\n\n\t\taxis = getLongestEdgeIndex( nodeBoundingData );\n\t\tif ( axis !== - 1 ) {\n\n\t\t\tpos = getAverage( triangleBounds, offset, count, axis );\n\n\t\t}\n\n\t} else if ( strategy === SAH ) {\n\n\t\tconst rootSurfaceArea = computeSurfaceArea( nodeBoundingData );\n\t\tlet bestCost = TRIANGLE_INTERSECT_COST * count;\n\n\t\t// iterate over all axes\n\t\tconst cStart = offset * 6;\n\t\tconst cEnd = ( offset + count ) * 6;\n\t\tfor ( let a = 0; a < 3; a ++ ) {\n\n\t\t\tconst axisLeft = centroidBoundingData[ a ];\n\t\t\tconst axisRight = centroidBoundingData[ a + 3 ];\n\t\t\tconst axisLength = axisRight - axisLeft;\n\t\t\tconst binWidth = axisLength / BIN_COUNT;\n\n\t\t\t// If we have fewer triangles than we're planning to split then just check all\n\t\t\t// the triangle positions because it will be faster.\n\t\t\tif ( count < BIN_COUNT / 4 ) {\n\n\t\t\t\t// initialize the bin candidates\n\t\t\t\tconst truncatedBins = [ ...sahBins ];\n\t\t\t\ttruncatedBins.length = count;\n\n\t\t\t\t// set the candidates\n\t\t\t\tlet b = 0;\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6, b ++ ) {\n\n\t\t\t\t\tconst bin = truncatedBins[ b ];\n\t\t\t\t\tbin.candidate = triangleBounds[ c + 2 * a ];\n\t\t\t\t\tbin.count = 0;\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tbounds,\n\t\t\t\t\t\tleftCacheBounds,\n\t\t\t\t\t\trightCacheBounds,\n\t\t\t\t\t} = bin;\n\t\t\t\t\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\t\t\t\t\trightCacheBounds[ d ] = Infinity;\n\t\t\t\t\t\trightCacheBounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t\tleftCacheBounds[ d ] = Infinity;\n\t\t\t\t\t\tleftCacheBounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t\tbounds[ d ] = Infinity;\n\t\t\t\t\t\tbounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t}\n\n\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bounds );\n\n\t\t\t\t}\n\n\t\t\t\ttruncatedBins.sort( binsSort );\n\n\t\t\t\t// remove redundant splits\n\t\t\t\tlet splitCount = count;\n\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\n\n\t\t\t\t\tconst bin = truncatedBins[ bi ];\n\t\t\t\t\twhile ( bi + 1 < splitCount && truncatedBins[ bi + 1 ].candidate === bin.candidate ) {\n\n\t\t\t\t\t\ttruncatedBins.splice( bi + 1, 1 );\n\t\t\t\t\t\tsplitCount --;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// find the appropriate bin for each triangle and expand the bounds.\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6 ) {\n\n\t\t\t\t\tconst center = triangleBounds[ c + 2 * a ];\n\t\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\n\n\t\t\t\t\t\tconst bin = truncatedBins[ bi ];\n\t\t\t\t\t\tif ( center >= bin.candidate ) {\n\n\t\t\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bin.rightCacheBounds );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bin.leftCacheBounds );\n\t\t\t\t\t\t\tbin.count ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// expand all the bounds\n\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\n\n\t\t\t\t\tconst bin = truncatedBins[ bi ];\n\t\t\t\t\tconst leftCount = bin.count;\n\t\t\t\t\tconst rightCount = count - bin.count;\n\n\t\t\t\t\t// check the cost of this split\n\t\t\t\t\tconst leftBounds = bin.leftCacheBounds;\n\t\t\t\t\tconst rightBounds = bin.rightCacheBounds;\n\n\t\t\t\t\tlet leftProb = 0;\n\t\t\t\t\tif ( leftCount !== 0 ) {\n\n\t\t\t\t\t\tleftProb = computeSurfaceArea( leftBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet rightProb = 0;\n\t\t\t\t\tif ( rightCount !== 0 ) {\n\n\t\t\t\t\t\trightProb = computeSurfaceArea( rightBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cost = TRAVERSAL_COST + TRIANGLE_INTERSECT_COST * (\n\t\t\t\t\t\tleftProb * leftCount + rightProb * rightCount\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( cost < bestCost ) {\n\n\t\t\t\t\t\taxis = a;\n\t\t\t\t\t\tbestCost = cost;\n\t\t\t\t\t\tpos = bin.candidate;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// reset the bins\n\t\t\t\tfor ( let i = 0; i < BIN_COUNT; i ++ ) {\n\n\t\t\t\t\tconst bin = sahBins[ i ];\n\t\t\t\t\tbin.count = 0;\n\t\t\t\t\tbin.candidate = axisLeft + binWidth + i * binWidth;\n\n\t\t\t\t\tconst bounds = bin.bounds;\n\t\t\t\t\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\t\t\t\t\tbounds[ d ] = Infinity;\n\t\t\t\t\t\tbounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over all center positions\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6 ) {\n\n\t\t\t\t\tconst triCenter = triangleBounds[ c + 2 * a ];\n\t\t\t\t\tconst relativeCenter = triCenter - axisLeft;\n\n\t\t\t\t\t// in the partition function if the centroid lies on the split plane then it is\n\t\t\t\t\t// considered to be on the right side of the split\n\t\t\t\t\tlet binIndex = ~ ~ ( relativeCenter / binWidth );\n\t\t\t\t\tif ( binIndex >= BIN_COUNT ) binIndex = BIN_COUNT - 1;\n\n\t\t\t\t\tconst bin = sahBins[ binIndex ];\n\t\t\t\t\tbin.count ++;\n\n\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bin.bounds );\n\n\t\t\t\t}\n\n\t\t\t\t// cache the unioned bounds from right to left so we don't have to regenerate them each time\n\t\t\t\tconst lastBin = sahBins[ BIN_COUNT - 1 ];\n\t\t\t\tcopyBounds( lastBin.bounds, lastBin.rightCacheBounds );\n\t\t\t\tfor ( let i = BIN_COUNT - 2; i >= 0; i -- ) {\n\n\t\t\t\t\tconst bin = sahBins[ i ];\n\t\t\t\t\tconst nextBin = sahBins[ i + 1 ];\n\t\t\t\t\tunionBounds( bin.bounds, nextBin.rightCacheBounds, bin.rightCacheBounds );\n\n\t\t\t\t}\n\n\t\t\t\tlet leftCount = 0;\n\t\t\t\tfor ( let i = 0; i < BIN_COUNT - 1; i ++ ) {\n\n\t\t\t\t\tconst bin = sahBins[ i ];\n\t\t\t\t\tconst binCount = bin.count;\n\t\t\t\t\tconst bounds = bin.bounds;\n\n\t\t\t\t\tconst nextBin = sahBins[ i + 1 ];\n\t\t\t\t\tconst rightBounds = nextBin.rightCacheBounds;\n\n\t\t\t\t\t// don't do anything with the bounds if the new bounds have no triangles\n\t\t\t\t\tif ( binCount !== 0 ) {\n\n\t\t\t\t\t\tif ( leftCount === 0 ) {\n\n\t\t\t\t\t\t\tcopyBounds( bounds, leftBounds );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tunionBounds( bounds, leftBounds, leftBounds );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tleftCount += binCount;\n\n\t\t\t\t\t// check the cost of this split\n\t\t\t\t\tlet leftProb = 0;\n\t\t\t\t\tlet rightProb = 0;\n\n\t\t\t\t\tif ( leftCount !== 0 ) {\n\n\t\t\t\t\t\tleftProb = computeSurfaceArea( leftBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst rightCount = count - leftCount;\n\t\t\t\t\tif ( rightCount !== 0 ) {\n\n\t\t\t\t\t\trightProb = computeSurfaceArea( rightBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cost = TRAVERSAL_COST + TRIANGLE_INTERSECT_COST * (\n\t\t\t\t\t\tleftProb * leftCount + rightProb * rightCount\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( cost < bestCost ) {\n\n\t\t\t\t\t\taxis = a;\n\t\t\t\t\t\tbestCost = cost;\n\t\t\t\t\t\tpos = bin.candidate;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tconsole.warn( `MeshBVH: Invalid build strategy value ${ strategy } used.` );\n\n\t}\n\n\treturn { axis, pos };\n\n}\n\n// returns the average coordinate on the specified axis of the all the provided triangles\nfunction getAverage( triangleBounds, offset, count, axis ) {\n\n\tlet avg = 0;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tavg += triangleBounds[ i * 6 + axis * 2 ];\n\n\t}\n\n\treturn avg / count;\n\n}\n","export class MeshBVHNode {\n\n\tconstructor() {\n\n\t\t// internal nodes have boundingData, left, right, and splitAxis\n\t\t// leaf nodes have offset and count (referring to primitives in the mesh geometry)\n\n\t\tthis.boundingData = new Float32Array( 6 );\n\n\t}\n\n}\n","/********************************************************/\n/* This file is generated from \"sortUtils.template.js\". */\n/********************************************************/\n// reorders `tris` such that for `count` elements after `offset`, elements on the left side of the split\n// will be on the left and elements on the right side of the split will be on the right. returns the index\n// of the first element on the right side, or offset + count if there are no elements on the right side.\nfunction partition( indirectBuffer, index, triangleBounds, offset, count, split ) {\n\n\tlet left = offset;\n\tlet right = offset + count - 1;\n\tconst pos = split.pos;\n\tconst axisOffset = split.axis * 2;\n\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\n\twhile ( true ) {\n\n\t\twhile ( left <= right && triangleBounds[ left * 6 + axisOffset ] < pos ) {\n\n\t\t\tleft ++;\n\n\t\t}\n\n\t\t// if a triangle center lies on the partition plane it is considered to be on the right side\n\t\twhile ( left <= right && triangleBounds[ right * 6 + axisOffset ] >= pos ) {\n\n\t\t\tright --;\n\n\t\t}\n\n\t\tif ( left < right ) {\n\n\t\t\t// we need to swap all of the information associated with the triangles at index\n\t\t\t// left and right; that's the verts in the geometry index, the bounds,\n\t\t\t// and perhaps the SAH planes\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tlet t0 = index[ left * 3 + i ];\n\t\t\t\tindex[ left * 3 + i ] = index[ right * 3 + i ];\n\t\t\t\tindex[ right * 3 + i ] = t0;\n\n\t\t\t}\n\n\n\t\t\t// swap bounds\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tlet tb = triangleBounds[ left * 6 + i ];\n\t\t\t\ttriangleBounds[ left * 6 + i ] = triangleBounds[ right * 6 + i ];\n\t\t\t\ttriangleBounds[ right * 6 + i ] = tb;\n\n\t\t\t}\n\n\t\t\tleft ++;\n\t\t\tright --;\n\n\t\t} else {\n\n\t\t\treturn left;\n\n\t\t}\n\n\t}\n\n}\n\nexport { partition };\n","/********************************************************/\n/* This file is generated from \"sortUtils.template.js\". */\n/********************************************************/\n// reorders `tris` such that for `count` elements after `offset`, elements on the left side of the split\n// will be on the left and elements on the right side of the split will be on the right. returns the index\n// of the first element on the right side, or offset + count if there are no elements on the right side.\nfunction partition_indirect( indirectBuffer, index, triangleBounds, offset, count, split ) {\n\n\tlet left = offset;\n\tlet right = offset + count - 1;\n\tconst pos = split.pos;\n\tconst axisOffset = split.axis * 2;\n\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\n\twhile ( true ) {\n\n\t\twhile ( left <= right && triangleBounds[ left * 6 + axisOffset ] < pos ) {\n\n\t\t\tleft ++;\n\n\t\t}\n\n\t\t// if a triangle center lies on the partition plane it is considered to be on the right side\n\t\twhile ( left <= right && triangleBounds[ right * 6 + axisOffset ] >= pos ) {\n\n\t\t\tright --;\n\n\t\t}\n\n\t\tif ( left < right ) {\n\n\t\t\t// we need to swap all of the information associated with the triangles at index\n\t\t\t// left and right; that's the verts in the geometry index, the bounds,\n\t\t\t// and perhaps the SAH planes\n\t\t\tlet t = indirectBuffer[ left ];\n\t\t\tindirectBuffer[ left ] = indirectBuffer[ right ];\n\t\t\tindirectBuffer[ right ] = t;\n\n\n\t\t\t// swap bounds\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tlet tb = triangleBounds[ left * 6 + i ];\n\t\t\t\ttriangleBounds[ left * 6 + i ] = triangleBounds[ right * 6 + i ];\n\t\t\t\ttriangleBounds[ right * 6 + i ] = tb;\n\n\t\t\t}\n\n\t\t\tleft ++;\n\t\t\tright --;\n\n\t\t} else {\n\n\t\t\treturn left;\n\n\t\t}\n\n\t}\n\n}\n\nexport { partition_indirect };\n","export function IS_LEAF( n16, uint16Array ) {\n\n\treturn uint16Array[ n16 + 15 ] === 0xFFFF;\n\n}\n\nexport function OFFSET( n32, uint32Array ) {\n\n\treturn uint32Array[ n32 + 6 ];\n\n}\n\nexport function COUNT( n16, uint16Array ) {\n\n\treturn uint16Array[ n16 + 14 ];\n\n}\n\nexport function LEFT_NODE( n32 ) {\n\n\treturn n32 + 8;\n\n}\n\nexport function RIGHT_NODE( n32, uint32Array ) {\n\n\treturn uint32Array[ n32 + 6 ];\n\n}\n\nexport function SPLIT_AXIS( n32, uint32Array ) {\n\n\treturn uint32Array[ n32 + 7 ];\n\n}\n\nexport function BOUNDING_DATA_INDEX( n32 ) {\n\n\treturn n32;\n\n}\n","import { BYTES_PER_NODE, IS_LEAFNODE_FLAG } from '../Constants.js';\nimport { IS_LEAF } from '../utils/nodeBufferUtils.js';\n\nlet float32Array, uint32Array, uint16Array, uint8Array;\nconst MAX_POINTER = Math.pow( 2, 32 );\n\nexport function countNodes( node ) {\n\n\tif ( 'count' in node ) {\n\n\t\treturn 1;\n\n\t} else {\n\n\t\treturn 1 + countNodes( node.left ) + countNodes( node.right );\n\n\t}\n\n}\n\nexport function populateBuffer( byteOffset, node, buffer ) {\n\n\tfloat32Array = new Float32Array( buffer );\n\tuint32Array = new Uint32Array( buffer );\n\tuint16Array = new Uint16Array( buffer );\n\tuint8Array = new Uint8Array( buffer );\n\n\treturn _populateBuffer( byteOffset, node );\n\n}\n\n// pack structure\n// boundingData  \t\t\t\t: 6 float32\n// right / offset \t\t\t\t: 1 uint32\n// splitAxis / isLeaf + count \t: 1 uint32 / 2 uint16\nfunction _populateBuffer( byteOffset, node ) {\n\n\tconst stride4Offset = byteOffset / 4;\n\tconst stride2Offset = byteOffset / 2;\n\tconst isLeaf = 'count' in node;\n\tconst boundingData = node.boundingData;\n\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\tfloat32Array[ stride4Offset + i ] = boundingData[ i ];\n\n\t}\n\n\tif ( isLeaf ) {\n\n\t\tif ( node.buffer ) {\n\n\t\t\tconst buffer = node.buffer;\n\t\t\tuint8Array.set( new Uint8Array( buffer ), byteOffset );\n\n\t\t\tfor ( let offset = byteOffset, l = byteOffset + buffer.byteLength; offset < l; offset += BYTES_PER_NODE ) {\n\n\t\t\t\tconst offset2 = offset / 2;\n\t\t\t\tif ( ! IS_LEAF( offset2, uint16Array ) ) {\n\n\t\t\t\t\tuint32Array[ ( offset / 4 ) + 6 ] += stride4Offset;\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn byteOffset + buffer.byteLength;\n\n\t\t} else {\n\n\t\t\tconst offset = node.offset;\n\t\t\tconst count = node.count;\n\t\t\tuint32Array[ stride4Offset + 6 ] = offset;\n\t\t\tuint16Array[ stride2Offset + 14 ] = count;\n\t\t\tuint16Array[ stride2Offset + 15 ] = IS_LEAFNODE_FLAG;\n\t\t\treturn byteOffset + BYTES_PER_NODE;\n\n\t\t}\n\n\t} else {\n\n\t\tconst left = node.left;\n\t\tconst right = node.right;\n\t\tconst splitAxis = node.splitAxis;\n\n\t\tlet nextUnusedPointer;\n\t\tnextUnusedPointer = _populateBuffer( byteOffset + BYTES_PER_NODE, left );\n\n\t\tif ( ( nextUnusedPointer / 4 ) > MAX_POINTER ) {\n\n\t\t\tthrow new Error( 'MeshBVH: Cannot store child pointer greater than 32 bits.' );\n\n\t\t}\n\n\t\tuint32Array[ stride4Offset + 6 ] = nextUnusedPointer / 4;\n\t\tnextUnusedPointer = _populateBuffer( nextUnusedPointer, right );\n\n\t\tuint32Array[ stride4Offset + 7 ] = splitAxis;\n\t\treturn nextUnusedPointer;\n\n\t}\n\n}\n","import { ensureIndex, getFullGeometryRange, getRootIndexRanges, getTriCount, hasGroupGaps, } from './geometryUtils.js';\nimport { getBounds, computeTriangleBounds } from './computeBoundsUtils.js';\nimport { getOptimalSplit } from './splitUtils.js';\nimport { MeshBVHNode } from '../MeshBVHNode.js';\nimport { BYTES_PER_NODE } from '../Constants.js';\n\nimport { partition } from './sortUtils.generated.js';\nimport { partition_indirect } from './sortUtils_indirect.generated.js';\nimport { countNodes, populateBuffer } from './buildUtils.js';\n\nexport function generateIndirectBuffer( geometry, useSharedArrayBuffer ) {\n\n\tconst triCount = ( geometry.index ? geometry.index.count : geometry.attributes.position.count ) / 3;\n\tconst useUint32 = triCount > 2 ** 16;\n\tconst byteCount = useUint32 ? 4 : 2;\n\n\tconst buffer = useSharedArrayBuffer ? new SharedArrayBuffer( triCount * byteCount ) : new ArrayBuffer( triCount * byteCount );\n\tconst indirectBuffer = useUint32 ? new Uint32Array( buffer ) : new Uint16Array( buffer );\n\tfor ( let i = 0, l = indirectBuffer.length; i < l; i ++ ) {\n\n\t\tindirectBuffer[ i ] = i;\n\n\t}\n\n\treturn indirectBuffer;\n\n}\n\nexport function buildTree( bvh, triangleBounds, offset, count, options ) {\n\n\t// epxand variables\n\tconst {\n\t\tmaxDepth,\n\t\tverbose,\n\t\tmaxLeafTris,\n\t\tstrategy,\n\t\tonProgress,\n\t\tindirect,\n\t} = options;\n\tconst indirectBuffer = bvh._indirectBuffer;\n\tconst geometry = bvh.geometry;\n\tconst indexArray = geometry.index ? geometry.index.array : null;\n\tconst partionFunc = indirect ? partition_indirect : partition;\n\n\t// generate intermediate variables\n\tconst totalTriangles = getTriCount( geometry );\n\tconst cacheCentroidBoundingData = new Float32Array( 6 );\n\tlet reachedMaxDepth = false;\n\n\tconst root = new MeshBVHNode();\n\tgetBounds( triangleBounds, offset, count, root.boundingData, cacheCentroidBoundingData );\n\tsplitNode( root, offset, count, cacheCentroidBoundingData );\n\treturn root;\n\n\tfunction triggerProgress( trianglesProcessed ) {\n\n\t\tif ( onProgress ) {\n\n\t\t\tonProgress( trianglesProcessed / totalTriangles );\n\n\t\t}\n\n\t}\n\n\t// either recursively splits the given node, creating left and right subtrees for it, or makes it a leaf node,\n\t// recording the offset and count of its triangles and writing them into the reordered geometry index.\n\tfunction splitNode( node, offset, count, centroidBoundingData = null, depth = 0 ) {\n\n\t\tif ( ! reachedMaxDepth && depth >= maxDepth ) {\n\n\t\t\treachedMaxDepth = true;\n\t\t\tif ( verbose ) {\n\n\t\t\t\tconsole.warn( `MeshBVH: Max depth of ${ maxDepth } reached when generating BVH. Consider increasing maxDepth.` );\n\t\t\t\tconsole.warn( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// early out if we've met our capacity\n\t\tif ( count <= maxLeafTris || depth >= maxDepth ) {\n\n\t\t\ttriggerProgress( offset + count );\n\t\t\tnode.offset = offset;\n\t\t\tnode.count = count;\n\t\t\treturn node;\n\n\t\t}\n\n\t\t// Find where to split the volume\n\t\tconst split = getOptimalSplit( node.boundingData, centroidBoundingData, triangleBounds, offset, count, strategy );\n\t\tif ( split.axis === - 1 ) {\n\n\t\t\ttriggerProgress( offset + count );\n\t\t\tnode.offset = offset;\n\t\t\tnode.count = count;\n\t\t\treturn node;\n\n\t\t}\n\n\t\tconst splitOffset = partionFunc( indirectBuffer, indexArray, triangleBounds, offset, count, split );\n\n\t\t// create the two new child nodes\n\t\tif ( splitOffset === offset || splitOffset === offset + count ) {\n\n\t\t\ttriggerProgress( offset + count );\n\t\t\tnode.offset = offset;\n\t\t\tnode.count = count;\n\n\t\t} else {\n\n\t\t\tnode.splitAxis = split.axis;\n\n\t\t\t// create the left child and compute its bounding box\n\t\t\tconst left = new MeshBVHNode();\n\t\t\tconst lstart = offset;\n\t\t\tconst lcount = splitOffset - offset;\n\t\t\tnode.left = left;\n\n\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData, cacheCentroidBoundingData );\n\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\n\n\t\t\t// repeat for right\n\t\t\tconst right = new MeshBVHNode();\n\t\t\tconst rstart = splitOffset;\n\t\t\tconst rcount = count - lcount;\n\t\t\tnode.right = right;\n\n\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData, cacheCentroidBoundingData );\n\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\n\n\t\t}\n\n\t\treturn node;\n\n\t}\n\n}\n\nexport function buildPackedTree( bvh, options ) {\n\n\tconst geometry = bvh.geometry;\n\tif ( options.indirect ) {\n\n\t\tbvh._indirectBuffer = generateIndirectBuffer( geometry, options.useSharedArrayBuffer );\n\n\t\tif ( hasGroupGaps( geometry, options.range ) && ! options.verbose ) {\n\n\t\t\tconsole.warn(\n\t\t\t\t'MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the \"indirect\" option. ' +\n\t\t\t\t'BVH may incorrectly report intersections on unrendered portions of the geometry.'\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tif ( ! bvh._indirectBuffer ) {\n\n\t\tensureIndex( geometry, options );\n\n\t}\n\n\tconst BufferConstructor = options.useSharedArrayBuffer ? SharedArrayBuffer : ArrayBuffer;\n\n\tconst triangleBounds = computeTriangleBounds( geometry );\n\tconst geometryRanges = options.indirect ? getFullGeometryRange( geometry, options.range ) : getRootIndexRanges( geometry, options.range );\n\tbvh._roots = geometryRanges.map( range => {\n\n\t\tconst root = buildTree( bvh, triangleBounds, range.offset, range.count, options );\n\t\tconst nodeCount = countNodes( root );\n\t\tconst buffer = new BufferConstructor( BYTES_PER_NODE * nodeCount );\n\t\tpopulateBuffer( 0, root, buffer );\n\t\treturn buffer;\n\n\t} );\n\n}\n","import { Vector3 } from 'three';\n\nexport class SeparatingAxisBounds {\n\n\tconstructor() {\n\n\t\tthis.min = Infinity;\n\t\tthis.max = - Infinity;\n\n\t}\n\n\tsetFromPointsField( points, field ) {\n\n\t\tlet min = Infinity;\n\t\tlet max = - Infinity;\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tconst val = p[ field ];\n\t\t\tmin = val < min ? val : min;\n\t\t\tmax = val > max ? val : max;\n\n\t\t}\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tsetFromPoints( axis, points ) {\n\n\t\tlet min = Infinity;\n\t\tlet max = - Infinity;\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tconst val = axis.dot( p );\n\t\t\tmin = val < min ? val : min;\n\t\t\tmax = val > max ? val : max;\n\n\t\t}\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tisSeparated( other ) {\n\n\t\treturn this.min > other.max || other.min > this.max;\n\n\t}\n\n}\n\nSeparatingAxisBounds.prototype.setFromBox = ( function () {\n\n\tconst p = new Vector3();\n\treturn function setFromBox( axis, box ) {\n\n\t\tconst boxMin = box.min;\n\t\tconst boxMax = box.max;\n\t\tlet min = Infinity;\n\t\tlet max = - Infinity;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tp.x = boxMin.x * x + boxMax.x * ( 1 - x );\n\t\t\t\t\tp.y = boxMin.y * y + boxMax.y * ( 1 - y );\n\t\t\t\t\tp.z = boxMin.z * z + boxMax.z * ( 1 - z );\n\n\t\t\t\t\tconst val = axis.dot( p );\n\t\t\t\t\tmin = Math.min( val, min );\n\t\t\t\t\tmax = Math.max( val, max );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t};\n\n} )();\n\nexport const areIntersecting = ( function () {\n\n\tconst cacheSatBounds = new SeparatingAxisBounds();\n\treturn function areIntersecting( shape1, shape2 ) {\n\n\t\tconst points1 = shape1.points;\n\t\tconst satAxes1 = shape1.satAxes;\n\t\tconst satBounds1 = shape1.satBounds;\n\n\t\tconst points2 = shape2.points;\n\t\tconst satAxes2 = shape2.satAxes;\n\t\tconst satBounds2 = shape2.satBounds;\n\n\t\t// check axes of the first shape\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds1[ i ];\n\t\t\tconst sa = satAxes1[ i ];\n\t\t\tcacheSatBounds.setFromPoints( sa, points2 );\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check axes of the second shape\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds2[ i ];\n\t\t\tconst sa = satAxes2[ i ];\n\t\t\tcacheSatBounds.setFromPoints( sa, points1 );\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\n\n\t\t}\n\n\t};\n\n} )();\n","import { Vector3, Vector2, Plane, Line3 } from 'three';\n\nexport const closestPointLineToLine = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/Line.cpp#L56\n\tconst dir1 = new Vector3();\n\tconst dir2 = new Vector3();\n\tconst v02 = new Vector3();\n\treturn function closestPointLineToLine( l1, l2, result ) {\n\n\t\tconst v0 = l1.start;\n\t\tconst v10 = dir1;\n\t\tconst v2 = l2.start;\n\t\tconst v32 = dir2;\n\n\t\tv02.subVectors( v0, v2 );\n\t\tdir1.subVectors( l1.end, l1.start );\n\t\tdir2.subVectors( l2.end, l2.start );\n\n\t\t// float d0232 = v02.Dot(v32);\n\t\tconst d0232 = v02.dot( v32 );\n\n\t\t// float d3210 = v32.Dot(v10);\n\t\tconst d3210 = v32.dot( v10 );\n\n\t\t// float d3232 = v32.Dot(v32);\n\t\tconst d3232 = v32.dot( v32 );\n\n\t\t// float d0210 = v02.Dot(v10);\n\t\tconst d0210 = v02.dot( v10 );\n\n\t\t// float d1010 = v10.Dot(v10);\n\t\tconst d1010 = v10.dot( v10 );\n\n\t\t// float denom = d1010*d3232 - d3210*d3210;\n\t\tconst denom = d1010 * d3232 - d3210 * d3210;\n\n\t\tlet d, d2;\n\t\tif ( denom !== 0 ) {\n\n\t\t\td = ( d0232 * d3210 - d0210 * d3232 ) / denom;\n\n\t\t} else {\n\n\t\t\td = 0;\n\n\t\t}\n\n\t\td2 = ( d0232 + d * d3210 ) / d3232;\n\n\t\tresult.x = d;\n\t\tresult.y = d2;\n\n\t};\n\n} )();\n\nexport const closestPointsSegmentToSegment = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/LineSegment.cpp#L187\n\tconst paramResult = new Vector2();\n\tconst temp1 = new Vector3();\n\tconst temp2 = new Vector3();\n\treturn function closestPointsSegmentToSegment( l1, l2, target1, target2 ) {\n\n\t\tclosestPointLineToLine( l1, l2, paramResult );\n\n\t\tlet d = paramResult.x;\n\t\tlet d2 = paramResult.y;\n\t\tif ( d >= 0 && d <= 1 && d2 >= 0 && d2 <= 1 ) {\n\n\t\t\tl1.at( d, target1 );\n\t\t\tl2.at( d2, target2 );\n\n\t\t\treturn;\n\n\t\t} else if ( d >= 0 && d <= 1 ) {\n\n\t\t\t// Only d2 is out of bounds.\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tl2.at( 0, target2 );\n\n\t\t\t} else {\n\n\t\t\t\tl2.at( 1, target2 );\n\n\t\t\t}\n\n\t\t\tl1.closestPointToPoint( target2, true, target1 );\n\t\t\treturn;\n\n\t\t} else if ( d2 >= 0 && d2 <= 1 ) {\n\n\t\t\t// Only d is out of bounds.\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tl1.at( 0, target1 );\n\n\t\t\t} else {\n\n\t\t\t\tl1.at( 1, target1 );\n\n\t\t\t}\n\n\t\t\tl2.closestPointToPoint( target1, true, target2 );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// Both u and u2 are out of bounds.\n\t\t\tlet p;\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tp = l1.start;\n\n\t\t\t} else {\n\n\t\t\t\tp = l1.end;\n\n\t\t\t}\n\n\t\t\tlet p2;\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tp2 = l2.start;\n\n\t\t\t} else {\n\n\t\t\t\tp2 = l2.end;\n\n\t\t\t}\n\n\t\t\tconst closestPoint = temp1;\n\t\t\tconst closestPoint2 = temp2;\n\t\t\tl1.closestPointToPoint( p2, true, temp1 );\n\t\t\tl2.closestPointToPoint( p, true, temp2 );\n\n\t\t\tif ( closestPoint.distanceToSquared( p2 ) <= closestPoint2.distanceToSquared( p ) ) {\n\n\t\t\t\ttarget1.copy( closestPoint );\n\t\t\t\ttarget2.copy( p2 );\n\t\t\t\treturn;\n\n\t\t\t} else {\n\n\t\t\t\ttarget1.copy( p );\n\t\t\t\ttarget2.copy( closestPoint2 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n} )();\n\n\nexport const sphereIntersectTriangle = ( function () {\n\n\t// https://stackoverflow.com/questions/34043955/detect-collision-between-sphere-and-triangle-in-three-js\n\tconst closestPointTemp = new Vector3();\n\tconst projectedPointTemp = new Vector3();\n\tconst planeTemp = new Plane();\n\tconst lineTemp = new Line3();\n\treturn function sphereIntersectTriangle( sphere, triangle ) {\n\n\t\tconst { radius, center } = sphere;\n\t\tconst { a, b, c } = triangle;\n\n\t\t// phase 1\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = b;\n\t\tconst closestPoint1 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint1.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint2 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint2.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = b;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint3 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint3.distanceTo( center ) <= radius ) return true;\n\n\t\t// phase 2\n\t\tconst plane = triangle.getPlane( planeTemp );\n\t\tconst dp = Math.abs( plane.distanceToPoint( center ) );\n\t\tif ( dp <= radius ) {\n\n\t\t\tconst pp = plane.projectPoint( center, projectedPointTemp );\n\t\t\tconst cp = triangle.containsPoint( pp );\n\t\t\tif ( cp ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n} )();\n","import { Triangle, Vector3, Line3, Sphere, Plane } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { closestPointsSegmentToSegment, sphereIntersectTriangle } from './MathUtilities.js';\n\nconst ZERO_EPSILON = 1e-15;\nfunction isNearZero( value ) {\n\n\treturn Math.abs( value ) < ZERO_EPSILON;\n\n}\n\nexport class ExtendedTriangle extends Triangle {\n\n\tconstructor( ...args ) {\n\n\t\tsuper( ...args );\n\n\t\tthis.isExtendedTriangle = true;\n\t\tthis.satAxes = new Array( 4 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 4 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.points = [ this.a, this.b, this.c ];\n\t\tthis.sphere = new Sphere();\n\t\tthis.plane = new Plane();\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphereIntersectTriangle( sphere, this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst a = this.a;\n\t\tconst b = this.b;\n\t\tconst c = this.c;\n\t\tconst points = this.points;\n\n\t\tconst satAxes = this.satAxes;\n\t\tconst satBounds = this.satBounds;\n\n\t\tconst axis0 = satAxes[ 0 ];\n\t\tconst sab0 = satBounds[ 0 ];\n\t\tthis.getNormal( axis0 );\n\t\tsab0.setFromPoints( axis0, points );\n\n\t\tconst axis1 = satAxes[ 1 ];\n\t\tconst sab1 = satBounds[ 1 ];\n\t\taxis1.subVectors( a, b );\n\t\tsab1.setFromPoints( axis1, points );\n\n\t\tconst axis2 = satAxes[ 2 ];\n\t\tconst sab2 = satBounds[ 2 ];\n\t\taxis2.subVectors( b, c );\n\t\tsab2.setFromPoints( axis2, points );\n\n\t\tconst axis3 = satAxes[ 3 ];\n\t\tconst sab3 = satBounds[ 3 ];\n\t\taxis3.subVectors( c, a );\n\t\tsab3.setFromPoints( axis3, points );\n\n\t\tthis.sphere.setFromPoints( this.points );\n\t\tthis.plane.setFromNormalAndCoplanarPoint( axis0, a );\n\t\tthis.needsUpdate = false;\n\n\t}\n\n}\n\nExtendedTriangle.prototype.closestPointToSegment = ( function () {\n\n\tconst point1 = new Vector3();\n\tconst point2 = new Vector3();\n\tconst edge = new Line3();\n\n\treturn function distanceToSegment( segment, target1 = null, target2 = null ) {\n\n\t\tconst { start, end } = segment;\n\t\tconst points = this.points;\n\t\tlet distSq;\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check the triangle edges\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst nexti = ( i + 1 ) % 3;\n\t\t\tedge.start.copy( points[ i ] );\n\t\t\tedge.end.copy( points[ nexti ] );\n\n\t\t\tclosestPointsSegmentToSegment( edge, segment, point1, point2 );\n\n\t\t\tdistSq = point1.distanceToSquared( point2 );\n\t\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = distSq;\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check end points\n\t\tthis.closestPointToPoint( start, point1 );\n\t\tdistSq = start.distanceToSquared( point1 );\n\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\tclosestDistanceSq = distSq;\n\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\tif ( target2 ) target2.copy( start );\n\n\t\t}\n\n\t\tthis.closestPointToPoint( end, point1 );\n\t\tdistSq = end.distanceToSquared( point1 );\n\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\tclosestDistanceSq = distSq;\n\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\tif ( target2 ) target2.copy( end );\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n\nExtendedTriangle.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri2 = new ExtendedTriangle();\n\tconst arr1 = new Array( 3 );\n\tconst arr2 = new Array( 3 );\n\tconst cachedSatBounds = new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\n\tconst cachedAxis = new Vector3();\n\tconst dir = new Vector3();\n\tconst dir1 = new Vector3();\n\tconst dir2 = new Vector3();\n\tconst tempDir = new Vector3();\n\tconst edge = new Line3();\n\tconst edge1 = new Line3();\n\tconst edge2 = new Line3();\n\tconst tempPoint = new Vector3();\n\n\tfunction triIntersectPlane( tri, plane, targetEdge ) {\n\n\t\t// find the edge that intersects the other triangle plane\n\t\tconst points = tri.points;\n\t\tlet count = 0;\n\t\tlet startPointIntersection = - 1;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst { start, end } = edge;\n\t\t\tstart.copy( points[ i ] );\n\t\t\tend.copy( points[ ( i + 1 ) % 3 ] );\n\t\t\tedge.delta( dir );\n\n\t\t\tconst startIntersects = isNearZero( plane.distanceToPoint( start ) );\n\t\t\tif ( isNearZero( plane.normal.dot( dir ) ) && startIntersects ) {\n\n\t\t\t\t// if the edge lies on the plane then take the line\n\t\t\t\ttargetEdge.copy( edge );\n\t\t\t\tcount = 2;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// check if the start point is near the plane because \"intersectLine\" is not robust to that case\n\t\t\tconst doesIntersect = plane.intersectLine( edge, tempPoint );\n\t\t\tif ( ! doesIntersect && startIntersects ) {\n\n\t\t\t\ttempPoint.copy( start );\n\n\t\t\t}\n\n\t\t\t// ignore the end point\n\t\t\tif ( ( doesIntersect || startIntersects ) && ! isNearZero( tempPoint.distanceTo( end ) ) ) {\n\n\t\t\t\tif ( count <= 1 ) {\n\n\t\t\t\t\t// assign to the start or end point and save which index was snapped to\n\t\t\t\t\t// the start point if necessary\n\t\t\t\t\tconst point = count === 1 ? targetEdge.start : targetEdge.end;\n\t\t\t\t\tpoint.copy( tempPoint );\n\t\t\t\t\tif ( startIntersects ) {\n\n\t\t\t\t\t\tstartPointIntersection = count;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( count >= 2 ) {\n\n\t\t\t\t\t// if we're here that means that there must have been one point that had\n\t\t\t\t\t// snapped to the start point so replace it here\n\t\t\t\t\tconst point = startPointIntersection === 1 ? targetEdge.start : targetEdge.end;\n\t\t\t\t\tpoint.copy( tempPoint );\n\t\t\t\t\tcount = 2;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tcount ++;\n\t\t\t\tif ( count === 2 && startPointIntersection === - 1 ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn count;\n\n\t}\n\n\t// TODO: If the triangles are coplanar and intersecting the target is nonsensical. It should at least\n\t// be a line contained by both triangles if not a different special case somehow represented in the return result.\n\treturn function intersectsTriangle( other, target = null, suppressLog = false ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tif ( ! other.isExtendedTriangle ) {\n\n\t\t\tsaTri2.copy( other );\n\t\t\tsaTri2.update();\n\t\t\tother = saTri2;\n\n\t\t} else if ( other.needsUpdate ) {\n\n\t\t\tother.update();\n\n\t\t}\n\n\t\tconst plane1 = this.plane;\n\t\tconst plane2 = other.plane;\n\n\t\tif ( Math.abs( plane1.normal.dot( plane2.normal ) ) > 1.0 - 1e-10 ) {\n\n\t\t\t// perform separating axis intersection test only for coplanar triangles\n\t\t\tconst satBounds1 = this.satBounds;\n\t\t\tconst satAxes1 = this.satAxes;\n\t\t\tarr2[ 0 ] = other.a;\n\t\t\tarr2[ 1 ] = other.b;\n\t\t\tarr2[ 2 ] = other.c;\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\t\tconst sb = satBounds1[ i ];\n\t\t\t\tconst sa = satAxes1[ i ];\n\t\t\t\tcachedSatBounds.setFromPoints( sa, arr2 );\n\t\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t\t}\n\n\t\t\tconst satBounds2 = other.satBounds;\n\t\t\tconst satAxes2 = other.satAxes;\n\t\t\tarr1[ 0 ] = this.a;\n\t\t\tarr1[ 1 ] = this.b;\n\t\t\tarr1[ 2 ] = this.c;\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\t\tconst sb = satBounds2[ i ];\n\t\t\t\tconst sa = satAxes2[ i ];\n\t\t\t\tcachedSatBounds.setFromPoints( sa, arr1 );\n\t\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t\t}\n\n\t\t\t// check crossed axes\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\t\tconst sa1 = satAxes1[ i ];\n\t\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\n\n\t\t\t\t\tconst sa2 = satAxes2[ i2 ];\n\t\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\n\t\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, arr1 );\n\t\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, arr2 );\n\t\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( target ) {\n\n\t\t\t\t// TODO find two points that intersect on the edges and make that the result\n\t\t\t\tif ( ! suppressLog ) {\n\n\t\t\t\t\tconsole.warn( 'ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0.' );\n\n\t\t\t\t}\n\n\t\t\t\ttarget.start.set( 0, 0, 0 );\n\t\t\t\ttarget.end.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\t// find the edge that intersects the other triangle plane\n\t\t\tconst count1 = triIntersectPlane( this, plane2, edge1 );\n\t\t\tif ( count1 === 1 && other.containsPoint( edge1.end ) ) {\n\n\t\t\t\tif ( target ) {\n\n\t\t\t\t\ttarget.start.copy( edge1.end );\n\t\t\t\t\ttarget.end.copy( edge1.end );\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else if ( count1 !== 2 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// find the other triangles edge that intersects this plane\n\t\t\tconst count2 = triIntersectPlane( other, plane1, edge2 );\n\t\t\tif ( count2 === 1 && this.containsPoint( edge2.end ) ) {\n\n\t\t\t\tif ( target ) {\n\n\t\t\t\t\ttarget.start.copy( edge2.end );\n\t\t\t\t\ttarget.end.copy( edge2.end );\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else if ( count2 !== 2 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// find swap the second edge so both lines are running the same direction\n\t\t\tedge1.delta( dir1 );\n\t\t\tedge2.delta( dir2 );\n\n\t\t\tif ( dir1.dot( dir2 ) < 0 ) {\n\n\t\t\t\tlet tmp = edge2.start;\n\t\t\t\tedge2.start = edge2.end;\n\t\t\t\tedge2.end = tmp;\n\n\t\t\t}\n\n\t\t\t// check if the edges are overlapping\n\t\t\tconst s1 = edge1.start.dot( dir1 );\n\t\t\tconst e1 = edge1.end.dot( dir1 );\n\t\t\tconst s2 = edge2.start.dot( dir1 );\n\t\t\tconst e2 = edge2.end.dot( dir1 );\n\t\t\tconst separated1 = e1 < s2;\n\t\t\tconst separated2 = s1 < e2;\n\n\t\t\tif ( s1 !== e2 && s2 !== e1 && separated1 === separated2 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// assign the target output\n\t\t\tif ( target ) {\n\n\t\t\t\ttempDir.subVectors( edge1.start, edge2.start );\n\t\t\t\tif ( tempDir.dot( dir1 ) > 0 ) {\n\n\t\t\t\t\ttarget.start.copy( edge1.start );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttarget.start.copy( edge2.start );\n\n\t\t\t\t}\n\n\t\t\t\ttempDir.subVectors( edge1.end, edge2.end );\n\t\t\t\tif ( tempDir.dot( dir1 ) < 0 ) {\n\n\t\t\t\t\ttarget.end.copy( edge1.end );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttarget.end.copy( edge2.end );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t};\n\n} )();\n\n\nExtendedTriangle.prototype.distanceToPoint = ( function () {\n\n\tconst target = new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\n\nExtendedTriangle.prototype.distanceToTriangle = ( function () {\n\n\tconst point = new Vector3();\n\tconst point2 = new Vector3();\n\tconst cornerFields = [ 'a', 'b', 'c' ];\n\tconst line1 = new Line3();\n\tconst line2 = new Line3();\n\n\treturn function distanceToTriangle( other, target1 = null, target2 = null ) {\n\n\t\tconst lineTarget = target1 || target2 ? line1 : null;\n\t\tif ( this.intersectsTriangle( other, lineTarget ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tif ( target1 ) lineTarget.getCenter( target1 );\n\t\t\t\tif ( target2 ) lineTarget.getCenter( target2 );\n\n\t\t\t}\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check all point distances\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tlet dist;\n\t\t\tconst field = cornerFields[ i ];\n\t\t\tconst otherVec = other[ field ];\n\t\t\tthis.closestPointToPoint( otherVec, point );\n\n\t\t\tdist = otherVec.distanceToSquared( point );\n\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( point );\n\t\t\t\tif ( target2 ) target2.copy( otherVec );\n\n\t\t\t}\n\n\n\t\t\tconst thisVec = this[ field ];\n\t\t\tother.closestPointToPoint( thisVec, point );\n\n\t\t\tdist = thisVec.distanceToSquared( point );\n\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( thisVec );\n\t\t\t\tif ( target2 ) target2.copy( point );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst f11 = cornerFields[ i ];\n\t\t\tconst f12 = cornerFields[ ( i + 1 ) % 3 ];\n\t\t\tline1.set( this[ f11 ], this[ f12 ] );\n\t\t\tfor ( let i2 = 0; i2 < 3; i2 ++ ) {\n\n\t\t\t\tconst f21 = cornerFields[ i2 ];\n\t\t\t\tconst f22 = cornerFields[ ( i2 + 1 ) % 3 ];\n\t\t\t\tline2.set( other[ f21 ], other[ f22 ] );\n\n\t\t\t\tclosestPointsSegmentToSegment( line1, line2, point, point2 );\n\n\t\t\t\tconst dist = point.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","import { Vector3, Matrix4, Line3 } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { ExtendedTriangle } from './ExtendedTriangle.js';\nimport { closestPointsSegmentToSegment } from './MathUtilities.js';\n\nexport class OrientedBox {\n\n\tconstructor( min, max, matrix ) {\n\n\t\tthis.isOrientedBox = true;\n\t\tthis.min = new Vector3();\n\t\tthis.max = new Vector3();\n\t\tthis.matrix = new Matrix4();\n\t\tthis.invMatrix = new Matrix4();\n\t\tthis.points = new Array( 8 ).fill().map( () => new Vector3() );\n\t\tthis.satAxes = new Array( 3 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.alignedSatBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.needsUpdate = false;\n\n\t\tif ( min ) this.min.copy( min );\n\t\tif ( max ) this.max.copy( max );\n\t\tif ( matrix ) this.matrix.copy( matrix );\n\n\t}\n\n\tset( min, max, matrix ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\t\tthis.matrix.copy( matrix );\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.min.copy( other.min );\n\t\tthis.max.copy( other.max );\n\t\tthis.matrix.copy( other.matrix );\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nOrientedBox.prototype.update = ( function () {\n\n\treturn function update() {\n\n\t\tconst matrix = this.matrix;\n\t\tconst min = this.min;\n\t\tconst max = this.max;\n\n\t\tconst points = this.points;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tconst i = ( ( 1 << 0 ) * x ) | ( ( 1 << 1 ) * y ) | ( ( 1 << 2 ) * z );\n\t\t\t\t\tconst v = points[ i ];\n\t\t\t\t\tv.x = x ? max.x : min.x;\n\t\t\t\t\tv.y = y ? max.y : min.y;\n\t\t\t\t\tv.z = z ? max.z : min.z;\n\n\t\t\t\t\tv.applyMatrix4( matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst minVec = points[ 0 ];\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst index = 1 << i;\n\t\t\tconst pi = points[ index ];\n\n\t\t\taxis.subVectors( minVec, pi );\n\t\t\tsb.setFromPoints( axis, points );\n\n\t\t}\n\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\t\talignedSatBounds[ 0 ].setFromPointsField( points, 'x' );\n\t\talignedSatBounds[ 1 ].setFromPointsField( points, 'y' );\n\t\talignedSatBounds[ 2 ].setFromPointsField( points, 'z' );\n\n\t\tthis.invMatrix.copy( this.matrix ).invert();\n\t\tthis.needsUpdate = false;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsBox = ( function () {\n\n\tconst aabbBounds = new SeparatingAxisBounds();\n\treturn function intersectsBox( box ) {\n\n\t\t// TODO: should this be doing SAT against the AABB?\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\n\t\taabbBounds.min = min.x;\n\t\taabbBounds.max = max.x;\n\t\tif ( alignedSatBounds[ 0 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.y;\n\t\taabbBounds.max = max.y;\n\t\tif ( alignedSatBounds[ 1 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.z;\n\t\taabbBounds.max = max.z;\n\t\tif ( alignedSatBounds[ 2 ].isSeparated( aabbBounds ) ) return false;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\taabbBounds.setFromBox( axis, box );\n\t\t\tif ( sb.isSeparated( aabbBounds ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri = new ExtendedTriangle();\n\tconst pointsArr = new Array( 3 );\n\tconst cachedSatBounds = new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\n\tconst cachedAxis = new Vector3();\n\treturn function intersectsTriangle( triangle ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tif ( ! triangle.isExtendedTriangle ) {\n\n\t\t\tsaTri.copy( triangle );\n\t\t\tsaTri.update();\n\t\t\ttriangle = saTri;\n\n\t\t} else if ( triangle.needsUpdate ) {\n\n\t\t\ttriangle.update();\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\n\t\tpointsArr[ 0 ] = triangle.a;\n\t\tpointsArr[ 1 ] = triangle.b;\n\t\tpointsArr[ 2 ] = triangle.c;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst sa = satAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, pointsArr );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\tconst triSatBounds = triangle.satBounds;\n\t\tconst triSatAxes = triangle.satAxes;\n\t\tconst points = this.points;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = triSatBounds[ i ];\n\t\t\tconst sa = triSatAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check crossed axes\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sa1 = satAxes[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\n\n\t\t\t\tconst sa2 = triSatAxes[ i2 ];\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, pointsArr );\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, points );\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.closestPointToPoint = ( function () {\n\n\treturn function closestPointToPoint( point, target1 ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\ttarget1\n\t\t\t.copy( point )\n\t\t\t.applyMatrix4( this.invMatrix )\n\t\t\t.clamp( this.min, this.max )\n\t\t\t.applyMatrix4( this.matrix );\n\n\t\treturn target1;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToPoint = ( function () {\n\n\tconst target = new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToBox = ( function () {\n\n\tconst xyzFields = [ 'x', 'y', 'z' ];\n\tconst segments1 = new Array( 12 ).fill().map( () => new Line3() );\n\tconst segments2 = new Array( 12 ).fill().map( () => new Line3() );\n\n\tconst point1 = new Vector3();\n\tconst point2 = new Vector3();\n\n\t// early out if we find a value below threshold\n\treturn function distanceToBox( box, threshold = 0, target1 = null, target2 = null ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tif ( this.intersectsBox( box ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tbox.getCenter( point2 );\n\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\tbox.closestPointToPoint( point1, point2 );\n\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tconst threshold2 = threshold * threshold;\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst points = this.points;\n\n\n\t\t// iterate over every edge and compare distances\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check over all these points\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tpoint2.copy( p ).clamp( min, max );\n\n\t\t\tconst dist = p.distanceToSquared( point2 );\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( p );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate and check all line segment distances\n\t\tlet count = 0;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let i1 = 0; i1 <= 1; i1 ++ ) {\n\n\t\t\t\tfor ( let i2 = 0; i2 <= 1; i2 ++ ) {\n\n\t\t\t\t\tconst nextIndex = ( i + 1 ) % 3;\n\t\t\t\t\tconst nextIndex2 = ( i + 2 ) % 3;\n\n\t\t\t\t\t// get obb line segments\n\t\t\t\t\tconst index = i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst index2 = 1 << i | i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst p1 = points[ index ];\n\t\t\t\t\tconst p2 = points[ index2 ];\n\t\t\t\t\tconst line1 = segments1[ count ];\n\t\t\t\t\tline1.set( p1, p2 );\n\n\n\t\t\t\t\t// get aabb line segments\n\t\t\t\t\tconst f1 = xyzFields[ i ];\n\t\t\t\t\tconst f2 = xyzFields[ nextIndex ];\n\t\t\t\t\tconst f3 = xyzFields[ nextIndex2 ];\n\t\t\t\t\tconst line2 = segments2[ count ];\n\t\t\t\t\tconst start = line2.start;\n\t\t\t\t\tconst end = line2.end;\n\n\t\t\t\t\tstart[ f1 ] = min[ f1 ];\n\t\t\t\t\tstart[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tstart[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tend[ f1 ] = max[ f1 ];\n\t\t\t\t\tend[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tend[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tcount ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check all the other boxes point\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tpoint2.x = x ? max.x : min.x;\n\t\t\t\t\tpoint2.y = y ? max.y : min.y;\n\t\t\t\t\tpoint2.z = z ? max.z : min.z;\n\n\t\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\t\tconst dist = point2.distanceToSquared( point1 );\n\t\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\tconst l1 = segments1[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 12; i2 ++ ) {\n\n\t\t\t\tconst l2 = segments2[ i2 ];\n\t\t\t\tclosestPointsSegmentToSegment( l1, l2, point1, point2 );\n\t\t\t\tconst dist = point1.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","export class PrimitivePool {\n\n\tconstructor( getNewPrimitive ) {\n\n\t\tthis._getNewPrimitive = getNewPrimitive;\n\t\tthis._primitives = [];\n\n\t}\n\n\tgetPrimitive() {\n\n\t\tconst primitives = this._primitives;\n\t\tif ( primitives.length === 0 ) {\n\n\t\t\treturn this._getNewPrimitive();\n\n\t\t} else {\n\n\t\t\treturn primitives.pop();\n\n\t\t}\n\n\t}\n\n\treleasePrimitive( primitive ) {\n\n\t\tthis._primitives.push( primitive );\n\n\t}\n\n}\n","import { ExtendedTriangle } from '../math/ExtendedTriangle.js';\nimport { PrimitivePool } from './PrimitivePool.js';\n\nclass ExtendedTrianglePoolBase extends PrimitivePool {\n\n\tconstructor() {\n\n\t\tsuper( () => new ExtendedTriangle() );\n\n\t}\n\n}\n\nexport const ExtendedTrianglePool = /* @__PURE__ */ new ExtendedTrianglePoolBase();\n","class _BufferStack {\n\n\tconstructor() {\n\n\t\tthis.float32Array = null;\n\t\tthis.uint16Array = null;\n\t\tthis.uint32Array = null;\n\n\t\tconst stack = [];\n\t\tlet prevBuffer = null;\n\t\tthis.setBuffer = buffer => {\n\n\t\t\tif ( prevBuffer ) {\n\n\t\t\t\tstack.push( prevBuffer );\n\n\t\t\t}\n\n\t\t\tprevBuffer = buffer;\n\t\t\tthis.float32Array = new Float32Array( buffer );\n\t\t\tthis.uint16Array = new Uint16Array( buffer );\n\t\t\tthis.uint32Array = new Uint32Array( buffer );\n\n\t\t};\n\n\t\tthis.clearBuffer = () => {\n\n\t\t\tprevBuffer = null;\n\t\t\tthis.float32Array = null;\n\t\t\tthis.uint16Array = null;\n\t\t\tthis.uint32Array = null;\n\n\t\t\tif ( stack.length !== 0 ) {\n\n\t\t\t\tthis.setBuffer( stack.pop() );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n}\n\nexport const BufferStack = new _BufferStack();\n","import { Box3 } from 'three';\nimport { CONTAINED } from '../Constants.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { PrimitivePool } from '../../utils/PrimitivePool.js';\nimport { COUNT, OFFSET, LEFT_NODE, RIGHT_NODE, IS_LEAF, BOUNDING_DATA_INDEX } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\n\nlet _box1, _box2;\nconst boxStack = [];\nconst boxPool = /* @__PURE__ */ new PrimitivePool( () => new Box3() );\n\nexport function shapecast( bvh, root, intersectsBounds, intersectsRange, boundsTraverseOrder, byteOffset ) {\n\n\t// setup\n\t_box1 = boxPool.getPrimitive();\n\t_box2 = boxPool.getPrimitive();\n\tboxStack.push( _box1, _box2 );\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\n\tconst result = shapecastTraverse( 0, bvh.geometry, intersectsBounds, intersectsRange, boundsTraverseOrder, byteOffset );\n\n\t// cleanup\n\tBufferStack.clearBuffer();\n\tboxPool.releasePrimitive( _box1 );\n\tboxPool.releasePrimitive( _box2 );\n\tboxStack.pop();\n\tboxStack.pop();\n\n\tconst length = boxStack.length;\n\tif ( length > 0 ) {\n\n\t\t_box2 = boxStack[ length - 1 ];\n\t\t_box1 = boxStack[ length - 2 ];\n\n\t}\n\n\treturn result;\n\n}\n\nfunction shapecastTraverse(\n\tnodeIndex32,\n\tgeometry,\n\tintersectsBoundsFunc,\n\tintersectsRangeFunc,\n\tnodeScoreFunc = null,\n\tnodeIndexByteOffset = 0, // offset for unique node identifier\n\tdepth = 0\n) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, _box1 );\n\t\treturn intersectsRangeFunc( offset, count, false, depth, nodeIndexByteOffset + nodeIndex32, _box1 );\n\n\t} else {\n\n\t\tconst left = LEFT_NODE( nodeIndex32 );\n\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\tlet c1 = left;\n\t\tlet c2 = right;\n\n\t\tlet score1, score2;\n\t\tlet box1, box2;\n\t\tif ( nodeScoreFunc ) {\n\n\t\t\tbox1 = _box1;\n\t\t\tbox2 = _box2;\n\n\t\t\t// bounding data is not offset\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c1 ), float32Array, box1 );\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c2 ), float32Array, box2 );\n\n\t\t\tscore1 = nodeScoreFunc( box1 );\n\t\t\tscore2 = nodeScoreFunc( box2 );\n\n\t\t\tif ( score2 < score1 ) {\n\n\t\t\t\tc1 = right;\n\t\t\t\tc2 = left;\n\n\t\t\t\tconst temp = score1;\n\t\t\t\tscore1 = score2;\n\t\t\t\tscore2 = temp;\n\n\t\t\t\tbox1 = box2;\n\t\t\t\t// box2 is always set before use below\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Check box 1 intersection\n\t\tif ( ! box1 ) {\n\n\t\t\tbox1 = _box1;\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c1 ), float32Array, box1 );\n\n\t\t}\n\n\t\tconst isC1Leaf = IS_LEAF( c1 * 2, uint16Array );\n\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1, nodeIndexByteOffset + c1 );\n\n\t\tlet c1StopTraversal;\n\t\tif ( c1Intersection === CONTAINED ) {\n\n\t\t\tconst offset = getLeftOffset( c1 );\n\t\t\tconst end = getRightEndOffset( c1 );\n\t\t\tconst count = end - offset;\n\n\t\t\tc1StopTraversal = intersectsRangeFunc( offset, count, true, depth + 1, nodeIndexByteOffset + c1, box1 );\n\n\t\t} else {\n\n\t\t\tc1StopTraversal =\n\t\t\t\tc1Intersection &&\n\t\t\t\tshapecastTraverse(\n\t\t\t\t\tc1,\n\t\t\t\t\tgeometry,\n\t\t\t\t\tintersectsBoundsFunc,\n\t\t\t\t\tintersectsRangeFunc,\n\t\t\t\t\tnodeScoreFunc,\n\t\t\t\t\tnodeIndexByteOffset,\n\t\t\t\t\tdepth + 1\n\t\t\t\t);\n\n\t\t}\n\n\t\tif ( c1StopTraversal ) return true;\n\n\t\t// Check box 2 intersection\n\t\t// cached box2 will have been overwritten by previous traversal\n\t\tbox2 = _box2;\n\t\tarrayToBox( BOUNDING_DATA_INDEX( c2 ), float32Array, box2 );\n\n\t\tconst isC2Leaf = IS_LEAF( c2 * 2, uint16Array );\n\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1, nodeIndexByteOffset + c2 );\n\n\t\tlet c2StopTraversal;\n\t\tif ( c2Intersection === CONTAINED ) {\n\n\t\t\tconst offset = getLeftOffset( c2 );\n\t\t\tconst end = getRightEndOffset( c2 );\n\t\t\tconst count = end - offset;\n\n\t\t\tc2StopTraversal = intersectsRangeFunc( offset, count, true, depth + 1, nodeIndexByteOffset + c2, box2 );\n\n\t\t} else {\n\n\t\t\tc2StopTraversal =\n\t\t\t\tc2Intersection &&\n\t\t\t\tshapecastTraverse(\n\t\t\t\t\tc2,\n\t\t\t\t\tgeometry,\n\t\t\t\t\tintersectsBoundsFunc,\n\t\t\t\t\tintersectsRangeFunc,\n\t\t\t\t\tnodeScoreFunc,\n\t\t\t\t\tnodeIndexByteOffset,\n\t\t\t\t\tdepth + 1\n\t\t\t\t);\n\n\t\t}\n\n\t\tif ( c2StopTraversal ) return true;\n\n\t\treturn false;\n\n\t\t// Define these inside the function so it has access to the local variables needed\n\t\t// when converting to the buffer equivalents\n\t\tfunction getLeftOffset( nodeIndex32 ) {\n\n\t\t\tconst { uint16Array, uint32Array } = BufferStack;\n\t\t\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t// traverse until we find a leaf\n\t\t\twhile ( ! IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\t\tnodeIndex32 = LEFT_NODE( nodeIndex32 );\n\t\t\t\tnodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t}\n\n\t\t\treturn OFFSET( nodeIndex32, uint32Array );\n\n\t\t}\n\n\t\tfunction getRightEndOffset( nodeIndex32 ) {\n\n\t\t\tconst { uint16Array, uint32Array } = BufferStack;\n\t\t\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t// traverse until we find a leaf\n\t\t\twhile ( ! IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\t\t// adjust offset to point to the right node\n\t\t\t\tnodeIndex32 = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\t\t\tnodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t}\n\n\t\t\t// return the end offset of the triangle range\n\t\t\treturn OFFSET( nodeIndex32, uint32Array ) + COUNT( nodeIndex16, uint16Array );\n\n\t\t}\n\n\t}\n\n}\n","import { Vector3 } from 'three';\n\nconst temp = /* @__PURE__ */ new Vector3();\nconst temp1 = /* @__PURE__ */ new Vector3();\n\nexport function closestPointToPoint(\n\tbvh,\n\tpoint,\n\ttarget = { },\n\tminThreshold = 0,\n\tmaxThreshold = Infinity,\n) {\n\n\t// early out if under minThreshold\n\t// skip checking if over maxThreshold\n\t// set minThreshold = maxThreshold to quickly check if a point is within a threshold\n\t// returns Infinity if no value found\n\tconst minThresholdSq = minThreshold * minThreshold;\n\tconst maxThresholdSq = maxThreshold * maxThreshold;\n\tlet closestDistanceSq = Infinity;\n\tlet closestDistanceTriIndex = null;\n\tbvh.shapecast(\n\n\t\t{\n\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\ttemp.copy( point ).clamp( box.min, box.max );\n\t\t\t\treturn temp.distanceToSquared( point );\n\n\t\t\t},\n\n\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\treturn score < closestDistanceSq && score < maxThresholdSq;\n\n\t\t\t},\n\n\t\t\tintersectsTriangle: ( tri, triIndex ) => {\n\n\t\t\t\ttri.closestPointToPoint( point, temp );\n\t\t\t\tconst distSq = point.distanceToSquared( temp );\n\t\t\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\t\t\ttemp1.copy( temp );\n\t\t\t\t\tclosestDistanceSq = distSq;\n\t\t\t\t\tclosestDistanceTriIndex = triIndex;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distSq < minThresholdSq ) {\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t}\n\n\t);\n\n\tif ( closestDistanceSq === Infinity ) return null;\n\n\tconst closestDistance = Math.sqrt( closestDistanceSq );\n\n\tif ( ! target.point ) target.point = temp1.clone();\n\telse target.point.copy( temp1 );\n\ttarget.distance = closestDistance,\n\ttarget.faceIndex = closestDistanceTriIndex;\n\n\treturn target;\n\n}\n","import { Vector3, Vector2, Triangle, DoubleSide, BackSide, REVISION } from 'three';\n\nconst IS_GT_REVISION_169 = parseInt( REVISION ) >= 169;\n\n// Ripped and modified From THREE.js Mesh raycast\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\nconst _vA = /* @__PURE__ */ new Vector3();\nconst _vB = /* @__PURE__ */ new Vector3();\nconst _vC = /* @__PURE__ */ new Vector3();\n\nconst _uvA = /* @__PURE__ */ new Vector2();\nconst _uvB = /* @__PURE__ */ new Vector2();\nconst _uvC = /* @__PURE__ */ new Vector2();\n\nconst _normalA = /* @__PURE__ */ new Vector3();\nconst _normalB = /* @__PURE__ */ new Vector3();\nconst _normalC = /* @__PURE__ */ new Vector3();\n\nconst _intersectionPoint = /* @__PURE__ */ new Vector3();\nfunction checkIntersection( ray, pA, pB, pC, point, side, near, far ) {\n\n\tlet intersect;\n\tif ( side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\tconst distance = ray.origin.distanceTo( point );\n\n\tif ( distance < near || distance > far ) return null;\n\n\treturn {\n\n\t\tdistance: distance,\n\t\tpoint: point.clone(),\n\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( ray, position, normal, uv, uv1, a, b, c, side, near, far ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst intersection = checkIntersection( ray, _vA, _vB, _vC, _intersectionPoint, side, near, far );\n\n\tif ( intersection ) {\n\n\t\tconst barycoord = new Vector3();\n\t\tTriangle.getBarycoord( _intersectionPoint, _vA, _vB, _vC, barycoord );\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getInterpolation( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv1 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv1, a );\n\t\t\t_uvB.fromBufferAttribute( uv1, b );\n\t\t\t_uvC.fromBufferAttribute( uv1, c );\n\n\t\t\tintersection.uv1 = Triangle.getInterpolation( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( normal ) {\n\n\t\t\t_normalA.fromBufferAttribute( normal, a );\n\t\t\t_normalB.fromBufferAttribute( normal, b );\n\t\t\t_normalC.fromBufferAttribute( normal, c );\n\n\t\t\tintersection.normal = Triangle.getInterpolation( _intersectionPoint, _vA, _vB, _vC, _normalA, _normalB, _normalC, new Vector3() );\n\t\t\tif ( intersection.normal.dot( ray.direction ) > 0 ) {\n\n\t\t\t\tintersection.normal.multiplyScalar( - 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\t\tintersection.faceIndex = a;\n\n\t\tif ( IS_GT_REVISION_169 ) {\n\n\t\t\tintersection.barycoord = barycoord;\n\n\t\t}\n\n\t}\n\n\treturn intersection;\n\n}\n\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\nfunction intersectTri( geo, side, ray, tri, intersections, near, far ) {\n\n\tconst triOffset = tri * 3;\n\tlet a = triOffset + 0;\n\tlet b = triOffset + 1;\n\tlet c = triOffset + 2;\n\n\tconst index = geo.index;\n\tif ( geo.index ) {\n\n\t\ta = index.getX( a );\n\t\tb = index.getX( b );\n\t\tc = index.getX( c );\n\n\t}\n\n\tconst { position, normal, uv, uv1 } = geo.attributes;\n\tconst intersection = checkBufferGeometryIntersection( ray, position, normal, uv, uv1, a, b, c, side, near, far );\n\n\tif ( intersection ) {\n\n\t\tintersection.faceIndex = tri;\n\t\tif ( intersections ) intersections.push( intersection );\n\t\treturn intersection;\n\n\t}\n\n\treturn null;\n\n}\n\nexport { intersectTri };\n","\nimport { Vector2, Vector3, Triangle } from 'three';\n\n// sets the vertices of triangle `tri` with the 3 vertices after i\nexport function setTriangle( tri, i, index, pos ) {\n\n\tconst ta = tri.a;\n\tconst tb = tri.b;\n\tconst tc = tri.c;\n\n\tlet i0 = i;\n\tlet i1 = i + 1;\n\tlet i2 = i + 2;\n\tif ( index ) {\n\n\t\ti0 = index.getX( i0 );\n\t\ti1 = index.getX( i1 );\n\t\ti2 = index.getX( i2 );\n\n\t}\n\n\tta.x = pos.getX( i0 );\n\tta.y = pos.getY( i0 );\n\tta.z = pos.getZ( i0 );\n\n\ttb.x = pos.getX( i1 );\n\ttb.y = pos.getY( i1 );\n\ttb.z = pos.getZ( i1 );\n\n\ttc.x = pos.getX( i2 );\n\ttc.y = pos.getY( i2 );\n\ttc.z = pos.getZ( i2 );\n\n}\n\nconst tempV1 = /* @__PURE__ */ new Vector3();\nconst tempV2 = /* @__PURE__ */ new Vector3();\nconst tempV3 = /* @__PURE__ */ new Vector3();\nconst tempUV1 = /* @__PURE__ */ new Vector2();\nconst tempUV2 = /* @__PURE__ */ new Vector2();\nconst tempUV3 = /* @__PURE__ */ new Vector2();\n\nexport function getTriangleHitPointInfo( point, geometry, triangleIndex, target ) {\n\n\tconst indices = geometry.getIndex().array;\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst uvs = geometry.getAttribute( 'uv' );\n\n\tconst a = indices[ triangleIndex * 3 ];\n\tconst b = indices[ triangleIndex * 3 + 1 ];\n\tconst c = indices[ triangleIndex * 3 + 2 ];\n\n\ttempV1.fromBufferAttribute( positions, a );\n\ttempV2.fromBufferAttribute( positions, b );\n\ttempV3.fromBufferAttribute( positions, c );\n\n\t// find the associated material index\n\tlet materialIndex = 0;\n\tconst groups = geometry.groups;\n\tconst firstVertexIndex = triangleIndex * 3;\n\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\t\tconst { start, count } = group;\n\t\tif ( firstVertexIndex >= start && firstVertexIndex < start + count ) {\n\n\t\t\tmaterialIndex = group.materialIndex;\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t// extract barycoord\n\tconst barycoord = target && target.barycoord ? target.barycoord : new Vector3();\n\tTriangle.getBarycoord( point, tempV1, tempV2, tempV3, barycoord );\n\n\t// extract uvs\n\tlet uv = null;\n\tif ( uvs ) {\n\n\t\ttempUV1.fromBufferAttribute( uvs, a );\n\t\ttempUV2.fromBufferAttribute( uvs, b );\n\t\ttempUV3.fromBufferAttribute( uvs, c );\n\n\t\tif ( target && target.uv ) uv = target.uv;\n\t\telse uv = new Vector2();\n\n\t\tTriangle.getInterpolation( point, tempV1, tempV2, tempV3, tempUV1, tempUV2, tempUV3, uv );\n\n\t}\n\n\t// adjust the provided target or create a new one\n\tif ( target ) {\n\n\t\tif ( ! target.face ) target.face = { };\n\t\ttarget.face.a = a;\n\t\ttarget.face.b = b;\n\t\ttarget.face.c = c;\n\t\ttarget.face.materialIndex = materialIndex;\n\t\tif ( ! target.face.normal ) target.face.normal = new Vector3();\n\t\tTriangle.getNormal( tempV1, tempV2, tempV3, target.face.normal );\n\n\t\tif ( uv ) target.uv = uv;\n\t\ttarget.barycoord = barycoord;\n\n\t\treturn target;\n\n\t} else {\n\n\t\treturn {\n\t\t\tface: {\n\t\t\t\ta: a,\n\t\t\t\tb: b,\n\t\t\t\tc: c,\n\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\tnormal: Triangle.getNormal( tempV1, tempV2, tempV3, new Vector3() )\n\t\t\t},\n\t\t\tuv: uv,\n\t\t\tbarycoord: barycoord,\n\t\t};\n\n\t}\n\n}\n","import { intersectTri } from '../../utils/ThreeRayIntersectUtilities.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\n\n/*************************************************************/\n/* This file is generated from \"iterationUtils.template.js\". */\n/*************************************************************/\n/* eslint-disable indent */\n\nfunction intersectTris( bvh, side, ray, offset, count, intersections, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\n\t\tintersectTri( geometry, side, ray, i, intersections, near, far );\n\n\n\t}\n\n}\n\nfunction intersectClosestTri( bvh, side, ray, offset, count, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tlet dist = Infinity;\n\tlet res = null;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tlet intersection;\n\n\t\tintersection = intersectTri( geometry, side, ray, i, null, near, far );\n\n\n\t\tif ( intersection && intersection.distance < dist ) {\n\n\t\t\tres = intersection;\n\t\t\tdist = intersection.distance;\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\nfunction iterateOverTriangles(\n\toffset,\n\tcount,\n\tbvh,\n\tintersectsTriangleFunc,\n\tcontained,\n\tdepth,\n\ttriangle\n) {\n\n\tconst { geometry } = bvh;\n\tconst { index } = geometry;\n\tconst pos = geometry.attributes.position;\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\tlet tri;\n\n\t\ttri = i;\n\n\t\tsetTriangle( triangle, tri * 3, index, pos );\n\t\ttriangle.needsUpdate = true;\n\n\t\tif ( intersectsTriangleFunc( triangle, tri, contained, depth ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\nexport { intersectClosestTri, intersectTris, iterateOverTriangles };\n","import { IS_LEAFNODE_FLAG } from '../Constants.js';\n\n/****************************************************/\n/* This file is generated from \"refit.template.js\". */\n/****************************************************/\n\nfunction refit( bvh, nodeIndices = null ) {\n\n\tif ( nodeIndices && Array.isArray( nodeIndices ) ) {\n\n\t\tnodeIndices = new Set( nodeIndices );\n\n\t}\n\n\tconst geometry = bvh.geometry;\n\tconst indexArr = geometry.index ? geometry.index.array : null;\n\tconst posAttr = geometry.attributes.position;\n\n\tlet buffer, uint32Array, uint16Array, float32Array;\n\tlet byteOffset = 0;\n\tconst roots = bvh._roots;\n\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\tbuffer = roots[ i ];\n\t\tuint32Array = new Uint32Array( buffer );\n\t\tuint16Array = new Uint16Array( buffer );\n\t\tfloat32Array = new Float32Array( buffer );\n\n\t\t_traverse( 0, byteOffset );\n\t\tbyteOffset += buffer.byteLength;\n\n\t}\n\n\tfunction _traverse( node32Index, byteOffset, force = false ) {\n\n\t\tconst node16Index = node32Index * 2;\n\t\tconst isLeaf = uint16Array[ node16Index + 15 ] === IS_LEAFNODE_FLAG;\n\t\tif ( isLeaf ) {\n\n\t\t\tconst offset = uint32Array[ node32Index + 6 ];\n\t\t\tconst count = uint16Array[ node16Index + 14 ];\n\n\t\t\tlet minx = Infinity;\n\t\t\tlet miny = Infinity;\n\t\t\tlet minz = Infinity;\n\t\t\tlet maxx = - Infinity;\n\t\t\tlet maxy = - Infinity;\n\t\t\tlet maxz = - Infinity;\n\n\n\t\t\tfor ( let i = 3 * offset, l = 3 * ( offset + count ); i < l; i ++ ) {\n\n\t\t\t\tlet index = indexArr[ i ];\n\t\t\t\tconst x = posAttr.getX( index );\n\t\t\t\tconst y = posAttr.getY( index );\n\t\t\t\tconst z = posAttr.getZ( index );\n\n\t\t\t\tif ( x < minx ) minx = x;\n\t\t\t\tif ( x > maxx ) maxx = x;\n\n\t\t\t\tif ( y < miny ) miny = y;\n\t\t\t\tif ( y > maxy ) maxy = y;\n\n\t\t\t\tif ( z < minz ) minz = z;\n\t\t\t\tif ( z > maxz ) maxz = z;\n\n\t\t\t}\n\n\n\t\t\tif (\n\t\t\t\tfloat32Array[ node32Index + 0 ] !== minx ||\n\t\t\t\tfloat32Array[ node32Index + 1 ] !== miny ||\n\t\t\t\tfloat32Array[ node32Index + 2 ] !== minz ||\n\n\t\t\t\tfloat32Array[ node32Index + 3 ] !== maxx ||\n\t\t\t\tfloat32Array[ node32Index + 4 ] !== maxy ||\n\t\t\t\tfloat32Array[ node32Index + 5 ] !== maxz\n\t\t\t) {\n\n\t\t\t\tfloat32Array[ node32Index + 0 ] = minx;\n\t\t\t\tfloat32Array[ node32Index + 1 ] = miny;\n\t\t\t\tfloat32Array[ node32Index + 2 ] = minz;\n\n\t\t\t\tfloat32Array[ node32Index + 3 ] = maxx;\n\t\t\t\tfloat32Array[ node32Index + 4 ] = maxy;\n\t\t\t\tfloat32Array[ node32Index + 5 ] = maxz;\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = node32Index + 8;\n\t\t\tconst right = uint32Array[ node32Index + 6 ];\n\n\t\t\t// the identifying node indices provided by the shapecast function include offsets of all\n\t\t\t// root buffers to guarantee they're unique between roots so offset left and right indices here.\n\t\t\tconst offsetLeft = left + byteOffset;\n\t\t\tconst offsetRight = right + byteOffset;\n\t\t\tlet forceChildren = force;\n\t\t\tlet includesLeft = false;\n\t\t\tlet includesRight = false;\n\n\t\t\tif ( nodeIndices ) {\n\n\t\t\t\t// if we see that neither the left or right child are included in the set that need to be updated\n\t\t\t\t// then we assume that all children need to be updated.\n\t\t\t\tif ( ! forceChildren ) {\n\n\t\t\t\t\tincludesLeft = nodeIndices.has( offsetLeft );\n\t\t\t\t\tincludesRight = nodeIndices.has( offsetRight );\n\t\t\t\t\tforceChildren = ! includesLeft && ! includesRight;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tincludesLeft = true;\n\t\t\t\tincludesRight = true;\n\n\t\t\t}\n\n\t\t\tconst traverseLeft = forceChildren || includesLeft;\n\t\t\tconst traverseRight = forceChildren || includesRight;\n\n\t\t\tlet leftChange = false;\n\t\t\tif ( traverseLeft ) {\n\n\t\t\t\tleftChange = _traverse( left, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tlet rightChange = false;\n\t\t\tif ( traverseRight ) {\n\n\t\t\t\trightChange = _traverse( right, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tconst didChange = leftChange || rightChange;\n\t\t\tif ( didChange ) {\n\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tconst lefti = left + i;\n\t\t\t\t\tconst righti = right + i;\n\t\t\t\t\tconst minLeftValue = float32Array[ lefti ];\n\t\t\t\t\tconst maxLeftValue = float32Array[ lefti + 3 ];\n\t\t\t\t\tconst minRightValue = float32Array[ righti ];\n\t\t\t\t\tconst maxRightValue = float32Array[ righti + 3 ];\n\n\t\t\t\t\tfloat32Array[ node32Index + i ] = minLeftValue < minRightValue ? minLeftValue : minRightValue;\n\t\t\t\t\tfloat32Array[ node32Index + i + 3 ] = maxLeftValue > maxRightValue ? maxLeftValue : maxRightValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn didChange;\n\n\t\t}\n\n\t}\n\n}\n\nexport { refit };\n","/**\n * This function performs intersection tests similar to Ray.intersectBox in three.js,\n * with the difference that the box values are read from an array to improve performance.\n */\nexport function intersectRay( nodeIndex32, array, ray, near, far ) {\n\n\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\tconst invdirx = 1 / ray.direction.x,\n\t\tinvdiry = 1 / ray.direction.y,\n\t\tinvdirz = 1 / ray.direction.z;\n\n\tconst ox = ray.origin.x;\n\tconst oy = ray.origin.y;\n\tconst oz = ray.origin.z;\n\n\tlet minx = array[ nodeIndex32 ];\n\tlet maxx = array[ nodeIndex32 + 3 ];\n\n\tlet miny = array[ nodeIndex32 + 1 ];\n\tlet maxy = array[ nodeIndex32 + 3 + 1 ];\n\n\tlet minz = array[ nodeIndex32 + 2 ];\n\tlet maxz = array[ nodeIndex32 + 3 + 2 ];\n\n\tif ( invdirx >= 0 ) {\n\n\t\ttmin = ( minx - ox ) * invdirx;\n\t\ttmax = ( maxx - ox ) * invdirx;\n\n\t} else {\n\n\t\ttmin = ( maxx - ox ) * invdirx;\n\t\ttmax = ( minx - ox ) * invdirx;\n\n\t}\n\n\tif ( invdiry >= 0 ) {\n\n\t\ttymin = ( miny - oy ) * invdiry;\n\t\ttymax = ( maxy - oy ) * invdiry;\n\n\t} else {\n\n\t\ttymin = ( maxy - oy ) * invdiry;\n\t\ttymax = ( miny - oy ) * invdiry;\n\n\t}\n\n\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return false;\n\n\tif ( tymin > tmin || isNaN( tmin ) ) tmin = tymin;\n\n\tif ( tymax < tmax || isNaN( tmax ) ) tmax = tymax;\n\n\tif ( invdirz >= 0 ) {\n\n\t\ttzmin = ( minz - oz ) * invdirz;\n\t\ttzmax = ( maxz - oz ) * invdirz;\n\n\t} else {\n\n\t\ttzmin = ( maxz - oz ) * invdirz;\n\t\ttzmax = ( minz - oz ) * invdirz;\n\n\t}\n\n\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return false;\n\n\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t//return point closest to the ray (positive side)\n\n\treturn tmin <= far && tmax >= near;\n\n}\n","import { intersectTri } from '../../utils/ThreeRayIntersectUtilities.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\n\n/*************************************************************/\n/* This file is generated from \"iterationUtils.template.js\". */\n/*************************************************************/\n/* eslint-disable indent */\n\nfunction intersectTris_indirect( bvh, side, ray, offset, count, intersections, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tlet vi = _indirectBuffer ? _indirectBuffer[ i ] : i;\n\t\tintersectTri( geometry, side, ray, vi, intersections, near, far );\n\n\n\t}\n\n}\n\nfunction intersectClosestTri_indirect( bvh, side, ray, offset, count, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tlet dist = Infinity;\n\tlet res = null;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tlet intersection;\n\t\tintersection = intersectTri( geometry, side, ray, _indirectBuffer ? _indirectBuffer[ i ] : i, null, near, far );\n\n\n\t\tif ( intersection && intersection.distance < dist ) {\n\n\t\t\tres = intersection;\n\t\t\tdist = intersection.distance;\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\nfunction iterateOverTriangles_indirect(\n\toffset,\n\tcount,\n\tbvh,\n\tintersectsTriangleFunc,\n\tcontained,\n\tdepth,\n\ttriangle\n) {\n\n\tconst { geometry } = bvh;\n\tconst { index } = geometry;\n\tconst pos = geometry.attributes.position;\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\tlet tri;\n\t\ttri = bvh.resolveTriangleIndex( i );\n\n\t\tsetTriangle( triangle, tri * 3, index, pos );\n\t\ttriangle.needsUpdate = true;\n\n\t\tif ( intersectsTriangleFunc( triangle, tri, contained, depth ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\nexport { intersectClosestTri_indirect, intersectTris_indirect, iterateOverTriangles_indirect };\n","import { intersectRay } from '../utils/intersectUtils.js';\nimport { IS_LEAF, OFFSET, COUNT, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectTris } from '../utils/iterationUtils.generated.js';\nimport '../utils/iterationUtils_indirect.generated.js';\n\n/******************************************************/\n/* This file is generated from \"raycast.template.js\". */\n/******************************************************/\n\nfunction raycast( bvh, root, side, ray, intersects, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\t_raycast( 0, bvh, side, ray, intersects, near, far );\n\tBufferStack.clearBuffer();\n\n}\n\nfunction _raycast( nodeIndex32, bvh, side, ray, intersects, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tconst nodeIndex16 = nodeIndex32 * 2;\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\n\t\tintersectTris( bvh, side, ray, offset, count, intersects, near, far );\n\n\n\t} else {\n\n\t\tconst leftIndex = LEFT_NODE( nodeIndex32 );\n\t\tif ( intersectRay( leftIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( leftIndex, bvh, side, ray, intersects, near, far );\n\n\t\t}\n\n\t\tconst rightIndex = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\tif ( intersectRay( rightIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( rightIndex, bvh, side, ray, intersects, near, far );\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycast };\n","import { IS_LEAF, OFFSET, COUNT, SPLIT_AXIS, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectRay } from '../utils/intersectUtils.js';\nimport { intersectClosestTri } from '../utils/iterationUtils.generated.js';\nimport '../utils/iterationUtils_indirect.generated.js';\n\n/***********************************************************/\n/* This file is generated from \"raycastFirst.template.js\". */\n/***********************************************************/\n\nconst _xyzFields = [ 'x', 'y', 'z' ];\n\nfunction raycastFirst( bvh, root, side, ray, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _raycastFirst( 0, bvh, side, ray, near, far );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _raycastFirst( nodeIndex32, bvh, side, ray, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\n\t\t// eslint-disable-next-line no-unreachable\n\t\treturn intersectClosestTri( bvh, side, ray, offset, count, near, far );\n\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\n\t\tconst splitAxis = SPLIT_AXIS( nodeIndex32, uint32Array );\n\t\tconst xyzAxis = _xyzFields[ splitAxis ];\n\t\tconst rayDir = ray.direction[ xyzAxis ];\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\n\t\tlet c1, c2;\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = LEFT_NODE( nodeIndex32 );\n\t\t\tc2 = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\t} else {\n\n\t\t\tc1 = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\t\tc2 = LEFT_NODE( nodeIndex32 );\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRay( c1, float32Array, ray, near, far );\n\t\tconst c1Result = c1Intersection ? _raycastFirst( c1, bvh, side, ray, near, far ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\n\t\t\t// \"point\" is in the local frame of the bvh\n\t\t\tconst point = c1Result.point[ xyzAxis ];\n\t\t\tconst isOutside = leftToRight ?\n\t\t\t\tpoint <= float32Array[ c2 + splitAxis ] : // min bounding data\n\t\t\t\tpoint >= float32Array[ c2 + splitAxis + 3 ]; // max bounding data\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\n\t\t// intersection in the second, so check the second node and then take the better of the two\n\t\tconst c2Intersection = intersectRay( c2, float32Array, ray, near, far );\n\t\tconst c2Result = c2Intersection ? _raycastFirst( c2, bvh, side, ray, near, far ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycastFirst };\n","import { Box3, Matrix4 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { ExtendedTriangle } from '../../math/ExtendedTriangle.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { IS_LEAF, OFFSET, COUNT, BOUNDING_DATA_INDEX } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\n\n/*****************************************************************/\n/* This file is generated from \"intersectsGeometry.template.js\". */\n/*****************************************************************/\n/* eslint-disable indent */\n\nconst boundingBox = /* @__PURE__ */ new Box3();\nconst triangle = /* @__PURE__ */ new ExtendedTriangle();\nconst triangle2 = /* @__PURE__ */ new ExtendedTriangle();\nconst invertedMat = /* @__PURE__ */ new Matrix4();\n\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\n\nfunction intersectsGeometry( bvh, root, otherGeometry, geometryToBvh ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _intersectsGeometry( 0, bvh, otherGeometry, geometryToBvh );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _intersectsGeometry( nodeIndex32, bvh, otherGeometry, geometryToBvh, cachedObb = null ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tif ( cachedObb === null ) {\n\n\t\tif ( ! otherGeometry.boundingBox ) {\n\n\t\t\totherGeometry.computeBoundingBox();\n\n\t\t}\n\n\t\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\t\tcachedObb = obb;\n\n\t}\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst thisGeometry = bvh.geometry;\n\t\tconst thisIndex = thisGeometry.index;\n\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\tconst index = otherGeometry.index;\n\t\tconst pos = otherGeometry.attributes.position;\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\n\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\n\t\t// here.\n\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t// if there's a bounds tree\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, obb2 );\n\t\t\tobb2.matrix.copy( invertedMat );\n\t\t\tobb2.needsUpdate = true;\n\n\t\t\t// TODO: use a triangle iteration function here\n\t\t\tconst res = otherGeometry.boundsTree.shapecast( {\n\n\t\t\t\tintersectsBounds: box => obb2.intersectsBox( box ),\n\n\t\t\t\tintersectsTriangle: tri => {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.needsUpdate = true;\n\n\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn res;\n\n\t\t} else {\n\n\t\t\t// if we're just dealing with raw geometry\n\n\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\n\n\n\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\n\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\n\t\t}\n\n\t} else {\n\n\t\tconst left = nodeIndex32 + 8;\n\t\tconst right = uint32Array[ nodeIndex32 + 6 ];\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( left ), float32Array, boundingBox );\n\t\tconst leftIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( left, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( leftIntersection ) return true;\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( right ), float32Array, boundingBox );\n\t\tconst rightIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( right, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( rightIntersection ) return true;\n\n\t\treturn false;\n\n\t}\n\n}\n\nexport { intersectsGeometry };\n","import { Matrix4, Vector3 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { getTriCount } from '../build/geometryUtils.js';\nimport { ExtendedTrianglePool } from '../../utils/ExtendedTrianglePool.js';\n\n/*********************************************************************/\n/* This file is generated from \"closestPointToGeometry.template.js\". */\n/*********************************************************************/\n\nconst tempMatrix = /* @__PURE__ */ new Matrix4();\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\nconst temp1 = /* @__PURE__ */ new Vector3();\nconst temp2 = /* @__PURE__ */ new Vector3();\nconst temp3 = /* @__PURE__ */ new Vector3();\nconst temp4 = /* @__PURE__ */ new Vector3();\n\nfunction closestPointToGeometry(\n\tbvh,\n\totherGeometry,\n\tgeometryToBvh,\n\ttarget1 = { },\n\ttarget2 = { },\n\tminThreshold = 0,\n\tmaxThreshold = Infinity,\n) {\n\n\tif ( ! otherGeometry.boundingBox ) {\n\n\t\totherGeometry.computeBoundingBox();\n\n\t}\n\n\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\tobb.needsUpdate = true;\n\n\tconst geometry = bvh.geometry;\n\tconst pos = geometry.attributes.position;\n\tconst index = geometry.index;\n\tconst otherPos = otherGeometry.attributes.position;\n\tconst otherIndex = otherGeometry.index;\n\tconst triangle = ExtendedTrianglePool.getPrimitive();\n\tconst triangle2 = ExtendedTrianglePool.getPrimitive();\n\n\tlet tempTarget1 = temp1;\n\tlet tempTargetDest1 = temp2;\n\tlet tempTarget2 = null;\n\tlet tempTargetDest2 = null;\n\n\tif ( target2 ) {\n\n\t\ttempTarget2 = temp3;\n\t\ttempTargetDest2 = temp4;\n\n\t}\n\n\tlet closestDistance = Infinity;\n\tlet closestDistanceTriIndex = null;\n\tlet closestDistanceOtherTriIndex = null;\n\ttempMatrix.copy( geometryToBvh ).invert();\n\tobb2.matrix.copy( tempMatrix );\n\tbvh.shapecast(\n\t\t{\n\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\treturn obb.distanceToBox( box );\n\n\t\t\t},\n\n\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\tif ( score < closestDistance && score < maxThreshold ) {\n\n\t\t\t\t\t// if we know the triangles of this bounds will be intersected next then\n\t\t\t\t\t// save the bounds to use during triangle checks.\n\t\t\t\t\tif ( isLeaf ) {\n\n\t\t\t\t\t\tobb2.min.copy( box.min );\n\t\t\t\t\t\tobb2.max.copy( box.max );\n\t\t\t\t\t\tobb2.needsUpdate = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\tintersectsRange: ( offset, count ) => {\n\n\t\t\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t\t\t// if the other geometry has a bvh then use the accelerated path where we use shapecast to find\n\t\t\t\t\t// the closest bounds in the other geometry to check.\n\t\t\t\t\tconst otherBvh = otherGeometry.boundsTree;\n\t\t\t\t\treturn otherBvh.shapecast( {\n\t\t\t\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\t\t\t\treturn obb2.distanceToBox( box );\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\t\t\t\treturn score < closestDistance && score < maxThreshold;\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsRange: ( otherOffset, otherCount ) => {\n\n\t\t\t\t\t\t\tfor ( let i2 = otherOffset, l2 = otherOffset + otherCount; i2 < l2; i2 ++ ) {\n\n\n\t\t\t\t\t\t\t\tsetTriangle( triangle2, 3 * i2, otherIndex, otherPos );\n\n\t\t\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\n\t\t\t\t\t\t\t\t\tsetTriangle( triangle, 3 * i, index, pos );\n\n\t\t\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// If no bounds tree then we'll just check every triangle.\n\t\t\t\t\tconst triCount = getTriCount( otherGeometry );\n\t\t\t\t\tfor ( let i2 = 0, l2 = triCount; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, 3 * i2, otherIndex, otherPos );\n\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\n\t\t\t\t\t\t\tsetTriangle( triangle, 3 * i, index, pos );\n\n\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t}\n\n\t);\n\n\tExtendedTrianglePool.releasePrimitive( triangle );\n\tExtendedTrianglePool.releasePrimitive( triangle2 );\n\n\tif ( closestDistance === Infinity ) {\n\n\t\treturn null;\n\n\t}\n\n\tif ( ! target1.point ) {\n\n\t\ttarget1.point = tempTargetDest1.clone();\n\n\t} else {\n\n\t\ttarget1.point.copy( tempTargetDest1 );\n\n\t}\n\n\ttarget1.distance = closestDistance,\n\ttarget1.faceIndex = closestDistanceTriIndex;\n\n\tif ( target2 ) {\n\n\t\tif ( ! target2.point ) target2.point = tempTargetDest2.clone();\n\t\telse target2.point.copy( tempTargetDest2 );\n\t\ttarget2.point.applyMatrix4( tempMatrix );\n\t\ttempTargetDest1.applyMatrix4( tempMatrix );\n\t\ttarget2.distance = tempTargetDest1.sub( target2.point ).length();\n\t\ttarget2.faceIndex = closestDistanceOtherTriIndex;\n\n\t}\n\n\treturn target1;\n\n}\n\nexport { closestPointToGeometry };\n","import { IS_LEAFNODE_FLAG } from '../Constants.js';\n\n/****************************************************/\n/* This file is generated from \"refit.template.js\". */\n/****************************************************/\n\nfunction refit_indirect( bvh, nodeIndices = null ) {\n\n\tif ( nodeIndices && Array.isArray( nodeIndices ) ) {\n\n\t\tnodeIndices = new Set( nodeIndices );\n\n\t}\n\n\tconst geometry = bvh.geometry;\n\tconst indexArr = geometry.index ? geometry.index.array : null;\n\tconst posAttr = geometry.attributes.position;\n\n\tlet buffer, uint32Array, uint16Array, float32Array;\n\tlet byteOffset = 0;\n\tconst roots = bvh._roots;\n\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\tbuffer = roots[ i ];\n\t\tuint32Array = new Uint32Array( buffer );\n\t\tuint16Array = new Uint16Array( buffer );\n\t\tfloat32Array = new Float32Array( buffer );\n\n\t\t_traverse( 0, byteOffset );\n\t\tbyteOffset += buffer.byteLength;\n\n\t}\n\n\tfunction _traverse( node32Index, byteOffset, force = false ) {\n\n\t\tconst node16Index = node32Index * 2;\n\t\tconst isLeaf = uint16Array[ node16Index + 15 ] === IS_LEAFNODE_FLAG;\n\t\tif ( isLeaf ) {\n\n\t\t\tconst offset = uint32Array[ node32Index + 6 ];\n\t\t\tconst count = uint16Array[ node16Index + 14 ];\n\n\t\t\tlet minx = Infinity;\n\t\t\tlet miny = Infinity;\n\t\t\tlet minz = Infinity;\n\t\t\tlet maxx = - Infinity;\n\t\t\tlet maxy = - Infinity;\n\t\t\tlet maxz = - Infinity;\n\n\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\tconst t = 3 * bvh.resolveTriangleIndex( i );\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tlet index = t + j;\n\t\t\t\t\tindex = indexArr ? indexArr[ index ] : index;\n\n\t\t\t\t\tconst x = posAttr.getX( index );\n\t\t\t\t\tconst y = posAttr.getY( index );\n\t\t\t\t\tconst z = posAttr.getZ( index );\n\n\t\t\t\t\tif ( x < minx ) minx = x;\n\t\t\t\t\tif ( x > maxx ) maxx = x;\n\n\t\t\t\t\tif ( y < miny ) miny = y;\n\t\t\t\t\tif ( y > maxy ) maxy = y;\n\n\t\t\t\t\tif ( z < minz ) minz = z;\n\t\t\t\t\tif ( z > maxz ) maxz = z;\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (\n\t\t\t\tfloat32Array[ node32Index + 0 ] !== minx ||\n\t\t\t\tfloat32Array[ node32Index + 1 ] !== miny ||\n\t\t\t\tfloat32Array[ node32Index + 2 ] !== minz ||\n\n\t\t\t\tfloat32Array[ node32Index + 3 ] !== maxx ||\n\t\t\t\tfloat32Array[ node32Index + 4 ] !== maxy ||\n\t\t\t\tfloat32Array[ node32Index + 5 ] !== maxz\n\t\t\t) {\n\n\t\t\t\tfloat32Array[ node32Index + 0 ] = minx;\n\t\t\t\tfloat32Array[ node32Index + 1 ] = miny;\n\t\t\t\tfloat32Array[ node32Index + 2 ] = minz;\n\n\t\t\t\tfloat32Array[ node32Index + 3 ] = maxx;\n\t\t\t\tfloat32Array[ node32Index + 4 ] = maxy;\n\t\t\t\tfloat32Array[ node32Index + 5 ] = maxz;\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = node32Index + 8;\n\t\t\tconst right = uint32Array[ node32Index + 6 ];\n\n\t\t\t// the identifying node indices provided by the shapecast function include offsets of all\n\t\t\t// root buffers to guarantee they're unique between roots so offset left and right indices here.\n\t\t\tconst offsetLeft = left + byteOffset;\n\t\t\tconst offsetRight = right + byteOffset;\n\t\t\tlet forceChildren = force;\n\t\t\tlet includesLeft = false;\n\t\t\tlet includesRight = false;\n\n\t\t\tif ( nodeIndices ) {\n\n\t\t\t\t// if we see that neither the left or right child are included in the set that need to be updated\n\t\t\t\t// then we assume that all children need to be updated.\n\t\t\t\tif ( ! forceChildren ) {\n\n\t\t\t\t\tincludesLeft = nodeIndices.has( offsetLeft );\n\t\t\t\t\tincludesRight = nodeIndices.has( offsetRight );\n\t\t\t\t\tforceChildren = ! includesLeft && ! includesRight;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tincludesLeft = true;\n\t\t\t\tincludesRight = true;\n\n\t\t\t}\n\n\t\t\tconst traverseLeft = forceChildren || includesLeft;\n\t\t\tconst traverseRight = forceChildren || includesRight;\n\n\t\t\tlet leftChange = false;\n\t\t\tif ( traverseLeft ) {\n\n\t\t\t\tleftChange = _traverse( left, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tlet rightChange = false;\n\t\t\tif ( traverseRight ) {\n\n\t\t\t\trightChange = _traverse( right, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tconst didChange = leftChange || rightChange;\n\t\t\tif ( didChange ) {\n\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tconst lefti = left + i;\n\t\t\t\t\tconst righti = right + i;\n\t\t\t\t\tconst minLeftValue = float32Array[ lefti ];\n\t\t\t\t\tconst maxLeftValue = float32Array[ lefti + 3 ];\n\t\t\t\t\tconst minRightValue = float32Array[ righti ];\n\t\t\t\t\tconst maxRightValue = float32Array[ righti + 3 ];\n\n\t\t\t\t\tfloat32Array[ node32Index + i ] = minLeftValue < minRightValue ? minLeftValue : minRightValue;\n\t\t\t\t\tfloat32Array[ node32Index + i + 3 ] = maxLeftValue > maxRightValue ? maxLeftValue : maxRightValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn didChange;\n\n\t\t}\n\n\t}\n\n}\n\nexport { refit_indirect };\n","import { intersectRay } from '../utils/intersectUtils.js';\nimport { IS_LEAF, OFFSET, COUNT, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport '../utils/iterationUtils.generated.js';\nimport { intersectTris_indirect } from '../utils/iterationUtils_indirect.generated.js';\n\n/******************************************************/\n/* This file is generated from \"raycast.template.js\". */\n/******************************************************/\n\nfunction raycast_indirect( bvh, root, side, ray, intersects, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\t_raycast( 0, bvh, side, ray, intersects, near, far );\n\tBufferStack.clearBuffer();\n\n}\n\nfunction _raycast( nodeIndex32, bvh, side, ray, intersects, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tconst nodeIndex16 = nodeIndex32 * 2;\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\tintersectTris_indirect( bvh, side, ray, offset, count, intersects, near, far );\n\n\n\t} else {\n\n\t\tconst leftIndex = LEFT_NODE( nodeIndex32 );\n\t\tif ( intersectRay( leftIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( leftIndex, bvh, side, ray, intersects, near, far );\n\n\t\t}\n\n\t\tconst rightIndex = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\tif ( intersectRay( rightIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( rightIndex, bvh, side, ray, intersects, near, far );\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycast_indirect };\n","import { IS_LEAF, OFFSET, COUNT, SPLIT_AXIS, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectRay } from '../utils/intersectUtils.js';\nimport '../utils/iterationUtils.generated.js';\nimport { intersectClosestTri_indirect } from '../utils/iterationUtils_indirect.generated.js';\n\n/***********************************************************/\n/* This file is generated from \"raycastFirst.template.js\". */\n/***********************************************************/\n\nconst _xyzFields = [ 'x', 'y', 'z' ];\n\nfunction raycastFirst_indirect( bvh, root, side, ray, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _raycastFirst( 0, bvh, side, ray, near, far );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _raycastFirst( nodeIndex32, bvh, side, ray, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\treturn intersectClosestTri_indirect( bvh, side, ray, offset, count, near, far );\n\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\n\t\tconst splitAxis = SPLIT_AXIS( nodeIndex32, uint32Array );\n\t\tconst xyzAxis = _xyzFields[ splitAxis ];\n\t\tconst rayDir = ray.direction[ xyzAxis ];\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\n\t\tlet c1, c2;\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = LEFT_NODE( nodeIndex32 );\n\t\t\tc2 = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\t} else {\n\n\t\t\tc1 = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\t\tc2 = LEFT_NODE( nodeIndex32 );\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRay( c1, float32Array, ray, near, far );\n\t\tconst c1Result = c1Intersection ? _raycastFirst( c1, bvh, side, ray, near, far ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\n\t\t\t// \"point\" is in the local frame of the bvh\n\t\t\tconst point = c1Result.point[ xyzAxis ];\n\t\t\tconst isOutside = leftToRight ?\n\t\t\t\tpoint <= float32Array[ c2 + splitAxis ] : // min bounding data\n\t\t\t\tpoint >= float32Array[ c2 + splitAxis + 3 ]; // max bounding data\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\n\t\t// intersection in the second, so check the second node and then take the better of the two\n\t\tconst c2Intersection = intersectRay( c2, float32Array, ray, near, far );\n\t\tconst c2Result = c2Intersection ? _raycastFirst( c2, bvh, side, ray, near, far ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycastFirst_indirect };\n","import { Box3, Matrix4 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { ExtendedTriangle } from '../../math/ExtendedTriangle.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { IS_LEAF, OFFSET, COUNT, BOUNDING_DATA_INDEX } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\n\n/*****************************************************************/\n/* This file is generated from \"intersectsGeometry.template.js\". */\n/*****************************************************************/\n/* eslint-disable indent */\n\nconst boundingBox = /* @__PURE__ */ new Box3();\nconst triangle = /* @__PURE__ */ new ExtendedTriangle();\nconst triangle2 = /* @__PURE__ */ new ExtendedTriangle();\nconst invertedMat = /* @__PURE__ */ new Matrix4();\n\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\n\nfunction intersectsGeometry_indirect( bvh, root, otherGeometry, geometryToBvh ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _intersectsGeometry( 0, bvh, otherGeometry, geometryToBvh );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _intersectsGeometry( nodeIndex32, bvh, otherGeometry, geometryToBvh, cachedObb = null ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tif ( cachedObb === null ) {\n\n\t\tif ( ! otherGeometry.boundingBox ) {\n\n\t\t\totherGeometry.computeBoundingBox();\n\n\t\t}\n\n\t\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\t\tcachedObb = obb;\n\n\t}\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst thisGeometry = bvh.geometry;\n\t\tconst thisIndex = thisGeometry.index;\n\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\tconst index = otherGeometry.index;\n\t\tconst pos = otherGeometry.attributes.position;\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\n\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\n\t\t// here.\n\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t// if there's a bounds tree\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, obb2 );\n\t\t\tobb2.matrix.copy( invertedMat );\n\t\t\tobb2.needsUpdate = true;\n\n\t\t\t// TODO: use a triangle iteration function here\n\t\t\tconst res = otherGeometry.boundsTree.shapecast( {\n\n\t\t\t\tintersectsBounds: box => obb2.intersectsBox( box ),\n\n\t\t\t\tintersectsTriangle: tri => {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.needsUpdate = true;\n\n\t\t\t\t\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\t\t\tsetTriangle( triangle2, 3 * bvh.resolveTriangleIndex( i ), thisIndex, thisPos );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn res;\n\n\t\t} else {\n\n\t\t\t// if we're just dealing with raw geometry\n\t\t\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\tconst ti = bvh.resolveTriangleIndex( i );\n\t\t\t\tsetTriangle( triangle, 3 * ti, thisIndex, thisPos );\n\n\n\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\n\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t} else {\n\n\t\tconst left = nodeIndex32 + 8;\n\t\tconst right = uint32Array[ nodeIndex32 + 6 ];\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( left ), float32Array, boundingBox );\n\t\tconst leftIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( left, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( leftIntersection ) return true;\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( right ), float32Array, boundingBox );\n\t\tconst rightIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( right, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( rightIntersection ) return true;\n\n\t\treturn false;\n\n\t}\n\n}\n\nexport { intersectsGeometry_indirect };\n","import { Matrix4, Vector3 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { getTriCount } from '../build/geometryUtils.js';\nimport { ExtendedTrianglePool } from '../../utils/ExtendedTrianglePool.js';\n\n/*********************************************************************/\n/* This file is generated from \"closestPointToGeometry.template.js\". */\n/*********************************************************************/\n\nconst tempMatrix = /* @__PURE__ */ new Matrix4();\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\nconst temp1 = /* @__PURE__ */ new Vector3();\nconst temp2 = /* @__PURE__ */ new Vector3();\nconst temp3 = /* @__PURE__ */ new Vector3();\nconst temp4 = /* @__PURE__ */ new Vector3();\n\nfunction closestPointToGeometry_indirect(\n\tbvh,\n\totherGeometry,\n\tgeometryToBvh,\n\ttarget1 = { },\n\ttarget2 = { },\n\tminThreshold = 0,\n\tmaxThreshold = Infinity,\n) {\n\n\tif ( ! otherGeometry.boundingBox ) {\n\n\t\totherGeometry.computeBoundingBox();\n\n\t}\n\n\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\tobb.needsUpdate = true;\n\n\tconst geometry = bvh.geometry;\n\tconst pos = geometry.attributes.position;\n\tconst index = geometry.index;\n\tconst otherPos = otherGeometry.attributes.position;\n\tconst otherIndex = otherGeometry.index;\n\tconst triangle = ExtendedTrianglePool.getPrimitive();\n\tconst triangle2 = ExtendedTrianglePool.getPrimitive();\n\n\tlet tempTarget1 = temp1;\n\tlet tempTargetDest1 = temp2;\n\tlet tempTarget2 = null;\n\tlet tempTargetDest2 = null;\n\n\tif ( target2 ) {\n\n\t\ttempTarget2 = temp3;\n\t\ttempTargetDest2 = temp4;\n\n\t}\n\n\tlet closestDistance = Infinity;\n\tlet closestDistanceTriIndex = null;\n\tlet closestDistanceOtherTriIndex = null;\n\ttempMatrix.copy( geometryToBvh ).invert();\n\tobb2.matrix.copy( tempMatrix );\n\tbvh.shapecast(\n\t\t{\n\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\treturn obb.distanceToBox( box );\n\n\t\t\t},\n\n\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\tif ( score < closestDistance && score < maxThreshold ) {\n\n\t\t\t\t\t// if we know the triangles of this bounds will be intersected next then\n\t\t\t\t\t// save the bounds to use during triangle checks.\n\t\t\t\t\tif ( isLeaf ) {\n\n\t\t\t\t\t\tobb2.min.copy( box.min );\n\t\t\t\t\t\tobb2.max.copy( box.max );\n\t\t\t\t\t\tobb2.needsUpdate = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\tintersectsRange: ( offset, count ) => {\n\n\t\t\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t\t\t// if the other geometry has a bvh then use the accelerated path where we use shapecast to find\n\t\t\t\t\t// the closest bounds in the other geometry to check.\n\t\t\t\t\tconst otherBvh = otherGeometry.boundsTree;\n\t\t\t\t\treturn otherBvh.shapecast( {\n\t\t\t\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\t\t\t\treturn obb2.distanceToBox( box );\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\t\t\t\treturn score < closestDistance && score < maxThreshold;\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsRange: ( otherOffset, otherCount ) => {\n\n\t\t\t\t\t\t\tfor ( let i2 = otherOffset, l2 = otherOffset + otherCount; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\t\t\t\tconst ti2 = otherBvh.resolveTriangleIndex( i2 );\n\t\t\t\t\t\t\t\tsetTriangle( triangle2, 3 * ti2, otherIndex, otherPos );\n\n\t\t\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\t\tconst ti = bvh.resolveTriangleIndex( i );\n\t\t\t\t\t\t\t\t\tsetTriangle( triangle, 3 * ti, index, pos );\n\n\t\t\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// If no bounds tree then we'll just check every triangle.\n\t\t\t\t\tconst triCount = getTriCount( otherGeometry );\n\t\t\t\t\tfor ( let i2 = 0, l2 = triCount; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, 3 * i2, otherIndex, otherPos );\n\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst ti = bvh.resolveTriangleIndex( i );\n\t\t\t\t\t\t\tsetTriangle( triangle, 3 * ti, index, pos );\n\n\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t}\n\n\t);\n\n\tExtendedTrianglePool.releasePrimitive( triangle );\n\tExtendedTrianglePool.releasePrimitive( triangle2 );\n\n\tif ( closestDistance === Infinity ) {\n\n\t\treturn null;\n\n\t}\n\n\tif ( ! target1.point ) {\n\n\t\ttarget1.point = tempTargetDest1.clone();\n\n\t} else {\n\n\t\ttarget1.point.copy( tempTargetDest1 );\n\n\t}\n\n\ttarget1.distance = closestDistance,\n\ttarget1.faceIndex = closestDistanceTriIndex;\n\n\tif ( target2 ) {\n\n\t\tif ( ! target2.point ) target2.point = tempTargetDest2.clone();\n\t\telse target2.point.copy( tempTargetDest2 );\n\t\ttarget2.point.applyMatrix4( tempMatrix );\n\t\ttempTargetDest1.applyMatrix4( tempMatrix );\n\t\ttarget2.distance = tempTargetDest1.sub( target2.point ).length();\n\t\ttarget2.faceIndex = closestDistanceOtherTriIndex;\n\n\t}\n\n\treturn target1;\n\n}\n\nexport { closestPointToGeometry_indirect };\n","import { Box3, Matrix4 } from 'three';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { BOUNDING_DATA_INDEX, COUNT, IS_LEAF, LEFT_NODE, OFFSET, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { PrimitivePool } from '../../utils/PrimitivePool.js';\n\nconst _bufferStack1 = new BufferStack.constructor();\nconst _bufferStack2 = new BufferStack.constructor();\nconst _boxPool = new PrimitivePool( () => new Box3() );\nconst _leftBox1 = new Box3();\nconst _rightBox1 = new Box3();\n\nconst _leftBox2 = new Box3();\nconst _rightBox2 = new Box3();\n\nlet _active = false;\n\nexport function bvhcast( bvh, otherBvh, matrixToLocal, intersectsRanges ) {\n\n\tif ( _active ) {\n\n\t\tthrow new Error( 'MeshBVH: Recursive calls to bvhcast not supported.' );\n\n\t}\n\n\t_active = true;\n\n\tconst roots = bvh._roots;\n\tconst otherRoots = otherBvh._roots;\n\tlet result;\n\tlet offset1 = 0;\n\tlet offset2 = 0;\n\tconst invMat = new Matrix4().copy( matrixToLocal ).invert();\n\n\t// iterate over the first set of roots\n\tfor ( let i = 0, il = roots.length; i < il; i ++ ) {\n\n\t\t_bufferStack1.setBuffer( roots[ i ] );\n\t\toffset2 = 0;\n\n\t\t// prep the initial root box\n\t\tconst localBox = _boxPool.getPrimitive();\n\t\tarrayToBox( BOUNDING_DATA_INDEX( 0 ), _bufferStack1.float32Array, localBox );\n\t\tlocalBox.applyMatrix4( invMat );\n\n\t\t// iterate over the second set of roots\n\t\tfor ( let j = 0, jl = otherRoots.length; j < jl; j ++ ) {\n\n\t\t\t_bufferStack2.setBuffer( otherRoots[ j ] );\n\n\t\t\tresult = _traverse(\n\t\t\t\t0, 0, matrixToLocal, invMat, intersectsRanges,\n\t\t\t\toffset1, offset2, 0, 0,\n\t\t\t\tlocalBox,\n\t\t\t);\n\n\t\t\t_bufferStack2.clearBuffer();\n\t\t\toffset2 += otherRoots[ j ].length;\n\n\t\t\tif ( result ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// release stack info\n\t\t_boxPool.releasePrimitive( localBox );\n\t\t_bufferStack1.clearBuffer();\n\t\toffset1 += roots[ i ].length;\n\n\t\tif ( result ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t_active = false;\n\treturn result;\n\n}\n\nfunction _traverse(\n\tnode1Index32,\n\tnode2Index32,\n\tmatrix2to1,\n\tmatrix1to2,\n\tintersectsRangesFunc,\n\n\t// offsets for ids\n\tnode1IndexByteOffset = 0,\n\tnode2IndexByteOffset = 0,\n\n\t// tree depth\n\tdepth1 = 0,\n\tdepth2 = 0,\n\n\tcurrBox = null,\n\treversed = false,\n\n) {\n\n\t// get the buffer stacks associated with the current indices\n\tlet bufferStack1, bufferStack2;\n\tif ( reversed ) {\n\n\t\tbufferStack1 = _bufferStack2;\n\t\tbufferStack2 = _bufferStack1;\n\n\t} else {\n\n\t\tbufferStack1 = _bufferStack1;\n\t\tbufferStack2 = _bufferStack2;\n\n\t}\n\n\t// get the local instances of the typed buffers\n\tconst\n\t\tfloat32Array1 = bufferStack1.float32Array,\n\t\tuint32Array1 = bufferStack1.uint32Array,\n\t\tuint16Array1 = bufferStack1.uint16Array,\n\t\tfloat32Array2 = bufferStack2.float32Array,\n\t\tuint32Array2 = bufferStack2.uint32Array,\n\t\tuint16Array2 = bufferStack2.uint16Array;\n\n\tconst node1Index16 = node1Index32 * 2;\n\tconst node2Index16 = node2Index32 * 2;\n\tconst isLeaf1 = IS_LEAF( node1Index16, uint16Array1 );\n\tconst isLeaf2 = IS_LEAF( node2Index16, uint16Array2 );\n\tlet result = false;\n\tif ( isLeaf2 && isLeaf1 ) {\n\n\t\t// if both bounds are leaf nodes then fire the callback if the boxes intersect\n\t\tif ( reversed ) {\n\n\t\t\tresult = intersectsRangesFunc(\n\t\t\t\tOFFSET( node2Index32, uint32Array2 ), COUNT( node2Index32 * 2, uint16Array2 ),\n\t\t\t\tOFFSET( node1Index32, uint32Array1 ), COUNT( node1Index32 * 2, uint16Array1 ),\n\t\t\t\tdepth2, node2IndexByteOffset + node2Index32,\n\t\t\t\tdepth1, node1IndexByteOffset + node1Index32,\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tresult = intersectsRangesFunc(\n\t\t\t\tOFFSET( node1Index32, uint32Array1 ), COUNT( node1Index32 * 2, uint16Array1 ),\n\t\t\t\tOFFSET( node2Index32, uint32Array2 ), COUNT( node2Index32 * 2, uint16Array2 ),\n\t\t\t\tdepth1, node1IndexByteOffset + node1Index32,\n\t\t\t\tdepth2, node2IndexByteOffset + node2Index32,\n\t\t\t);\n\n\t\t}\n\n\t} else if ( isLeaf2 ) {\n\n\t\t// SWAP\n\t\t// If we've traversed to the leaf node on the other bvh then we need to swap over\n\t\t// to traverse down the first one\n\n\t\t// get the new box to use\n\t\tconst newBox = _boxPool.getPrimitive();\n\t\tarrayToBox( BOUNDING_DATA_INDEX( node2Index32 ), float32Array2, newBox );\n\t\tnewBox.applyMatrix4( matrix2to1 );\n\n\t\t// get the child bounds to check before traversal\n\t\tconst cl1 = LEFT_NODE( node1Index32 );\n\t\tconst cr1 = RIGHT_NODE( node1Index32, uint32Array1 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cl1 ), float32Array1, _leftBox1 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cr1 ), float32Array1, _rightBox1 );\n\n\t\t// precompute the intersections otherwise the global boxes will be modified during traversal\n\t\tconst intersectCl1 = newBox.intersectsBox( _leftBox1 );\n\t\tconst intersectCr1 = newBox.intersectsBox( _rightBox1 );\n\t\tresult = (\n\t\t\tintersectCl1 && _traverse(\n\t\t\t\tnode2Index32, cl1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\tnode2IndexByteOffset, node1IndexByteOffset, depth2, depth1 + 1,\n\t\t\t\tnewBox, ! reversed,\n\t\t\t)\n\t\t) || (\n\t\t\tintersectCr1 && _traverse(\n\t\t\t\tnode2Index32, cr1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\tnode2IndexByteOffset, node1IndexByteOffset, depth2, depth1 + 1,\n\t\t\t\tnewBox, ! reversed,\n\t\t\t)\n\t\t);\n\n\t\t_boxPool.releasePrimitive( newBox );\n\n\t} else {\n\n\t\t// if neither are leaves then we should swap if one of the children does not\n\t\t// intersect with the current bounds\n\n\t\t// get the child bounds to check\n\t\tconst cl2 = LEFT_NODE( node2Index32 );\n\t\tconst cr2 = RIGHT_NODE( node2Index32, uint32Array2 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cl2 ), float32Array2, _leftBox2 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cr2 ), float32Array2, _rightBox2 );\n\n\t\tconst leftIntersects = currBox.intersectsBox( _leftBox2 );\n\t\tconst rightIntersects = currBox.intersectsBox( _rightBox2 );\n\t\tif ( leftIntersects && rightIntersects ) {\n\n\t\t\t// continue to traverse both children if they both intersect\n\t\t\tresult = _traverse(\n\t\t\t\tnode1Index32, cl2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\tnode1IndexByteOffset, node2IndexByteOffset, depth1, depth2 + 1,\n\t\t\t\tcurrBox, reversed,\n\t\t\t) || _traverse(\n\t\t\t\tnode1Index32, cr2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\tnode1IndexByteOffset, node2IndexByteOffset, depth1, depth2 + 1,\n\t\t\t\tcurrBox, reversed,\n\t\t\t);\n\n\t\t} else if ( leftIntersects ) {\n\n\t\t\tif ( isLeaf1 ) {\n\n\t\t\t\t// if the current box is a leaf then just continue\n\t\t\t\tresult = _traverse(\n\t\t\t\t\tnode1Index32, cl2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\t\tnode1IndexByteOffset, node2IndexByteOffset, depth1, depth2 + 1,\n\t\t\t\t\tcurrBox, reversed,\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// SWAP\n\t\t\t\t// if only one box intersects then we have to swap to the other bvh to continue\n\t\t\t\tconst newBox = _boxPool.getPrimitive();\n\t\t\t\tnewBox.copy( _leftBox2 ).applyMatrix4( matrix2to1 );\n\n\t\t\t\tconst cl1 = LEFT_NODE( node1Index32 );\n\t\t\t\tconst cr1 = RIGHT_NODE( node1Index32, uint32Array1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cl1 ), float32Array1, _leftBox1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cr1 ), float32Array1, _rightBox1 );\n\n\t\t\t\t// precompute the intersections otherwise the global boxes will be modified during traversal\n\t\t\t\tconst intersectCl1 = newBox.intersectsBox( _leftBox1 );\n\t\t\t\tconst intersectCr1 = newBox.intersectsBox( _rightBox1 );\n\t\t\t\tresult = (\n\t\t\t\t\tintersectCl1 && _traverse(\n\t\t\t\t\t\tcl2, cl1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexByteOffset, node1IndexByteOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t) || (\n\t\t\t\t\tintersectCr1 && _traverse(\n\t\t\t\t\t\tcl2, cr1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexByteOffset, node1IndexByteOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\t_boxPool.releasePrimitive( newBox );\n\n\t\t\t}\n\n\t\t} else if ( rightIntersects ) {\n\n\t\t\tif ( isLeaf1 ) {\n\n\t\t\t\t// if the current box is a leaf then just continue\n\t\t\t\tresult = _traverse(\n\t\t\t\t\tnode1Index32, cr2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\t\tnode1IndexByteOffset, node2IndexByteOffset, depth1, depth2 + 1,\n\t\t\t\t\tcurrBox, reversed,\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// SWAP\n\t\t\t\t// if only one box intersects then we have to swap to the other bvh to continue\n\t\t\t\tconst newBox = _boxPool.getPrimitive();\n\t\t\t\tnewBox.copy( _rightBox2 ).applyMatrix4( matrix2to1 );\n\n\t\t\t\tconst cl1 = LEFT_NODE( node1Index32 );\n\t\t\t\tconst cr1 = RIGHT_NODE( node1Index32, uint32Array1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cl1 ), float32Array1, _leftBox1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cr1 ), float32Array1, _rightBox1 );\n\n\t\t\t\t// precompute the intersections otherwise the global boxes will be modified during traversal\n\t\t\t\tconst intersectCl1 = newBox.intersectsBox( _leftBox1 );\n\t\t\t\tconst intersectCr1 = newBox.intersectsBox( _rightBox1 );\n\t\t\t\tresult = (\n\t\t\t\t\tintersectCl1 && _traverse(\n\t\t\t\t\t\tcr2, cl1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexByteOffset, node1IndexByteOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t) || (\n\t\t\t\t\tintersectCr1 && _traverse(\n\t\t\t\t\t\tcr2, cr1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexByteOffset, node1IndexByteOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\t_boxPool.releasePrimitive( newBox );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n","import { BufferAttribute, Box3, FrontSide } from 'three';\nimport { CENTER, BYTES_PER_NODE, IS_LEAFNODE_FLAG, SKIP_GENERATION } from './Constants.js';\nimport { buildPackedTree } from './build/buildTree.js';\nimport { OrientedBox } from '../math/OrientedBox.js';\nimport { arrayToBox } from '../utils/ArrayBoxUtilities.js';\nimport { ExtendedTrianglePool } from '../utils/ExtendedTrianglePool.js';\nimport { shapecast } from './cast/shapecast.js';\nimport { closestPointToPoint } from './cast/closestPointToPoint.js';\n\nimport { iterateOverTriangles } from './utils/iterationUtils.generated.js';\nimport { refit } from './cast/refit.generated.js';\nimport { raycast } from './cast/raycast.generated.js';\nimport { raycastFirst } from './cast/raycastFirst.generated.js';\nimport { intersectsGeometry } from './cast/intersectsGeometry.generated.js';\nimport { closestPointToGeometry } from './cast/closestPointToGeometry.generated.js';\n\nimport { iterateOverTriangles_indirect } from './utils/iterationUtils_indirect.generated.js';\nimport { refit_indirect } from './cast/refit_indirect.generated.js';\nimport { raycast_indirect } from './cast/raycast_indirect.generated.js';\nimport { raycastFirst_indirect } from './cast/raycastFirst_indirect.generated.js';\nimport { intersectsGeometry_indirect } from './cast/intersectsGeometry_indirect.generated.js';\nimport { closestPointToGeometry_indirect } from './cast/closestPointToGeometry_indirect.generated.js';\nimport { isSharedArrayBufferSupported } from '../utils/BufferUtils.js';\nimport { setTriangle } from '../utils/TriangleUtilities.js';\nimport { bvhcast } from './cast/bvhcast.js';\n\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst tempBox = /* @__PURE__ */ new Box3();\nexport const DEFAULT_OPTIONS = {\n\tstrategy: CENTER,\n\tmaxDepth: 40,\n\tmaxLeafTris: 10,\n\tuseSharedArrayBuffer: false,\n\tsetBoundingBox: true,\n\tonProgress: null,\n\tindirect: false,\n\tverbose: true,\n\trange: null\n};\n\nexport class MeshBVH {\n\n\tstatic serialize( bvh, options = {} ) {\n\n\t\toptions = {\n\t\t\tcloneBuffers: true,\n\t\t\t...options,\n\t\t};\n\n\t\tconst geometry = bvh.geometry;\n\t\tconst rootData = bvh._roots;\n\t\tconst indirectBuffer = bvh._indirectBuffer;\n\t\tconst indexAttribute = geometry.getIndex();\n\t\tlet result;\n\t\tif ( options.cloneBuffers ) {\n\n\t\t\tresult = {\n\t\t\t\troots: rootData.map( root => root.slice() ),\n\t\t\t\tindex: indexAttribute ? indexAttribute.array.slice() : null,\n\t\t\t\tindirectBuffer: indirectBuffer ? indirectBuffer.slice() : null,\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tresult = {\n\t\t\t\troots: rootData,\n\t\t\t\tindex: indexAttribute ? indexAttribute.array : null,\n\t\t\t\tindirectBuffer: indirectBuffer,\n\t\t\t};\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tstatic deserialize( data, geometry, options = {} ) {\n\n\t\toptions = {\n\t\t\tsetIndex: true,\n\t\t\tindirect: Boolean( data.indirectBuffer ),\n\t\t\t...options,\n\t\t};\n\n\t\tconst { index, roots, indirectBuffer } = data;\n\t\tconst bvh = new MeshBVH( geometry, { ...options, [ SKIP_GENERATION ]: true } );\n\t\tbvh._roots = roots;\n\t\tbvh._indirectBuffer = indirectBuffer || null;\n\n\t\tif ( options.setIndex ) {\n\n\t\t\tconst indexAttribute = geometry.getIndex();\n\t\t\tif ( indexAttribute === null ) {\n\n\t\t\t\tconst newIndex = new BufferAttribute( data.index, 1, false );\n\t\t\t\tgeometry.setIndex( newIndex );\n\n\t\t\t} else if ( indexAttribute.array !== index ) {\n\n\t\t\t\tindexAttribute.array.set( index );\n\t\t\t\tindexAttribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bvh;\n\n\t}\n\n\tget indirect() {\n\n\t\treturn ! ! this._indirectBuffer;\n\n\t}\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tif ( ! geometry.isBufferGeometry ) {\n\n\t\t\tthrow new Error( 'MeshBVH: Only BufferGeometries are supported.' );\n\n\t\t} else if ( geometry.index && geometry.index.isInterleavedBufferAttribute ) {\n\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.' );\n\n\t\t}\n\n\t\t// default options\n\t\toptions = Object.assign( {\n\n\t\t\t...DEFAULT_OPTIONS,\n\n\t\t\t// undocumented options\n\n\t\t\t// Whether to skip generating the tree. Used for deserialization.\n\t\t\t[ SKIP_GENERATION ]: false,\n\n\t\t}, options );\n\n\t\tif ( options.useSharedArrayBuffer && ! isSharedArrayBufferSupported() ) {\n\n\t\t\tthrow new Error( 'MeshBVH: SharedArrayBuffer is not available.' );\n\n\t\t}\n\n\t\t// retain references to the geometry so we can use them it without having to\n\t\t// take a geometry reference in every function.\n\t\tthis.geometry = geometry;\n\t\tthis._roots = null;\n\t\tthis._indirectBuffer = null;\n\t\tif ( ! options[ SKIP_GENERATION ] ) {\n\n\t\t\tbuildPackedTree( this, options );\n\n\t\t\tif ( ! geometry.boundingBox && options.setBoundingBox ) {\n\n\t\t\t\tgeometry.boundingBox = this.getBoundingBox( new Box3() );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.resolveTriangleIndex = options.indirect ? i => this._indirectBuffer[ i ] : i => i;\n\n\t}\n\n\trefit( nodeIndices = null ) {\n\n\t\tconst refitFunc = this.indirect ? refit_indirect : refit;\n\t\treturn refitFunc( this, nodeIndices );\n\n\t}\n\n\ttraverse( callback, rootIndex = 0 ) {\n\n\t\tconst buffer = this._roots[ rootIndex ];\n\t\tconst uint32Array = new Uint32Array( buffer );\n\t\tconst uint16Array = new Uint16Array( buffer );\n\t\t_traverse( 0 );\n\n\t\tfunction _traverse( node32Index, depth = 0 ) {\n\n\t\t\tconst node16Index = node32Index * 2;\n\t\t\tconst isLeaf = uint16Array[ node16Index + 15 ] === IS_LEAFNODE_FLAG;\n\t\t\tif ( isLeaf ) {\n\n\t\t\t\tconst offset = uint32Array[ node32Index + 6 ];\n\t\t\t\tconst count = uint16Array[ node16Index + 14 ];\n\t\t\t\tcallback( depth, isLeaf, new Float32Array( buffer, node32Index * 4, 6 ), offset, count );\n\n\t\t\t} else {\n\n\t\t\t\t// TODO: use node functions here\n\t\t\t\tconst left = node32Index + BYTES_PER_NODE / 4;\n\t\t\t\tconst right = uint32Array[ node32Index + 6 ];\n\t\t\t\tconst splitAxis = uint32Array[ node32Index + 7 ];\n\t\t\t\tconst stopTraversal = callback( depth, isLeaf, new Float32Array( buffer, node32Index * 4, 6 ), splitAxis );\n\n\t\t\t\tif ( ! stopTraversal ) {\n\n\t\t\t\t\t_traverse( left, depth + 1 );\n\t\t\t\t\t_traverse( right, depth + 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/* Core Cast Functions */\n\traycast( ray, materialOrSide = FrontSide, near = 0, far = Infinity ) {\n\n\t\tconst roots = this._roots;\n\t\tconst geometry = this.geometry;\n\t\tconst intersects = [];\n\t\tconst isMaterial = materialOrSide.isMaterial;\n\t\tconst isArrayMaterial = Array.isArray( materialOrSide );\n\n\t\tconst groups = geometry.groups;\n\t\tconst side = isMaterial ? materialOrSide.side : materialOrSide;\n\t\tconst raycastFunc = this.indirect ? raycast_indirect : raycast;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tconst materialSide = isArrayMaterial ? materialOrSide[ groups[ i ].materialIndex ].side : side;\n\t\t\tconst startCount = intersects.length;\n\n\t\t\traycastFunc( this, i, materialSide, ray, intersects, near, far );\n\n\t\t\tif ( isArrayMaterial ) {\n\n\t\t\t\tconst materialIndex = groups[ i ].materialIndex;\n\t\t\t\tfor ( let j = startCount, jl = intersects.length; j < jl; j ++ ) {\n\n\t\t\t\t\tintersects[ j ].face.materialIndex = materialIndex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn intersects;\n\n\t}\n\n\traycastFirst( ray, materialOrSide = FrontSide, near = 0, far = Infinity ) {\n\n\t\tconst roots = this._roots;\n\t\tconst geometry = this.geometry;\n\t\tconst isMaterial = materialOrSide.isMaterial;\n\t\tconst isArrayMaterial = Array.isArray( materialOrSide );\n\n\t\tlet closestResult = null;\n\n\t\tconst groups = geometry.groups;\n\t\tconst side = isMaterial ? materialOrSide.side : materialOrSide;\n\t\tconst raycastFirstFunc = this.indirect ? raycastFirst_indirect : raycastFirst;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tconst materialSide = isArrayMaterial ? materialOrSide[ groups[ i ].materialIndex ].side : side;\n\t\t\tconst result = raycastFirstFunc( this, i, materialSide, ray, near, far );\n\t\t\tif ( result != null && ( closestResult == null || result.distance < closestResult.distance ) ) {\n\n\t\t\t\tclosestResult = result;\n\t\t\t\tif ( isArrayMaterial ) {\n\n\t\t\t\t\tresult.face.materialIndex = groups[ i ].materialIndex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn closestResult;\n\n\t}\n\n\tintersectsGeometry( otherGeometry, geomToMesh ) {\n\n\t\tlet result = false;\n\t\tconst roots = this._roots;\n\t\tconst intersectsGeometryFunc = this.indirect ? intersectsGeometry_indirect : intersectsGeometry;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tresult = intersectsGeometryFunc( this, i, otherGeometry, geomToMesh );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tshapecast( callbacks ) {\n\n\t\tconst triangle = ExtendedTrianglePool.getPrimitive();\n\t\tconst iterateFunc = this.indirect ? iterateOverTriangles_indirect : iterateOverTriangles;\n\t\tlet {\n\t\t\tboundsTraverseOrder,\n\t\t\tintersectsBounds,\n\t\t\tintersectsRange,\n\t\t\tintersectsTriangle,\n\t\t} = callbacks;\n\n\t\t// wrap the intersectsRange function\n\t\tif ( intersectsRange && intersectsTriangle ) {\n\n\t\t\tconst originalIntersectsRange = intersectsRange;\n\t\t\tintersectsRange = ( offset, count, contained, depth, nodeIndex ) => {\n\n\t\t\t\tif ( ! originalIntersectsRange( offset, count, contained, depth, nodeIndex ) ) {\n\n\t\t\t\t\treturn iterateFunc( offset, count, this, intersectsTriangle, contained, depth, triangle );\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t};\n\n\t\t} else if ( ! intersectsRange ) {\n\n\t\t\tif ( intersectsTriangle ) {\n\n\t\t\t\tintersectsRange = ( offset, count, contained, depth ) => {\n\n\t\t\t\t\treturn iterateFunc( offset, count, this, intersectsTriangle, contained, depth, triangle );\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tintersectsRange = ( offset, count, contained ) => {\n\n\t\t\t\t\treturn contained;\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\t// run shapecast\n\t\tlet result = false;\n\t\tlet byteOffset = 0;\n\t\tconst roots = this._roots;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tconst root = roots[ i ];\n\t\t\tresult = shapecast( this, i, intersectsBounds, intersectsRange, boundsTraverseOrder, byteOffset );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tbyteOffset += root.byteLength;\n\n\t\t}\n\n\t\tExtendedTrianglePool.releasePrimitive( triangle );\n\n\t\treturn result;\n\n\t}\n\n\tbvhcast( otherBvh, matrixToLocal, callbacks ) {\n\n\t\tlet {\n\t\t\tintersectsRanges,\n\t\t\tintersectsTriangles,\n\t\t} = callbacks;\n\n\t\tconst triangle1 = ExtendedTrianglePool.getPrimitive();\n\t\tconst indexAttr1 = this.geometry.index;\n\t\tconst positionAttr1 = this.geometry.attributes.position;\n\t\tconst assignTriangle1 = this.indirect ?\n\t\t\ti1 => {\n\n\n\t\t\t\tconst ti = this.resolveTriangleIndex( i1 );\n\t\t\t\tsetTriangle( triangle1, ti * 3, indexAttr1, positionAttr1 );\n\n\t\t\t} :\n\t\t\ti1 => {\n\n\t\t\t\tsetTriangle( triangle1, i1 * 3, indexAttr1, positionAttr1 );\n\n\t\t\t};\n\n\t\tconst triangle2 = ExtendedTrianglePool.getPrimitive();\n\t\tconst indexAttr2 = otherBvh.geometry.index;\n\t\tconst positionAttr2 = otherBvh.geometry.attributes.position;\n\t\tconst assignTriangle2 = otherBvh.indirect ?\n\t\t\ti2 => {\n\n\t\t\t\tconst ti2 = otherBvh.resolveTriangleIndex( i2 );\n\t\t\t\tsetTriangle( triangle2, ti2 * 3, indexAttr2, positionAttr2 );\n\n\t\t\t} :\n\t\t\ti2 => {\n\n\t\t\t\tsetTriangle( triangle2, i2 * 3, indexAttr2, positionAttr2 );\n\n\t\t\t};\n\n\t\t// generate triangle callback if needed\n\t\tif ( intersectsTriangles ) {\n\n\t\t\tconst iterateOverDoubleTriangles = ( offset1, count1, offset2, count2, depth1, index1, depth2, index2 ) => {\n\n\t\t\t\tfor ( let i2 = offset2, l2 = offset2 + count2; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\tassignTriangle2( i2 );\n\n\t\t\t\t\ttriangle2.a.applyMatrix4( matrixToLocal );\n\t\t\t\t\ttriangle2.b.applyMatrix4( matrixToLocal );\n\t\t\t\t\ttriangle2.c.applyMatrix4( matrixToLocal );\n\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\tfor ( let i1 = offset1, l1 = offset1 + count1; i1 < l1; i1 ++ ) {\n\n\t\t\t\t\t\tassignTriangle1( i1 );\n\n\t\t\t\t\t\ttriangle1.needsUpdate = true;\n\n\t\t\t\t\t\tif ( intersectsTriangles( triangle1, triangle2, i1, i2, depth1, index1, depth2, index2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t\tif ( intersectsRanges ) {\n\n\t\t\t\tconst originalIntersectsRanges = intersectsRanges;\n\t\t\t\tintersectsRanges = function ( offset1, count1, offset2, count2, depth1, index1, depth2, index2 ) {\n\n\t\t\t\t\tif ( ! originalIntersectsRanges( offset1, count1, offset2, count2, depth1, index1, depth2, index2 ) ) {\n\n\t\t\t\t\t\treturn iterateOverDoubleTriangles( offset1, count1, offset2, count2, depth1, index1, depth2, index2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tintersectsRanges = iterateOverDoubleTriangles;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bvhcast( this, otherBvh, matrixToLocal, intersectsRanges );\n\n\t}\n\n\n\t/* Derived Cast Functions */\n\tintersectsBox( box, boxToMesh ) {\n\n\t\tobb.set( box.min, box.max, boxToMesh );\n\t\tobb.needsUpdate = true;\n\n\t\treturn this.shapecast(\n\t\t\t{\n\t\t\t\tintersectsBounds: box => obb.intersectsBox( box ),\n\t\t\t\tintersectsTriangle: tri => obb.intersectsTriangle( tri )\n\t\t\t}\n\t\t);\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.shapecast(\n\t\t\t{\n\t\t\t\tintersectsBounds: box => sphere.intersectsBox( box ),\n\t\t\t\tintersectsTriangle: tri => tri.intersectsSphere( sphere )\n\t\t\t}\n\t\t);\n\n\t}\n\n\tclosestPointToGeometry( otherGeometry, geometryToBvh, target1 = { }, target2 = { }, minThreshold = 0, maxThreshold = Infinity ) {\n\n\t\tconst closestPointToGeometryFunc = this.indirect ? closestPointToGeometry_indirect : closestPointToGeometry;\n\t\treturn closestPointToGeometryFunc(\n\t\t\tthis,\n\t\t\totherGeometry,\n\t\t\tgeometryToBvh,\n\t\t\ttarget1,\n\t\t\ttarget2,\n\t\t\tminThreshold,\n\t\t\tmaxThreshold,\n\t\t);\n\n\t}\n\n\tclosestPointToPoint( point, target = { }, minThreshold = 0, maxThreshold = Infinity ) {\n\n\t\treturn closestPointToPoint(\n\t\t\tthis,\n\t\t\tpoint,\n\t\t\ttarget,\n\t\t\tminThreshold,\n\t\t\tmaxThreshold,\n\t\t);\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\ttarget.makeEmpty();\n\n\t\tconst roots = this._roots;\n\t\troots.forEach( buffer => {\n\n\t\t\tarrayToBox( 0, new Float32Array( buffer ), tempBox );\n\t\t\ttarget.union( tempBox );\n\n\t\t} );\n\n\t\treturn target;\n\n\t}\n\n}\n","export function isSharedArrayBufferSupported() {\n\n\treturn typeof SharedArrayBuffer !== 'undefined';\n\n}\n\nexport function convertToBufferType( array, BufferConstructor ) {\n\n\tif ( array === null ) {\n\n\t\treturn array;\n\n\t} else if ( array.buffer ) {\n\n\t\tconst buffer = array.buffer;\n\t\tif ( buffer.constructor === BufferConstructor ) {\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tconst ArrayConstructor = array.constructor;\n\t\tconst result = new ArrayConstructor( new BufferConstructor( buffer.byteLength ) );\n\t\tresult.set( array );\n\t\treturn result;\n\n\t} else {\n\n\t\tif ( array.constructor === BufferConstructor ) {\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tconst result = new BufferConstructor( array.byteLength );\n\t\tnew Uint8Array( result ).set( new Uint8Array( array ) );\n\t\treturn result;\n\n\t}\n\n}\n","// converts the given BVH raycast intersection to align with the three.js raycast\n// structure (include object, world space distance and point).\nexport function convertRaycastIntersect( hit, object, raycaster ) {\n\n\tif ( hit === null ) {\n\n\t\treturn null;\n\n\t}\n\n\thit.point.applyMatrix4( object.matrixWorld );\n\thit.distance = hit.point.distanceTo( raycaster.ray.origin );\n\thit.object = object;\n\n\treturn hit;\n\n}\n","import { Ray, Matrix4, Mesh, Vector3, Sphere, BatchedMesh, REVISION } from 'three';\nimport { convertRaycastIntersect } from './GeometryRayIntersectUtilities.js';\nimport { MeshBVH } from '../core/MeshBVH.js';\n\nconst IS_REVISION_166 = parseInt( REVISION ) >= 166;\nconst ray = /* @__PURE__ */ new Ray();\nconst direction = /* @__PURE__ */ new Vector3();\nconst tmpInverseMatrix = /* @__PURE__ */ new Matrix4();\nconst origMeshRaycastFunc = Mesh.prototype.raycast;\nconst origBatchedRaycastFunc = BatchedMesh.prototype.raycast;\nconst _worldScale = /* @__PURE__ */ new Vector3();\nconst _mesh = /* @__PURE__ */ new Mesh();\nconst _batchIntersects = [];\n\nexport function acceleratedRaycast( raycaster, intersects ) {\n\n\tif ( this.isBatchedMesh ) {\n\n\t\tacceleratedBatchedMeshRaycast.call( this, raycaster, intersects );\n\n\t} else {\n\n\t\tacceleratedMeshRaycast.call( this, raycaster, intersects );\n\n\t}\n\n}\n\nfunction acceleratedBatchedMeshRaycast( raycaster, intersects ) {\n\n\tif ( this.boundsTrees ) {\n\n\t\t// TODO: remove use of geometry info, instance info when r170 is minimum version\n\t\tconst boundsTrees = this.boundsTrees;\n\t\tconst drawInfo = this._drawInfo || this._instanceInfo;\n\t\tconst drawRanges = this._drawRanges || this._geometryInfo;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\t_mesh.material = this.material;\n\t\t_mesh.geometry = this.geometry;\n\n\t\tconst oldBoundsTree = _mesh.geometry.boundsTree;\n\t\tconst oldDrawRange = _mesh.geometry.drawRange;\n\n\t\tif ( _mesh.geometry.boundingSphere === null ) {\n\n\t\t\t_mesh.geometry.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\t// TODO: provide new method to get instances count instead of 'drawInfo.length'\n\t\tfor ( let i = 0, l = drawInfo.length; i < l; i ++ ) {\n\n\t\t\tif ( ! this.getVisibleAt( i ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// TODO: use getGeometryIndex\n\t\t\tconst geometryId = drawInfo[ i ].geometryIndex;\n\n\t\t\t_mesh.geometry.boundsTree = boundsTrees[ geometryId ];\n\n\t\t\tthis.getMatrixAt( i, _mesh.matrixWorld ).premultiply( matrixWorld );\n\n\t\t\tif ( ! _mesh.geometry.boundsTree ) {\n\n\t\t\t\tthis.getBoundingBoxAt( geometryId, _mesh.geometry.boundingBox );\n\t\t\t\tthis.getBoundingSphereAt( geometryId, _mesh.geometry.boundingSphere );\n\n\t\t\t\tconst drawRange = drawRanges[ geometryId ];\n\t\t\t\t_mesh.geometry.setDrawRange( drawRange.start, drawRange.count );\n\n\t\t\t}\n\n\t\t\t_mesh.raycast( raycaster, _batchIntersects );\n\n\t\t\tfor ( let j = 0, l = _batchIntersects.length; j < l; j ++ ) {\n\n\t\t\t\tconst intersect = _batchIntersects[ j ];\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersect.batchId = i;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_batchIntersects.length = 0;\n\n\t\t}\n\n\t\t_mesh.geometry.boundsTree = oldBoundsTree;\n\t\t_mesh.geometry.drawRange = oldDrawRange;\n\t\t_mesh.material = null;\n\t\t_mesh.geometry = null;\n\n\t} else {\n\n\t\torigBatchedRaycastFunc.call( this, raycaster, intersects );\n\n\t}\n\n}\n\nfunction acceleratedMeshRaycast( raycaster, intersects ) {\n\n\tif ( this.geometry.boundsTree ) {\n\n\t\tif ( this.material === undefined ) return;\n\n\t\ttmpInverseMatrix.copy( this.matrixWorld ).invert();\n\t\tray.copy( raycaster.ray ).applyMatrix4( tmpInverseMatrix );\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\t\tdirection.copy( ray.direction ).multiply( _worldScale );\n\n\t\tconst scaleFactor = direction.length();\n\t\tconst near = raycaster.near / scaleFactor;\n\t\tconst far = raycaster.far / scaleFactor;\n\n\t\tconst bvh = this.geometry.boundsTree;\n\t\tif ( raycaster.firstHitOnly === true ) {\n\n\t\t\tconst hit = convertRaycastIntersect( bvh.raycastFirst( ray, this.material, near, far ), this, raycaster );\n\t\t\tif ( hit ) {\n\n\t\t\t\tintersects.push( hit );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst hits = bvh.raycast( ray, this.material, near, far );\n\t\t\tfor ( let i = 0, l = hits.length; i < l; i ++ ) {\n\n\t\t\t\tconst hit = convertRaycastIntersect( hits[ i ], this, raycaster );\n\t\t\t\tif ( hit ) {\n\n\t\t\t\t\tintersects.push( hit );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\torigMeshRaycastFunc.call( this, raycaster, intersects );\n\n\t}\n\n}\n\nexport function computeBoundsTree( options = {} ) {\n\n\tthis.boundsTree = new MeshBVH( this, options );\n\treturn this.boundsTree;\n\n}\n\nexport function disposeBoundsTree() {\n\n\tthis.boundsTree = null;\n\n}\n\nexport function computeBatchedBoundsTree( index = - 1, options = {} ) {\n\n\tif ( ! IS_REVISION_166 ) {\n\n\t\tthrow new Error( 'BatchedMesh: Three r166+ is required to compute bounds trees.' );\n\n\t}\n\n\tif ( options.indirect ) {\n\n\t\tconsole.warn( '\"Indirect\" is set to false because it is not supported for BatchedMesh.' );\n\n\t}\n\n\toptions = {\n\t\t...options,\n\t\tindirect: false,\n\t\trange: null\n\t};\n\n\tconst drawRanges = this._drawRanges || this._geometryInfo;\n\tconst geometryCount = this._geometryCount;\n\tif ( ! this.boundsTrees ) {\n\n\t\tthis.boundsTrees = new Array( geometryCount ).fill( null );\n\n\t}\n\n\tconst boundsTrees = this.boundsTrees;\n\twhile ( boundsTrees.length < geometryCount ) {\n\n\t\tboundsTrees.push( null );\n\n\t}\n\n\tif ( index < 0 ) {\n\n\t\tfor ( let i = 0; i < geometryCount; i ++ ) {\n\n\t\t\toptions.range = drawRanges[ i ];\n\t\t\tboundsTrees[ i ] = new MeshBVH( this.geometry, options );\n\n\t\t}\n\n\t\treturn boundsTrees;\n\n\t} else {\n\n\t\tif ( index < drawRanges.length ) {\n\n\t\t\toptions.range = drawRanges[ index ];\n\t\t\tboundsTrees[ index ] = new MeshBVH( this.geometry, options );\n\n\t\t}\n\n\t\treturn boundsTrees[ index ] || null;\n\n\t}\n\n}\n\nexport function disposeBatchedBoundsTree( index = - 1 ) {\n\n\tif ( index < 0 ) {\n\n\t\tthis.boundsTrees.fill( null );\n\n\t} else {\n\n\t\tif ( index < this.boundsTree.length ) {\n\n\t\t\tthis.boundsTrees[ index ] = null;\n\n\t\t}\n\n\t}\n\n}\n","/** 碰撞检测插件 */\r\nimport * as THREE from 'three';\r\nimport { acceleratedRaycast, computeBoundsTree, disposeBoundsTree } from 'three-mesh-bvh';\r\n\r\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\r\nTHREE.BufferGeometry.prototype.computeBoundsTree = computeBoundsTree;\r\nTHREE.BufferGeometry.prototype.disposeBoundsTree = disposeBoundsTree;\r\n\r\ninterface CameraContainer extends THREE.Mesh<THREE.SphereGeometry, THREE.MeshStandardMaterial, THREE.Object3DEventMap> {\r\n    /**是否需要被射线拾取忽略 */\r\n    needIgnore?: boolean\r\n}\r\n\r\ninterface SphereInfo {\r\n    mesh: THREE.Sphere,\r\n    radius: number\r\n}\r\n\r\nexport interface HitInfo {\r\n    name: string,\r\n    radius: number\r\n}\r\n\r\nexport default function useMeshBvh() {\r\n    let cameraSphere: THREE.Mesh, targetMeshArray = [] as THREE.Object3D<THREE.Object3DEventMap>[]\r\n    let isFirstHist = false\r\n\r\n    function getBoundsTree(scene: THREE.Scene, targetMeshName: string) {\r\n        const targetMesh = scene.getObjectByName(targetMeshName)\r\n        if (!targetMesh) {\r\n            console.log('getBoundsTree()未找到目标', targetMeshName);\r\n            return\r\n        }\r\n\r\n        if (Object.hasOwn(targetMesh, 'isMesh')) {\r\n            const mesh = targetMesh as THREE.Mesh\r\n            mesh.geometry.computeBoundsTree()\r\n            targetMeshArray.push(mesh)\r\n        }\r\n    }\r\n\r\n    function addSphereToCamera(scene: THREE.Scene, camera: THREE.Camera) {\r\n        const cameraGroup = new THREE.Group().add(camera)\r\n        cameraGroup.name = 'cameraGroup'\r\n\r\n        const shapeMaterial = new THREE.MeshStandardMaterial({\r\n            metalness: 0.1,\r\n            transparent: true,\r\n            opacity: 0,\r\n            premultipliedAlpha: true\r\n        });\r\n        const sphere: CameraContainer = new THREE.Mesh(new THREE.SphereGeometry(1, 50, 50), shapeMaterial);\r\n        sphere.needIgnore = true\r\n        cameraGroup.add(sphere)\r\n        cameraSphere = sphere\r\n\r\n        scene.add(cameraGroup)\r\n        console.log('addSphereToCamera', scene)\r\n    }\r\n\r\n    function removeCameraSphere(scene: THREE.Scene) {\r\n        const cameraGroup = scene.getObjectByName('cameraGroup')\r\n        if (cameraGroup) {\r\n            cameraGroup.removeFromParent()\r\n            cameraSphere.geometry.dispose()\r\n        }\r\n    }\r\n\r\n    function checkHit(hitArray: HitInfo[], camera: THREE.Camera, radiusArr: number[]) {\r\n        if (!cameraSphere || !camera) return\r\n\r\n        cameraSphere.position.copy(camera.position)\r\n        if (!isFirstHist) return isFirstHist = true\r\n        for (let i = 0, len = targetMeshArray.length; i < len; i++) {\r\n            const targetMesh = targetMeshArray[i]\r\n            const transformMatrix =\r\n                new THREE.Matrix4()\r\n                    .copy(targetMesh.matrixWorld).invert()\r\n                    .multiply(cameraSphere.matrixWorld);\r\n\r\n            const sphereArr = [] as SphereInfo[]\r\n            radiusArr.forEach(radius => {\r\n                const sphere = new THREE.Sphere(undefined, radius);\r\n                sphere.applyMatrix4(transformMatrix);\r\n                sphereArr.push({\r\n                    mesh: sphere,\r\n                    radius: radius\r\n                })\r\n            })\r\n\r\n            if (Object.hasOwn(targetMesh, 'isMesh')) {\r\n                const mesh = targetMesh as THREE.Mesh;\r\n                sphereArr.forEach(sphere => {\r\n                    if (mesh.geometry.boundsTree) {\r\n                        const hit = mesh.geometry.boundsTree.intersectsSphere(sphere.mesh);\r\n                        let index = hitArray.findIndex((hitInfo) => mesh.name === hitInfo.name && sphere.radius === hitInfo.radius)\r\n                        if (hit && index === -1) {\r\n                            hitArray.push({\r\n                                name: mesh.name,\r\n                                radius: sphere.radius\r\n                            })\r\n                        } else if (!hit && index !== -1) {\r\n                            hitArray.splice(index, 1)\r\n                        }\r\n                        // (cameraSphere.material as MeshStandardMaterial).color.set(hit ? 0xE91E63 : 0x666666);\r\n                        // (cameraSphere.material as MeshStandardMaterial).emissive.set(0xE91E63).multiplyScalar(hit ? 0.25 : 0);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        // console.log('hitArray.length', hitArray);\r\n    }\r\n\r\n    return {\r\n        getBoundsTree,\r\n        addSphereToCamera,\r\n        removeCameraSphere,\r\n        checkHit\r\n    }\r\n}","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tInstancedBufferAttribute,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tVector3,\n} from 'three';\n\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\n\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\n\n\t}\n\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\n\n\t}\n\n\tfunction getAttributeArray( attribute ) {\n\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\n\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\n\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\n\n\t\t\t\tif ( attribute.itemSize > 2 ) {\n\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t\tif ( attribute.array instanceof Float32Array ) {\n\n\t\t\treturn attribute.array;\n\n\t\t}\n\n\t\treturn new Float32Array( attribute.array );\n\n\t}\n\n\t// MikkTSpace algorithm requires non-indexed input.\n\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\n\t// Compute vertex tangents.\n\n\tconst tangents = MikkTSpace.generateTangents(\n\n\t\tgetAttributeArray( _geometry.attributes.position ),\n\t\tgetAttributeArray( _geometry.attributes.normal ),\n\t\tgetAttributeArray( _geometry.attributes.uv )\n\n\t);\n\n\t// Texture coordinate convention of glTF differs from the apparent\n\t// default of the MikkTSpace library; .w component must be flipped.\n\n\tif ( negateSign ) {\n\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\n\n\t\t\ttangents[ i ] *= - 1;\n\n\t\t}\n\n\t}\n\n\t//\n\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\n\n\tif ( geometry !== _geometry ) {\n\n\t\tgeometry.copy( _geometry );\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * @param  {Array<BufferGeometry>} geometries\n * @param  {Boolean} useGroups\n * @return {BufferGeometry}\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {BufferAttribute}\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = - 1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.count * itemSize;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst tupleOffset = offset / itemSize;\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tarray.set( attribute.array, offset );\n\n\t\t}\n\n\t\toffset += attribute.count * itemSize;\n\n\t}\n\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferAttribute}\n * @return {BufferAttribute}\n */\nexport function deepCloneAttribute( attribute ) {\n\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\n\n\t\treturn deinterleaveAttribute( attribute );\n\n\t}\n\n\tif ( attribute.isInstancedBufferAttribute ) {\n\n\t\treturn new InstancedBufferAttribute().copy( attribute );\n\n\t}\n\n\treturn new BufferAttribute().copy( attribute );\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {Array<InterleavedBufferAttribute>}\n */\nfunction interleaveAttributes( attributes ) {\n\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\n\t// a set of InterleavedBufferAttributes for each attribute\n\tlet TypedArray;\n\tlet arrayLength = 0;\n\tlet stride = 0;\n\n\t// calculate the length and type of the interleavedBuffer\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\t\tstride += attribute.itemSize;\n\n\t}\n\n\t// Create the set of buffer attributes\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\n\tlet offset = 0;\n\tconst res = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\n\n\t\tconst attribute = attributes[ j ];\n\t\tconst itemSize = attribute.itemSize;\n\t\tconst count = attribute.count;\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\n\t\tres.push( iba );\n\n\t\toffset += itemSize;\n\n\t\t// Move the data for each attribute into the new interleavedBuffer\n\t\t// at the appropriate offset\n\t\tfor ( let c = 0; c < count; c ++ ) {\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n// returns a new, non-interleaved version of the provided attribute\nexport function deinterleaveAttribute( attribute ) {\n\n\tconst cons = attribute.data.array.constructor;\n\tconst count = attribute.count;\n\tconst itemSize = attribute.itemSize;\n\tconst normalized = attribute.normalized;\n\n\tconst array = new cons( count * itemSize );\n\tlet newAttribute;\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\n\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\n\n\t} else {\n\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\n\n\t\tif ( itemSize >= 2 ) {\n\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 3 ) {\n\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 4 ) {\n\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\n\n\t\t}\n\n\t}\n\n\treturn newAttribute;\n\n}\n\n// deinterleaves all attributes on the geometry\nexport function deinterleaveGeometry( geometry ) {\n\n\tconst attributes = geometry.attributes;\n\tconst morphTargets = geometry.morphTargets;\n\tconst attrMap = new Map();\n\n\tfor ( const key in attributes ) {\n\n\t\tconst attr = attributes[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tattributes[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n\tfor ( const key in morphTargets ) {\n\n\t\tconst attr = morphTargets[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @return {number}\n */\nfunction estimateBytesUsed( geometry ) {\n\n\t// Return the estimated memory used by this geometry in bytes\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n\t// for InterleavedBufferAttributes.\n\tlet mem = 0;\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst attr = geometry.getAttribute( name );\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n\n\t}\n\n\tconst indices = geometry.getIndex();\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n\treturn mem;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} tolerance\n * @return {BufferGeometry}\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new attr.constructor(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\tif ( morphAttributes ) {\n\n\t\t\tif ( ! tmpMorphAttributes[ name ] ) tmpMorphAttributes[ name ] = [];\n\t\t\tmorphAttributes.forEach( ( morphAttr, i ) => {\n\n\t\t\t\tconst array = new morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize );\n\t\t\t\ttmpMorphAttributes[ name ][ i ] = new morphAttr.constructor( array, morphAttr.itemSize, morphAttr.normalized );\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newArray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewArray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttributes ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttributes.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttributes[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new tmpAttribute.constructor(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new tmpMorphAttribute.constructor(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\n * Helpful for Raytracing or Decals.\n * @param {Mesh | Line | Points} object An instance of Mesh, Line or Points.\n * @return {Object} An Object with original position/normal attributes and morphed ones.\n */\nfunction computeMorphedAttributes( object ) {\n\n\tconst _vA = new Vector3();\n\tconst _vB = new Vector3();\n\tconst _vC = new Vector3();\n\n\tconst _tempA = new Vector3();\n\tconst _tempB = new Vector3();\n\tconst _tempC = new Vector3();\n\n\tconst _morphA = new Vector3();\n\tconst _morphB = new Vector3();\n\tconst _morphC = new Vector3();\n\n\tfunction _calculateMorphedAttributeData(\n\t\tobject,\n\t\tattribute,\n\t\tmorphAttribute,\n\t\tmorphTargetsRelative,\n\t\ta,\n\t\tb,\n\t\tc,\n\t\tmodifiedAttributeArray\n\t) {\n\n\t\t_vA.fromBufferAttribute( attribute, a );\n\t\t_vB.fromBufferAttribute( attribute, b );\n\t\t_vC.fromBufferAttribute( attribute, c );\n\n\t\tconst morphInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphAttribute && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\t\t\t_morphB.set( 0, 0, 0 );\n\t\t\t_morphC.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morph = morphAttribute[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_vA.add( _morphA );\n\t\t\t_vB.add( _morphB );\n\t\t\t_vC.add( _morphC );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tobject.applyBoneTransform( a, _vA );\n\t\t\tobject.applyBoneTransform( b, _vB );\n\t\t\tobject.applyBoneTransform( c, _vC );\n\n\t\t}\n\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\n\n\t}\n\n\tconst geometry = object.geometry;\n\tconst material = object.material;\n\n\tlet a, b, c;\n\tconst index = geometry.index;\n\tconst positionAttribute = geometry.attributes.position;\n\tconst morphPosition = geometry.morphAttributes.position;\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\tconst normalAttribute = geometry.attributes.normal;\n\tconst morphNormal = geometry.morphAttributes.position;\n\n\tconst groups = geometry.groups;\n\tconst drawRange = geometry.drawRange;\n\tlet i, j, il, jl;\n\tlet group;\n\tlet start, end;\n\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\n\n\tif ( index !== null ) {\n\n\t\t// indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = index.getX( i );\n\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// non-indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = j;\n\t\t\t\t\tb = j + 1;\n\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\n\n\treturn {\n\n\t\tpositionAttribute: positionAttribute,\n\t\tnormalAttribute: normalAttribute,\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\n\t\tmorphedNormalAttribute: morphedNormalAttribute\n\n\t};\n\n}\n\nfunction mergeGroups( geometry ) {\n\n\tif ( geometry.groups.length === 0 ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\n\t\treturn geometry;\n\n\t}\n\n\tlet groups = geometry.groups;\n\n\t// sort groups by material index\n\n\tgroups = groups.sort( ( a, b ) => {\n\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\n\n\t\treturn a.start - b.start;\n\n\t} );\n\n\t// create index for non-indexed geometries\n\n\tif ( geometry.getIndex() === null ) {\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\t\tconst indices = [];\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\tindices.push( i, i + 1, i + 2 );\n\n\t\t}\n\n\t\tgeometry.setIndex( indices );\n\n\t}\n\n\t// sort index\n\n\tconst index = geometry.getIndex();\n\n\tconst newIndices = [];\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tconst groupStart = group.start;\n\t\tconst groupLength = groupStart + group.count;\n\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\n\n\t\t\tnewIndices.push( index.getX( j ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dispose(); // Required to force buffer recreation\n\tgeometry.setIndex( newIndices );\n\n\t// update groups indices\n\n\tlet start = 0;\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tgroup.start = start;\n\t\tstart += group.count;\n\n\t}\n\n\t// merge groups\n\n\tlet currentGroup = groups[ 0 ];\n\n\tgeometry.groups = [ currentGroup ];\n\n\tfor ( let i = 1; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\n\n\t\t\tcurrentGroup.count += group.count;\n\n\t\t} else {\n\n\t\t\tcurrentGroup = group;\n\t\t\tgeometry.groups.push( currentGroup );\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n\n/**\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\n * faces that meet at an angle greater than the crease angle.\n *\n * @param {BufferGeometry} geometry\n * @param {number} [creaseAngle]\n * @return {BufferGeometry}\n */\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\n\n\tconst creaseDot = Math.cos( creaseAngle );\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\n\n\t// reusable vectors\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\n\tconst tempVec1 = new Vector3();\n\tconst tempVec2 = new Vector3();\n\tconst tempNorm = new Vector3();\n\tconst tempNorm2 = new Vector3();\n\n\t// hashes a vector\n\tfunction hashVertex( v ) {\n\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\n\t\treturn `${x},${y},${z}`;\n\n\t}\n\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\n\t// and returns the original geometry\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\tconst posAttr = resultGeometry.attributes.position;\n\tconst vertexMap = {};\n\n\t// find all the normals shared by commonly located vertices\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\t// add the normal to the map for all vertices\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tif ( ! ( hash in vertexMap ) ) {\n\n\t\t\t\tvertexMap[ hash ] = [];\n\n\t\t\t}\n\n\t\t\tvertexMap[ hash ].push( normal );\n\n\t\t}\n\n\t}\n\n\t// average normals from all vertices that share a common location if they are within the\n\t// provided crease threshold\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\t// get the face normal for this vertex\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\n\n\t\t// average all normals that meet the threshold and set the normal value\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tconst otherNormals = vertexMap[ hash ];\n\t\t\ttempNorm2.set( 0, 0, 0 );\n\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\n\n\t\t\t\tconst otherNorm = otherNormals[ k ];\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\n\n\t\t\t\t\ttempNorm2.add( otherNorm );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttempNorm2.normalize();\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\n\n\t\t}\n\n\t}\n\n\tresultGeometry.setAttribute( 'normal', normAttr );\n\treturn resultGeometry;\n\n}\n\nexport {\n\tcomputeMikkTSpaceTangents,\n\tmergeGeometries,\n\tmergeAttributes,\n\tinterleaveAttributes,\n\testimateBytesUsed,\n\tmergeVertices,\n\ttoTrianglesDrawMode,\n\tcomputeMorphedAttributes,\n\tmergeGroups,\n\ttoCreasedNormals\n};\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tSRGBColorSpace,\n\tInstancedBufferAttribute\n} from 'three';\nimport { toTrianglesDrawMode } from '../utils/BufferGeometryUtils.js';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials dispersion Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\n */\nclass GLTFMaterialsDispersionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: AVIF required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image.\n\t\t\t\timage.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet safariVersion = - 1;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tconst userAgent = navigator.userAgent;\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : - 1;\n\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tfor ( const scene of result.scenes ) {\n\n\t\t\t\t\tscene.updateMatrixWorld();\n\n\t\t\t\t}\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\t// Ignore normalized since we copy from sparse\n\t\t\t\tbufferAttribute.normalized = false;\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute.normalized = normalized;\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( texture, sourceDef );\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.position:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\nexport { GLTFLoader };\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tColorManagement,\n\tFileLoader,\n\tLoader,\n\tLinearSRGBColorSpace,\n\tSRGBColorSpace\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\n\tparse( buffer, onLoad, onError = ()=>{} ) {\n\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace, onError ).catch( onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace, onError = () => {} ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs,\n\t\t\tvertexColorSpace: vertexColorSpace,\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback ).catch( onError );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst result = geometryData.attributes[ i ];\n\t\t\tconst name = result.name;\n\t\t\tconst array = result.array;\n\t\t\tconst itemSize = result.itemSize;\n\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\n\n\t\t\tif ( name === 'color' ) {\n\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\n\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( name, attribute );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\n\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\n\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\n\n\t\tconst _color = new Color();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t_color.fromBufferAttribute( attribute, i );\n\t\t\tColorManagement.toWorkingColorSpace( _color, SRGBColorSpace );\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\n\n\t\t}\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\tif ( this.workerSourceURL !== '' ) {\n\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\n\n\t\t\tif ( attributeName === 'color' ) {\n\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( attributeResult );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n","import {\n\tControls,\n\tEuler,\n\tVector3\n} from 'three';\n\nconst _euler = new Euler( 0, 0, 0, 'YXZ' );\nconst _vector = new Vector3();\n\nconst _changeEvent = { type: 'change' };\nconst _lockEvent = { type: 'lock' };\nconst _unlockEvent = { type: 'unlock' };\n\nconst _PI_2 = Math.PI / 2;\n\nclass PointerLockControls extends Controls {\n\n\tconstructor( camera, domElement = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\tthis.isLocked = false;\n\n\t\t// Set to constrain the pitch of the camera\n\t\t// Range is 0 to Math.PI radians\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\tthis.pointerSpeed = 1.0;\n\n\t\t// event listeners\n\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onPointerlockChange = onPointerlockChange.bind( this );\n\t\tthis._onPointerlockError = onPointerlockError.bind( this );\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect();\n\n\t\t}\n\n\t}\n\n\tconnect() {\n\n\t\tthis.domElement.ownerDocument.addEventListener( 'mousemove', this._onMouseMove );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockchange', this._onPointerlockChange );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockerror', this._onPointerlockError );\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.ownerDocument.removeEventListener( 'mousemove', this._onMouseMove );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockchange', this._onPointerlockChange );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockerror', this._onPointerlockError );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\tgetObject() {\n\n\t\tconsole.warn( 'THREE.PointerLockControls: getObject() has been deprecated. Use controls.object instead.' ); // @deprecated r169\n\n\t\treturn this.object;\n\n\t}\n\n\tgetDirection( v ) {\n\n\t\treturn v.set( 0, 0, - 1 ).applyQuaternion( this.object.quaternion );\n\n\t}\n\n\tmoveForward( distance ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tconst camera = this.object;\n\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\t_vector.crossVectors( camera.up, _vector );\n\n\t\tcamera.position.addScaledVector( _vector, distance );\n\n\t}\n\n\tmoveRight( distance ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\tconst camera = this.object;\n\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( _vector, distance );\n\n\t}\n\n\tlock() {\n\n\t\tthis.domElement.requestPointerLock();\n\n\t}\n\n\tunlock() {\n\n\t\tthis.domElement.ownerDocument.exitPointerLock();\n\n\t}\n\n}\n\n// event listeners\n\nfunction onMouseMove( event ) {\n\n\tif ( this.enabled === false || this.isLocked === false ) return;\n\n\tconst movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\tconst movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\tconst camera = this.object;\n\t_euler.setFromQuaternion( camera.quaternion );\n\n\t_euler.y -= movementX * 0.002 * this.pointerSpeed;\n\t_euler.x -= movementY * 0.002 * this.pointerSpeed;\n\n\t_euler.x = Math.max( _PI_2 - this.maxPolarAngle, Math.min( _PI_2 - this.minPolarAngle, _euler.x ) );\n\n\tcamera.quaternion.setFromEuler( _euler );\n\n\tthis.dispatchEvent( _changeEvent );\n\n}\n\nfunction onPointerlockChange() {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement === this.domElement ) {\n\n\t\tthis.dispatchEvent( _lockEvent );\n\n\t\tthis.isLocked = true;\n\n\t} else {\n\n\t\tthis.dispatchEvent( _unlockEvent );\n\n\t\tthis.isLocked = false;\n\n\t}\n\n}\n\nfunction onPointerlockError() {\n\n\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n}\n\nexport { PointerLockControls };\n","import {\n\tControls,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n// OrbitControls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst _TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nconst _v = new Vector3();\nconst _twoPI = 2 * Math.PI;\n\nconst _STATE = {\n\tNONE: - 1,\n\tROTATE: 0,\n\tDOLLY: 1,\n\tPAN: 2,\n\tTOUCH_ROTATE: 3,\n\tTOUCH_PAN: 4,\n\tTOUCH_DOLLY_PAN: 5,\n\tTOUCH_DOLLY_ROTATE: 6\n};\nconst _EPS = 0.000001;\n\nclass OrbitControls extends Controls {\n\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.state = _STATE.NONE;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// Sets the 3D cursor (similar to Blender), from which the maxTargetRadius takes effect\n\t\tthis.cursor = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// Limit camera target within a spherical area around the cursor\n\t\tthis.minTargetRadius = 0;\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\tthis.zoomToCursor = false;\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t// internals\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastQuaternion = new Quaternion();\n\t\tthis._lastTargetPosition = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tthis._quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tthis._quatInverse = this._quat.clone().invert();\n\n\t\t// current position in spherical coordinates\n\t\tthis._spherical = new Spherical();\n\t\tthis._sphericalDelta = new Spherical();\n\n\t\tthis._scale = 1;\n\t\tthis._panOffset = new Vector3();\n\n\t\tthis._rotateStart = new Vector2();\n\t\tthis._rotateEnd = new Vector2();\n\t\tthis._rotateDelta = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\t\tthis._panDelta = new Vector2();\n\n\t\tthis._dollyStart = new Vector2();\n\t\tthis._dollyEnd = new Vector2();\n\t\tthis._dollyDelta = new Vector2();\n\n\t\tthis._dollyDirection = new Vector3();\n\t\tthis._mouse = new Vector2();\n\t\tthis._performCursorZoom = false;\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\tthis._controlActive = false;\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\n\t\tthis._interceptControlDown = interceptControlDown.bind( this );\n\t\tthis._interceptControlUp = interceptControlUp.bind( this );\n\n\t\t//\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect();\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\tconnect() {\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.addEventListener( 'keydown', this._interceptControlDown, { passive: true, capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.stopListenToKeyEvents();\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.removeEventListener( 'keydown', this._interceptControlDown, { capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\tgetPolarAngle() {\n\n\t\treturn this._spherical.phi;\n\n\t}\n\n\tgetAzimuthalAngle() {\n\n\t\treturn this._spherical.theta;\n\n\t}\n\n\tgetDistance() {\n\n\t\treturn this.object.position.distanceTo( this.target );\n\n\t}\n\n\tlistenToKeyEvents( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', this._onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t}\n\n\tstopListenToKeyEvents() {\n\n\t\tif ( this._domElementKeyEvents !== null ) {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', this._onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t}\n\n\t}\n\n\tsaveState() {\n\n\t\tthis.target0.copy( this.target );\n\t\tthis.position0.copy( this.object.position );\n\t\tthis.zoom0 = this.object.zoom;\n\n\t}\n\n\treset() {\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis.update();\n\n\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tupdate( deltaTime = null ) {\n\n\t\tconst position = this.object.position;\n\n\t\t_v.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t_v.applyQuaternion( this._quat );\n\n\t\t// angle from z-axis around y-axis\n\t\tthis._spherical.setFromVector3( _v );\n\n\t\tif ( this.autoRotate && this.state === _STATE.NONE ) {\n\n\t\t\tthis._rotateLeft( this._getAutoRotationAngle( deltaTime ) );\n\n\t\t}\n\n\t\tif ( this.enableDamping ) {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta * this.dampingFactor;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi * this.dampingFactor;\n\n\t\t} else {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi;\n\n\t\t}\n\n\t\t// restrict theta to be between desired limits\n\n\t\tlet min = this.minAzimuthAngle;\n\t\tlet max = this.maxAzimuthAngle;\n\n\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\tif ( min < - Math.PI ) min += _twoPI; else if ( min > Math.PI ) min -= _twoPI;\n\n\t\t\tif ( max < - Math.PI ) max += _twoPI; else if ( max > Math.PI ) max -= _twoPI;\n\n\t\t\tif ( min <= max ) {\n\n\t\t\t\tthis._spherical.theta = Math.max( min, Math.min( max, this._spherical.theta ) );\n\n\t\t\t} else {\n\n\t\t\t\tthis._spherical.theta = ( this._spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\tMath.max( min, this._spherical.theta ) :\n\t\t\t\t\tMath.min( max, this._spherical.theta );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restrict phi to be between desired limits\n\t\tthis._spherical.phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, this._spherical.phi ) );\n\n\t\tthis._spherical.makeSafe();\n\n\n\t\t// move target to panned location\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis.target.addScaledVector( this._panOffset, this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis.target.add( this._panOffset );\n\n\t\t}\n\n\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\tthis.target.sub( this.cursor );\n\t\tthis.target.clampLength( this.minTargetRadius, this.maxTargetRadius );\n\t\tthis.target.add( this.cursor );\n\n\t\tlet zoomChanged = false;\n\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t// we adjust zoom later in these cases\n\t\tif ( this.zoomToCursor && this._performCursorZoom || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius );\n\n\t\t} else {\n\n\t\t\tconst prevRadius = this._spherical.radius;\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius * this._scale );\n\t\t\tzoomChanged = prevRadius != this._spherical.radius;\n\n\t\t}\n\n\t\t_v.setFromSpherical( this._spherical );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t_v.applyQuaternion( this._quatInverse );\n\n\t\tposition.copy( this.target ).add( _v );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis._sphericalDelta.theta *= ( 1 - this.dampingFactor );\n\t\t\tthis._sphericalDelta.phi *= ( 1 - this.dampingFactor );\n\n\t\t\tthis._panOffset.multiplyScalar( 1 - this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis._sphericalDelta.set( 0, 0, 0 );\n\n\t\t\tthis._panOffset.set( 0, 0, 0 );\n\n\t\t}\n\n\t\t// adjust camera position\n\t\tif ( this.zoomToCursor && this._performCursorZoom ) {\n\n\t\t\tlet newRadius = null;\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t// this method avoids floating point error\n\t\t\t\tconst prevRadius = _v.length();\n\t\t\t\tnewRadius = this._clampDistance( prevRadius * this._scale );\n\n\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\tthis.object.position.addScaledVector( this._dollyDirection, radiusDelta );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tzoomChanged = !! radiusDelta;\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\tconst mouseBefore = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseBefore.unproject( this.object );\n\n\t\t\t\tconst prevZoom = this.object.zoom;\n\t\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\tzoomChanged = prevZoom !== this.object.zoom;\n\n\t\t\t\tconst mouseAfter = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseAfter.unproject( this.object );\n\n\t\t\t\tthis.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tnewRadius = _v.length();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\tthis.zoomToCursor = false;\n\n\t\t\t}\n\n\t\t\t// handle the placement of the target\n\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\tthis.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t.transformDirection( this.object.matrix )\n\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t.add( this.object.position );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t_ray.origin.copy( this.object.position );\n\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( this.object.matrix );\n\n\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t// extremely large values\n\t\t\t\t\tif ( Math.abs( this.object.up.dot( _ray.direction ) ) < _TILT_LIMIT ) {\n\n\t\t\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( this.object.up, this.target );\n\t\t\t\t\t\t_ray.intersectPlane( _plane, this.target );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tconst prevZoom = this.object.zoom;\n\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\n\t\t\tif ( prevZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._scale = 1;\n\t\tthis._performCursorZoom = false;\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\tif ( zoomChanged ||\n\t\t\tthis._lastPosition.distanceToSquared( this.object.position ) > _EPS ||\n\t\t\t8 * ( 1 - this._lastQuaternion.dot( this.object.quaternion ) ) > _EPS ||\n\t\t\tthis._lastTargetPosition.distanceToSquared( this.target ) > _EPS ) {\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\tthis._lastQuaternion.copy( this.object.quaternion );\n\t\t\tthis._lastTargetPosition.copy( this.target );\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_getAutoRotationAngle( deltaTime ) {\n\n\t\tif ( deltaTime !== null ) {\n\n\t\t\treturn ( _twoPI / 60 * this.autoRotateSpeed ) * deltaTime;\n\n\t\t} else {\n\n\t\t\treturn _twoPI / 60 / 60 * this.autoRotateSpeed;\n\n\t\t}\n\n\t}\n\n\t_getZoomScale( delta ) {\n\n\t\tconst normalizedDelta = Math.abs( delta * 0.01 );\n\t\treturn Math.pow( 0.95, this.zoomSpeed * normalizedDelta );\n\n\t}\n\n\t_rotateLeft( angle ) {\n\n\t\tthis._sphericalDelta.theta -= angle;\n\n\t}\n\n\t_rotateUp( angle ) {\n\n\t\tthis._sphericalDelta.phi -= angle;\n\n\t}\n\n\t_panLeft( distance, objectMatrix ) {\n\n\t\t_v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t_v.multiplyScalar( - distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t_panUp( distance, objectMatrix ) {\n\n\t\tif ( this.screenSpacePanning === true ) {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t} else {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t_v.crossVectors( this.object.up, _v );\n\n\t\t}\n\n\t\t_v.multiplyScalar( distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\t_pan( deltaX, deltaY ) {\n\n\t\tconst element = this.domElement;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tconst position = this.object.position;\n\t\t\t_v.copy( position ).sub( this.target );\n\t\t\tlet targetDistance = _v.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( this.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\tthis._panLeft( 2 * deltaX * targetDistance / element.clientHeight, this.object.matrix );\n\t\t\tthis._panUp( 2 * deltaY * targetDistance / element.clientHeight, this.object.matrix );\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tthis._panLeft( deltaX * ( this.object.right - this.object.left ) / this.object.zoom / element.clientWidth, this.object.matrix );\n\t\t\tthis._panUp( deltaY * ( this.object.top - this.object.bottom ) / this.object.zoom / element.clientHeight, this.object.matrix );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic nor perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\tthis.enablePan = false;\n\n\t\t}\n\n\t}\n\n\t_dollyOut( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale /= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_dollyIn( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale *= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_updateZoomParameters( x, y ) {\n\n\t\tif ( ! this.zoomToCursor ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._performCursorZoom = true;\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\t\tconst dx = x - rect.left;\n\t\tconst dy = y - rect.top;\n\t\tconst w = rect.width;\n\t\tconst h = rect.height;\n\n\t\tthis._mouse.x = ( dx / w ) * 2 - 1;\n\t\tthis._mouse.y = - ( dy / h ) * 2 + 1;\n\n\t\tthis._dollyDirection.set( this._mouse.x, this._mouse.y, 1 ).unproject( this.object ).sub( this.object.position ).normalize();\n\n\t}\n\n\t_clampDistance( dist ) {\n\n\t\treturn Math.max( this.minDistance, Math.min( this.maxDistance, dist ) );\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\t_handleMouseDownRotate( event ) {\n\n\t\tthis._rotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownDolly( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientX );\n\t\tthis._dollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownPan( event ) {\n\n\t\tthis._panStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseMoveRotate( event ) {\n\n\t\tthis._rotateEnd.set( event.clientX, event.clientY );\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMoveDolly( event ) {\n\n\t\tthis._dollyEnd.set( event.clientX, event.clientY );\n\n\t\tthis._dollyDelta.subVectors( this._dollyEnd, this._dollyStart );\n\n\t\tif ( this._dollyDelta.y > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t} else if ( this._dollyDelta.y < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t}\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMovePan( event ) {\n\n\t\tthis._panEnd.set( event.clientX, event.clientY );\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseWheel( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientY );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( event.deltaY ) );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( event.deltaY ) );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\t_handleKeyDown( event ) {\n\n\t\tlet needsUpdate = false;\n\n\t\tswitch ( event.code ) {\n\n\t\t\tcase this.keys.UP:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateUp( _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( 0, this.keyPanSpeed );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.BOTTOM:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateUp( - _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( 0, - this.keyPanSpeed );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateLeft( _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( this.keyPanSpeed, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.RIGHT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tthis._rotateLeft( - _twoPI * this.rotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._pan( - this.keyPanSpeed, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.update();\n\n\t\t}\n\n\n\t}\n\n\t_handleTouchStartRotate( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._rotateStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartPan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyStart.set( 0, distance );\n\n\t}\n\n\t_handleTouchStartDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchStartPan( event );\n\n\t}\n\n\t_handleTouchStartDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchStartRotate( event );\n\n\t}\n\n\t_handleTouchMoveRotate( event ) {\n\n\t\tif ( this._pointers.length == 1 ) {\n\n\t\t\tthis._rotateEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t}\n\n\t_handleTouchMovePan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t}\n\n\t_handleTouchMoveDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyEnd.set( 0, distance );\n\n\t\tthis._dollyDelta.set( 0, Math.pow( this._dollyEnd.y / this._dollyStart.y, this.zoomSpeed ) );\n\n\t\tthis._dollyOut( this._dollyDelta.y );\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\tthis._updateZoomParameters( centerX, centerY );\n\n\t}\n\n\t_handleTouchMoveDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchMovePan( event );\n\n\t}\n\n\t_handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchMoveRotate( event );\n\n\t}\n\n\t// pointers\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event.pointerId );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_isTrackingPointer( event ) {\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointerId = ( event.pointerId === this._pointers[ 0 ] ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointerId ];\n\n\t}\n\n\t//\n\n\t_customWheelEvent( event ) {\n\n\t\tconst mode = event.deltaMode;\n\n\t\t// minimal wheel event altered to meet delta-zoom demand\n\t\tconst newEvent = {\n\t\t\tclientX: event.clientX,\n\t\t\tclientY: event.clientY,\n\t\t\tdeltaY: event.deltaY,\n\t\t};\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 1: // LINE_MODE\n\t\t\t\tnewEvent.deltaY *= 16;\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // PAGE_MODE\n\t\t\t\tnewEvent.deltaY *= 100;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// detect if event was triggered by pinching\n\t\tif ( event.ctrlKey && ! this._controlActive ) {\n\n\t\t\tnewEvent.deltaY *= 10;\n\n\t\t}\n\n\t\treturn newEvent;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tif ( this._isTrackingPointer( event ) ) return;\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tthis._removePointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\n\t\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tconst pointerId = this._pointers[ 0 ];\n\t\t\tconst position = this._pointerPositions[ pointerId ];\n\n\t\t\t// minimal placeholder event - allows state correction on pointer-up\n\t\t\tthis._onTouchStart( { pointerId: pointerId, pageX: position.x, pageY: position.y } );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseDownDolly( event );\n\n\t\t\tthis.state = _STATE.DOLLY;\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onMouseMove( event ) {\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleMouseMoveRotate( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseMoveDolly( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleMouseMovePan( event );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false || this.enableZoom === false || this.state !== _STATE.NONE ) return;\n\n\tevent.preventDefault();\n\n\tthis.dispatchEvent( _startEvent );\n\n\tthis._handleMouseWheel( this._customWheelEvent( event ) );\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false || this.enablePan === false ) return;\n\n\tthis._handleKeyDown( event );\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\n\t\t\tswitch ( this.touches.ONE ) {\n\n\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tswitch ( this.touches.TWO ) {\n\n\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.TOUCH_ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMovePan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_PAN:\n\n\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyPan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction interceptControlDown( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = true;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.addEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nfunction interceptControlUp( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = false;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.removeEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nexport { OrbitControls };\n","import {\n\tDataTextureLoader,\n\tDataUtils,\n\tFloatType,\n\tHalfFloatType,\n\tLinearFilter,\n\tLinearSRGBColorSpace\n} from 'three';\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nclass RGBELoader extends DataTextureLoader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.type = HalfFloatType;\n\n\t}\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse( buffer ) {\n\n\t\tconst\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: throw new Error( 'THREE.RGBELoader: Read Error: ' + ( msg || '' ) );\n\t\t\t\t\tcase rgbe_write_error: throw new Error( 'THREE.RGBELoader: Write Error: ' + ( msg || '' ) );\n\t\t\t\t\tcase rgbe_format_error: throw new Error( 'THREE.RGBELoader: Bad File Format: ' + ( msg || '' ) );\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: throw new Error( 'THREE.RGBELoader: Memory Error: ' + ( msg || '' ) );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = '\\n',\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tconst chunkSize = 128;\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tlet p = buffer.pos,\n\t\t\t\t\ti = - 1, len = 0, s = '',\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( - 1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tif ( false !== consume ) buffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\n\t\t\t\t// regexes to parse header info fields\n\t\t\t\tconst magic_token_re = /^#\\?(\\S+)/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tlet line, match;\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_read_error, 'no header found' );\n\n\t\t\t\t}\n\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'bad initial token' );\n\n\t\t\t\t}\n\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + '\\n';\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + '\\n';\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + '\\n';\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'missing format specifier' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'missing image size specifier' );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tconst scanline_width = w;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\trgbe_error( rgbe_format_error, 'wrong scanline width' );\n\n\t\t\t\t}\n\n\t\t\t\tconst data_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba.length ) {\n\n\t\t\t\t\trgbe_error( rgbe_memory_error, 'unable to allocate buffer space' );\n\n\t\t\t\t}\n\n\t\t\t\tlet offset = 0, pos = 0;\n\n\t\t\t\tconst ptr_end = 4 * scanline_width;\n\t\t\t\tconst rgbeStart = new Uint8Array( 4 );\n\t\t\t\tconst scanline_buffer = new Uint8Array( ptr_end );\n\t\t\t\tlet num_scanlines = h;\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\trgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 != rgbeStart[ 0 ] ) || ( 2 != rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) != scanline_width ) ) {\n\n\t\t\t\t\t\trgbe_error( rgbe_format_error, 'bad rgbe scanline format' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tlet ptr = 0, count;\n\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tconst isEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\trgbe_error( rgbe_format_error, 'bad scanline data' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tconst byteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tconst l = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( let i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\tlet off = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tconst RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tconst e = sourceArray[ sourceOffset + 3 ];\n\t\t\tconst scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\t\t\tdestArray[ destOffset + 3 ] = 1;\n\n\t\t};\n\n\t\tconst RGBEByteToRGBHalf = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tconst e = sourceArray[ sourceOffset + 3 ];\n\t\t\tconst scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\t// clamping to 65504, the maximum representable value in float16\n\t\t\tdestArray[ destOffset + 0 ] = DataUtils.toHalfFloat( Math.min( sourceArray[ sourceOffset + 0 ] * scale, 65504 ) );\n\t\t\tdestArray[ destOffset + 1 ] = DataUtils.toHalfFloat( Math.min( sourceArray[ sourceOffset + 1 ] * scale, 65504 ) );\n\t\t\tdestArray[ destOffset + 2 ] = DataUtils.toHalfFloat( Math.min( sourceArray[ sourceOffset + 2 ] * scale, 65504 ) );\n\t\t\tdestArray[ destOffset + 3 ] = DataUtils.toHalfFloat( 1 );\n\n\t\t};\n\n\t\tconst byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tconst rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tconst w = rgbe_header_info.width,\n\t\t\th = rgbe_header_info.height,\n\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\n\t\tlet data, type;\n\t\tlet numElements;\n\n\t\tswitch ( this.type ) {\n\n\t\t\tcase FloatType:\n\n\t\t\t\tnumElements = image_rgba_data.length / 4;\n\t\t\t\tconst floatArray = new Float32Array( numElements * 4 );\n\n\t\t\t\tfor ( let j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 4 );\n\n\t\t\t\t}\n\n\t\t\t\tdata = floatArray;\n\t\t\t\ttype = FloatType;\n\t\t\t\tbreak;\n\n\t\t\tcase HalfFloatType:\n\n\t\t\t\tnumElements = image_rgba_data.length / 4;\n\t\t\t\tconst halfArray = new Uint16Array( numElements * 4 );\n\n\t\t\t\tfor ( let j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 4 );\n\n\t\t\t\t}\n\n\t\t\t\tdata = halfArray;\n\t\t\t\ttype = HalfFloatType;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthrow new Error( 'THREE.RGBELoader: Unsupported type: ' + this.type );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn {\n\t\t\twidth: w, height: h,\n\t\t\tdata: data,\n\t\t\theader: rgbe_header_info.string,\n\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\texposure: rgbe_header_info.exposure,\n\t\t\ttype: type\n\t\t};\n\n\t}\n\n\tsetDataType( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase FloatType:\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.colorSpace = LinearSRGBColorSpace;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn super.load( url, onLoadCallback, onProgress, onError );\n\n\t}\n\n}\n\nexport { RGBELoader };\n","import {\n\tBox3,\n\tFloat32BufferAttribute,\n\tInstancedBufferGeometry,\n\tInstancedInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tSphere,\n\tVector3,\n\tWireframeGeometry\n} from 'three';\n\nconst _box = new Box3();\nconst _vector = new Vector3();\n\nclass LineSegmentsGeometry extends InstancedBufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isLineSegmentsGeometry = true;\n\n\t\tthis.type = 'LineSegmentsGeometry';\n\n\t\tconst positions = [ - 1, 2, 0, 1, 2, 0, - 1, 1, 0, 1, 1, 0, - 1, 0, 0, 1, 0, 0, - 1, - 1, 0, 1, - 1, 0 ];\n\t\tconst uvs = [ - 1, 2, 1, 2, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 2, 1, - 2 ];\n\t\tconst index = [ 0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5 ];\n\n\t\tthis.setIndex( index );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst start = this.attributes.instanceStart;\n\t\tconst end = this.attributes.instanceEnd;\n\n\t\tif ( start !== undefined ) {\n\n\t\t\tstart.applyMatrix4( matrix );\n\n\t\t\tend.applyMatrix4( matrix );\n\n\t\t\tstart.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetPositions( array ) {\n\n\t\tlet lineSegments;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\tlineSegments = array;\n\n\t\t} else if ( Array.isArray( array ) ) {\n\n\t\t\tlineSegments = new Float32Array( array );\n\n\t\t}\n\n\t\tconst instanceBuffer = new InstancedInterleavedBuffer( lineSegments, 6, 1 ); // xyz, xyz\n\n\t\tthis.setAttribute( 'instanceStart', new InterleavedBufferAttribute( instanceBuffer, 3, 0 ) ); // xyz\n\t\tthis.setAttribute( 'instanceEnd', new InterleavedBufferAttribute( instanceBuffer, 3, 3 ) ); // xyz\n\n\t\tthis.instanceCount = this.attributes.instanceStart.count;\n\n\t\t//\n\n\t\tthis.computeBoundingBox();\n\t\tthis.computeBoundingSphere();\n\n\t\treturn this;\n\n\t}\n\n\tsetColors( array ) {\n\n\t\tlet colors;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\tcolors = array;\n\n\t\t} else if ( Array.isArray( array ) ) {\n\n\t\t\tcolors = new Float32Array( array );\n\n\t\t}\n\n\t\tconst instanceColorBuffer = new InstancedInterleavedBuffer( colors, 6, 1 ); // rgb, rgb\n\n\t\tthis.setAttribute( 'instanceColorStart', new InterleavedBufferAttribute( instanceColorBuffer, 3, 0 ) ); // rgb\n\t\tthis.setAttribute( 'instanceColorEnd', new InterleavedBufferAttribute( instanceColorBuffer, 3, 3 ) ); // rgb\n\n\t\treturn this;\n\n\t}\n\n\tfromWireframeGeometry( geometry ) {\n\n\t\tthis.setPositions( geometry.attributes.position.array );\n\n\t\treturn this;\n\n\t}\n\n\tfromEdgesGeometry( geometry ) {\n\n\t\tthis.setPositions( geometry.attributes.position.array );\n\n\t\treturn this;\n\n\t}\n\n\tfromMesh( mesh ) {\n\n\t\tthis.fromWireframeGeometry( new WireframeGeometry( mesh.geometry ) );\n\n\t\t// set colors, maybe\n\n\t\treturn this;\n\n\t}\n\n\tfromLineSegments( lineSegments ) {\n\n\t\tconst geometry = lineSegments.geometry;\n\n\t\tthis.setPositions( geometry.attributes.position.array ); // assumes non-indexed\n\n\t\t// set colors, maybe\n\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst start = this.attributes.instanceStart;\n\t\tconst end = this.attributes.instanceEnd;\n\n\t\tif ( start !== undefined && end !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( start );\n\n\t\t\t_box.setFromBufferAttribute( end );\n\n\t\t\tthis.boundingBox.union( _box );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tconst start = this.attributes.instanceStart;\n\t\tconst end = this.attributes.instanceEnd;\n\n\t\tif ( start !== undefined && end !== undefined ) {\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\tthis.boundingBox.getCenter( center );\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = start.count; i < il; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( start, i );\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t\t_vector.fromBufferAttribute( end, i );\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\t// todo\n\n\t}\n\n\tapplyMatrix( matrix ) {\n\n\t\tconsole.warn( 'THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4().' );\n\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n}\n\nexport { LineSegmentsGeometry };\n","import {\n\tShaderLib,\n\tShaderMaterial,\n\tUniformsLib,\n\tUniformsUtils,\n\tVector2,\n} from 'three';\n\nUniformsLib.line = {\n\n\tworldUnits: { value: 1 },\n\tlinewidth: { value: 1 },\n\tresolution: { value: new Vector2( 1, 1 ) },\n\tdashOffset: { value: 0 },\n\tdashScale: { value: 1 },\n\tdashSize: { value: 1 },\n\tgapSize: { value: 1 } // todo FIX - maybe change to totalSize\n\n};\n\nShaderLib[ 'line' ] = {\n\n\tuniforms: UniformsUtils.merge( [\n\t\tUniformsLib.common,\n\t\tUniformsLib.fog,\n\t\tUniformsLib.line\n\t] ),\n\n\tvertexShader:\n\t/* glsl */`\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );\n\t\t\t\tvec3 worldUp = normalize( cross( worldDir, tmpFwd ) );\n\t\t\t\tvec3 worldFwd = cross( worldDir, worldUp );\n\t\t\t\tworldPos = position.y < 0.5 ? start: end;\n\n\t\t\t\t// height offset\n\t\t\t\tfloat hw = linewidth * 0.5;\n\t\t\t\tworldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// cap extension\n\t\t\t\t\tworldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;\n\n\t\t\t\t\t// add width to the box\n\t\t\t\t\tworldPos.xyz += worldFwd * hw;\n\n\t\t\t\t\t// endcaps\n\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\tworldPos.xyz -= worldFwd * 2.0 * hw;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t`,\n\n\tfragmentShader:\n\t/* glsl */`\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t`\n};\n\nclass LineMaterial extends ShaderMaterial {\n\n\n\tstatic get type() {\n\n\t\treturn 'LineMaterial';\n\n\t}\n\n\tconstructor( parameters ) {\n\n\t\tsuper( {\n\n\t\t\tuniforms: UniformsUtils.clone( ShaderLib[ 'line' ].uniforms ),\n\n\t\t\tvertexShader: ShaderLib[ 'line' ].vertexShader,\n\t\t\tfragmentShader: ShaderLib[ 'line' ].fragmentShader,\n\n\t\t\tclipping: true // required for clipping support\n\n\t\t} );\n\n\t\tthis.isLineMaterial = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tget color() {\n\n\t\treturn this.uniforms.diffuse.value;\n\n\t}\n\n\tset color( value ) {\n\n\t\tthis.uniforms.diffuse.value = value;\n\n\t}\n\n\tget worldUnits() {\n\n\t\treturn 'WORLD_UNITS' in this.defines;\n\n\t}\n\n\tset worldUnits( value ) {\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.defines.WORLD_UNITS = '';\n\n\t\t} else {\n\n\t\t\tdelete this.defines.WORLD_UNITS;\n\n\t\t}\n\n\t}\n\n\tget linewidth() {\n\n\t\treturn this.uniforms.linewidth.value;\n\n\t}\n\n\tset linewidth( value ) {\n\n\t\tif ( ! this.uniforms.linewidth ) return;\n\t\tthis.uniforms.linewidth.value = value;\n\n\t}\n\n\tget dashed() {\n\n\t\treturn 'USE_DASH' in this.defines;\n\n\t}\n\n\tset dashed( value ) {\n\n\t\tif ( ( value === true ) !== this.dashed ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.defines.USE_DASH = '';\n\n\t\t} else {\n\n\t\t\tdelete this.defines.USE_DASH;\n\n\t\t}\n\n\t}\n\n\tget dashScale() {\n\n\t\treturn this.uniforms.dashScale.value;\n\n\t}\n\n\tset dashScale( value ) {\n\n\t\tthis.uniforms.dashScale.value = value;\n\n\t}\n\n\tget dashSize() {\n\n\t\treturn this.uniforms.dashSize.value;\n\n\t}\n\n\tset dashSize( value ) {\n\n\t\tthis.uniforms.dashSize.value = value;\n\n\t}\n\n\tget dashOffset() {\n\n\t\treturn this.uniforms.dashOffset.value;\n\n\t}\n\n\tset dashOffset( value ) {\n\n\t\tthis.uniforms.dashOffset.value = value;\n\n\t}\n\n\tget gapSize() {\n\n\t\treturn this.uniforms.gapSize.value;\n\n\t}\n\n\tset gapSize( value ) {\n\n\t\tthis.uniforms.gapSize.value = value;\n\n\t}\n\n\tget opacity() {\n\n\t\treturn this.uniforms.opacity.value;\n\n\t}\n\n\tset opacity( value ) {\n\n\t\tif ( ! this.uniforms ) return;\n\t\tthis.uniforms.opacity.value = value;\n\n\t}\n\n\tget resolution() {\n\n\t\treturn this.uniforms.resolution.value;\n\n\t}\n\n\tset resolution( value ) {\n\n\t\tthis.uniforms.resolution.value.copy( value );\n\n\t}\n\n\tget alphaToCoverage() {\n\n\t\treturn 'USE_ALPHA_TO_COVERAGE' in this.defines;\n\n\t}\n\n\tset alphaToCoverage( value ) {\n\n\t\tif ( ! this.defines ) return;\n\n\t\tif ( ( value === true ) !== this.alphaToCoverage ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.defines.USE_ALPHA_TO_COVERAGE = '';\n\n\t\t} else {\n\n\t\t\tdelete this.defines.USE_ALPHA_TO_COVERAGE;\n\n\t\t}\n\n\t}\n\n}\n\nexport { LineMaterial };\n","import {\n\tBox3,\n\tInstancedInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tLine3,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tSphere,\n\tVector3,\n\tVector4\n} from 'three';\nimport { LineSegmentsGeometry } from '../lines/LineSegmentsGeometry.js';\nimport { LineMaterial } from '../lines/LineMaterial.js';\n\nconst _viewport = new Vector4();\n\nconst _start = new Vector3();\nconst _end = new Vector3();\n\nconst _start4 = new Vector4();\nconst _end4 = new Vector4();\n\nconst _ssOrigin = new Vector4();\nconst _ssOrigin3 = new Vector3();\nconst _mvMatrix = new Matrix4();\nconst _line = new Line3();\nconst _closestPoint = new Vector3();\n\nconst _box = new Box3();\nconst _sphere = new Sphere();\nconst _clipToWorldVector = new Vector4();\n\nlet _ray, _lineWidth;\n\n// Returns the margin required to expand by in world space given the distance from the camera,\n// line width, resolution, and camera projection\nfunction getWorldSpaceHalfWidth( camera, distance, resolution ) {\n\n\t// transform into clip space, adjust the x and y values by the pixel width offset, then\n\t// transform back into world space to get world offset. Note clip space is [-1, 1] so full\n\t// width does not need to be halved.\n\t_clipToWorldVector.set( 0, 0, - distance, 1.0 ).applyMatrix4( camera.projectionMatrix );\n\t_clipToWorldVector.multiplyScalar( 1.0 / _clipToWorldVector.w );\n\t_clipToWorldVector.x = _lineWidth / resolution.width;\n\t_clipToWorldVector.y = _lineWidth / resolution.height;\n\t_clipToWorldVector.applyMatrix4( camera.projectionMatrixInverse );\n\t_clipToWorldVector.multiplyScalar( 1.0 / _clipToWorldVector.w );\n\n\treturn Math.abs( Math.max( _clipToWorldVector.x, _clipToWorldVector.y ) );\n\n}\n\nfunction raycastWorldUnits( lineSegments, intersects ) {\n\n\tconst matrixWorld = lineSegments.matrixWorld;\n\tconst geometry = lineSegments.geometry;\n\tconst instanceStart = geometry.attributes.instanceStart;\n\tconst instanceEnd = geometry.attributes.instanceEnd;\n\tconst segmentCount = Math.min( geometry.instanceCount, instanceStart.count );\n\n\tfor ( let i = 0, l = segmentCount; i < l; i ++ ) {\n\n\t\t_line.start.fromBufferAttribute( instanceStart, i );\n\t\t_line.end.fromBufferAttribute( instanceEnd, i );\n\n\t\t_line.applyMatrix4( matrixWorld );\n\n\t\tconst pointOnLine = new Vector3();\n\t\tconst point = new Vector3();\n\n\t\t_ray.distanceSqToSegment( _line.start, _line.end, point, pointOnLine );\n\t\tconst isInside = point.distanceTo( pointOnLine ) < _lineWidth * 0.5;\n\n\t\tif ( isInside ) {\n\n\t\t\tintersects.push( {\n\t\t\t\tpoint,\n\t\t\t\tpointOnLine,\n\t\t\t\tdistance: _ray.origin.distanceTo( point ),\n\t\t\t\tobject: lineSegments,\n\t\t\t\tface: null,\n\t\t\t\tfaceIndex: i,\n\t\t\t\tuv: null,\n\t\t\t\tuv1: null,\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n\nfunction raycastScreenSpace( lineSegments, camera, intersects ) {\n\n\tconst projectionMatrix = camera.projectionMatrix;\n\tconst material = lineSegments.material;\n\tconst resolution = material.resolution;\n\tconst matrixWorld = lineSegments.matrixWorld;\n\n\tconst geometry = lineSegments.geometry;\n\tconst instanceStart = geometry.attributes.instanceStart;\n\tconst instanceEnd = geometry.attributes.instanceEnd;\n\tconst segmentCount = Math.min( geometry.instanceCount, instanceStart.count );\n\n\tconst near = - camera.near;\n\n\t//\n\n\t// pick a point 1 unit out along the ray to avoid the ray origin\n\t// sitting at the camera origin which will cause \"w\" to be 0 when\n\t// applying the projection matrix.\n\t_ray.at( 1, _ssOrigin );\n\n\t// ndc space [ - 1.0, 1.0 ]\n\t_ssOrigin.w = 1;\n\t_ssOrigin.applyMatrix4( camera.matrixWorldInverse );\n\t_ssOrigin.applyMatrix4( projectionMatrix );\n\t_ssOrigin.multiplyScalar( 1 / _ssOrigin.w );\n\n\t// screen space\n\t_ssOrigin.x *= resolution.x / 2;\n\t_ssOrigin.y *= resolution.y / 2;\n\t_ssOrigin.z = 0;\n\n\t_ssOrigin3.copy( _ssOrigin );\n\n\t_mvMatrix.multiplyMatrices( camera.matrixWorldInverse, matrixWorld );\n\n\tfor ( let i = 0, l = segmentCount; i < l; i ++ ) {\n\n\t\t_start4.fromBufferAttribute( instanceStart, i );\n\t\t_end4.fromBufferAttribute( instanceEnd, i );\n\n\t\t_start4.w = 1;\n\t\t_end4.w = 1;\n\n\t\t// camera space\n\t\t_start4.applyMatrix4( _mvMatrix );\n\t\t_end4.applyMatrix4( _mvMatrix );\n\n\t\t// skip the segment if it's entirely behind the camera\n\t\tconst isBehindCameraNear = _start4.z > near && _end4.z > near;\n\t\tif ( isBehindCameraNear ) {\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\t// trim the segment if it extends behind camera near\n\t\tif ( _start4.z > near ) {\n\n\t\t\tconst deltaDist = _start4.z - _end4.z;\n\t\t\tconst t = ( _start4.z - near ) / deltaDist;\n\t\t\t_start4.lerp( _end4, t );\n\n\t\t} else if ( _end4.z > near ) {\n\n\t\t\tconst deltaDist = _end4.z - _start4.z;\n\t\t\tconst t = ( _end4.z - near ) / deltaDist;\n\t\t\t_end4.lerp( _start4, t );\n\n\t\t}\n\n\t\t// clip space\n\t\t_start4.applyMatrix4( projectionMatrix );\n\t\t_end4.applyMatrix4( projectionMatrix );\n\n\t\t// ndc space [ - 1.0, 1.0 ]\n\t\t_start4.multiplyScalar( 1 / _start4.w );\n\t\t_end4.multiplyScalar( 1 / _end4.w );\n\n\t\t// screen space\n\t\t_start4.x *= resolution.x / 2;\n\t\t_start4.y *= resolution.y / 2;\n\n\t\t_end4.x *= resolution.x / 2;\n\t\t_end4.y *= resolution.y / 2;\n\n\t\t// create 2d segment\n\t\t_line.start.copy( _start4 );\n\t\t_line.start.z = 0;\n\n\t\t_line.end.copy( _end4 );\n\t\t_line.end.z = 0;\n\n\t\t// get closest point on ray to segment\n\t\tconst param = _line.closestPointToPointParameter( _ssOrigin3, true );\n\t\t_line.at( param, _closestPoint );\n\n\t\t// check if the intersection point is within clip space\n\t\tconst zPos = MathUtils.lerp( _start4.z, _end4.z, param );\n\t\tconst isInClipSpace = zPos >= - 1 && zPos <= 1;\n\n\t\tconst isInside = _ssOrigin3.distanceTo( _closestPoint ) < _lineWidth * 0.5;\n\n\t\tif ( isInClipSpace && isInside ) {\n\n\t\t\t_line.start.fromBufferAttribute( instanceStart, i );\n\t\t\t_line.end.fromBufferAttribute( instanceEnd, i );\n\n\t\t\t_line.start.applyMatrix4( matrixWorld );\n\t\t\t_line.end.applyMatrix4( matrixWorld );\n\n\t\t\tconst pointOnLine = new Vector3();\n\t\t\tconst point = new Vector3();\n\n\t\t\t_ray.distanceSqToSegment( _line.start, _line.end, point, pointOnLine );\n\n\t\t\tintersects.push( {\n\t\t\t\tpoint: point,\n\t\t\t\tpointOnLine: pointOnLine,\n\t\t\t\tdistance: _ray.origin.distanceTo( point ),\n\t\t\t\tobject: lineSegments,\n\t\t\t\tface: null,\n\t\t\t\tfaceIndex: i,\n\t\t\t\tuv: null,\n\t\t\t\tuv1: null,\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n\nclass LineSegments2 extends Mesh {\n\n\tconstructor( geometry = new LineSegmentsGeometry(), material = new LineMaterial( { color: Math.random() * 0xffffff } ) ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineSegments2 = true;\n\n\t\tthis.type = 'LineSegments2';\n\n\t}\n\n\t// for backwards-compatibility, but could be a method of LineSegmentsGeometry...\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst instanceStart = geometry.attributes.instanceStart;\n\t\tconst instanceEnd = geometry.attributes.instanceEnd;\n\t\tconst lineDistances = new Float32Array( 2 * instanceStart.count );\n\n\t\tfor ( let i = 0, j = 0, l = instanceStart.count; i < l; i ++, j += 2 ) {\n\n\t\t\t_start.fromBufferAttribute( instanceStart, i );\n\t\t\t_end.fromBufferAttribute( instanceEnd, i );\n\n\t\t\tlineDistances[ j ] = ( j === 0 ) ? 0 : lineDistances[ j - 1 ];\n\t\t\tlineDistances[ j + 1 ] = lineDistances[ j ] + _start.distanceTo( _end );\n\n\t\t}\n\n\t\tconst instanceDistanceBuffer = new InstancedInterleavedBuffer( lineDistances, 2, 1 ); // d0, d1\n\n\t\tgeometry.setAttribute( 'instanceDistanceStart', new InterleavedBufferAttribute( instanceDistanceBuffer, 1, 0 ) ); // d0\n\t\tgeometry.setAttribute( 'instanceDistanceEnd', new InterleavedBufferAttribute( instanceDistanceBuffer, 1, 1 ) ); // d1\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst worldUnits = this.material.worldUnits;\n\t\tconst camera = raycaster.camera;\n\n\t\tif ( camera === null && ! worldUnits ) {\n\n\t\t\tconsole.error( 'LineSegments2: \"Raycaster.camera\" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.' );\n\n\t\t}\n\n\t\tconst threshold = ( raycaster.params.Line2 !== undefined ) ? raycaster.params.Line2.threshold || 0 : 0;\n\n\t\t_ray = raycaster.ray;\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\n\t\t_lineWidth = material.linewidth + threshold;\n\n\t\t// check if we intersect the sphere bounds\n\t\tif ( geometry.boundingSphere === null ) {\n\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t}\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( matrixWorld );\n\n\t\t// increase the sphere bounds by the worst case line screen space width\n\t\tlet sphereMargin;\n\t\tif ( worldUnits ) {\n\n\t\t\tsphereMargin = _lineWidth * 0.5;\n\n\t\t} else {\n\n\t\t\tconst distanceToSphere = Math.max( camera.near, _sphere.distanceToPoint( _ray.origin ) );\n\t\t\tsphereMargin = getWorldSpaceHalfWidth( camera, distanceToSphere, material.resolution );\n\n\t\t}\n\n\t\t_sphere.radius += sphereMargin;\n\n\t\tif ( _ray.intersectsSphere( _sphere ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// check if we intersect the box bounds\n\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\tgeometry.computeBoundingBox();\n\n\t\t}\n\n\t\t_box.copy( geometry.boundingBox ).applyMatrix4( matrixWorld );\n\n\t\t// increase the box bounds by the worst case line width\n\t\tlet boxMargin;\n\t\tif ( worldUnits ) {\n\n\t\t\tboxMargin = _lineWidth * 0.5;\n\n\t\t} else {\n\n\t\t\tconst distanceToBox = Math.max( camera.near, _box.distanceToPoint( _ray.origin ) );\n\t\t\tboxMargin = getWorldSpaceHalfWidth( camera, distanceToBox, material.resolution );\n\n\t\t}\n\n\t\t_box.expandByScalar( boxMargin );\n\n\t\tif ( _ray.intersectsBox( _box ) === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( worldUnits ) {\n\n\t\t\traycastWorldUnits( this, intersects );\n\n\t\t} else {\n\n\t\t\traycastScreenSpace( this, camera, intersects );\n\n\t\t}\n\n\t}\n\n\tonBeforeRender( renderer ) {\n\n\t\tconst uniforms = this.material.uniforms;\n\n\t\tif ( uniforms && uniforms.resolution ) {\n\n\t\t\trenderer.getViewport( _viewport );\n\t\t\tthis.material.uniforms.resolution.value.set( _viewport.z, _viewport.w );\n\n\t\t}\n\n\t}\n\n}\n\nexport { LineSegments2 };\n","import { LineSegmentsGeometry } from '../lines/LineSegmentsGeometry.js';\n\nclass LineGeometry extends LineSegmentsGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isLineGeometry = true;\n\n\t\tthis.type = 'LineGeometry';\n\n\t}\n\n\tsetPositions( array ) {\n\n\t\t// converts [ x1, y1, z1,  x2, y2, z2, ... ] to pairs format\n\n\t\tconst length = array.length - 3;\n\t\tconst points = new Float32Array( 2 * length );\n\n\t\tfor ( let i = 0; i < length; i += 3 ) {\n\n\t\t\tpoints[ 2 * i ] = array[ i ];\n\t\t\tpoints[ 2 * i + 1 ] = array[ i + 1 ];\n\t\t\tpoints[ 2 * i + 2 ] = array[ i + 2 ];\n\n\t\t\tpoints[ 2 * i + 3 ] = array[ i + 3 ];\n\t\t\tpoints[ 2 * i + 4 ] = array[ i + 4 ];\n\t\t\tpoints[ 2 * i + 5 ] = array[ i + 5 ];\n\n\t\t}\n\n\t\tsuper.setPositions( points );\n\n\t\treturn this;\n\n\t}\n\n\tsetColors( array ) {\n\n\t\t// converts [ r1, g1, b1,  r2, g2, b2, ... ] to pairs format\n\n\t\tconst length = array.length - 3;\n\t\tconst colors = new Float32Array( 2 * length );\n\n\t\tfor ( let i = 0; i < length; i += 3 ) {\n\n\t\t\tcolors[ 2 * i ] = array[ i ];\n\t\t\tcolors[ 2 * i + 1 ] = array[ i + 1 ];\n\t\t\tcolors[ 2 * i + 2 ] = array[ i + 2 ];\n\n\t\t\tcolors[ 2 * i + 3 ] = array[ i + 3 ];\n\t\t\tcolors[ 2 * i + 4 ] = array[ i + 4 ];\n\t\t\tcolors[ 2 * i + 5 ] = array[ i + 5 ];\n\n\t\t}\n\n\t\tsuper.setColors( colors );\n\n\t\treturn this;\n\n\t}\n\n\tfromLine( line ) {\n\n\t\tconst geometry = line.geometry;\n\n\t\tthis.setPositions( geometry.attributes.position.array ); // assumes non-indexed\n\n\t\t// set colors, maybe\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { LineGeometry };\n","import { LineSegments2 } from '../lines/LineSegments2.js';\nimport { LineGeometry } from '../lines/LineGeometry.js';\nimport { LineMaterial } from '../lines/LineMaterial.js';\n\nclass Line2 extends LineSegments2 {\n\n\tconstructor( geometry = new LineGeometry(), material = new LineMaterial( { color: Math.random() * 0xffffff } ) ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLine2 = true;\n\n\t\tthis.type = 'Line2';\n\n\t}\n\n}\n\nexport { Line2 };\n","/**\n * Full-screen textured quad shader\n */\n\nconst CopyShader = {\n\n\tname: 'CopyShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}`\n\n};\n\nexport { CopyShader };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tOrthographicCamera,\n\tMesh\n} from 'three';\n\nclass Pass {\n\n\tconstructor() {\n\n\t\tthis.isPass = true;\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n\tdispose() {}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nclass FullscreenTriangleGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\n\t}\n\n}\n\nconst _geometry = new FullscreenTriangleGeometry();\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { Pass, FullScreenQuad };\n","import {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\n\nclass ShaderPass extends Pass {\n\n\tconstructor( shader, textureID ) {\n\n\t\tsuper();\n\n\t\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\n\n\t\tif ( shader instanceof ShaderMaterial ) {\n\n\t\t\tthis.uniforms = shader.uniforms;\n\n\t\t\tthis.material = shader;\n\n\t\t} else if ( shader ) {\n\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t\tthis.material = new ShaderMaterial( {\n\n\t\t\t\tname: ( shader.name !== undefined ) ? shader.name : 'unspecified',\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\t\tuniforms: this.uniforms,\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.fsQuad = new FullScreenQuad( this.material );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tthis.material.dispose();\n\n\t\tthis.fsQuad.dispose();\n\n\t}\n\n}\n\nexport { ShaderPass };\n","import { Pass } from './Pass.js';\n\nclass MaskPass extends Pass {\n\n\tconstructor( scene, camera ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.clear = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis.inverse = false;\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tlet writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer and make them writable for subsequent rendering/clearing\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\tstate.buffers.color.setMask( true );\n\t\tstate.buffers.depth.setMask( true );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n}\n\nclass ClearMaskPass extends Pass {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.needsSwap = false;\n\n\t}\n\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n}\n\nexport { MaskPass, ClearMaskPass };\n","import {\n\tClock,\n\tHalfFloatType,\n\tNoBlending,\n\tVector2,\n\tWebGLRenderTarget\n} from 'three';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { ShaderPass } from './ShaderPass.js';\nimport { MaskPass } from './MaskPass.js';\nimport { ClearMaskPass } from './MaskPass.js';\n\nclass EffectComposer {\n\n\tconstructor( renderer, renderTarget ) {\n\n\t\tthis.renderer = renderer;\n\n\t\tthis._pixelRatio = renderer.getPixelRatio();\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = renderer.getSize( new Vector2() );\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, { type: HalfFloatType } );\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t\t} else {\n\n\t\t\tthis._width = renderTarget.width;\n\t\t\tthis._height = renderTarget.height;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\tthis.renderToScreen = true;\n\n\t\tthis.passes = [];\n\n\t\tthis.copyPass = new ShaderPass( CopyShader );\n\t\tthis.copyPass.material.blending = NoBlending;\n\n\t\tthis.clock = new Clock();\n\n\t}\n\n\tswapBuffers() {\n\n\t\tconst tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t}\n\n\taddPass( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tinsertPass( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tremovePass( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t}\n\n\tisLastEnabledPass( passIndex ) {\n\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\trender( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tlet maskActive = false;\n\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\n\n\t\t\tconst pass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tconst context = this.renderer.getContext();\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\treset( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t}\n\n\tsetPixelRatio( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\n\t\tthis.copyPass.dispose();\n\n\t}\n\n}\n\nexport { EffectComposer };\n","import {\n\tColor\n} from 'three';\nimport { Pass } from './Pass.js';\n\nclass RenderPass extends Pass {\n\n\tconstructor( scene, camera, overrideMaterial = null, clearColor = null, clearAlpha = null ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.overrideMaterial = overrideMaterial;\n\n\t\tthis.clearColor = clearColor;\n\t\tthis.clearAlpha = clearAlpha;\n\n\t\tthis.clear = true;\n\t\tthis.clearDepth = false;\n\t\tthis.needsSwap = false;\n\t\tthis._oldClearColor = new Color();\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tlet oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== null ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor !== null ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\trenderer.setClearColor( this.clearColor, renderer.getClearAlpha() );\n\n\t\t}\n\n\t\tif ( this.clearAlpha !== null ) {\n\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\t\t\trenderer.setClearAlpha( this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth == true ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\tif ( this.clear === true ) {\n\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// restore\n\n\t\tif ( this.clearColor !== null ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor );\n\n\t\t}\n\n\t\tif ( this.clearAlpha !== null ) {\n\n\t\t\trenderer.setClearAlpha( oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== null ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n}\n\nexport { RenderPass };\n","import {\n\tAdditiveBlending,\n\tColor,\n\tDoubleSide,\n\tHalfFloatType,\n\tMatrix4,\n\tMeshDepthMaterial,\n\tNoBlending,\n\tRGBADepthPacking,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\n\nclass OutlinePass extends Pass {\n\n\tconstructor( resolution, scene, camera, selectedObjects ) {\n\n\t\tsuper();\n\n\t\tthis.renderScene = scene;\n\t\tthis.renderCamera = camera;\n\t\tthis.selectedObjects = selectedObjects !== undefined ? selectedObjects : [];\n\t\tthis.visibleEdgeColor = new Color( 1, 1, 1 );\n\t\tthis.hiddenEdgeColor = new Color( 0.1, 0.04, 0.02 );\n\t\tthis.edgeGlow = 0.0;\n\t\tthis.usePatternTexture = false;\n\t\tthis.edgeThickness = 1.0;\n\t\tthis.edgeStrength = 3.0;\n\t\tthis.downSampleRatio = 2;\n\t\tthis.pulsePeriod = 0;\n\n\t\tthis._visibilityCache = new Map();\n\t\tthis._selectionCache = new Set();\n\n\t\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\t\tconst resx = Math.round( this.resolution.x / this.downSampleRatio );\n\t\tconst resy = Math.round( this.resolution.y / this.downSampleRatio );\n\n\t\tthis.renderTargetMaskBuffer = new WebGLRenderTarget( this.resolution.x, this.resolution.y );\n\t\tthis.renderTargetMaskBuffer.texture.name = 'OutlinePass.mask';\n\t\tthis.renderTargetMaskBuffer.texture.generateMipmaps = false;\n\n\t\tthis.depthMaterial = new MeshDepthMaterial();\n\t\tthis.depthMaterial.side = DoubleSide;\n\t\tthis.depthMaterial.depthPacking = RGBADepthPacking;\n\t\tthis.depthMaterial.blending = NoBlending;\n\n\t\tthis.prepareMaskMaterial = this.getPrepareMaskMaterial();\n\t\tthis.prepareMaskMaterial.side = DoubleSide;\n\t\tthis.prepareMaskMaterial.fragmentShader = replaceDepthToViewZ( this.prepareMaskMaterial.fragmentShader, this.renderCamera );\n\n\t\tthis.renderTargetDepthBuffer = new WebGLRenderTarget( this.resolution.x, this.resolution.y, { type: HalfFloatType } );\n\t\tthis.renderTargetDepthBuffer.texture.name = 'OutlinePass.depth';\n\t\tthis.renderTargetDepthBuffer.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetMaskDownSampleBuffer = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\n\t\tthis.renderTargetMaskDownSampleBuffer.texture.name = 'OutlinePass.depthDownSample';\n\t\tthis.renderTargetMaskDownSampleBuffer.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetBlurBuffer1 = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\n\t\tthis.renderTargetBlurBuffer1.texture.name = 'OutlinePass.blur1';\n\t\tthis.renderTargetBlurBuffer1.texture.generateMipmaps = false;\n\t\tthis.renderTargetBlurBuffer2 = new WebGLRenderTarget( Math.round( resx / 2 ), Math.round( resy / 2 ), { type: HalfFloatType } );\n\t\tthis.renderTargetBlurBuffer2.texture.name = 'OutlinePass.blur2';\n\t\tthis.renderTargetBlurBuffer2.texture.generateMipmaps = false;\n\n\t\tthis.edgeDetectionMaterial = this.getEdgeDetectionMaterial();\n\t\tthis.renderTargetEdgeBuffer1 = new WebGLRenderTarget( resx, resy, { type: HalfFloatType } );\n\t\tthis.renderTargetEdgeBuffer1.texture.name = 'OutlinePass.edge1';\n\t\tthis.renderTargetEdgeBuffer1.texture.generateMipmaps = false;\n\t\tthis.renderTargetEdgeBuffer2 = new WebGLRenderTarget( Math.round( resx / 2 ), Math.round( resy / 2 ), { type: HalfFloatType } );\n\t\tthis.renderTargetEdgeBuffer2.texture.name = 'OutlinePass.edge2';\n\t\tthis.renderTargetEdgeBuffer2.texture.generateMipmaps = false;\n\n\t\tconst MAX_EDGE_THICKNESS = 4;\n\t\tconst MAX_EDGE_GLOW = 4;\n\n\t\tthis.separableBlurMaterial1 = this.getSeperableBlurMaterial( MAX_EDGE_THICKNESS );\n\t\tthis.separableBlurMaterial1.uniforms[ 'texSize' ].value.set( resx, resy );\n\t\tthis.separableBlurMaterial1.uniforms[ 'kernelRadius' ].value = 1;\n\t\tthis.separableBlurMaterial2 = this.getSeperableBlurMaterial( MAX_EDGE_GLOW );\n\t\tthis.separableBlurMaterial2.uniforms[ 'texSize' ].value.set( Math.round( resx / 2 ), Math.round( resy / 2 ) );\n\t\tthis.separableBlurMaterial2.uniforms[ 'kernelRadius' ].value = MAX_EDGE_GLOW;\n\n\t\t// Overlay material\n\t\tthis.overlayMaterial = this.getOverlayMaterial();\n\n\t\t// copy material\n\n\t\tconst copyShader = CopyShader;\n\n\t\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\n\n\t\tthis.materialCopy = new ShaderMaterial( {\n\t\t\tuniforms: this.copyUniforms,\n\t\t\tvertexShader: copyShader.vertexShader,\n\t\t\tfragmentShader: copyShader.fragmentShader,\n\t\t\tblending: NoBlending,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false\n\t\t} );\n\n\t\tthis.enabled = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis._oldClearColor = new Color();\n\t\tthis.oldClearAlpha = 1;\n\n\t\tthis.fsQuad = new FullScreenQuad( null );\n\n\t\tthis.tempPulseColor1 = new Color();\n\t\tthis.tempPulseColor2 = new Color();\n\t\tthis.textureMatrix = new Matrix4();\n\n\t\tfunction replaceDepthToViewZ( string, camera ) {\n\n\t\t\tconst type = camera.isPerspectiveCamera ? 'perspective' : 'orthographic';\n\n\t\t\treturn string.replace( /DEPTH_TO_VIEW_Z/g, type + 'DepthToViewZ' );\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tthis.renderTargetMaskBuffer.dispose();\n\t\tthis.renderTargetDepthBuffer.dispose();\n\t\tthis.renderTargetMaskDownSampleBuffer.dispose();\n\t\tthis.renderTargetBlurBuffer1.dispose();\n\t\tthis.renderTargetBlurBuffer2.dispose();\n\t\tthis.renderTargetEdgeBuffer1.dispose();\n\t\tthis.renderTargetEdgeBuffer2.dispose();\n\n\t\tthis.depthMaterial.dispose();\n\t\tthis.prepareMaskMaterial.dispose();\n\t\tthis.edgeDetectionMaterial.dispose();\n\t\tthis.separableBlurMaterial1.dispose();\n\t\tthis.separableBlurMaterial2.dispose();\n\t\tthis.overlayMaterial.dispose();\n\t\tthis.materialCopy.dispose();\n\n\t\tthis.fsQuad.dispose();\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis.renderTargetMaskBuffer.setSize( width, height );\n\t\tthis.renderTargetDepthBuffer.setSize( width, height );\n\n\t\tlet resx = Math.round( width / this.downSampleRatio );\n\t\tlet resy = Math.round( height / this.downSampleRatio );\n\t\tthis.renderTargetMaskDownSampleBuffer.setSize( resx, resy );\n\t\tthis.renderTargetBlurBuffer1.setSize( resx, resy );\n\t\tthis.renderTargetEdgeBuffer1.setSize( resx, resy );\n\t\tthis.separableBlurMaterial1.uniforms[ 'texSize' ].value.set( resx, resy );\n\n\t\tresx = Math.round( resx / 2 );\n\t\tresy = Math.round( resy / 2 );\n\n\t\tthis.renderTargetBlurBuffer2.setSize( resx, resy );\n\t\tthis.renderTargetEdgeBuffer2.setSize( resx, resy );\n\n\t\tthis.separableBlurMaterial2.uniforms[ 'texSize' ].value.set( resx, resy );\n\n\t}\n\n\tupdateSelectionCache() {\n\n\t\tconst cache = this._selectionCache;\n\n\t\tfunction gatherSelectedMeshesCallBack( object ) {\n\n\t\t\tif ( object.isMesh ) cache.add( object );\n\n\t\t}\n\n\t\tcache.clear();\n\n\t\tfor ( let i = 0; i < this.selectedObjects.length; i ++ ) {\n\n\t\t\tconst selectedObject = this.selectedObjects[ i ];\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\n\n\t\t}\n\n\t}\n\n\tchangeVisibilityOfSelectedObjects( bVisible ) {\n\n\t\tconst cache = this._visibilityCache;\n\n\t\tfor ( const mesh of this._selectionCache ) {\n\n\t\t\tif ( bVisible === true ) {\n\n\t\t\t\tmesh.visible = cache.get( mesh );\n\n\t\t\t} else {\n\n\t\t\t\tcache.set( mesh, mesh.visible );\n\t\t\t\tmesh.visible = bVisible;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tchangeVisibilityOfNonSelectedObjects( bVisible ) {\n\n\t\tconst visibilityCache = this._visibilityCache;\n\t\tconst selectionCache = this._selectionCache;\n\n\t\tfunction VisibilityChangeCallBack( object ) {\n\n\t\t\tif ( object.isMesh || object.isSprite ) {\n\n\t\t\t\t// only meshes and sprites are supported by OutlinePass\n\n\t\t\t\tif ( ! selectionCache.has( object ) ) {\n\n\t\t\t\t\tconst visibility = object.visible;\n\n\t\t\t\t\tif ( bVisible === false || visibilityCache.get( object ) === true ) {\n\n\t\t\t\t\t\tobject.visible = bVisible;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvisibilityCache.set( object, visibility );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isPoints || object.isLine ) {\n\n\t\t\t\t// the visibilty of points and lines is always set to false in order to\n\t\t\t\t// not affect the outline computation\n\n\t\t\t\tif ( bVisible === true ) {\n\n\t\t\t\t\tobject.visible = visibilityCache.get( object ); // restore\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvisibilityCache.set( object, object.visible );\n\t\t\t\t\tobject.visible = bVisible;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderScene.traverse( VisibilityChangeCallBack );\n\n\t}\n\n\tupdateTextureMatrix() {\n\n\t\tthis.textureMatrix.set( 0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0 );\n\t\tthis.textureMatrix.multiply( this.renderCamera.projectionMatrix );\n\t\tthis.textureMatrix.multiply( this.renderCamera.matrixWorldInverse );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\tif ( this.selectedObjects.length > 0 ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\t\tconst oldAutoClear = renderer.autoClear;\n\n\t\t\trenderer.autoClear = false;\n\n\t\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t\trenderer.setClearColor( 0xffffff, 1 );\n\n\t\t\tthis.updateSelectionCache();\n\n\t\t\t// Make selected objects invisible\n\t\t\tthis.changeVisibilityOfSelectedObjects( false );\n\n\t\t\tconst currentBackground = this.renderScene.background;\n\t\t\tthis.renderScene.background = null;\n\n\t\t\t// 1. Draw Non Selected objects in the depth buffer\n\t\t\tthis.renderScene.overrideMaterial = this.depthMaterial;\n\t\t\trenderer.setRenderTarget( this.renderTargetDepthBuffer );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.renderScene, this.renderCamera );\n\n\t\t\t// Make selected objects visible\n\t\t\tthis.changeVisibilityOfSelectedObjects( true );\n\t\t\tthis._visibilityCache.clear();\n\n\t\t\t// Update Texture Matrix for Depth compare\n\t\t\tthis.updateTextureMatrix();\n\n\t\t\t// Make non selected objects invisible, and draw only the selected objects, by comparing the depth buffer of non selected objects\n\t\t\tthis.changeVisibilityOfNonSelectedObjects( false );\n\t\t\tthis.renderScene.overrideMaterial = this.prepareMaskMaterial;\n\t\t\tthis.prepareMaskMaterial.uniforms[ 'cameraNearFar' ].value.set( this.renderCamera.near, this.renderCamera.far );\n\t\t\tthis.prepareMaskMaterial.uniforms[ 'depthTexture' ].value = this.renderTargetDepthBuffer.texture;\n\t\t\tthis.prepareMaskMaterial.uniforms[ 'textureMatrix' ].value = this.textureMatrix;\n\t\t\trenderer.setRenderTarget( this.renderTargetMaskBuffer );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.renderScene, this.renderCamera );\n\t\t\tthis.renderScene.overrideMaterial = null;\n\t\t\tthis.changeVisibilityOfNonSelectedObjects( true );\n\t\t\tthis._visibilityCache.clear();\n\t\t\tthis._selectionCache.clear();\n\n\t\t\tthis.renderScene.background = currentBackground;\n\n\t\t\t// 2. Downsample to Half resolution\n\t\t\tthis.fsQuad.material = this.materialCopy;\n\t\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetMaskBuffer.texture;\n\t\t\trenderer.setRenderTarget( this.renderTargetMaskDownSampleBuffer );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tthis.tempPulseColor1.copy( this.visibleEdgeColor );\n\t\t\tthis.tempPulseColor2.copy( this.hiddenEdgeColor );\n\n\t\t\tif ( this.pulsePeriod > 0 ) {\n\n\t\t\t\tconst scalar = ( 1 + 0.25 ) / 2 + Math.cos( performance.now() * 0.01 / this.pulsePeriod ) * ( 1.0 - 0.25 ) / 2;\n\t\t\t\tthis.tempPulseColor1.multiplyScalar( scalar );\n\t\t\t\tthis.tempPulseColor2.multiplyScalar( scalar );\n\n\t\t\t}\n\n\t\t\t// 3. Apply Edge Detection Pass\n\t\t\tthis.fsQuad.material = this.edgeDetectionMaterial;\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'maskTexture' ].value = this.renderTargetMaskDownSampleBuffer.texture;\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'texSize' ].value.set( this.renderTargetMaskDownSampleBuffer.width, this.renderTargetMaskDownSampleBuffer.height );\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'visibleEdgeColor' ].value = this.tempPulseColor1;\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'hiddenEdgeColor' ].value = this.tempPulseColor2;\n\t\t\trenderer.setRenderTarget( this.renderTargetEdgeBuffer1 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\t// 4. Apply Blur on Half res\n\t\t\tthis.fsQuad.material = this.separableBlurMaterial1;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'colorTexture' ].value = this.renderTargetEdgeBuffer1.texture;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionX;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'kernelRadius' ].value = this.edgeThickness;\n\t\t\trenderer.setRenderTarget( this.renderTargetBlurBuffer1 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'colorTexture' ].value = this.renderTargetBlurBuffer1.texture;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetEdgeBuffer1 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\t// Apply Blur on quarter res\n\t\t\tthis.fsQuad.material = this.separableBlurMaterial2;\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'colorTexture' ].value = this.renderTargetEdgeBuffer1.texture;\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetBlurBuffer2 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'colorTexture' ].value = this.renderTargetBlurBuffer2.texture;\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetEdgeBuffer2 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\t// Blend it additively over the input texture\n\t\t\tthis.fsQuad.material = this.overlayMaterial;\n\t\t\tthis.overlayMaterial.uniforms[ 'maskTexture' ].value = this.renderTargetMaskBuffer.texture;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeTexture1' ].value = this.renderTargetEdgeBuffer1.texture;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeTexture2' ].value = this.renderTargetEdgeBuffer2.texture;\n\t\t\tthis.overlayMaterial.uniforms[ 'patternTexture' ].value = this.patternTexture;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeStrength' ].value = this.edgeStrength;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeGlow' ].value = this.edgeGlow;\n\t\t\tthis.overlayMaterial.uniforms[ 'usePatternTexture' ].value = this.usePatternTexture;\n\n\n\t\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\trenderer.setClearColor( this._oldClearColor, this.oldClearAlpha );\n\t\t\trenderer.autoClear = oldAutoClear;\n\n\t\t}\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.fsQuad.material = this.materialCopy;\n\t\t\tthis.copyUniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\tgetPrepareMaskMaterial() {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t'depthTexture': { value: null },\n\t\t\t\t'cameraNearFar': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'textureMatrix': { value: null }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}`\n\n\t\t} );\n\n\t}\n\n\tgetEdgeDetectionMaterial() {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t'maskTexture': { value: null },\n\t\t\t\t'texSize': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'visibleEdgeColor': { value: new Vector3( 1.0, 1.0, 1.0 ) },\n\t\t\t\t'hiddenEdgeColor': { value: new Vector3( 1.0, 1.0, 1.0 ) },\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n\tgetSeperableBlurMaterial( maxRadius ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'MAX_RADIUS': maxRadius,\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'colorTexture': { value: null },\n\t\t\t\t'texSize': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'direction': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'kernelRadius': { value: 1.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n\tgetOverlayMaterial() {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t'maskTexture': { value: null },\n\t\t\t\t'edgeTexture1': { value: null },\n\t\t\t\t'edgeTexture2': { value: null },\n\t\t\t\t'patternTexture': { value: null },\n\t\t\t\t'edgeStrength': { value: 1.0 },\n\t\t\t\t'edgeGlow': { value: 1.0 },\n\t\t\t\t'usePatternTexture': { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}`,\n\t\t\tblending: AdditiveBlending,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t}\n\n}\n\nOutlinePass.BlurDirectionX = new Vector2( 1.0, 0.0 );\nOutlinePass.BlurDirectionY = new Vector2( 0.0, 1.0 );\n\nexport { OutlinePass };\n","import {\n\tVector2\n} from 'three';\n\nconst FXAAShader = {\n\n\tname: 'FXAAShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'resolution': { value: new Vector2( 1 / 1024, 1 / 512 ) }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\t// FXAA algorithm from NVIDIA, C# implementation by Jasper Flick, GLSL port by Dave Hoskins\n\t\t// http://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf\n\t\t// https://catlikecoding.com/unity/tutorials/advanced-rendering/fxaa/\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec2 resolution;\n\t\tvarying vec2 vUv;\n\n\t\t#define EDGE_STEP_COUNT 6\n\t\t#define EDGE_GUESS 8.0\n\t\t#define EDGE_STEPS 1.0, 1.5, 2.0, 2.0, 2.0, 4.0\n\t\tconst float edgeSteps[EDGE_STEP_COUNT] = float[EDGE_STEP_COUNT]( EDGE_STEPS );\n\n\t\tfloat _ContrastThreshold = 0.0312;\n\t\tfloat _RelativeThreshold = 0.063;\n\t\tfloat _SubpixelBlending = 1.0;\n\n\t\tvec4 Sample( sampler2D  tex2D, vec2 uv ) {\n\n\t\t\treturn texture( tex2D, uv );\n\n\t\t}\n\n\t\tfloat SampleLuminance( sampler2D tex2D, vec2 uv ) {\n\n\t\t\treturn dot( Sample( tex2D, uv ).rgb, vec3( 0.3, 0.59, 0.11 ) );\n\n\t\t}\n\n\t\tfloat SampleLuminance( sampler2D tex2D, vec2 texSize, vec2 uv, float uOffset, float vOffset ) {\n\n\t\t\tuv += texSize * vec2(uOffset, vOffset);\n\t\t\treturn SampleLuminance(tex2D, uv);\n\n\t\t}\n\n\t\tstruct LuminanceData {\n\n\t\t\tfloat m, n, e, s, w;\n\t\t\tfloat ne, nw, se, sw;\n\t\t\tfloat highest, lowest, contrast;\n\n\t\t};\n\n\t\tLuminanceData SampleLuminanceNeighborhood( sampler2D tex2D, vec2 texSize, vec2 uv ) {\n\n\t\t\tLuminanceData l;\n\t\t\tl.m = SampleLuminance( tex2D, uv );\n\t\t\tl.n = SampleLuminance( tex2D, texSize, uv,  0.0,  1.0 );\n\t\t\tl.e = SampleLuminance( tex2D, texSize, uv,  1.0,  0.0 );\n\t\t\tl.s = SampleLuminance( tex2D, texSize, uv,  0.0, -1.0 );\n\t\t\tl.w = SampleLuminance( tex2D, texSize, uv, -1.0,  0.0 );\n\n\t\t\tl.ne = SampleLuminance( tex2D, texSize, uv,  1.0,  1.0 );\n\t\t\tl.nw = SampleLuminance( tex2D, texSize, uv, -1.0,  1.0 );\n\t\t\tl.se = SampleLuminance( tex2D, texSize, uv,  1.0, -1.0 );\n\t\t\tl.sw = SampleLuminance( tex2D, texSize, uv, -1.0, -1.0 );\n\n\t\t\tl.highest = max( max( max( max( l.n, l.e ), l.s ), l.w ), l.m );\n\t\t\tl.lowest = min( min( min( min( l.n, l.e ), l.s ), l.w ), l.m );\n\t\t\tl.contrast = l.highest - l.lowest;\n\t\t\treturn l;\n\n\t\t}\n\n\t\tbool ShouldSkipPixel( LuminanceData l ) {\n\n\t\t\tfloat threshold = max( _ContrastThreshold, _RelativeThreshold * l.highest );\n\t\t\treturn l.contrast < threshold;\n\n\t\t}\n\n\t\tfloat DeterminePixelBlendFactor( LuminanceData l ) {\n\n\t\t\tfloat f = 2.0 * ( l.n + l.e + l.s + l.w );\n\t\t\tf += l.ne + l.nw + l.se + l.sw;\n\t\t\tf *= 1.0 / 12.0;\n\t\t\tf = abs( f - l.m );\n\t\t\tf = clamp( f / l.contrast, 0.0, 1.0 );\n\n\t\t\tfloat blendFactor = smoothstep( 0.0, 1.0, f );\n\t\t\treturn blendFactor * blendFactor * _SubpixelBlending;\n\n\t\t}\n\n\t\tstruct EdgeData {\n\n\t\t\tbool isHorizontal;\n\t\t\tfloat pixelStep;\n\t\t\tfloat oppositeLuminance, gradient;\n\n\t\t};\n\n\t\tEdgeData DetermineEdge( vec2 texSize, LuminanceData l ) {\n\n\t\t\tEdgeData e;\n\t\t\tfloat horizontal =\n\t\t\t\tabs( l.n + l.s - 2.0 * l.m ) * 2.0 +\n\t\t\t\tabs( l.ne + l.se - 2.0 * l.e ) +\n\t\t\t\tabs( l.nw + l.sw - 2.0 * l.w );\n\t\t\tfloat vertical =\n\t\t\t\tabs( l.e + l.w - 2.0 * l.m ) * 2.0 +\n\t\t\t\tabs( l.ne + l.nw - 2.0 * l.n ) +\n\t\t\t\tabs( l.se + l.sw - 2.0 * l.s );\n\t\t\te.isHorizontal = horizontal >= vertical;\n\n\t\t\tfloat pLuminance = e.isHorizontal ? l.n : l.e;\n\t\t\tfloat nLuminance = e.isHorizontal ? l.s : l.w;\n\t\t\tfloat pGradient = abs( pLuminance - l.m );\n\t\t\tfloat nGradient = abs( nLuminance - l.m );\n\n\t\t\te.pixelStep = e.isHorizontal ? texSize.y : texSize.x;\n\t\t\t\n\t\t\tif (pGradient < nGradient) {\n\n\t\t\t\te.pixelStep = -e.pixelStep;\n\t\t\t\te.oppositeLuminance = nLuminance;\n\t\t\t\te.gradient = nGradient;\n\n\t\t\t} else {\n\n\t\t\t\te.oppositeLuminance = pLuminance;\n\t\t\t\te.gradient = pGradient;\n\n\t\t\t}\n\n\t\t\treturn e;\n\n\t\t}\n\n\t\tfloat DetermineEdgeBlendFactor( sampler2D  tex2D, vec2 texSize, LuminanceData l, EdgeData e, vec2 uv ) {\n\n\t\t\tvec2 uvEdge = uv;\n\t\t\tvec2 edgeStep;\n\t\t\tif (e.isHorizontal) {\n\n\t\t\t\tuvEdge.y += e.pixelStep * 0.5;\n\t\t\t\tedgeStep = vec2( texSize.x, 0.0 );\n\n\t\t\t} else {\n\n\t\t\t\tuvEdge.x += e.pixelStep * 0.5;\n\t\t\t\tedgeStep = vec2( 0.0, texSize.y );\n\n\t\t\t}\n\n\t\t\tfloat edgeLuminance = ( l.m + e.oppositeLuminance ) * 0.5;\n\t\t\tfloat gradientThreshold = e.gradient * 0.25;\n\n\t\t\tvec2 puv = uvEdge + edgeStep * edgeSteps[0];\n\t\t\tfloat pLuminanceDelta = SampleLuminance( tex2D, puv ) - edgeLuminance;\n\t\t\tbool pAtEnd = abs( pLuminanceDelta ) >= gradientThreshold;\n\n\t\t\tfor ( int i = 1; i < EDGE_STEP_COUNT && !pAtEnd; i++ ) {\n\n\t\t\t\tpuv += edgeStep * edgeSteps[i];\n\t\t\t\tpLuminanceDelta = SampleLuminance( tex2D, puv ) - edgeLuminance;\n\t\t\t\tpAtEnd = abs( pLuminanceDelta ) >= gradientThreshold;\n\n\t\t\t}\n\n\t\t\tif ( !pAtEnd ) {\n\n\t\t\t\tpuv += edgeStep * EDGE_GUESS;\n\n\t\t\t}\n\n\t\t\tvec2 nuv = uvEdge - edgeStep * edgeSteps[0];\n\t\t\tfloat nLuminanceDelta = SampleLuminance( tex2D, nuv ) - edgeLuminance;\n\t\t\tbool nAtEnd = abs( nLuminanceDelta ) >= gradientThreshold;\n\n\t\t\tfor ( int i = 1; i < EDGE_STEP_COUNT && !nAtEnd; i++ ) {\n\n\t\t\t\tnuv -= edgeStep * edgeSteps[i];\n\t\t\t\tnLuminanceDelta = SampleLuminance( tex2D, nuv ) - edgeLuminance;\n\t\t\t\tnAtEnd = abs( nLuminanceDelta ) >= gradientThreshold;\n\n\t\t\t}\n\n\t\t\tif ( !nAtEnd ) {\n\n\t\t\t\tnuv -= edgeStep * EDGE_GUESS;\n\n\t\t\t}\n\n\t\t\tfloat pDistance, nDistance;\n\t\t\tif ( e.isHorizontal ) {\n\n\t\t\t\tpDistance = puv.x - uv.x;\n\t\t\t\tnDistance = uv.x - nuv.x;\n\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tpDistance = puv.y - uv.y;\n\t\t\t\tnDistance = uv.y - nuv.y;\n\n\t\t\t}\n\n\t\t\tfloat shortestDistance;\n\t\t\tbool deltaSign;\n\t\t\tif ( pDistance <= nDistance ) {\n\n\t\t\t\tshortestDistance = pDistance;\n\t\t\t\tdeltaSign = pLuminanceDelta >= 0.0;\n\n\t\t\t} else {\n\n\t\t\t\tshortestDistance = nDistance;\n\t\t\t\tdeltaSign = nLuminanceDelta >= 0.0;\n\n\t\t\t}\n\n\t\t\tif ( deltaSign == ( l.m - edgeLuminance >= 0.0 ) ) {\n\n\t\t\t\treturn 0.0;\n\n\t\t\t}\n\n\t\t\treturn 0.5 - shortestDistance / ( pDistance + nDistance );\n\n\t\t}\n\n\t\tvec4 ApplyFXAA( sampler2D  tex2D, vec2 texSize, vec2 uv ) {\n\n\t\t\tLuminanceData luminance = SampleLuminanceNeighborhood( tex2D, texSize, uv );\n\t\t\tif ( ShouldSkipPixel( luminance ) ) {\n\n\t\t\t\treturn Sample( tex2D, uv );\n\n\t\t\t}\n\n\t\t\tfloat pixelBlend = DeterminePixelBlendFactor( luminance );\n\t\t\tEdgeData edge = DetermineEdge( texSize, luminance );\n\t\t\tfloat edgeBlend = DetermineEdgeBlendFactor( tex2D, texSize, luminance, edge, uv );\n\t\t\tfloat finalBlend = max( pixelBlend, edgeBlend );\n\n\t\t\tif (edge.isHorizontal) {\n\n\t\t\t\tuv.y += edge.pixelStep * finalBlend;\n\n\t\t\t} else {\n\n\t\t\t\tuv.x += edge.pixelStep * finalBlend;\n\n\t\t\t}\n\n\t\t\treturn Sample( tex2D, uv );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = ApplyFXAA( tDiffuse, resolution.xy, vUv );\n\t\t\t\n\t\t}`\n\n};\n\nexport { FXAAShader };\n","/**\n * Gamma Correction Shader\n * http://en.wikipedia.org/wiki/gamma_correction\n */\n\nconst GammaCorrectionShader = {\n\n\tname: 'GammaCorrectionShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = sRGBTransferOETF( tex );\n\n\t\t}`\n\n};\n\nexport { GammaCorrectionShader };\n","import {\n\tMatrix4,\n\tObject3D,\n\tQuaternion,\n\tVector3\n} from 'three';\n\n/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n */\n\nconst _position = new Vector3();\nconst _quaternion = new Quaternion();\nconst _scale = new Vector3();\n\nclass CSS3DObject extends Object3D {\n\n\tconstructor( element = document.createElement( 'div' ) ) {\n\n\t\tsuper();\n\n\t\tthis.isCSS3DObject = true;\n\n\t\tthis.element = element;\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.pointerEvents = 'auto';\n\t\tthis.element.style.userSelect = 'none';\n\n\t\tthis.element.setAttribute( 'draggable', false );\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif (\n\t\t\t\t\tobject.element instanceof object.element.ownerDocument.defaultView.Element &&\n\t\t\t\t\tobject.element.parentNode !== null\n\t\t\t\t) {\n\n\t\t\t\t\tobject.element.remove();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass CSS3DSprite extends CSS3DObject {\n\n\tconstructor( element ) {\n\n\t\tsuper( element );\n\n\t\tthis.isCSS3DSprite = true;\n\n\t\tthis.rotation2D = 0;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.rotation2D = source.rotation2D;\n\n\t\treturn this;\n\n\t}\n\n}\n\n//\n\nconst _matrix = new Matrix4();\nconst _matrix2 = new Matrix4();\n\nclass CSS3DRenderer {\n\n\tconstructor( parameters = {} ) {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tcamera: { style: '' },\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = parameters.element !== undefined ? parameters.element : document.createElement( 'div' );\n\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tconst viewElement = document.createElement( 'div' );\n\t\tviewElement.style.transformOrigin = '0 0';\n\t\tviewElement.style.pointerEvents = 'none';\n\t\tdomElement.appendChild( viewElement );\n\n\t\tconst cameraElement = document.createElement( 'div' );\n\n\t\tcameraElement.style.transformStyle = 'preserve-3d';\n\n\t\tviewElement.appendChild( cameraElement );\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tconst fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\t\tif ( camera.view && camera.view.enabled ) {\n\n\t\t\t\t// view offset\n\t\t\t\tviewElement.style.transform = `translate( ${ - camera.view.offsetX * ( _width / camera.view.width ) }px, ${ - camera.view.offsetY * ( _height / camera.view.height ) }px )`;\n\n\t\t\t\t// view fullWidth and fullHeight, view width and height\n\t\t\t\tviewElement.style.transform += `scale( ${ camera.view.fullWidth / camera.view.width }, ${ camera.view.fullHeight / camera.view.height } )`;\n\n\t\t\t} else {\n\n\t\t\t\tviewElement.style.transform = '';\n\n\t\t\t}\n\n\t\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\t\tlet tx, ty;\n\n\t\t\tif ( camera.isOrthographicCamera ) {\n\n\t\t\t\ttx = - ( camera.right + camera.left ) / 2;\n\t\t\t\tty = ( camera.top + camera.bottom ) / 2;\n\n\t\t\t}\n\n\t\t\tconst scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\n\t\t\tconst cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t\t`scale( ${ scaleByViewOffset } )` + 'scale(' + fov + ')' + 'translate(' + epsilon( tx ) + 'px,' + epsilon( ty ) + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t\t`scale( ${ scaleByViewOffset } )` + 'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\t\t\tconst perspective = camera.isPerspectiveCamera ? 'perspective(' + fov + 'px) ' : '';\n\n\t\t\tconst style = perspective + cameraCSSMatrix +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\t\tif ( cache.camera.style !== style ) {\n\n\t\t\t\tcameraElement.style.transform = style;\n\n\t\t\t\tcache.camera.style = style;\n\n\t\t\t}\n\n\t\t\trenderObject( scene, scene, camera, cameraCSSMatrix );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t\tviewElement.style.width = width + 'px';\n\t\t\tviewElement.style.height = height + 'px';\n\n\t\t\tcameraElement.style.width = width + 'px';\n\t\t\tcameraElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction epsilon( value ) {\n\n\t\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t\t}\n\n\t\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\n\t\t\treturn 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t}\n\n\t\tfunction getObjectCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\t\t\tconst matrix3d = 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t\t}\n\n\t\tfunction hideObject( object ) {\n\n\t\t\tif ( object.isCSS3DObject ) object.element.style.display = 'none';\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\thideObject( object.children[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, cameraCSSMatrix ) {\n\n\t\t\tif ( object.visible === false ) {\n\n\t\t\t\thideObject( object );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( object.isCSS3DObject ) {\n\n\t\t\t\tconst visible = ( object.layers.test( camera.layers ) === true );\n\n\t\t\t\tconst element = object.element;\n\t\t\t\telement.style.display = visible === true ? '' : 'none';\n\n\t\t\t\tif ( visible === true ) {\n\n\t\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\t\tlet style;\n\n\t\t\t\t\tif ( object.isCSS3DSprite ) {\n\n\t\t\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\t\t\t_matrix.copy( camera.matrixWorldInverse );\n\t\t\t\t\t\t_matrix.transpose();\n\n\t\t\t\t\t\tif ( object.rotation2D !== 0 ) _matrix.multiply( _matrix2.makeRotationZ( object.rotation2D ) );\n\n\t\t\t\t\t\tobject.matrixWorld.decompose( _position, _quaternion, _scale );\n\t\t\t\t\t\t_matrix.setPosition( _position );\n\t\t\t\t\t\t_matrix.scale( _scale );\n\n\t\t\t\t\t\t_matrix.elements[ 3 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 7 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 11 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 15 ] = 1;\n\n\t\t\t\t\t\tstyle = getObjectCSSMatrix( _matrix );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cachedObject = cache.objects.get( object );\n\n\t\t\t\t\tif ( cachedObject === undefined || cachedObject.style !== style ) {\n\n\t\t\t\t\t\telement.style.transform = style;\n\n\t\t\t\t\t\tconst objectData = { style: style };\n\t\t\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { CSS3DObject, CSS3DSprite, CSS3DRenderer };\n","//RainDrop.js\r\nimport {\r\n  BufferGeometry,\r\n  Points,\r\n  PointsMaterial,\r\n  TextureLoader,\r\n  AdditiveBlending,\r\n  Float32BufferAttribute\r\n} from 'three'\r\nexport default class RainDrop {\r\n  public drops:number\r\n  public geom:BufferGeometry\r\n  public velocityY:Array<number>\r\n  public instance:Points\r\n\r\n  constructor() {\r\n    const texture = new TextureLoader().load('images/蓝色水滴雨滴.png')\r\n    const material = new PointsMaterial({    //用图片初始化顶点材质\r\n      size: 2,\r\n      map: texture,\r\n      transparent: true,\r\n      blending: AdditiveBlending,\r\n      depthTest: false\r\n    })\r\n\r\n    const positions:number[] = []\r\n\r\n    this.drops = 8000\r\n    this.geom = new BufferGeometry()\r\n    this.velocityY = []\r\n\r\n    // const positions = new Float32Array(this.drops * 3)\r\n    // const velocities = new Float32Array(this.drops * 3)\r\n\r\n    for (let i = 0; i < this.drops; i++) {\r\n      positions.push(Math.random() * 400 - 200)\r\n      positions.push(Math.random() * 500 - 250)\r\n      positions.push(Math.random() * 400 - 200)\r\n      this.velocityY.push(0.5 + Math.random() / 2)  //初始化每个粒子的坐标和粒子在Y方向的速度\r\n    }\r\n\r\n    //确定各个顶点的位置坐标\r\n    this.geom.setAttribute('position', new Float32BufferAttribute(positions, 3))\r\n    this.instance = new Points(this.geom, material)  //初始化粒子系统\r\n    this.instance.name = 'rain_instance'\r\n  }\r\n\r\n  animate() {\r\n    const positions = this.geom.attributes.position.array;\r\n\r\n    for (let i = 0; i < this.drops * 3; i += 3) {    //改变Y坐标，加速运动\r\n      this.velocityY[i / 3] += Math.random() * 0.005\r\n      positions[i + 1] -= this.velocityY[i / 3]\r\n      if (positions[i + 1] < -200) {\r\n        positions[i + 1] = 200\r\n        this.velocityY[i / 3] = 0.5 + Math.random() / 2\r\n      }\r\n    }\r\n    this.instance.rotation.y += 0.002\r\n    this.geom.attributes.position.needsUpdate = true\r\n  }\r\n}\r\n","import * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\r\nimport {\r\n    Mesh,\r\n    MeshPhysicalMaterial,\r\n    Object3D,\r\n    BufferGeometry\r\n} from 'three';\r\n\r\n/**\r\n * 合并模型\r\n * @param parent 父级对象，合并其下children\r\n * @param meshName 合并后的模型名称\r\n */\r\nexport default function mergeMeshs(parent:Object3D, meshName:string){\r\n    let geometryArray:BufferGeometry[] = []; // 将你的要合并的多个geometry放入到该数组\r\n    let materialArray:MeshPhysicalMaterial[] = []; // 将你的要赋值的多个material放入到该数组\r\n\r\n    for(let i = parent.children.length - 1; i >= 0; i--){\r\n        const child = parent.children[i]\r\n        if(child instanceof Mesh){\r\n            const geo = child.geometry.clone();\r\n            const mat = child.material.clone() as MeshPhysicalMaterial;\r\n            geometryArray.push(geo);\r\n            materialArray.push(mat);\r\n            \r\n            child.removeFromParent()\r\n            child.geometry.dispose()\r\n            child.material.dispose()\r\n        }\r\n    }\r\n\r\n    // 合并模型\r\n    const mergedGeometries = BufferGeometryUtils.mergeGeometries(geometryArray, true);\r\n    const singleMergeMesh = new Mesh(mergedGeometries, materialArray);\r\n    singleMergeMesh.name = meshName;\r\n\r\n    parent.add( singleMergeMesh ); // 在场景中添加合并后的mesh(模型)\r\n    // console.log('singleMergeMesh', parent);\r\n}\r\n\r\n","import {\r\n    Mesh,\r\n    MeshPhysicalMaterial,\r\n    MeshStandardMaterial,\r\n    Group\r\n} from 'three'\r\nimport mergeMeshs from './mergeMesh';\r\n\r\nfunction handleMaterial(material: MeshPhysicalMaterial | MeshStandardMaterial, envMapIntensity: number) {\r\n    material.envMapIntensity = envMapIntensity;\r\n    //通过关闭顶点颜色解决模型的黑块问题\r\n    material.vertexColors = false   //是否使用顶点着色。默认值为false。 此引擎支持RGB或者RGBA两种顶点颜色，取决于缓冲 attribute 使用的是三分量（RGB）还是四分量（RGBA）\r\n    //解决渲染材质不受环境光影响，原因是three.js创建材质默认材质的金属度(metalness)为0\r\n    // material.metalness = 0.5\r\n    if (!material.metalness || material.metalness === 0 || material.metalness === 1) material.metalness = 0.5\r\n}\r\n\r\nfunction suffixTraverse(scene: Group, envMapIntensity: number, mergeRule: Function, receiveShadow: boolean) {\r\n    scene.traverse(obj => {\r\n        if (obj instanceof Mesh) {\r\n            const mesh = obj as Mesh\r\n            mesh.castShadow = true\r\n            mesh.receiveShadow = receiveShadow ?? true\r\n\r\n            if (mesh.material instanceof MeshPhysicalMaterial || mesh.material instanceof MeshStandardMaterial) {\r\n                handleMaterial(mesh.material, envMapIntensity)\r\n            } else if (mesh.material instanceof Array) {\r\n                (mesh.material as MeshPhysicalMaterial[]).forEach(material => {\r\n                    handleMaterial(material, envMapIntensity)\r\n                })\r\n            }\r\n\r\n        } else if (obj.children) {\r\n            //合并模型\r\n            if (obj.name.startsWith('设备_')) {\r\n                const equipName = obj.name.slice(3)\r\n                obj.children.forEach(child => {\r\n                    if (child instanceof Group) {\r\n                        mergeMeshs(child, equipName)\r\n                    }\r\n                })\r\n            }\r\n            if (mergeRule(obj.name)) {\r\n                console.log('合并模型', obj.name);\r\n                mergeMeshs(obj, 'merged_' + obj.name)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n// 渐进式加载进度\r\n//微任务模式执行最新回调\r\nlet currentPercent = 0, newEnd = 0\r\nfunction slowlyGenerate(end: number, cb: Function) {\r\n    if (end > newEnd) newEnd = end\r\n\r\n    let step = () => {\r\n        if (newEnd === 100) {\r\n            queueMicrotask(() => {\r\n                currentPercent = 100\r\n            })\r\n            window.cancelAnimationFrame(interval)\r\n        }\r\n        if (currentPercent < 100) currentPercent++\r\n        console.log('cb', cb.toString(), currentPercent);\r\n        cb(currentPercent)\r\n        if (currentPercent >= newEnd) {\r\n            window.cancelAnimationFrame(interval)\r\n        }\r\n    }\r\n    let interval = requestAnimationFrame(step)\r\n}\r\n\r\ntype CallbackInfo = {\r\n    cb: Function,\r\n    end: number\r\n}\r\n//宏任务模式执行回调，在进度条没到100前，按百分比执行最近区间的回调，到100后直接执行100回调\r\nlet isGenerating = false, cbQuery: CallbackInfo[] = []\r\nfunction slowlyGenerate2(end: number, cb: Function) {\r\n    if (end > newEnd) newEnd = end\r\n    cbQuery.push({\r\n        end: end,\r\n        cb: cb\r\n    })\r\n    console.log('newEnd', end, newEnd, currentPercent);\r\n    if (!isGenerating && currentPercent !== 100) {\r\n        function intervalFunc() {\r\n            //100则直接到终点\r\n            if (newEnd === 100) currentPercent = 100\r\n            if (currentPercent < 100 && currentPercent < newEnd) currentPercent++\r\n            // console.log('cb', cb.toString(), currentPercent, cbQuery);\r\n            for (let i = 0, len = cbQuery.length; i < len; i++) {\r\n                if (currentPercent <= cbQuery[i].end) {\r\n                    console.log('currentPercent', currentPercent);\r\n                    cbQuery[i].cb(currentPercent)\r\n                    break;  // 只执行里大于当前百分比且最近的回调\r\n                }\r\n            }\r\n            // cb(currentPercent)\r\n            //大于等于当前指定的终点时，中断定时器\r\n            if (currentPercent >= newEnd) {\r\n                interval && window.clearInterval(interval)\r\n                isGenerating = false\r\n            }\r\n        }\r\n        let interval = window.setInterval(intervalFunc, 60);\r\n        console.log('currentPercent', currentPercent);\r\n        isGenerating = true     //保证只有一个定时器\r\n    }\r\n}\r\n\r\nfunction resetProgress() {\r\n    currentPercent = 0\r\n    newEnd = 0\r\n    isGenerating = false\r\n    cbQuery = []\r\n}\r\n\r\nconst _lut = ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff'];\r\n//copied from three.cjs 0.160\r\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\nfunction generateUUID() {\r\n\r\n    const d0 = Math.random() * 0xffffffff | 0;\r\n    const d1 = Math.random() * 0xffffffff | 0;\r\n    const d2 = Math.random() * 0xffffffff | 0;\r\n    const d3 = Math.random() * 0xffffffff | 0;\r\n    const uuid = _lut[d0 & 0xff] + _lut[d0 >> 8 & 0xff] + _lut[d0 >> 16 & 0xff] + _lut[d0 >> 24 & 0xff] + '-' +\r\n        _lut[d1 & 0xff] + _lut[d1 >> 8 & 0xff] + '-' + _lut[d1 >> 16 & 0x0f | 0x40] + _lut[d1 >> 24 & 0xff] + '-' +\r\n        _lut[d2 & 0x3f | 0x80] + _lut[d2 >> 8 & 0xff] + '-' + _lut[d2 >> 16 & 0xff] + _lut[d2 >> 24 & 0xff] +\r\n        _lut[d3 & 0xff] + _lut[d3 >> 8 & 0xff] + _lut[d3 >> 16 & 0xff] + _lut[d3 >> 24 & 0xff];\r\n\r\n    // .toLowerCase() here flattens concatenated strings to save heap memory space.\r\n    return uuid.toLowerCase();\r\n}\r\n\r\nexport default {\r\n    slowlyGenerate, slowlyGenerate2, resetProgress, generateUUID, suffixTraverse\r\n}","type MyObject = {\r\n    [key: string]: any\r\n}\r\n\r\ntype noop = (...args: any[]) => any\r\n\r\nclass EventBus {\r\n    public eventObject: MyObject\r\n    public callbackId: number\r\n\r\n    constructor() {\r\n        this.eventObject = {}\r\n        this.callbackId = 0\r\n    }\r\n\r\n\r\n    publish<T extends noop>(eventName:string, ...args:Parameters<T>) {\r\n        const callbackObject = this.eventObject[eventName]\r\n        if (!callbackObject) {\r\n            console.log('callbackObject not found!');\r\n            return\r\n        }\r\n\r\n        for (let id in callbackObject) {\r\n            callbackObject[id](...args)\r\n            if (id[0] === 'd') delete this.eventObject[eventName][id]\r\n        }\r\n    }\r\n\r\n    subscribe(eventName:string, callback:Function, isOnce:boolean = false) {\r\n        if (!this.eventObject[eventName]) this.eventObject[eventName] = {}\r\n\r\n        let id\r\n        if (isOnce) id = 'd' + this.callbackId++\r\n        else id = this.callbackId++\r\n\r\n        this.eventObject[eventName][id] = callback\r\n\r\n        const unSubscribe = () => {\r\n            delete this.eventObject[eventName][id]\r\n            if (Object.keys(this.eventObject[eventName]).length === 0) delete this.eventObject[eventName]\r\n        }\r\n\r\n        return { unSubscribe }\r\n    }\r\n\r\n    clear(eventName:string) {\r\n        if (eventName) delete this.eventObject[eventName]\r\n        else this.eventObject = {}\r\n    }\r\n}\r\n\r\nclass MyEventBus {\r\n    constructor() { }\r\n\r\n    private myEventBus:EventBus | null = null\r\n\r\n    getEventBus() {\r\n        if (this.myEventBus) return this.myEventBus\r\n        else return this.myEventBus = new EventBus()\r\n    }\r\n}\r\n\r\n\r\nexport default MyEventBus","export default class PercentInterceptor {\r\n    private percentMap: Map<string, number>\r\n    public percentMapProxy: Map<string, number>\r\n\r\n    constructor(callback:Function) {\r\n        this.percentMap = new Map()\r\n        this.percentMapProxy = new Proxy(this.percentMap, {\r\n            get(target, property, _receiver) {\r\n                if (property === 'set') {\r\n                    // console.log('Intercepted set percentMap proxy');\r\n                    // eventBus.publish('percentMapChange', target)\r\n                    queueMicrotask(() => {\r\n                        handlerPercent(target)\r\n                    })\r\n                    return function (key: any, value: any) {\r\n                        return Reflect.apply(target[property], target, [key, value])\r\n                    }\r\n                }\r\n                if (property === 'clear') {\r\n                    // console.log('Intercepted clear method on percentMap');\r\n                    // eventBus.publish('percentMapClear')\r\n                    return function (key: any, value: any) {\r\n                        return Reflect.apply(target[property], target, [key, value])\r\n                    }\r\n                }\r\n            },\r\n        })\r\n\r\n        function handlerPercent(target: Map<string, number>) {\r\n            // console.log('handlerPercent ', target)\r\n            let percent = 0\r\n            const iterator = target.values()\r\n            let next = iterator.next()\r\n            while (!next.done) {\r\n                percent += next.value\r\n                next = iterator.next()\r\n            }\r\n            let num = Math.floor(percent / target.size)\r\n            const realPercent = isNaN(num) ? 0 : num\r\n        \r\n            console.log('handlerPercent computed',target, realPercent);\r\n            return callback(realPercent)\r\n        }\r\n    }\r\n}","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = Object.freeze({\n    Linear: Object.freeze({\n        None: function (amount) {\n            return amount;\n        },\n        In: function (amount) {\n            return amount;\n        },\n        Out: function (amount) {\n            return amount;\n        },\n        InOut: function (amount) {\n            return amount;\n        },\n    }),\n    Quadratic: Object.freeze({\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    }),\n    Cubic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    }),\n    Quartic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    }),\n    Quintic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    }),\n    Sinusoidal: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sin(((1.0 - amount) * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.sin(Math.PI * (0.5 - amount)));\n        },\n    }),\n    Exponential: Object.freeze({\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    }),\n    Circular: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    }),\n    Elastic: Object.freeze({\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    }),\n    Back: Object.freeze({\n        In: function (amount) {\n            var s = 1.70158;\n            return amount === 1 ? 1 : amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return amount === 0 ? 0 : --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    }),\n    Bounce: Object.freeze({\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    }),\n    generatePow: function (power) {\n        if (power === void 0) { power = 4; }\n        power = power < Number.EPSILON ? Number.EPSILON : power;\n        power = power > 10000 ? 10000 : power;\n        return {\n            In: function (amount) {\n                return Math.pow(amount, power);\n            },\n            Out: function (amount) {\n                return 1 - Math.pow((1 - amount), power);\n            },\n            InOut: function (amount) {\n                if (amount < 0.5) {\n                    return Math.pow((amount * 2), power) / 2;\n                }\n                return (1 - Math.pow((2 - amount * 2), power)) / 2 + 0.5;\n            },\n        };\n    },\n});\n\nvar now = function () { return performance.now(); };\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n        this.add.apply(this, tweens);\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) { return _this._tweens[tweenId]; });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function () {\n        var _a;\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        for (var _b = 0, tweens_1 = tweens; _b < tweens_1.length; _b++) {\n            var tween = tweens_1[_b];\n            // Remove from any other group first, a tween can only be in one group at a time.\n            // @ts-expect-error library internal access\n            (_a = tween._group) === null || _a === void 0 ? void 0 : _a.remove(tween);\n            // @ts-expect-error library internal access\n            tween._group = this;\n            this._tweens[tween.getId()] = tween;\n            this._tweensAddedDuringUpdate[tween.getId()] = tween;\n        }\n    };\n    Group.prototype.remove = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        for (var _a = 0, tweens_2 = tweens; _a < tweens_2.length; _a++) {\n            var tween = tweens_2[_a];\n            // @ts-expect-error library internal access\n            tween._group = undefined;\n            delete this._tweens[tween.getId()];\n            delete this._tweensAddedDuringUpdate[tween.getId()];\n        }\n    };\n    /** Return true if all tweens in the group are not paused or playing. */\n    Group.prototype.allStopped = function () {\n        return this.getAll().every(function (tween) { return !tween.isPlaying(); });\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now(); }\n        if (preserve === void 0) { preserve = true; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0)\n            return;\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve)\n                    this.remove(tween);\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(object, group) {\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._isDynamic = false;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        // eslint-disable-next-line\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._propertiesAreSetUp = false;\n        this._goToEnd = false;\n        this._object = object;\n        if (typeof group === 'object') {\n            this._group = group;\n            group.add(this);\n        }\n        // Use \"true\" to restore old behavior (will be removed in future release).\n        else if (group === true) {\n            this._group = mainGroup;\n            mainGroup.add(this);\n        }\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.getDuration = function () {\n        return this._duration;\n    };\n    Tween.prototype.to = function (target, duration) {\n        if (duration === void 0) { duration = 1000; }\n        if (this._isPlaying)\n            throw new Error('Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.');\n        this._valuesEnd = target;\n        this._propertiesAreSetUp = false;\n        this._duration = duration < 0 ? 0 : duration;\n        return this;\n    };\n    Tween.prototype.duration = function (duration) {\n        if (duration === void 0) { duration = 1000; }\n        this._duration = duration < 0 ? 0 : duration;\n        return this;\n    };\n    Tween.prototype.dynamic = function (dynamic) {\n        if (dynamic === void 0) { dynamic = false; }\n        this._isDynamic = dynamic;\n        return this;\n    };\n    Tween.prototype.start = function (time, overrideStartingValues) {\n        if (time === void 0) { time = now(); }\n        if (overrideStartingValues === void 0) { overrideStartingValues = false; }\n        if (this._isPlaying) {\n            return this;\n        }\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time;\n        this._startTime += this._delayTime;\n        if (!this._propertiesAreSetUp || overrideStartingValues) {\n            this._propertiesAreSetUp = true;\n            // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n            if (!this._isDynamic) {\n                var tmp = {};\n                for (var prop in this._valuesEnd)\n                    tmp[prop] = this._valuesEnd[prop];\n                this._valuesEnd = tmp;\n            }\n            this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, overrideStartingValues);\n        }\n        return this;\n    };\n    Tween.prototype.startFromCurrentValues = function (time) {\n        return this.start(time, true);\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat, overrideStartingValues) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // Handle an array of relative values.\n                // Creates a local copy of the Array with the start value at the front\n                var temp = [startValue];\n                for (var i = 0, l = endValues.length; i < l; i += 1) {\n                    var value = this._handleRelativeValue(startValue, endValues[i]);\n                    if (isNaN(value)) {\n                        isInterpolationList = false;\n                        console.warn('Found invalid interpolation list. Skipping.');\n                        break;\n                    }\n                    temp.push(value);\n                }\n                if (isInterpolationList) {\n                    // if (_valuesStart[property] === undefined) { // handle end values only the first time. NOT NEEDED? setupProperties is now guarded by _propertiesAreSetUp.\n                    _valuesEnd[property] = temp;\n                    // }\n                }\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                var nestedObject = startValue;\n                for (var prop in nestedObject) {\n                    _valuesStart[property][prop] = nestedObject[prop];\n                }\n                // TODO? repeat nested values? And yoyo? And array values?\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {};\n                var endValues = _valuesEnd[property];\n                // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n                if (!this._isDynamic) {\n                    var tmp = {};\n                    for (var prop in endValues)\n                        tmp[prop] = endValues[prop];\n                    _valuesEnd[property] = endValues = tmp;\n                }\n                this._setupProperties(nestedObject, _valuesStart[property], endValues, _valuesStartRepeat[property], overrideStartingValues);\n            }\n            else {\n                // Save the starting value, but only once unless override is requested.\n                if (typeof _valuesStart[property] === 'undefined' || overrideStartingValues) {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(this._startTime + this._duration);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        if (!group) {\n            console.warn('tween.group() without args has been removed, use group.add(tween) instead.');\n            return this;\n        }\n        group.add(this);\n        return this;\n    };\n    /**\n     * Removes the tween from whichever group it is in.\n     */\n    Tween.prototype.remove = function () {\n        var _a;\n        (_a = this._group) === null || _a === void 0 ? void 0 : _a.remove(this);\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        if (amount === void 0) { amount = 0; }\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        if (times === void 0) { times = 0; }\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        if (yoyo === void 0) { yoyo = false; }\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        if (easingFunction === void 0) { easingFunction = Easing.Linear.None; }\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        if (interpolationFunction === void 0) { interpolationFunction = Interpolation.Linear; }\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    // eslint-disable-next-line\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onEveryStart = function (callback) {\n        this._onEveryStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     *\n     * @param autoStart - When true, calling update will implicitly call start()\n     * as well. Note, if you stop() or end() the tween, but are still calling\n     * update(), it will start again!\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        var _this = this;\n        var _a;\n        if (time === void 0) { time = now(); }\n        if (autoStart === void 0) { autoStart = Tween.autoStartOnUpdate; }\n        if (this._isPaused)\n            return true;\n        var property;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (autoStart)\n                this.start(time, true);\n            else\n                return false;\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        if (this._onEveryStartCallbackFired === false) {\n            if (this._onEveryStartCallback) {\n                this._onEveryStartCallback(this._object);\n            }\n            this._onEveryStartCallbackFired = true;\n        }\n        var elapsedTime = time - this._startTime;\n        var durationAndDelay = this._duration + ((_a = this._repeatDelayTime) !== null && _a !== void 0 ? _a : this._delayTime);\n        var totalTime = this._duration + this._repeat * durationAndDelay;\n        var calculateElapsedPortion = function () {\n            if (_this._duration === 0)\n                return 1;\n            if (elapsedTime > totalTime) {\n                return 1;\n            }\n            var timesRepeated = Math.trunc(elapsedTime / durationAndDelay);\n            var timeIntoCurrentRepeat = elapsedTime - timesRepeated * durationAndDelay;\n            // TODO use %?\n            // const timeIntoCurrentRepeat = elapsedTime % durationAndDelay\n            var portion = Math.min(timeIntoCurrentRepeat / _this._duration, 1);\n            if (portion === 0 && elapsedTime === _this._duration) {\n                return 1;\n            }\n            return portion;\n        };\n        var elapsed = calculateElapsedPortion();\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (this._duration === 0 || elapsedTime >= this._duration) {\n            if (this._repeat > 0) {\n                var completeCount = Math.min(Math.trunc((elapsedTime - this._duration) / durationAndDelay) + 1, this._repeat);\n                if (isFinite(this._repeat)) {\n                    this._repeat -= completeCount;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                this._startTime += durationAndDelay * completeCount;\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                this._onEveryStartCallbackFired = false;\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration, false);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        return parseFloat(end);\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    Tween.autoStartOnUpdate = false;\n    return Tween;\n}());\n\nvar VERSION = '25.0.0';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\n/**\n * @deprecated The global TWEEN Group will be removed in a following major\n * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n * group.\n *\n * Old code:\n *\n * ```js\n * import * as TWEEN from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new TWEEN.Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   TWEEN.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n *\n * New code:\n *\n * ```js\n * import {Tween, Group} from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * const group = new Group()\n * group.add(tween)\n * group.add(tween2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   group.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n */\nvar getAll = TWEEN.getAll.bind(TWEEN);\n/**\n * @deprecated The global TWEEN Group will be removed in a following major\n * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n * group.\n *\n * Old code:\n *\n * ```js\n * import * as TWEEN from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new TWEEN.Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   TWEEN.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n *\n * New code:\n *\n * ```js\n * import {Tween, Group} from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * const group = new Group()\n * group.add(tween)\n * group.add(tween2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   group.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n */\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\n/**\n * @deprecated The global TWEEN Group will be removed in a following major\n * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n * group.\n *\n * Old code:\n *\n * ```js\n * import * as TWEEN from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new TWEEN.Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   TWEEN.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n *\n * New code:\n *\n * ```js\n * import {Tween, Group} from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * const group = new Group()\n * group.add(tween)\n * group.add(tween2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   group.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n */\nvar add = TWEEN.add.bind(TWEEN);\n/**\n * @deprecated The global TWEEN Group will be removed in a following major\n * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n * group.\n *\n * Old code:\n *\n * ```js\n * import * as TWEEN from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new TWEEN.Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   TWEEN.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n *\n * New code:\n *\n * ```js\n * import {Tween, Group} from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * const group = new Group()\n * group.add(tween)\n * group.add(tween2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   group.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n */\nvar remove = TWEEN.remove.bind(TWEEN);\n/**\n * @deprecated The global TWEEN Group will be removed in a following major\n * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n * group.\n *\n * Old code:\n *\n * ```js\n * import * as TWEEN from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new TWEEN.Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   TWEEN.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n *\n * New code:\n *\n * ```js\n * import {Tween, Group} from '@tweenjs/tween.js'\n *\n * //...\n *\n * const tween = new Tween(obj)\n * const tween2 = new TWEEN.Tween(obj2)\n *\n * //...\n *\n * const group = new Group()\n * group.add(tween)\n * group.add(tween2)\n *\n * //...\n *\n * requestAnimationFrame(function loop(time) {\n *   group.update(time)\n *   requestAnimationFrame(loop)\n * })\n * ```\n */\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    /**\n     * @deprecated The global TWEEN Group will be removed in a following major\n     * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n     * group.\n     *\n     * Old code:\n     *\n     * ```js\n     * import * as TWEEN from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new TWEEN.Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   TWEEN.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     *\n     * New code:\n     *\n     * ```js\n     * import {Tween, Group} from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * const group = new Group()\n     * group.add(tween)\n     * group.add(tween2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   group.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     */\n    getAll: getAll,\n    /**\n     * @deprecated The global TWEEN Group will be removed in a following major\n     * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n     * group.\n     *\n     * Old code:\n     *\n     * ```js\n     * import * as TWEEN from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new TWEEN.Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   TWEEN.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     *\n     * New code:\n     *\n     * ```js\n     * import {Tween, Group} from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * const group = new Group()\n     * group.add(tween)\n     * group.add(tween2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   group.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     */\n    removeAll: removeAll,\n    /**\n     * @deprecated The global TWEEN Group will be removed in a following major\n     * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n     * group.\n     *\n     * Old code:\n     *\n     * ```js\n     * import * as TWEEN from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new TWEEN.Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   TWEEN.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     *\n     * New code:\n     *\n     * ```js\n     * import {Tween, Group} from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * const group = new Group()\n     * group.add(tween)\n     * group.add(tween2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   group.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     */\n    add: add,\n    /**\n     * @deprecated The global TWEEN Group will be removed in a following major\n     * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n     * group.\n     *\n     * Old code:\n     *\n     * ```js\n     * import * as TWEEN from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new TWEEN.Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   TWEEN.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     *\n     * New code:\n     *\n     * ```js\n     * import {Tween, Group} from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * const group = new Group()\n     * group.add(tween)\n     * group.add(tween2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   group.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     */\n    remove: remove,\n    /**\n     * @deprecated The global TWEEN Group will be removed in a following major\n     * release. To migrate, create a `new Group()` instead of using `TWEEN` as a\n     * group.\n     *\n     * Old code:\n     *\n     * ```js\n     * import * as TWEEN from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new TWEEN.Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   TWEEN.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     *\n     * New code:\n     *\n     * ```js\n     * import {Tween, Group} from '@tweenjs/tween.js'\n     *\n     * //...\n     *\n     * const tween = new Tween(obj)\n     * const tween2 = new TWEEN.Tween(obj2)\n     *\n     * //...\n     *\n     * const group = new Group()\n     * group.add(tween)\n     * group.add(tween2)\n     *\n     * //...\n     *\n     * requestAnimationFrame(function loop(time) {\n     *   group.update(time)\n     *   requestAnimationFrame(loop)\n     * })\n     * ```\n     */\n    update: update,\n};\n\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, exports as default, getAll, nextId, now, remove, removeAll, update };\n","import * as THREE from 'three'\r\nimport { CSS3DObject } from 'three/examples/jsm/renderers/CSS3DRenderer.js';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\n\r\nexport type MyPostion = {\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n};\r\n\r\nexport type ManagerBox = {\r\n  [key: string]: THREE.LoadingManager\r\n}\r\n\r\nexport type MyMixer = {\r\n  update(delta?: number): void;\r\n  _root?: any\r\n};\r\n\r\nexport enum StressType {\r\n  /**描边模式 */\r\n  STROKE = 'stroke',\r\n  /**网格材质模式 */\r\n  WIREFRAM = 'wireframe',\r\n  /**整体替换材质颜色 */\r\n  COLOR = 'coloring',\r\n  // /**描边+颜色 */\r\n  // COLOR_STROKE = 'coloring&stroke'\r\n}\r\n\r\nexport type importUrlFormat = {\r\n  url: string;\r\n  /**是否需要缩放,默认不需要 */\r\n  needScale?: boolean;\r\n  /**是否显示,默认不显示 */\r\n  addToScene?: boolean;\r\n  /**xyz缩放比例,默认1.0 */\r\n  scale?: [number, number, number];\r\n}\r\n\r\nexport type OrbitControlsOptions = Partial<OrbitControls>\r\n\r\nexport type initOptions = {\r\n  /**canvas容器id,默认three-canvas */\r\n  canvasId?: string,\r\n  /** 初始化场景所需的gltf文件路径 */\r\n  gltfUrls: importUrlFormat[],\r\n  /** 高亮颜色,默认为0x00be55 */\r\n  highlightColor?: number | string,\r\n  /** 高亮模式 */\r\n  stressType?: StressType,\r\n  /** 是否显示默认点击事件弹窗,默认不显示 */\r\n  showDefaultDialog?: boolean,\r\n  /** 默认相机位置 */\r\n  cameraPosition?: MyPostion,\r\n  /** 默认相机目标点 */\r\n  cameraTarget?: MyPostion,\r\n  /** 是否开启第一视角 */\r\n  isFirstView?: boolean,\r\n  /** 是否开启雨点效果,默认关闭 */\r\n  raining?: boolean,\r\n  /** 环境贴图强度,默认为1.0 */\r\n  envMapIntensity?: number,\r\n  /** 是否开启天空盒,默认关闭 */\r\n  showSky?: boolean,\r\n  /** 是否开启背景环绕图片,默认关闭 */\r\n  showBackImage?: boolean,\r\n  /** 背景图路径 */\r\n  backgroundImgPath?: string,\r\n  environmentIntensity?: number,\r\n  /** 是否开启自动根据场景尺寸设置相机,默认关闭 */\r\n  autoSetCamera?: boolean,\r\n  /** 是否需要缩放场景,默认false */\r\n  needScale?: boolean,\r\n  /** 相机自动移动到目标点时的距离,默认为3 */\r\n  // cameraDistance?:number,\r\n  /** 射线拾取白名单,根据name匹配过滤 */\r\n  raycasterWhiteList?: string[],\r\n  /** 是否允许点击和双击事件,默认为true */\r\n  allowClick?: boolean,\r\n  /**是否开启后处理,开启后对性能影响较大 */\r\n  useComposer?: boolean\r\n  /** 需要碰撞检测的物体名单 */\r\n  checkMeshNames?: string[],\r\n  /**背景透明度 */\r\n  backgroundAlpha?: number\r\n  /** 容器宽度 */\r\n  containerWidth?: number,\r\n  /** 容器高度 */\r\n  containerHeight?: number,\r\n  /** 环境光强 */\r\n  ambientItensity?: number,\r\n  /** 需要合并的模型名单，对匹配到的模型遍历children，合并为一个模型 */\r\n  mergeRule?: Function,\r\n  /** 是否允许聚焦所有模型 */\r\n  allowFocusAll?: boolean\r\n  /**是否使用平行光 */\r\n  useDirectLight?: boolean\r\n  /** orbitControls参数 */\r\n  orbitControlsOptions?: OrbitControlsOptions,\r\n  /**是否开启阴影接收 */\r\n  receiveShadow?: boolean,\r\n  /**光源位置 */\r\n  lightPosition?: MyPostion,\r\n  /**阴影偏移 */\r\n  bias?: number\r\n}\r\n\r\n// export interface MyObject3D extends THREE.Object3D {\r\n//   // _preMaterial?:THREE.MeshPhysicalMaterial | THREE.MeshBasicMaterial |  THREE.MeshPhysicalMaterial[]\r\n//   // material?:THREE.MeshPhysicalMaterial | THREE.MeshBasicMaterial |  THREE.MeshPhysicalMaterial[]\r\n//   isMesh?: boolean,\r\n//   isGroup?: boolean,\r\n//   isCamera?: boolean,\r\n//   isLight?: boolean,\r\n// }\r\n\r\nexport interface MyMesh extends THREE.Mesh {\r\n  _preMaterial?: THREE.Material | THREE.Material[],\r\n}\r\n\r\nexport type TagMap = {\r\n  [key: string]: MyCSS3DObject[]\r\n}\r\n\r\nexport type pointConfig = {\r\n  color?: number,\r\n  size?: number\r\n}\r\n\r\nexport interface MyCSS3DObject extends CSS3DObject {\r\n  name: string\r\n}\r\n\r\nexport type TagOptions = {\r\n  position: MyPostion,\r\n  scale?: number,\r\n  tagName?: string\r\n}","import {\r\n    Mesh,\r\n    Color,\r\n    // PlaneGeometry,\r\n    ShaderMaterial,\r\n    DoubleSide,\r\n    BufferGeometry\r\n} from 'three';\r\n\r\ninterface InitWaterOptions {\r\n    uWaresFrequency?: number,\r\n    uScale?: number,\r\n    uNoiseFrequency?: number,\r\n    uNoiseScale?: number,\r\n    uXzScale?: number,\r\n    uLowColor?: number,\r\n    uHighColor?: number,\r\n    uOpacity?: number,\r\n}\r\n\r\nclass MyWater extends Mesh {\r\n    isWater: boolean;\r\n\r\n    constructor(geometry: BufferGeometry, options: InitWaterOptions) {\r\n\r\n        super(geometry);\r\n\r\n        this.isWater = true;\r\n        const scope = this;\r\n\r\n        const params = {\r\n            uWaresFrequency: options.uWaresFrequency || 1.0,\r\n            uScale: options.uScale || 0.1,\r\n            uNoiseFrequency: options.uNoiseFrequency || 2.0,\r\n            uNoiseScale: options.uNoiseScale || 0.45,\r\n            uXzScale: options.uXzScale || 1.0,\r\n            uLowColor: options.uLowColor || 0x708fa4,\r\n            uHighColor: options.uHighColor || 0x95d5ff,\r\n            uOpacity: options.uOpacity || 1.0\r\n        }\r\n\r\n        const uniforms = {\r\n            uTime: { value: 0 },\r\n            // uStrength: { value: 1 },\r\n            uWaresFrequency: {\r\n                value: params.uWaresFrequency\r\n            },\r\n            uScale: {\r\n                value: params.uScale\r\n            },\r\n            uNoiseFrequency: {\r\n                value: params.uNoiseFrequency\r\n            },\r\n            uNoiseScale: {\r\n                value: params.uNoiseScale\r\n            },\r\n            uXzScale: {\r\n                value: params.uXzScale\r\n            },\r\n            uLowColor: {\r\n                value: new Color(params.uLowColor)\r\n            },\r\n            uHighColor: {\r\n                value: new Color(params.uHighColor)\r\n            },\r\n            uOpacity: {\r\n                value: params.uOpacity\r\n            }\r\n        };\r\n\r\n        const vertexShader = /* GLSL */ `\r\n        uniform float uTime;\r\n        uniform float uWaresFrequency;\r\n        uniform float uScale;\r\n        uniform float uNoiseFrequency;\r\n        uniform float uNoiseScale;\r\n        uniform float uXzScale;\r\n        varying float vElevation;\r\n        #include <common>\r\n        #include <logdepthbuf_pars_vertex>\r\n        \r\n        float random (vec2 st) {\r\n            return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);\r\n        }\r\n        // 旋转函数\r\n        vec2 rotate(vec2 uv, float rotation, vec2 mid)\r\n        {\r\n            return vec2(\r\n            cos(rotation) * (uv.x - mid.x) + sin(rotation) * (uv.y - mid.y) + mid.x,\r\n            cos(rotation) * (uv.y - mid.y) - sin(rotation) * (uv.x - mid.x) + mid.y\r\n            );\r\n        }\r\n        \r\n        // 2d噪声函数\r\n        float noise (in vec2 st) {\r\n            vec2 i = floor(st);\r\n            vec2 f = fract(st);\r\n            float a = random(i);\r\n            float b = random(i + vec2(1.0, 0.0));\r\n            float c = random(i + vec2(0.0, 1.0));\r\n            float d = random(i + vec2(1.0, 1.0));\r\n            vec2 u = f*f*(3.0-2.0*f);\r\n            return mix(a, b, u.x) +\r\n            (c - a)* u.y * (1.0 - u.x) +\r\n            (d - b) * u.x * u.y;\r\n        }\r\n        // 随机函数\r\n        vec4 permute(vec4 x)\r\n        {\r\n            return mod(((x*34.0)+1.0)*x, 289.0);\r\n        }\r\n        vec2 fade(vec2 t)\r\n        {\r\n            return t*t*t*(t*(t*6.0-15.0)+10.0);\r\n        }\r\n        float cnoise(vec2 P)\r\n        {\r\n            vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\r\n            vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\r\n            Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\r\n            vec4 ix = Pi.xzxz;\r\n            vec4 iy = Pi.yyww;\r\n            vec4 fx = Pf.xzxz;\r\n            vec4 fy = Pf.yyww;\r\n            vec4 i = permute(permute(ix) + iy);\r\n            vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\r\n            vec4 gy = abs(gx) - 0.5;\r\n            vec4 tx = floor(gx + 0.5);\r\n            gx = gx - tx;\r\n            vec2 g00 = vec2(gx.x,gy.x);\r\n            vec2 g10 = vec2(gx.y,gy.y);\r\n            vec2 g01 = vec2(gx.z,gy.z);\r\n            vec2 g11 = vec2(gx.w,gy.w);\r\n            vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\r\n            g00 *= norm.x;\r\n            g01 *= norm.y;\r\n            g10 *= norm.z;\r\n            g11 *= norm.w;\r\n            float n00 = dot(g00, vec2(fx.x, fy.x));\r\n            float n10 = dot(g10, vec2(fx.y, fy.y));\r\n            float n01 = dot(g01, vec2(fx.z, fy.z));\r\n            float n11 = dot(g11, vec2(fx.w, fy.w));\r\n            vec2 fade_xy = fade(Pf.xy);\r\n            vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\r\n            float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\r\n            return 2.3 * n_xy;\r\n        }\r\n        \r\n        void main() {\r\n            vec4 modelPosition = modelMatrix * vec4(position,1.0);\r\n            // 波浪高度\r\n            float elevation = sin(modelPosition.x * uWaresFrequency) * sin(modelPosition.z * uWaresFrequency * uXzScale);\r\n            elevation += cnoise(vec2(modelPosition.xz*uNoiseFrequency+uTime))\r\n            *uNoiseScale;\r\n            elevation *= uScale;\r\n            // 传到片元着色器\r\n            vElevation = elevation;\r\n            modelPosition.y += elevation;\r\n            gl_Position = projectionMatrix * viewMatrix * modelPosition;\r\n            #include <logdepthbuf_vertex>\r\n        }\r\n        `;\r\n\r\n\r\n        const fragmentShader = /* GLSL */ `\r\n            #include <common>\r\n            #include <logdepthbuf_pars_fragment>\r\n            varying float vElevation;\r\n            uniform vec3 uLowColor;\r\n            uniform vec3 uHighColor;\r\n            uniform float uOpacity;\r\n            void main(){\r\n                #include <logdepthbuf_fragment>\r\n                float a = (vElevation + 1.0) / 2.0;\r\n                // 混合颜色\r\n                vec3 color = mix(uLowColor,uHighColor,a);\r\n                gl_FragColor = vec4(color,uOpacity);\r\n            }\r\n        `;\r\n\r\n        const material = new ShaderMaterial({\r\n            // extensions: {\r\n            //     derivatives: \"#extension GL_OES_standard_derivatives : enable\",\r\n            // },\r\n            uniforms,\r\n            vertexShader,\r\n            fragmentShader,\r\n            side: DoubleSide,\r\n            transparent: true\r\n            // wireframe: true,\r\n        });\r\n\r\n        scope.material = material\r\n    }\r\n\r\n}\r\n\r\nexport { MyWater };\r\n","import {\r\n    Mesh,\r\n    Color,\r\n    // PlaneGeometry,\r\n    ShaderMaterial,\r\n    TextureLoader,\r\n    DoubleSide,\r\n    BufferGeometry,\r\n    Clock\r\n} from 'three';\r\nimport Img1 from './imgs/water_noise.png'\r\nimport Img2 from './imgs/water_wave.png'\r\nimport Img3 from './imgs/water_static.png'\r\n\r\nexport interface InitWaterOptions {\r\n    color?: number,\r\n    opacity?: number,\r\n    speed?:number,\r\n    scale?:number,\r\n    type:2\r\n}\r\n\r\nclass MyWater extends Mesh {\r\n    isWater: boolean;\r\n\r\n    constructor(geometry: BufferGeometry, options?: Omit<InitWaterOptions, 'type'>) {\r\n\r\n        super(geometry);\r\n\r\n        this.isWater = true;\r\n        const scope = this;\r\n\r\n        const texture1 = new TextureLoader().load(Img1)\r\n        const texture2 = new TextureLoader().load(Img2)\r\n        const texture3 = new TextureLoader().load(Img3)\r\n\r\n        const params = {\r\n            color: options?.color ?? 0x1d7b90,\r\n            opacity: options?.opacity ?? 1.0,\r\n            speed:options?.speed ?? 0.8,\r\n            scale:options?.scale ?? 0.8\r\n        }\r\n\r\n        const uniforms = {\r\n            uTime: { value: 0 },\r\n            uColor: {\r\n                value: new Color(params.color)\r\n            },\r\n            uOpacity: {\r\n                value: params.opacity\r\n            },\r\n            uSpeed:{\r\n                value:params.speed\r\n            },\r\n            uScale:{\r\n                value:params.scale\r\n            },\r\n            texture1:{\r\n                value:texture1\r\n            },\r\n            texture2:{\r\n                value:texture2\r\n            },\r\n            texture3:{\r\n                value:texture3\r\n            },\r\n        };\r\n\r\n        const vertexShader = /* GLSL */ `\r\n        varying vec2 vUv;\r\n        #include <common>\r\n        #include <logdepthbuf_pars_vertex>\r\n        void main() {\r\n            vUv = uv;\r\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n            #include <logdepthbuf_vertex>\r\n        }\r\n        `;\r\n\r\n\r\n        const fragmentShader = /* GLSL */ `\r\n            varying vec2 vUv;\r\n            uniform float uTime;\r\n            uniform vec3 uColor;\r\n            uniform float uOpacity;\r\n            uniform float uSpeed;\r\n            uniform float uScale;\r\n\r\n            uniform sampler2D texture1;\r\n            uniform sampler2D texture2;\r\n            uniform sampler2D texture3;\r\n\r\n            float avg(vec4 color) {\r\n                return (color.r + color.g + color.b) / 3.0;\r\n            }\r\n\r\n            \r\n            #include <common>\r\n            #include <logdepthbuf_pars_fragment>\r\n            void main() {\r\n                #include <logdepthbuf_fragment>\r\n                // Flow Speed, increase to make the water flow faster.\r\n                // float speed = 0.8;\r\n\r\n                // Water Scale, scales the water, not the background.\r\n                float scale = 0.8;\r\n                scale = uScale;\r\n\r\n                // Water opacity, higher opacity means the water reflects more light.\r\n                float opacity = 0.5;\r\n\r\n                // Normalized pixel coordinates (from 0 to 1)\r\n                // vec2 uv = (fragCoord/iResolution.xy);\r\n                vec2 scaledUv = vUv * scale;\r\n\r\n                // Water layers, layered on top of eachother to produce the reflective effect\r\n                // Add 0.1 to both uv vectors to avoid the layers stacking perfectly and creating a huge unnatural highlight\r\n                vec4 water1 = texture(texture2, scaledUv + vec2(mod(uTime * 0.02 * uSpeed - 0.1, 1. - scale)));\r\n                vec4 water2 = texture(texture2, scaledUv.xy + vec2(mod(uTime * uSpeed * vec2(-0.02, -0.02) + 0.1, 1. - scale)));\r\n\r\n                // Water highlights\r\n                vec4 highlights1 = texture(texture3, scaledUv.xy + vec2(mod(uTime * uSpeed / vec2(-10, 100), 1. - scale)));\r\n                vec4 highlights2 = texture(texture3, scaledUv.xy + vec2(mod(uTime * uSpeed / vec2(10, 100), 1. - scale)));\r\n\r\n                // Average the colors of the water layers (convert from 1 channel to 4 channel\r\n                water1.rgb = vec3(avg(water1));\r\n                water2.rgb = vec3(avg(water2));\r\n\r\n                // Average and smooth the colors of the highlight layers\r\n                highlights1.rgb = vec3(avg(highlights1) / 1.5);\r\n                highlights2.rgb = vec3(avg(highlights2) / 1.5);\r\n\r\n                float alpha = opacity;\r\n\r\n                if(avg(water1 + water2) > 0.3) {\r\n                    alpha = 0.0;\r\n                    // alpha = 5.0 * opacity;\r\n                }\r\n\r\n                if(avg(water1 + water2 + highlights1 + highlights2) > 2.) {\r\n                // if(avg(water1 + water2 + highlights1 + highlights2) > 0.75) {\r\n                    alpha = 5.0 * opacity;\r\n                    // alpha = 1.0 * opacity;\r\n                    // alpha = 0.0;\r\n                }\r\n\r\n                    // alpha = 0.0;\r\n                // alpha = 5.0 * opacity;\r\n                // Output to screen\r\n                float fractX = fract((water1 + water2).x);\r\n                float fractY = fract((water1 + water2).y);\r\n                float fractZ = fract((water1 + water2).z);\r\n                // gl_FragColor = (water1 + water2) * alpha ;\r\n                // gl_FragColor = (water1 + water2) * alpha + vec4(uColor, 1.);\r\n                // gl_FragColor = vec4(fractX, fractY, fractZ, 1.) * alpha + vec4(uColor, 1.);\r\n                // gl_FragColor = vec4(vec3(fractX, fractY, fractZ) * alpha + uColor, uOpacity);\r\n                gl_FragColor = vec4(vec3(1. - fractX, 1. - fractY, 1. - fractZ) * alpha + uColor, uOpacity);\r\n            }\r\n        `;\r\n\r\n        const material = new ShaderMaterial({\r\n            // extensions: {\r\n            //     derivatives: \"#extension GL_OES_standard_derivatives : enable\",\r\n            // },\r\n            uniforms,\r\n            vertexShader,\r\n            fragmentShader,\r\n            side: DoubleSide,\r\n            transparent: true\r\n            // wireframe: true,\r\n        });\r\n\r\n        const clock = new Clock()\r\n        this.onBeforeRender = (_renderer, _scene, _camera) => {\r\n            const delta = clock.getElapsedTime()\r\n            material.uniforms.uTime.value = delta\r\n        }\r\n\r\n        scope.material = material\r\n    }\r\n\r\n}\r\n\r\nexport { MyWater };\r\n","var img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABTCAYAAAAYyQyaAAAAAXNSR0IArs4c6QAAIABJREFUeF5t3VnsZEUVx/HbbuAuuKAouKKCCoo7ArK4gTo6IiDjKOgLxmhMfPBFjS8+qYnGSHghkgCaiDCMK6iICAru4IALiriN+4L7rm0+5XwnNf/YyU3//933Vp0653eWOnWqevXa1752vffeey8PfOADx3WPe9xjuctd7rL85z//Wb773e8u3/nOd3a//+hHP1r+/ve/L//4xz+W448/fnnpS1+6HH300cuPf/zjZefOncs///nP5Xa3u91yxzvecdl///2X+9///ssPfvCD5ctf/vLy7W9/ezznutOd7rTc9a53XfbZZ59lv/32W+573/suf/nLX5Zf/vKXy89+9rPl+9///rh+/vOfL7/61a+W29/+9sumTZuWF7zgBcttb3vbcd+f/vSn5e53v/u47nWvey33vve9lzvf+c7Lrbfeuvz2t78dz/3iF79Yfve73y13uMMdxnXLLbcsN9xww/j8sMMOWx772MeOPq6//vrxHbpdRxxxxHLiiScuT3ziE5c///nP4/rmN785xvHTn/50edzjHrccfvjhy93udrflNre5zfh+x44do2394xEe4tEznvGMZb1ej37+8Ic/jDG7rr322uWSSy5ZbrzxxuWZz3zmuO9+97vf4I0xov/Xv/71eMZY//jHPy6///3vx/+PfOQjB42PetSjdvM03nru05/+9HLFFVcMXuKrsT/lKU8ZF7r+9a9/jc/JxvXwhz98Oeqoo5b73Oc+ywUXXDAuNDzsYQ8b10Me8pDloQ996KABBlz4RUZkjJeHHHLI+PsBD3jA+O5LX/rSkLl2YMKzxuP1hCc8YfAW/1bnnHPOGoMAzkVgBmGgCCd8TF6tVuPycj8maASB7nXpMGECgwvTMIKQgNJ14IEHjgtwMNcFvPr3N6F84xvfGKDC5IMOOmj87QIuDABC9KDt3//+93gerQcccMBoG4MDsMFr929/+9u4z3vA0h7G+H8GNNoABSCAErNcFEc/eKPNwE6QP/zhD8c9aPA8ILoIYK+99hrPxEdAxRd8q128BQ734u/BBx88+jBefNSuC//Rq42AYIzGpj8ydD/ho9848JCsPHPzzTePMeOT9sgJjV5489e//nXwTr+wkALf8573HAbD/b5H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\";\n  export default img;","var img = \"data:image/png;base64,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\";\n  export default img;","var img = \"data:image/png;base64,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\";\n  export default img;","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget,\n\tHalfFloatType\n} from 'three';\n\nclass Reflector extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.isReflector = true;\n\n\t\tthis.type = 'Reflector';\n\t\tthis.camera = new PerspectiveCamera();\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Reflector.ReflectorShader;\n\t\tconst multisample = ( options.multisample !== undefined ) ? options.multisample : 4;\n\n\t\t//\n\n\t\tconst reflectorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst reflectorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst virtualCamera = this.camera;\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight, { samples: multisample, type: HalfFloatType } );\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tname: ( shader.name !== undefined ) ? shader.name : 'unspecified',\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader\n\t\t} );\n\n\t\tmaterial.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'color' ].value = color;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\tthis.material = material;\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when reflector is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( reflectorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( reflectorWorldPosition );\n\n\t\t\tvirtualCamera.position.copy( view );\n\t\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tvirtualCamera.up.reflect( normal );\n\t\t\tvirtualCamera.lookAt( target );\n\n\t\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tvirtualCamera.updateMatrixWorld();\n\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\t// Render\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nReflector.ReflectorShader = {\n\n\tname: 'ReflectorShader',\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\n\t\t}`\n};\n\nexport { Reflector };\n","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tQuaternion,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget,\n\tHalfFloatType\n} from 'three';\n\nclass Refractor extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.isRefractor = true;\n\n\t\tthis.type = 'Refractor';\n\t\tthis.camera = new PerspectiveCamera();\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Refractor.RefractorShader;\n\t\tconst multisample = ( options.multisample !== undefined ) ? options.multisample : 4;\n\n\t\t//\n\n\t\tconst virtualCamera = this.camera;\n\t\tvirtualCamera.matrixAutoUpdate = false;\n\t\tvirtualCamera.userData.refractor = true;\n\n\t\t//\n\n\t\tconst refractorPlane = new Plane();\n\t\tconst textureMatrix = new Matrix4();\n\n\t\t// render target\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight, { samples: multisample, type: HalfFloatType } );\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tname: ( shader.name !== undefined ) ? shader.name : 'unspecified',\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true // ensures, refractors are drawn from farthest to closest\n\t\t} );\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// functions\n\n\t\tconst visible = ( function () {\n\n\t\t\tconst refractorWorldPosition = new Vector3();\n\t\t\tconst cameraWorldPosition = new Vector3();\n\t\t\tconst rotationMatrix = new Matrix4();\n\n\t\t\tconst view = new Vector3();\n\t\t\tconst normal = new Vector3();\n\n\t\t\treturn function visible( camera ) {\n\n\t\t\t\trefractorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\t\tview.subVectors( refractorWorldPosition, cameraWorldPosition );\n\n\t\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\t\tnormal.set( 0, 0, 1 );\n\t\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\t\treturn view.dot( normal ) < 0;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateRefractorPlane = ( function () {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst position = new Vector3();\n\t\t\tconst quaternion = new Quaternion();\n\t\t\tconst scale = new Vector3();\n\n\t\t\treturn function updateRefractorPlane() {\n\n\t\t\t\tscope.matrixWorld.decompose( position, quaternion, scale );\n\t\t\t\tnormal.set( 0, 0, 1 ).applyQuaternion( quaternion ).normalize();\n\n\t\t\t\t// flip the normal because we want to cull everything above the plane\n\n\t\t\t\tnormal.negate();\n\n\t\t\t\trefractorPlane.setFromNormalAndCoplanarPoint( normal, position );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateVirtualCamera = ( function () {\n\n\t\t\tconst clipPlane = new Plane();\n\t\t\tconst clipVector = new Vector4();\n\t\t\tconst q = new Vector4();\n\n\t\t\treturn function updateVirtualCamera( camera ) {\n\n\t\t\t\tvirtualCamera.matrixWorld.copy( camera.matrixWorld );\n\t\t\t\tvirtualCamera.matrixWorldInverse.copy( virtualCamera.matrixWorld ).invert();\n\t\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\t\t\t\tvirtualCamera.far = camera.far; // used in WebGLBackground\n\n\t\t\t\t// The following code creates an oblique view frustum for clipping.\n\t\t\t\t// see: Lengyel, Eric. “Oblique View Frustum Depth Projection and Clipping”.\n\t\t\t\t// Journal of Game Development, Vol. 1, No. 2 (2005), Charles River Media, pp. 5–16\n\n\t\t\t\tclipPlane.copy( refractorPlane );\n\t\t\t\tclipPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\t\tclipVector.set( clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.constant );\n\n\t\t\t\t// calculate the clip-space corner point opposite the clipping plane and\n\t\t\t\t// transform it into camera space by multiplying it by the inverse of the projection matrix\n\n\t\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\t\tq.x = ( Math.sign( clipVector.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\t\tq.y = ( Math.sign( clipVector.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\t\tq.z = - 1.0;\n\t\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t\t// calculate the scaled plane vector\n\n\t\t\t\tclipVector.multiplyScalar( 2.0 / clipVector.dot( q ) );\n\n\t\t\t\t// replacing the third row of the projection matrix\n\n\t\t\t\tprojectionMatrix.elements[ 2 ] = clipVector.x;\n\t\t\t\tprojectionMatrix.elements[ 6 ] = clipVector.y;\n\t\t\t\tprojectionMatrix.elements[ 10 ] = clipVector.z + 1.0 - clipBias;\n\t\t\t\tprojectionMatrix.elements[ 14 ] = clipVector.w;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\t// This will update the texture matrix that is used for projective texture mapping in the shader.\n\t\t// see: http://developer.download.nvidia.com/assets/gamedev/docs/projective_texture_mapping.pdf\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\t// this matrix does range mapping to [ 0, 1 ]\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\t// we use \"Object Linear Texgen\", so we need to multiply the texture matrix T\n\t\t\t// (matrix above) with the projection and view matrix of the virtual camera\n\t\t\t// and the model matrix of the refractor\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\t//\n\n\t\tfunction render( renderer, scene, camera ) {\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t// ensure refractors are rendered only once per frame\n\n\t\t\tif ( camera.userData.refractor === true ) return;\n\n\t\t\t// avoid rendering when the refractor is viewed from behind\n\n\t\t\tif ( ! visible( camera ) === true ) return;\n\n\t\t\t// update\n\n\t\t\tupdateRefractorPlane();\n\n\t\t\tupdateTextureMatrix( camera );\n\n\t\t\tupdateVirtualCamera( camera );\n\n\t\t\trender( renderer, scene, camera );\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nRefractor.RefractorShader = {\n\n\tname: 'RefractorShader',\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\n\t\t}`\n\n};\n\nexport { Refractor };\n","import {\r\n    Mesh,\r\n    Color,\r\n    BoxGeometry,\r\n    ShaderMaterial,\r\n    Renderer,\r\n    Scene,\r\n    Camera,\r\n    DoubleSide\r\n} from 'three';\r\nimport * as THREE from 'three'\r\nimport { Reflector } from 'three/examples/jsm/objects/Reflector.js';\r\nimport { Refractor } from 'three/examples/jsm/objects/Refractor.js';\r\n// import { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js'\r\n\r\ninterface MyReflector extends Reflector {\r\n    //原生的.d.ts中没有这个函数的声明，故此补充\r\n    onBeforeRender: (renderer: Renderer, scene: Scene, camera: Camera) => void;\r\n}\r\ninterface MyRefractor extends Refractor {\r\n    //原生的.d.ts中没有这个函数的声明，故此补充\r\n    onBeforeRender: (renderer: Renderer, scene: Scene, camera: Camera) => void;\r\n}\r\n\r\nconst textureMatrix = new THREE.Matrix4();\r\nconst textureWidth = 512;\r\nconst textureHeight = 512;\r\nconst clipBias = 0.01;\r\n\r\ninterface InitWaterOptions {\r\n    uLowColor?: number,\r\n    uHighColor?: number,\r\n    uOpacity?: number,\r\n    uRealLevel: number,\r\n    uNeedLevel: number,\r\n    reflectivity?: number    //反射系数\r\n    noiseRatio?:number,\r\n    uOffset?:number\r\n}\r\n\r\nclass MyWaterCube extends Mesh {\r\n    isWater: boolean;\r\n\r\n    constructor(geometry: BoxGeometry, options: InitWaterOptions) {\r\n\r\n        super(geometry);\r\n\r\n        this.isWater = true;\r\n        const scope = this;\r\n\r\n        const reflector = new Reflector(geometry, {\r\n            textureWidth: textureWidth,\r\n            textureHeight: textureHeight,\r\n            clipBias: clipBias\r\n        });\r\n\r\n        const refractor = new Refractor(geometry, {\r\n            textureWidth: textureWidth,\r\n            textureHeight: textureHeight,\r\n            clipBias: clipBias\r\n        });\r\n\r\n        reflector.matrixAutoUpdate = false;\r\n        refractor.matrixAutoUpdate = false;\r\n\r\n        const params = {\r\n            uLowColor: options.uLowColor || 0x708fa4,\r\n            uHighColor: options.uHighColor || 0x95d5ff,\r\n            uOpacity: options.uOpacity ?? 1.0,\r\n            uRealLevel: options.uRealLevel,\r\n            uNeedLevel: options.uNeedLevel,\r\n            reflectivity: options.reflectivity ?? 0.02,\r\n            noiseRatio: options.noiseRatio ?? 0.666025403784438,\r\n            uOffset: options.uOffset ?? 0.02,\r\n        }\r\n        console.log('uRealLevel', params.uRealLevel);\r\n        console.log('uNeedLevel', params.uNeedLevel);\r\n\r\n        const uniforms = {\r\n            iTime: { value: 0 },\r\n            uLowColor: {\r\n                value: new Color(params.uLowColor)\r\n            },\r\n            uHighColor: {\r\n                value: new Color(params.uHighColor)\r\n            },\r\n            uOpacity: {\r\n                value: params.uOpacity\r\n            },\r\n            uRealLevel: {\r\n                value: params.uRealLevel\r\n            },\r\n            uNeedLevel: {\r\n                value: params.uNeedLevel\r\n            },\r\n            //shadertoy\r\n            iResolution: {\r\n                type: 'v2',\r\n                value: new THREE.Vector3()\r\n            },\r\n            //reflector\r\n            tReflectionMap: {\r\n                type: 't',\r\n                value: reflector.getRenderTarget().texture\r\n            },\r\n            tRefractionMap: {\r\n                type: 't',\r\n                value: refractor.getRenderTarget().texture\r\n            },\r\n            reflectivity: {\r\n                type: 'f',\r\n                value: params.reflectivity\r\n            },\r\n            noiseRatio: {\r\n                type: 'f',\r\n                value: params.noiseRatio\r\n            },\r\n            uOffset: {\r\n                type: 'f',\r\n                value: params.uOffset\r\n            },\r\n            textureMatrix: {\r\n                type: 'm4',\r\n                value: textureMatrix\r\n            },\r\n        };\r\n\r\n        const vertexShader = /* GLSL */ `\r\n        varying vec2 vUv;\r\n        varying vec3 vPosition;\r\n        uniform float uRealLevel;\r\n        uniform float uNeedLevel;\r\n\r\n        varying vec3 vToEye;\r\n        uniform mat4 textureMatrix;\r\n        varying vec4 vCoord;\r\n        #include <common>\r\n        #include <logdepthbuf_pars_vertex>\r\n\r\n        void main() {\r\n            vUv = uv;\r\n            //reflector\r\n            vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n            vToEye = cameraPosition - worldPosition.xyz;\r\n            vCoord = textureMatrix * vec4( position, 1.0 );\r\n\r\n            vPosition = position;\r\n            float realLvel = uRealLevel / 2.;\r\n            // float move = step(realLvel - .001, position.z) * (uRealLevel - uNeedLevel);\r\n            float move = step(.001, position.z) * (uRealLevel - uNeedLevel);\r\n\r\n            vec4 modelPosition = modelMatrix * vec4(position.x, position.y, position.z - move, 1.0);\r\n            gl_Position = projectionMatrix * viewMatrix * modelPosition;\r\n\r\n            #include <logdepthbuf_vertex>\r\n        }\r\n        `;\r\n\r\n        const fragmentShader = /* GLSL */ `\r\n            #include <common>\r\n            #include <logdepthbuf_pars_fragment>\r\n            uniform vec3 uLowColor;\r\n            uniform vec3 uHighColor;\r\n            uniform float uOpacity;\r\n            uniform float iTime;\r\n            uniform vec3 iResolution;\r\n            varying vec3 vPosition;\r\n            varying vec2 vUv;\r\n            uniform sampler2D tReflectionMap;\r\n            uniform sampler2D tRefractionMap;\r\n\r\n            // -------------------shadertoy-----------------------\r\n            vec4 permute2(vec4 t) {\r\n                return t * (t * 34.0 + 133.0);\r\n            }\r\n\r\n            // Gradient set is a normalized expanded rhombic dodecahedron\r\n            vec3 grad(float hash) {\r\n\r\n                // Random vertex of a cube, +/- 1 each\r\n                vec3 cube = mod(floor(hash / vec3(1.0, 2.0, 4.0)), 2.0) * 2.0 - 1.0;\r\n\r\n                // Random edge of the three edges connected to that vertex\r\n                // Also a cuboctahedral vertex\r\n                // And corresponds to the face of its dual, the rhombic dodecahedron\r\n                vec3 cuboct = cube;\r\n                cuboct[int(hash / 16.0)] = 0.0;\r\n\r\n                // In a funky way, pick one of the four points on the rhombic face\r\n                float type = mod(floor(hash / 8.0), 2.0);\r\n                vec3 rhomb = (1.0 - type) * cube + type * (cuboct + cross(cube, cuboct));\r\n\r\n                // Expand it so that the new edges are the same length\r\n                // as the existing ones\r\n                vec3 grad = cuboct * 1.22474487139 + rhomb;\r\n\r\n                // To make all gradients the same length, we only need to shorten the\r\n                // second type of vector. We also put in the whole noise scale constant.\r\n                // The compiler should reduce it into the existing floats. I think.\r\n                grad *= (1.0 - 0.042942436724648037 * type) * 3.5946317686139184;\r\n\r\n                return grad;\r\n            }\r\n\r\n            // BCC lattice split up into 2 cube lattices\r\n            vec4 os2NoiseWithDerivativesPart(vec3 X) {\r\n                vec3 b = floor(X);\r\n                vec4 i4 = vec4(X - b, 2.5);\r\n\r\n                // Pick between each pair of oppposite corners in the cube.\r\n                vec3 v1 = b + floor(dot(i4, vec4(.25)));\r\n                vec3 v2 = b + vec3(1, 0, 0) + vec3(-1, 1, 1) * floor(dot(i4, vec4(-.25, .25, .25, .35)));\r\n                vec3 v3 = b + vec3(0, 1, 0) + vec3(1, -1, 1) * floor(dot(i4, vec4(.25, -.25, .25, .35)));\r\n                vec3 v4 = b + vec3(0, 0, 1) + vec3(1, 1, -1) * floor(dot(i4, vec4(.25, .25, -.25, .35)));\r\n\r\n                // Gradient hashes for the four vertices in this half-lattice.\r\n                vec4 hashes = permute2(mod(vec4(v1.x, v2.x, v3.x, v4.x), 289.0));\r\n                hashes = permute2(mod(hashes + vec4(v1.y, v2.y, v3.y, v4.y), 289.0));\r\n                hashes = mod(permute2(mod(hashes + vec4(v1.z, v2.z, v3.z, v4.z), 289.0)), 48.0);\r\n\r\n                // Gradient extrapolations & kernel function\r\n                vec3 d1 = X - v1;\r\n                vec3 d2 = X - v2;\r\n                vec3 d3 = X - v3;\r\n                vec3 d4 = X - v4;\r\n                vec4 a = max(0.75 - vec4(dot(d1, d1), dot(d2, d2), dot(d3, d3), dot(d4, d4)), 0.0);\r\n                vec4 aa = a * a;\r\n                vec4 aaaa = aa * aa;\r\n                vec3 g1 = grad(hashes.x);\r\n                vec3 g2 = grad(hashes.y);\r\n                vec3 g3 = grad(hashes.z);\r\n                vec3 g4 = grad(hashes.w);\r\n                vec4 extrapolations = vec4(dot(d1, g1), dot(d2, g2), dot(d3, g3), dot(d4, g4));\r\n\r\n                // Derivatives of the noise\r\n                vec3 derivative = -8.0 * mat4x3(d1, d2, d3, d4) * (aa * a * extrapolations) + mat4x3(g1, g2, g3, g4) * aaaa;\r\n\r\n                // Return it all as a vec4\r\n                return vec4(derivative, dot(aaaa, extrapolations));\r\n            }\r\n\r\n            // Gives X and Y a triangular alignment, and lets Z move up the main diagonal.\r\n            // Might be good for terrain, or a time varying X/Y plane. Z repeats.\r\n            vec4 os2NoiseWithDerivatives_ImproveXY(vec3 X) {\r\n\r\n                // Not a skew transform.\r\n                mat3 orthonormalMap = mat3(0.788675134594813, -0.211324865405187, -0.577350269189626, -0.211324865405187, 0.788675134594813, -0.577350269189626, 0.577350269189626, 0.577350269189626, 0.577350269189626);\r\n\r\n                X = orthonormalMap * X;\r\n                vec4 result = os2NoiseWithDerivativesPart(X) + os2NoiseWithDerivativesPart(X + 144.5);\r\n\r\n                return vec4(result.xyz * orthonormalMap, result.w);\r\n            }\r\n\r\n            // #define PI 3.14\r\n            #define E 2.71828\r\n            uniform float noiseRatio;         //波纹变化频率\r\n            uniform float uOffset;         //扭曲程度\r\n            uniform float uRealLevel;\r\n\r\n            uniform float reflectivity;\r\n            varying vec3 vToEye;\r\n            varying vec4 vCoord;\r\n            #define downToLevel -0.5\r\n\r\n            void main() {\r\n                #include <logdepthbuf_fragment>\r\n                float realLvel = uRealLevel / 2.;\r\n                float highOpacity = step(-(realLvel - 0.001), -vPosition.z);   //高于highLevel的返回0，其余返回1\r\n                //================================ shadertoy start(类似游泳池水面) ====================================\r\n                vec2 fragCoord = vec2(vUv.x * iResolution.x, vUv.y * iResolution.y);\r\n\r\n                // Normalized pixel coordinates (from 0 to 1 on largest axis)\r\n                vec2 uv = fragCoord / max(iResolution.x, iResolution.y) * 8.0;\r\n\r\n                // Initial input point\r\n                vec3 X = vec3(uv, mod(iTime, 578.0) * noiseRatio);\r\n\r\n                // Evaluate noise once\r\n                vec4 noiseResult = os2NoiseWithDerivatives_ImproveXY(X);\r\n\r\n                // Evaluate noise again with the derivative warping the domain\r\n                // Might be able to approximate this by fitting to a curve instead\r\n                noiseResult = os2NoiseWithDerivatives_ImproveXY(X - noiseResult.xyz / 16.0);\r\n                float value = noiseResult.w;\r\n\r\n                // Time varying pixel color\r\n                float lightRatio = .8;\r\n                vec3 mixColor = mix(uHighColor, uLowColor, .5);\r\n                // vec3 col = mixColor * (lightRatio + .5 * value);\r\n                vec3 col = uLowColor + uHighColor * (lightRatio + .5 * value);\r\n\r\n                // Output to screen\r\n                vec4 shaderToy_color_top = vec4(col, uOpacity);\r\n\r\n                // summary\r\n                // vec4 lower_color = vec4(uLowColor, uOpacity);\r\n                vec4 lower_color = vec4(mixColor, uOpacity);\r\n                // gl_FragColor = shaderToy_color_top;\r\n                gl_FragColor = shaderToy_color_top * (1. - highOpacity) + lower_color * highOpacity;\r\n\r\n                //模拟扭曲偏移，乱写的，模拟的，并不符合物理实际\r\n                vec2 offset = uOffset * cos( shaderToy_color_top.rg * 3.14159 );\r\n                //图片扭曲\r\n                vec3 coord = vCoord.xyz / vCoord.w;\r\n                vec3 toEye = normalize(vToEye);\r\n                vec3 normal = normalize(col);\r\n                vec2 uv_texture = coord.xy + coord.z * normal.xz * 0.05;\r\n                float theta = max(dot(toEye, normal), 0.0);\r\n                float reflectance = reflectivity + (1.0 - reflectivity) * pow((1.0 - theta), 5.0);\r\n                vec4 reflectColor = texture2D(tReflectionMap, vec2(1.0 - uv_texture.x, uv_texture.y) + offset);\r\n                vec4 refractColor = texture2D(tRefractionMap, uv_texture + + offset);\r\n\r\n\r\n                //整体折射、反射\r\n                // gl_FragColor = gl_FragColor * .5 + mix(refractColor, reflectColor, reflectance);\r\n                //自定义水深折射、反射\r\n                // float Z_RealRatio = min(1., (max(0., vPosition.z / realLvel + downToLevel)));\r\n                // gl_FragColor = (1. - highOpacity) * (shaderToy_color_top + mix( refractColor, reflectColor, reflectance )) + mix(lower_color, shaderToy_color_top + mix( refractColor, reflectColor, reflectance ), Z_RealRatio) * highOpacity;\r\n                //只保留顶部折射、反射\r\n                gl_FragColor = (1. - highOpacity) * (shaderToy_color_top + mix( refractColor, reflectColor, reflectance )) + lower_color * highOpacity;\r\n\r\n                //============================ shadertoy end ======================================\r\n\r\n            }\r\n        `;\r\n\r\n        const material = new ShaderMaterial({\r\n            uniforms,\r\n            vertexShader,\r\n            fragmentShader,\r\n            side: DoubleSide,\r\n            transparent: true,\r\n            depthWrite: true,\r\n            depthTest: true,\r\n            blending: THREE.NormalBlending, // 设置混合模式\r\n        });\r\n\r\n        // const gui = new GUI();\r\n        // gui.add(params, 'uNeedLevel').min(0).max(20).step(0.1).onChange(val => {\r\n        //     material.uniforms.uNeedLevel.value = val;\r\n        // });\r\n        // gui.addColor(params, 'uLowColor').onFinishChange(val => {\r\n        //     material.uniforms.uLowColor.value = new THREE.Color(val)\r\n        // })\r\n        // gui.addColor(params, 'uHighColor').onFinishChange(val => {\r\n        //     material.uniforms.uHighColor.value = new THREE.Color(val)\r\n        // })\r\n\r\n        material.uniforms.iResolution.value.set(geometry.parameters.width, geometry.parameters.height, geometry.parameters.depth);\r\n        scope.material = material\r\n\r\n        function updateTextureMatrix(camera: Camera) {\r\n            textureMatrix.set(\r\n                0.5, 0.0, 0.0, 0.5,\r\n                0.0, 0.5, 0.0, 0.5,\r\n                0.0, 0.0, 0.5, 0.5,\r\n                0.0, 0.0, 0.0, 1.0\r\n            );\r\n\r\n            textureMatrix.multiply(camera.projectionMatrix);\r\n            textureMatrix.multiply(camera.matrixWorldInverse);\r\n            textureMatrix.multiply(scope.matrixWorld);\r\n\r\n        }\r\n\r\n        scope.onBeforeRender = function (renderer, scene, camera) {\r\n\r\n            updateTextureMatrix(camera);\r\n\r\n            scope.visible = false;\r\n\r\n            reflector.matrixWorld.copy(scope.matrixWorld);\r\n            refractor.matrixWorld.copy(scope.matrixWorld);\r\n\r\n            (reflector as MyReflector).onBeforeRender(renderer, scene, camera);\r\n            (refractor as MyRefractor).onBeforeRender(renderer, scene, camera);\r\n\r\n            scope.visible = true;\r\n\r\n        };\r\n\r\n    }\r\n\r\n}\r\n\r\nexport { MyWaterCube };\r\n","/**\n* @vue/shared v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str) {\n  const map = /* @__PURE__ */ Object.create(null);\n  for (const key of str.split(\",\")) map[key] = 1;\n  return (val) => val in map;\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction(\n  (str) => {\n    return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n  }\n);\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction(\n  (str) => {\n    const s = str ? `on${capitalize(str)}` : ``;\n    return s;\n  }\n);\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\nfunction genCacheKey(source, options) {\n  return source + JSON.stringify(\n    options,\n    (_, val) => typeof val === \"function\" ? val.toString() : val\n  );\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"CACHED\": -1,\n  \"-1\": \"CACHED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  if (!styles) return \"\";\n  if (isString(styles)) return styles;\n  let ret = \"\";\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nconst isKnownMathMLAttr = /* @__PURE__ */ makeMap(\n  `accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\nconst cssVarNameEscapeSymbolsRE = /[ !\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]/g;\nfunction getEscapedCssVarName(key, doubleEscape) {\n  return key.replace(\n    cssVarNameEscapeSymbolsRE,\n    (s) => doubleEscape ? s === '\"' ? '\\\\\\\\\\\\\"' : `\\\\\\\\${s}` : `\\\\${s}`\n  );\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst isRef = (val) => {\n  return !!(val && val[\"__v_isRef\"] === true);\n};\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (isRef(val)) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, cssVarNameEscapeSymbolsRE, def, escapeHtml, escapeHtmlComment, extend, genCacheKey, genPropsAccessExp, generateCodeFrame, getEscapedCssVarName, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownMathMLAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","/**\n* @vue/reactivity v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { hasChanged, extend, isArray, isIntegerKey, isSymbol, isMap, hasOwn, isObject, makeMap, toRawType, capitalize, def, isFunction, EMPTY_OBJ, isSet, isPlainObject, NOOP, remove } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this._isPaused = false;\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  pause() {\n    if (this._active) {\n      this._isPaused = true;\n      let i, l;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].pause();\n        }\n      }\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].pause();\n      }\n    }\n  }\n  /**\n   * Resumes the effect scope, including all child scopes and effects.\n   */\n  resume() {\n    if (this._active) {\n      if (this._isPaused) {\n        this._isPaused = false;\n        let i, l;\n        if (this.scopes) {\n          for (i = 0, l = this.scopes.length; i < l; i++) {\n            this.scopes[i].resume();\n          }\n        }\n        for (i = 0, l = this.effects.length; i < l; i++) {\n          this.effects[i].resume();\n        }\n      }\n    }\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    activeEffectScope = this;\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    activeEffectScope = this.parent;\n  }\n  stop(fromParent) {\n    if (this._active) {\n      this._active = false;\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      this.effects.length = 0;\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      this.cleanups.length = 0;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n        this.scopes.length = 0;\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn, failSilently = false) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeSub;\nconst EffectFlags = {\n  \"ACTIVE\": 1,\n  \"1\": \"ACTIVE\",\n  \"RUNNING\": 2,\n  \"2\": \"RUNNING\",\n  \"TRACKING\": 4,\n  \"4\": \"TRACKING\",\n  \"NOTIFIED\": 8,\n  \"8\": \"NOTIFIED\",\n  \"DIRTY\": 16,\n  \"16\": \"DIRTY\",\n  \"ALLOW_RECURSE\": 32,\n  \"32\": \"ALLOW_RECURSE\",\n  \"PAUSED\": 64,\n  \"64\": \"PAUSED\"\n};\nconst pausedQueueEffects = /* @__PURE__ */ new WeakSet();\nclass ReactiveEffect {\n  constructor(fn) {\n    this.fn = fn;\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 1 | 4;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    /**\n     * @internal\n     */\n    this.cleanup = void 0;\n    this.scheduler = void 0;\n    if (activeEffectScope && activeEffectScope.active) {\n      activeEffectScope.effects.push(this);\n    }\n  }\n  pause() {\n    this.flags |= 64;\n  }\n  resume() {\n    if (this.flags & 64) {\n      this.flags &= ~64;\n      if (pausedQueueEffects.has(this)) {\n        pausedQueueEffects.delete(this);\n        this.trigger();\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    if (this.flags & 2 && !(this.flags & 32)) {\n      return;\n    }\n    if (!(this.flags & 8)) {\n      batch(this);\n    }\n  }\n  run() {\n    if (!(this.flags & 1)) {\n      return this.fn();\n    }\n    this.flags |= 2;\n    cleanupEffect(this);\n    prepareDeps(this);\n    const prevEffect = activeSub;\n    const prevShouldTrack = shouldTrack;\n    activeSub = this;\n    shouldTrack = true;\n    try {\n      return this.fn();\n    } finally {\n      if (!!(process.env.NODE_ENV !== \"production\") && activeSub !== this) {\n        warn(\n          \"Active effect was not restored correctly - this is likely a Vue internal bug.\"\n        );\n      }\n      cleanupDeps(this);\n      activeSub = prevEffect;\n      shouldTrack = prevShouldTrack;\n      this.flags &= ~2;\n    }\n  }\n  stop() {\n    if (this.flags & 1) {\n      for (let link = this.deps; link; link = link.nextDep) {\n        removeSub(link);\n      }\n      this.deps = this.depsTail = void 0;\n      cleanupEffect(this);\n      this.onStop && this.onStop();\n      this.flags &= ~1;\n    }\n  }\n  trigger() {\n    if (this.flags & 64) {\n      pausedQueueEffects.add(this);\n    } else if (this.scheduler) {\n      this.scheduler();\n    } else {\n      this.runIfDirty();\n    }\n  }\n  /**\n   * @internal\n   */\n  runIfDirty() {\n    if (isDirty(this)) {\n      this.run();\n    }\n  }\n  get dirty() {\n    return isDirty(this);\n  }\n}\nlet batchDepth = 0;\nlet batchedSub;\nlet batchedComputed;\nfunction batch(sub, isComputed = false) {\n  sub.flags |= 8;\n  if (isComputed) {\n    sub.next = batchedComputed;\n    batchedComputed = sub;\n    return;\n  }\n  sub.next = batchedSub;\n  batchedSub = sub;\n}\nfunction startBatch() {\n  batchDepth++;\n}\nfunction endBatch() {\n  if (--batchDepth > 0) {\n    return;\n  }\n  if (batchedComputed) {\n    let e = batchedComputed;\n    batchedComputed = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      e = next;\n    }\n  }\n  let error;\n  while (batchedSub) {\n    let e = batchedSub;\n    batchedSub = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      if (e.flags & 1) {\n        try {\n          ;\n          e.trigger();\n        } catch (err) {\n          if (!error) error = err;\n        }\n      }\n      e = next;\n    }\n  }\n  if (error) throw error;\n}\nfunction prepareDeps(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    link.version = -1;\n    link.prevActiveLink = link.dep.activeLink;\n    link.dep.activeLink = link;\n  }\n}\nfunction cleanupDeps(sub) {\n  let head;\n  let tail = sub.depsTail;\n  let link = tail;\n  while (link) {\n    const prev = link.prevDep;\n    if (link.version === -1) {\n      if (link === tail) tail = prev;\n      removeSub(link);\n      removeDep(link);\n    } else {\n      head = link;\n    }\n    link.dep.activeLink = link.prevActiveLink;\n    link.prevActiveLink = void 0;\n    link = prev;\n  }\n  sub.deps = head;\n  sub.depsTail = tail;\n}\nfunction isDirty(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {\n      return true;\n    }\n  }\n  if (sub._dirty) {\n    return true;\n  }\n  return false;\n}\nfunction refreshComputed(computed) {\n  if (computed.flags & 4 && !(computed.flags & 16)) {\n    return;\n  }\n  computed.flags &= ~16;\n  if (computed.globalVersion === globalVersion) {\n    return;\n  }\n  computed.globalVersion = globalVersion;\n  const dep = computed.dep;\n  computed.flags |= 2;\n  if (dep.version > 0 && !computed.isSSR && computed.deps && !isDirty(computed)) {\n    computed.flags &= ~2;\n    return;\n  }\n  const prevSub = activeSub;\n  const prevShouldTrack = shouldTrack;\n  activeSub = computed;\n  shouldTrack = true;\n  try {\n    prepareDeps(computed);\n    const value = computed.fn(computed._value);\n    if (dep.version === 0 || hasChanged(value, computed._value)) {\n      computed._value = value;\n      dep.version++;\n    }\n  } catch (err) {\n    dep.version++;\n    throw err;\n  } finally {\n    activeSub = prevSub;\n    shouldTrack = prevShouldTrack;\n    cleanupDeps(computed);\n    computed.flags &= ~2;\n  }\n}\nfunction removeSub(link, soft = false) {\n  const { dep, prevSub, nextSub } = link;\n  if (prevSub) {\n    prevSub.nextSub = nextSub;\n    link.prevSub = void 0;\n  }\n  if (nextSub) {\n    nextSub.prevSub = prevSub;\n    link.nextSub = void 0;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && dep.subsHead === link) {\n    dep.subsHead = nextSub;\n  }\n  if (dep.subs === link) {\n    dep.subs = prevSub;\n    if (!prevSub && dep.computed) {\n      dep.computed.flags &= ~4;\n      for (let l = dep.computed.deps; l; l = l.nextDep) {\n        removeSub(l, true);\n      }\n    }\n  }\n  if (!soft && !--dep.sc && dep.map) {\n    dep.map.delete(dep.key);\n  }\n}\nfunction removeDep(link) {\n  const { prevDep, nextDep } = link;\n  if (prevDep) {\n    prevDep.nextDep = nextDep;\n    link.prevDep = void 0;\n  }\n  if (nextDep) {\n    nextDep.prevDep = prevDep;\n    link.nextDep = void 0;\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const e = new ReactiveEffect(fn);\n  if (options) {\n    extend(e, options);\n  }\n  try {\n    e.run();\n  } catch (err) {\n    e.stop();\n    throw err;\n  }\n  const runner = e.run.bind(e);\n  runner.effect = e;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction onEffectCleanup(fn, failSilently = false) {\n  if (activeSub instanceof ReactiveEffect) {\n    activeSub.cleanup = fn;\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onEffectCleanup() was called when there was no active effect to associate with.`\n    );\n  }\n}\nfunction cleanupEffect(e) {\n  const { cleanup } = e;\n  e.cleanup = void 0;\n  if (cleanup) {\n    const prevSub = activeSub;\n    activeSub = void 0;\n    try {\n      cleanup();\n    } finally {\n      activeSub = prevSub;\n    }\n  }\n}\n\nlet globalVersion = 0;\nclass Link {\n  constructor(sub, dep) {\n    this.sub = sub;\n    this.dep = dep;\n    this.version = dep.version;\n    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;\n  }\n}\nclass Dep {\n  constructor(computed) {\n    this.computed = computed;\n    this.version = 0;\n    /**\n     * Link between this dep and the current active effect\n     */\n    this.activeLink = void 0;\n    /**\n     * Doubly linked list representing the subscribing effects (tail)\n     */\n    this.subs = void 0;\n    /**\n     * For object property deps cleanup\n     */\n    this.map = void 0;\n    this.key = void 0;\n    /**\n     * Subscriber counter\n     */\n    this.sc = 0;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.subsHead = void 0;\n    }\n  }\n  track(debugInfo) {\n    if (!activeSub || !shouldTrack || activeSub === this.computed) {\n      return;\n    }\n    let link = this.activeLink;\n    if (link === void 0 || link.sub !== activeSub) {\n      link = this.activeLink = new Link(activeSub, this);\n      if (!activeSub.deps) {\n        activeSub.deps = activeSub.depsTail = link;\n      } else {\n        link.prevDep = activeSub.depsTail;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n      }\n      addSub(link);\n    } else if (link.version === -1) {\n      link.version = this.version;\n      if (link.nextDep) {\n        const next = link.nextDep;\n        next.prevDep = link.prevDep;\n        if (link.prevDep) {\n          link.prevDep.nextDep = next;\n        }\n        link.prevDep = activeSub.depsTail;\n        link.nextDep = void 0;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n        if (activeSub.deps === link) {\n          activeSub.deps = next;\n        }\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && activeSub.onTrack) {\n      activeSub.onTrack(\n        extend(\n          {\n            effect: activeSub\n          },\n          debugInfo\n        )\n      );\n    }\n    return link;\n  }\n  trigger(debugInfo) {\n    this.version++;\n    globalVersion++;\n    this.notify(debugInfo);\n  }\n  notify(debugInfo) {\n    startBatch();\n    try {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (let head = this.subsHead; head; head = head.nextSub) {\n          if (head.sub.onTrigger && !(head.sub.flags & 8)) {\n            head.sub.onTrigger(\n              extend(\n                {\n                  effect: head.sub\n                },\n                debugInfo\n              )\n            );\n          }\n        }\n      }\n      for (let link = this.subs; link; link = link.prevSub) {\n        if (link.sub.notify()) {\n          ;\n          link.sub.dep.notify();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n  }\n}\nfunction addSub(link) {\n  link.dep.sc++;\n  if (link.sub.flags & 4) {\n    const computed = link.dep.computed;\n    if (computed && !link.dep.subs) {\n      computed.flags |= 4 | 16;\n      for (let l = computed.deps; l; l = l.nextDep) {\n        addSub(l);\n      }\n    }\n    const currentTail = link.dep.subs;\n    if (currentTail !== link) {\n      link.prevSub = currentTail;\n      if (currentTail) currentTail.nextSub = link;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && link.dep.subsHead === void 0) {\n      link.dep.subsHead = link;\n    }\n    link.dep.subs = link;\n  }\n}\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Object iterate\" : \"\"\n);\nconst MAP_KEY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Map keys iterate\" : \"\"\n);\nconst ARRAY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Array iterate\" : \"\"\n);\nfunction track(target, type, key) {\n  if (shouldTrack && activeSub) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = new Dep());\n      dep.map = depsMap;\n      dep.key = key;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      dep.track({\n        target,\n        type,\n        key\n      });\n    } else {\n      dep.track();\n    }\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    globalVersion++;\n    return;\n  }\n  const run = (dep) => {\n    if (dep) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        dep.trigger({\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        });\n      } else {\n        dep.trigger();\n      }\n    }\n  };\n  startBatch();\n  if (type === \"clear\") {\n    depsMap.forEach(run);\n  } else {\n    const targetIsArray = isArray(target);\n    const isArrayIndex = targetIsArray && isIntegerKey(key);\n    if (targetIsArray && key === \"length\") {\n      const newLength = Number(newValue);\n      depsMap.forEach((dep, key2) => {\n        if (key2 === \"length\" || key2 === ARRAY_ITERATE_KEY || !isSymbol(key2) && key2 >= newLength) {\n          run(dep);\n        }\n      });\n    } else {\n      if (key !== void 0 || depsMap.has(void 0)) {\n        run(depsMap.get(key));\n      }\n      if (isArrayIndex) {\n        run(depsMap.get(ARRAY_ITERATE_KEY));\n      }\n      switch (type) {\n        case \"add\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          } else if (isArrayIndex) {\n            run(depsMap.get(\"length\"));\n          }\n          break;\n        case \"delete\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          }\n          break;\n        case \"set\":\n          if (isMap(target)) {\n            run(depsMap.get(ITERATE_KEY));\n          }\n          break;\n      }\n    }\n  }\n  endBatch();\n}\nfunction getDepFromReactive(object, key) {\n  const depMap = targetMap.get(object);\n  return depMap && depMap.get(key);\n}\n\nfunction reactiveReadArray(array) {\n  const raw = toRaw(array);\n  if (raw === array) return raw;\n  track(raw, \"iterate\", ARRAY_ITERATE_KEY);\n  return isShallow(array) ? raw : raw.map(toReactive);\n}\nfunction shallowReadArray(arr) {\n  track(arr = toRaw(arr), \"iterate\", ARRAY_ITERATE_KEY);\n  return arr;\n}\nconst arrayInstrumentations = {\n  __proto__: null,\n  [Symbol.iterator]() {\n    return iterator(this, Symbol.iterator, toReactive);\n  },\n  concat(...args) {\n    return reactiveReadArray(this).concat(\n      ...args.map((x) => isArray(x) ? reactiveReadArray(x) : x)\n    );\n  },\n  entries() {\n    return iterator(this, \"entries\", (value) => {\n      value[1] = toReactive(value[1]);\n      return value;\n    });\n  },\n  every(fn, thisArg) {\n    return apply(this, \"every\", fn, thisArg, void 0, arguments);\n  },\n  filter(fn, thisArg) {\n    return apply(this, \"filter\", fn, thisArg, (v) => v.map(toReactive), arguments);\n  },\n  find(fn, thisArg) {\n    return apply(this, \"find\", fn, thisArg, toReactive, arguments);\n  },\n  findIndex(fn, thisArg) {\n    return apply(this, \"findIndex\", fn, thisArg, void 0, arguments);\n  },\n  findLast(fn, thisArg) {\n    return apply(this, \"findLast\", fn, thisArg, toReactive, arguments);\n  },\n  findLastIndex(fn, thisArg) {\n    return apply(this, \"findLastIndex\", fn, thisArg, void 0, arguments);\n  },\n  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement\n  forEach(fn, thisArg) {\n    return apply(this, \"forEach\", fn, thisArg, void 0, arguments);\n  },\n  includes(...args) {\n    return searchProxy(this, \"includes\", args);\n  },\n  indexOf(...args) {\n    return searchProxy(this, \"indexOf\", args);\n  },\n  join(separator) {\n    return reactiveReadArray(this).join(separator);\n  },\n  // keys() iterator only reads `length`, no optimisation required\n  lastIndexOf(...args) {\n    return searchProxy(this, \"lastIndexOf\", args);\n  },\n  map(fn, thisArg) {\n    return apply(this, \"map\", fn, thisArg, void 0, arguments);\n  },\n  pop() {\n    return noTracking(this, \"pop\");\n  },\n  push(...args) {\n    return noTracking(this, \"push\", args);\n  },\n  reduce(fn, ...args) {\n    return reduce(this, \"reduce\", fn, args);\n  },\n  reduceRight(fn, ...args) {\n    return reduce(this, \"reduceRight\", fn, args);\n  },\n  shift() {\n    return noTracking(this, \"shift\");\n  },\n  // slice could use ARRAY_ITERATE but also seems to beg for range tracking\n  some(fn, thisArg) {\n    return apply(this, \"some\", fn, thisArg, void 0, arguments);\n  },\n  splice(...args) {\n    return noTracking(this, \"splice\", args);\n  },\n  toReversed() {\n    return reactiveReadArray(this).toReversed();\n  },\n  toSorted(comparer) {\n    return reactiveReadArray(this).toSorted(comparer);\n  },\n  toSpliced(...args) {\n    return reactiveReadArray(this).toSpliced(...args);\n  },\n  unshift(...args) {\n    return noTracking(this, \"unshift\", args);\n  },\n  values() {\n    return iterator(this, \"values\", toReactive);\n  }\n};\nfunction iterator(self, method, wrapValue) {\n  const arr = shallowReadArray(self);\n  const iter = arr[method]();\n  if (arr !== self && !isShallow(self)) {\n    iter._next = iter.next;\n    iter.next = () => {\n      const result = iter._next();\n      if (result.value) {\n        result.value = wrapValue(result.value);\n      }\n      return result;\n    };\n  }\n  return iter;\n}\nconst arrayProto = Array.prototype;\nfunction apply(self, method, fn, thisArg, wrappedRetFn, args) {\n  const arr = shallowReadArray(self);\n  const needsWrap = arr !== self && !isShallow(self);\n  const methodFn = arr[method];\n  if (methodFn !== arrayProto[method]) {\n    const result2 = methodFn.apply(self, args);\n    return needsWrap ? toReactive(result2) : result2;\n  }\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (needsWrap) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, toReactive(item), index, self);\n      };\n    } else if (fn.length > 2) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, item, index, self);\n      };\n    }\n  }\n  const result = methodFn.call(arr, wrappedFn, thisArg);\n  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;\n}\nfunction reduce(self, method, fn, args) {\n  const arr = shallowReadArray(self);\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (!isShallow(self)) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, toReactive(item), index, self);\n      };\n    } else if (fn.length > 3) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, item, index, self);\n      };\n    }\n  }\n  return arr[method](wrappedFn, ...args);\n}\nfunction searchProxy(self, method, args) {\n  const arr = toRaw(self);\n  track(arr, \"iterate\", ARRAY_ITERATE_KEY);\n  const res = arr[method](...args);\n  if ((res === -1 || res === false) && isProxy(args[0])) {\n    args[0] = toRaw(args[0]);\n    return arr[method](...args);\n  }\n  return res;\n}\nfunction noTracking(self, method, args = []) {\n  pauseTracking();\n  startBatch();\n  const res = toRaw(self)[method].apply(self, args);\n  endBatch();\n  resetTracking();\n  return res;\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    if (key === \"__v_skip\") return target[\"__v_skip\"];\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the receiver is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      let fn;\n      if (targetIsArray && (fn = arrayInstrumentations[key])) {\n        return fn;\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(\n      target,\n      key,\n      // if this is a proxy wrapping a ref, return methods using the raw ref\n      // as receiver so that we don't have to call `toRaw` on the ref in all\n      // its class methods\n      isRef(target) ? target : receiver\n    );\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(\n      target,\n      key,\n      value,\n      isRef(target) ? target : receiver\n    );\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction createIterableMethod(method, isReadonly2, isShallow2) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;\n    !isReadonly2 && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations(readonly, shallow) {\n  const instrumentations = {\n    get(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"get\", key);\n        }\n        track(rawTarget, \"get\", rawKey);\n      }\n      const { has } = getProto(rawTarget);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n      } else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n      } else if (target !== rawTarget) {\n        target.get(key);\n      }\n    },\n    get size() {\n      const target = this[\"__v_raw\"];\n      !readonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n      return Reflect.get(target, \"size\", target);\n    },\n    has(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"has\", key);\n        }\n        track(rawTarget, \"has\", rawKey);\n      }\n      return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n    },\n    forEach(callback, thisArg) {\n      const observed = this;\n      const target = observed[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      !readonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n      return target.forEach((value, key) => {\n        return callback.call(thisArg, wrap(value), wrap(key), observed);\n      });\n    }\n  };\n  extend(\n    instrumentations,\n    readonly ? {\n      add: createReadonlyMethod(\"add\"),\n      set: createReadonlyMethod(\"set\"),\n      delete: createReadonlyMethod(\"delete\"),\n      clear: createReadonlyMethod(\"clear\")\n    } : {\n      add(value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const proto = getProto(target);\n        const hadKey = proto.has.call(target, value);\n        if (!hadKey) {\n          target.add(value);\n          trigger(target, \"add\", value, value);\n        }\n        return this;\n      },\n      set(key, value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get.call(target, key);\n        target.set(key, value);\n        if (!hadKey) {\n          trigger(target, \"add\", key, value);\n        } else if (hasChanged(value, oldValue)) {\n          trigger(target, \"set\", key, value, oldValue);\n        }\n        return this;\n      },\n      delete(key) {\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get ? get.call(target, key) : void 0;\n        const result = target.delete(key);\n        if (hadKey) {\n          trigger(target, \"delete\", key, void 0, oldValue);\n        }\n        return result;\n      },\n      clear() {\n        const target = toRaw(this);\n        const hadItems = target.size !== 0;\n        const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n        const result = target.clear();\n        if (hadItems) {\n          trigger(\n            target,\n            \"clear\",\n            void 0,\n            void 0,\n            oldTarget\n          );\n        }\n        return result;\n      }\n    }\n  );\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    instrumentations[method] = createIterableMethod(method, readonly, shallow);\n  });\n  return instrumentations;\n}\nfunction createInstrumentationGetter(isReadonly2, shallow) {\n  const instrumentations = createInstrumentations(isReadonly2, shallow);\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (!hasOwn(value, \"__v_skip\") && Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction isRef(r) {\n  return r ? r[\"__v_isRef\"] === true : false;\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, isShallow2) {\n    this.dep = new Dep();\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isShallow\"] = false;\n    this._rawValue = isShallow2 ? value : toRaw(value);\n    this._value = isShallow2 ? value : toReactive(value);\n    this[\"__v_isShallow\"] = isShallow2;\n  }\n  get value() {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.dep.track({\n        target: this,\n        type: \"get\",\n        key: \"value\"\n      });\n    } else {\n      this.dep.track();\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    const oldValue = this._rawValue;\n    const useDirectValue = this[\"__v_isShallow\"] || isShallow(newValue) || isReadonly(newValue);\n    newValue = useDirectValue ? newValue : toRaw(newValue);\n    if (hasChanged(newValue, oldValue)) {\n      this._rawValue = newValue;\n      this._value = useDirectValue ? newValue : toReactive(newValue);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        this.dep.trigger({\n          target: this,\n          type: \"set\",\n          key: \"value\",\n          newValue,\n          oldValue\n        });\n      } else {\n        this.dep.trigger();\n      }\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  if (ref2.dep) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      ref2.dep.trigger({\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: ref2._value\n      });\n    } else {\n      ref2.dep.trigger();\n    }\n  }\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => key === \"__v_raw\" ? target : unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    const dep = this.dep = new Dep();\n    const { get, set } = factory(dep.track.bind(dep), dep.trigger.bind(dep));\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._value = this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return this._value = val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isReadonly\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    return this._value = this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nclass ComputedRefImpl {\n  constructor(fn, setter, isSSR) {\n    this.fn = fn;\n    this.setter = setter;\n    /**\n     * @internal\n     */\n    this._value = void 0;\n    /**\n     * @internal\n     */\n    this.dep = new Dep(this);\n    /**\n     * @internal\n     */\n    this.__v_isRef = true;\n    // TODO isolatedDeclarations \"__v_isReadonly\"\n    // A computed is also a subscriber that tracks other deps\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 16;\n    /**\n     * @internal\n     */\n    this.globalVersion = globalVersion - 1;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    // for backwards compat\n    this.effect = this;\n    this[\"__v_isReadonly\"] = !setter;\n    this.isSSR = isSSR;\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    this.flags |= 16;\n    if (!(this.flags & 8) && // avoid infinite self recursion\n    activeSub !== this) {\n      batch(this, true);\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) ;\n  }\n  get value() {\n    const link = !!(process.env.NODE_ENV !== \"production\") ? this.dep.track({\n      target: this,\n      type: \"get\",\n      key: \"value\"\n    }) : this.dep.track();\n    refreshComputed(this);\n    if (link) {\n      link.version = this.dep.version;\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.setter) {\n      this.setter(newValue);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\"Write operation failed: computed value is readonly\");\n    }\n  }\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.onTrack = debugOptions.onTrack;\n    cRef.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\",\n  \"IS_REF\": \"__v_isRef\"\n};\n\nconst WatchErrorCodes = {\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\"\n};\nconst INITIAL_WATCHER_VALUE = {};\nconst cleanupMap = /* @__PURE__ */ new WeakMap();\nlet activeWatcher = void 0;\nfunction getCurrentWatcher() {\n  return activeWatcher;\n}\nfunction onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {\n  if (owner) {\n    let cleanups = cleanupMap.get(owner);\n    if (!cleanups) cleanupMap.set(owner, cleanups = []);\n    cleanups.push(cleanupFn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onWatcherCleanup() was called when there was no active watcher to associate with.`\n    );\n  }\n}\nfunction watch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, once, scheduler, augmentJob, call } = options;\n  const warnInvalidSource = (s) => {\n    (options.onWarn || warn)(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const reactiveGetter = (source2) => {\n    if (deep) return source2;\n    if (isShallow(source2) || deep === false || deep === 0)\n      return traverse(source2, 1);\n    return traverse(source2);\n  };\n  let effect;\n  let getter;\n  let cleanup;\n  let boundCleanup;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return call ? call(s, 2) : s();\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = call ? () => call(source, 2) : source;\n    } else {\n      getter = () => {\n        if (cleanup) {\n          pauseTracking();\n          try {\n            cleanup();\n          } finally {\n            resetTracking();\n          }\n        }\n        const currentEffect = activeWatcher;\n        activeWatcher = effect;\n        try {\n          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);\n        } finally {\n          activeWatcher = currentEffect;\n        }\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    const depth = deep === true ? Infinity : deep;\n    getter = () => traverse(baseGetter(), depth);\n  }\n  const scope = getCurrentScope();\n  const watchHandle = () => {\n    effect.stop();\n    if (scope && scope.active) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (once && cb) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      watchHandle();\n    };\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = (immediateFirstRun) => {\n    if (!(effect.flags & 1) || !effect.dirty && !immediateFirstRun) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup) {\n          cleanup();\n        }\n        const currentWatcher = activeWatcher;\n        activeWatcher = effect;\n        try {\n          const args = [\n            newValue,\n            // pass undefined as the old value when it's changed for the first time\n            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n            boundCleanup\n          ];\n          call ? call(cb, 3, args) : (\n            // @ts-expect-error\n            cb(...args)\n          );\n          oldValue = newValue;\n        } finally {\n          activeWatcher = currentWatcher;\n        }\n      }\n    } else {\n      effect.run();\n    }\n  };\n  if (augmentJob) {\n    augmentJob(job);\n  }\n  effect = new ReactiveEffect(getter);\n  effect.scheduler = scheduler ? () => scheduler(job, false) : job;\n  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect);\n  cleanup = effect.onStop = () => {\n    const cleanups = cleanupMap.get(effect);\n    if (cleanups) {\n      if (call) {\n        call(cleanups, 4);\n      } else {\n        for (const cleanup2 of cleanups) cleanup2();\n      }\n      cleanupMap.delete(effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = options.onTrack;\n    effect.onTrigger = options.onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job(true);\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (scheduler) {\n    scheduler(job.bind(null, true), true);\n  } else {\n    effect.run();\n  }\n  watchHandle.pause = effect.pause.bind(effect);\n  watchHandle.resume = effect.resume.bind(effect);\n  watchHandle.stop = watchHandle;\n  return watchHandle;\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Set();\n  if (seen.has(value)) {\n    return value;\n  }\n  seen.add(value);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n    for (const key of Object.getOwnPropertySymbols(value)) {\n      if (Object.prototype.propertyIsEnumerable.call(value, key)) {\n        traverse(value[key], depth, seen);\n      }\n    }\n  }\n  return value;\n}\n\nexport { ARRAY_ITERATE_KEY, EffectFlags, EffectScope, ITERATE_KEY, MAP_KEY_ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, WatchErrorCodes, computed, customRef, effect, effectScope, enableTracking, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onEffectCleanup, onScopeDispose, onWatcherCleanup, pauseTracking, proxyRefs, reactive, reactiveReadArray, readonly, ref, resetTracking, shallowReactive, shallowReadArray, shallowReadonly, shallowRef, stop, toRaw, toReactive, toReadonly, toRef, toRefs, toValue, track, traverse, trigger, triggerRef, unref, watch };\n","import {\n\tAdditiveBlending,\n\tBox2,\n\tBufferGeometry,\n\tColor,\n\tFramebufferTexture,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tMesh,\n\tMeshBasicMaterial,\n\tRawShaderMaterial,\n\tUnsignedByteType,\n\tVector2,\n\tVector3,\n\tVector4\n} from 'three';\n\nclass Lensflare extends Mesh {\n\n\tconstructor() {\n\n\t\tsuper( Lensflare.Geometry, new MeshBasicMaterial( { opacity: 0, transparent: true } ) );\n\n\t\tthis.isLensflare = true;\n\n\t\tthis.type = 'Lensflare';\n\t\tthis.frustumCulled = false;\n\t\tthis.renderOrder = Infinity;\n\n\t\t//\n\n\t\tconst positionScreen = new Vector3();\n\t\tconst positionView = new Vector3();\n\n\t\t// textures\n\n\t\tconst tempMap = new FramebufferTexture( 16, 16 );\n\t\tconst occlusionMap = new FramebufferTexture( 16, 16 );\n\n\t\tlet currentType = UnsignedByteType;\n\n\t\t// material\n\n\t\tconst geometry = Lensflare.Geometry;\n\n\t\tconst material1a = new RawShaderMaterial( {\n\t\t\tuniforms: {\n\t\t\t\t'scale': { value: null },\n\t\t\t\t'screenPosition': { value: null }\n\t\t\t},\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );\n\n\t\t\t\t}`,\n\t\t\tdepthTest: true,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: false\n\t\t} );\n\n\t\tconst material1b = new RawShaderMaterial( {\n\t\t\tuniforms: {\n\t\t\t\t'map': { value: tempMap },\n\t\t\t\t'scale': { value: null },\n\t\t\t\t'screenPosition': { value: null }\n\t\t\t},\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform vec3 screenPosition;\n\t\t\t\tuniform vec2 scale;\n\n\t\t\t\tattribute vec3 position;\n\t\t\t\tattribute vec2 uv;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUV = uv;\n\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\n\n\t\t\t\t}`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tprecision highp float;\n\n\t\t\t\tuniform sampler2D map;\n\n\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tgl_FragColor = texture2D( map, vUV );\n\n\t\t\t\t}`,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: false\n\t\t} );\n\n\t\t// the following object is used for occlusionMap generation\n\n\t\tconst mesh1 = new Mesh( geometry, material1a );\n\n\t\t//\n\n\t\tconst elements = [];\n\n\t\tconst shader = LensflareElement.Shader;\n\n\t\tconst material2 = new RawShaderMaterial( {\n\t\t\tname: shader.name,\n\t\t\tuniforms: {\n\t\t\t\t'map': { value: null },\n\t\t\t\t'occlusionMap': { value: occlusionMap },\n\t\t\t\t'color': { value: new Color( 0xffffff ) },\n\t\t\t\t'scale': { value: new Vector2() },\n\t\t\t\t'screenPosition': { value: new Vector3() }\n\t\t\t},\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tblending: AdditiveBlending,\n\t\t\ttransparent: true,\n\t\t\tdepthWrite: false\n\t\t} );\n\n\t\tconst mesh2 = new Mesh( geometry, material2 );\n\n\t\tthis.addElement = function ( element ) {\n\n\t\t\telements.push( element );\n\n\t\t};\n\n\t\t//\n\n\t\tconst scale = new Vector2();\n\t\tconst screenPositionPixels = new Vector2();\n\t\tconst validArea = new Box2();\n\t\tconst viewport = new Vector4();\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\trenderer.getCurrentViewport( viewport );\n\n\t\t\tconst renderTarget = renderer.getRenderTarget();\n\t\t\tconst type = ( renderTarget !== null ) ? renderTarget.texture.type : UnsignedByteType;\n\n\t\t\tif ( currentType !== type ) {\n\n\t\t\t\ttempMap.dispose();\n\t\t\t\tocclusionMap.dispose();\n\n\t\t\t\ttempMap.type = occlusionMap.type = type;\n\n\t\t\t\tcurrentType = type;\n\n\t\t\t}\n\n\t\t\tconst invAspect = viewport.w / viewport.z;\n\t\t\tconst halfViewportWidth = viewport.z / 2.0;\n\t\t\tconst halfViewportHeight = viewport.w / 2.0;\n\n\t\t\tlet size = 16 / viewport.w;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\tvalidArea.min.set( viewport.x, viewport.y );\n\t\t\tvalidArea.max.set( viewport.x + ( viewport.z - 16 ), viewport.y + ( viewport.w - 16 ) );\n\n\t\t\t// calculate position in screen space\n\n\t\t\tpositionView.setFromMatrixPosition( this.matrixWorld );\n\t\t\tpositionView.applyMatrix4( camera.matrixWorldInverse );\n\n\t\t\tif ( positionView.z > 0 ) return; // lensflare is behind the camera\n\n\t\t\tpositionScreen.copy( positionView ).applyMatrix4( camera.projectionMatrix );\n\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\t\tscreenPositionPixels.x = viewport.x + ( positionScreen.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\t\tscreenPositionPixels.y = viewport.y + ( positionScreen.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t\t// screen cull\n\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\trenderer.copyFramebufferToTexture( tempMap, screenPositionPixels );\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tlet uniforms = material1a.uniforms;\n\t\t\t\tuniforms[ 'scale' ].value = scale;\n\t\t\t\tuniforms[ 'screenPosition' ].value = positionScreen;\n\n\t\t\t\trenderer.renderBufferDirect( camera, null, geometry, material1a, mesh1, null );\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\trenderer.copyFramebufferToTexture( occlusionMap, screenPositionPixels );\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tuniforms = material1b.uniforms;\n\t\t\t\tuniforms[ 'scale' ].value = scale;\n\t\t\t\tuniforms[ 'screenPosition' ].value = positionScreen;\n\n\t\t\t\trenderer.renderBufferDirect( camera, null, geometry, material1b, mesh1, null );\n\n\t\t\t\t// render elements\n\n\t\t\t\tconst vecX = - positionScreen.x * 2;\n\t\t\t\tconst vecY = - positionScreen.y * 2;\n\n\t\t\t\tfor ( let i = 0, l = elements.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst element = elements[ i ];\n\n\t\t\t\t\tconst uniforms = material2.uniforms;\n\n\t\t\t\t\tuniforms[ 'color' ].value.copy( element.color );\n\t\t\t\t\tuniforms[ 'map' ].value = element.texture;\n\t\t\t\t\tuniforms[ 'screenPosition' ].value.x = positionScreen.x + vecX * element.distance;\n\t\t\t\t\tuniforms[ 'screenPosition' ].value.y = positionScreen.y + vecY * element.distance;\n\n\t\t\t\t\tsize = element.size / viewport.w;\n\t\t\t\t\tconst invAspect = viewport.w / viewport.z;\n\n\t\t\t\t\tuniforms[ 'scale' ].value.set( size * invAspect, size );\n\n\t\t\t\t\tmaterial2.uniformsNeedUpdate = true;\n\n\t\t\t\t\trenderer.renderBufferDirect( camera, null, geometry, material2, mesh2, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\tmaterial1a.dispose();\n\t\t\tmaterial1b.dispose();\n\t\t\tmaterial2.dispose();\n\n\t\t\ttempMap.dispose();\n\t\t\tocclusionMap.dispose();\n\n\t\t\tfor ( let i = 0, l = elements.length; i < l; i ++ ) {\n\n\t\t\t\telements[ i ].texture.dispose();\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n}\n\n//\n\nclass LensflareElement {\n\n\tconstructor( texture, size = 1, distance = 0, color = new Color( 0xffffff ) ) {\n\n\t\tthis.texture = texture;\n\t\tthis.size = size;\n\t\tthis.distance = distance;\n\t\tthis.color = color;\n\n\t}\n\n}\n\nLensflareElement.Shader = {\n\n\tname: 'LensflareElementShader',\n\n\tuniforms: {\n\n\t\t'map': { value: null },\n\t\t'occlusionMap': { value: null },\n\t\t'color': { value: null },\n\t\t'scale': { value: null },\n\t\t'screenPosition': { value: null }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tprecision highp float;\n\n\t\tuniform vec3 screenPosition;\n\t\tuniform vec2 scale;\n\n\t\tuniform sampler2D occlusionMap;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUV;\n\t\tvarying float vVisibility;\n\n\t\tvoid main() {\n\n\t\t\tvUV = uv;\n\n\t\t\tvec2 pos = position.xy;\n\n\t\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\n\n\t\t\tvVisibility =        visibility.r / 9.0;\n\t\t\tvVisibility *= 1.0 - visibility.g / 9.0;\n\t\t\tvVisibility *=       visibility.b / 9.0;\n\n\t\t\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D map;\n\t\tuniform vec3 color;\n\n\t\tvarying vec2 vUV;\n\t\tvarying float vVisibility;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texture = texture2D( map, vUV );\n\t\t\ttexture.a *= vVisibility;\n\t\t\tgl_FragColor = texture;\n\t\t\tgl_FragColor.rgb *= color;\n\n\t\t}`\n\n};\n\nLensflare.Geometry = ( function () {\n\n\tconst geometry = new BufferGeometry();\n\n\tconst float32Array = new Float32Array( [\n\t\t- 1, - 1, 0, 0, 0,\n\t\t1, - 1, 0, 1, 0,\n\t\t1, 1, 0, 1, 1,\n\t\t- 1, 1, 0, 0, 1\n\t] );\n\n\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\tgeometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\tgeometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\tgeometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\treturn geometry;\n\n} )();\n\nexport { Lensflare, LensflareElement };\n","import {\n\tBackSide,\n\tBoxGeometry,\n\tMesh,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3\n} from 'three';\n\n/**\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * https://www.researchgate.net/publication/220720443_A_Practical_Analytic_Model_for_Daylight\n *\n * First implemented by Simon Wallner\n * http://simonwallner.at/project/atmospheric-scattering/\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n*/\n\nclass Sky extends Mesh {\n\n\tconstructor() {\n\n\t\tconst shader = Sky.SkyShader;\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tname: shader.name,\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false\n\t\t} );\n\n\t\tsuper( new BoxGeometry( 1, 1, 1 ), material );\n\n\t\tthis.isSky = true;\n\n\t}\n\n}\n\nSky.SkyShader = {\n\n\tname: 'SkyShader',\n\n\tuniforms: {\n\t\t'turbidity': { value: 2 },\n\t\t'rayleigh': { value: 1 },\n\t\t'mieCoefficient': { value: 0.005 },\n\t\t'mieDirectionalG': { value: 0.8 },\n\t\t'sunPosition': { value: new Vector3() },\n\t\t'up': { value: new Vector3( 0, 1, 0 ) }\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPosition );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\n\t\t}`\n\n};\n\nexport { Sky };\n","import * as THREE from 'three'\r\nimport {\r\n    Lensflare,\r\n    LensflareElement,\r\n} from \"three/examples/jsm/objects/Lensflare.js\";\r\nimport { Sky } from 'three/addons/objects/Sky.js';\r\nimport SunCalc from 'suncalc'\r\nawait import('suncalc')\r\ndeclare global {\r\n    interface Window {\r\n        SunCalc: typeof SunCalc; // 声明 Suncalc 的类型\r\n    }\r\n}\r\nasync function useSun() {\r\n    let sky: Sky, sun: THREE.Vector3;\r\n    // 太阳高度\r\n    const distance = 500;\r\n    let sunX = 2000;  // 初始x坐标\r\n    let sunY = 2000;  // 初始y坐标\r\n    const dirColor: THREE.Color = new THREE.Color('#fdd885')\r\n\r\n    // 默认经纬度，上海普陀区\r\n    const latitude = 121.3912291, longitude = 31.2513263;\r\n\r\n    const currentTime = new Date();\r\n    currentTime.setHours(6, 0, 0, 0);\r\n\r\n    let timeInterval = 120000; // 时间间隔（毫秒）\r\n\r\n    function initSkyLights(scene: THREE.Scene) {\r\n        const directionalLight_sun = new THREE.DirectionalLight(0xffffff, 1)  //平行光\r\n        //平行光_sun\r\n        directionalLight_sun.position.set(sunX, sunY, distance)\r\n        directionalLight_sun.name = 'directionalLight_sun'\r\n        directionalLight_sun.castShadow = true\r\n        directionalLight_sun.shadow.mapSize.width = Math.pow(2, 13);\r\n        directionalLight_sun.shadow.bias = -0.00005;\r\n        directionalLight_sun.shadow.mapSize.height = Math.pow(2, 13);\r\n\r\n        const d_sun = 1000\r\n        directionalLight_sun.shadow.camera.left = -d_sun\r\n        directionalLight_sun.shadow.camera.right = d_sun\r\n        directionalLight_sun.shadow.camera.top = d_sun\r\n        directionalLight_sun.shadow.camera.bottom = -d_sun\r\n\r\n        directionalLight_sun.shadow.camera.far = 8000\r\n        directionalLight_sun.shadow.camera.near = 10\r\n\r\n\r\n        //点光源\r\n        const pointLight = new THREE.PointLight(dirColor, 0.2, 1500, 0)\r\n        pointLight.position.set(sunX, sunY, distance)\r\n        pointLight.name = 'pointLight_sun'\r\n\r\n        //半球光\r\n        const hemisphereLight = new THREE.HemisphereLight(0xb1e1ff, \"#1e1e1e\", 0.4)  //半球光\r\n        hemisphereLight.color.setHSL(0.6, 1, 0.6)\r\n        hemisphereLight.groundColor.setHSL(0.095, 1, 0.75)\r\n        hemisphereLight.position.set(0, 50, 0)\r\n\r\n        let env = getEnvFromScene(scene)\r\n        env.add(directionalLight_sun)\r\n        env.add(hemisphereLight)\r\n        env.add(pointLight)\r\n        addLight(pointLight)\r\n    }\r\n\r\n\r\n    function initSky(scene: THREE.Scene) {\r\n        // Add Sky\r\n        sky = new Sky();\r\n        sky.scale.setScalar(450000);\r\n        let env = getEnvFromScene(scene)\r\n        env.add(sky);\r\n\r\n        sun = new THREE.Vector3();\r\n\r\n        const effectController = {\r\n            turbidity: 10,\r\n            rayleigh: 3,\r\n            mieCoefficient: 0.005,\r\n            mieDirectionalG: 0.7,\r\n            elevation: 2,\r\n            azimuth: 180,\r\n            exposure: 0.3\r\n        };\r\n\r\n        const uniforms = sky.material.uniforms;\r\n        uniforms['turbidity'].value = effectController.turbidity;\r\n        uniforms['rayleigh'].value = effectController.rayleigh;\r\n        uniforms['mieCoefficient'].value = effectController.mieCoefficient;\r\n        uniforms['mieDirectionalG'].value = effectController.mieDirectionalG;\r\n\r\n        const phi = THREE.MathUtils.degToRad(90 - effectController.elevation);\r\n        const theta = THREE.MathUtils.degToRad(effectController.azimuth);\r\n\r\n        sun.setFromSphericalCoords(1, phi, theta);\r\n\r\n        uniforms['sunPosition'].value.copy(sun);\r\n\r\n        // renderer.toneMappingExposure = effectController.exposure;   //色调映射的曝光级别\r\n    }\r\n\r\n    function updateSunPosition(scene: THREE.Scene) {\r\n        const utcTime = new Date(currentTime.getTime() - (currentTime.getTimezoneOffset() * 60000))\r\n        // const sunTime = SunCalc.getTimes(utcTime, latitude, longitude)\r\n\r\n        const sunPosition = window.SunCalc.getPosition(utcTime, latitude, longitude);\r\n        // console.log('currentTime', currentTime);\r\n        // console.log('utcTime', utcTime);\r\n        // console.log('sunTime', sunTime);\r\n        // console.log('sunPosition', sunPosition);\r\n\r\n        //转化为弧度\r\n        const sunAltitude = sunPosition.altitude * (180 / Math.PI);\r\n        const sunAzimuth = sunPosition.azimuth * (180 / Math.PI);\r\n\r\n\r\n        const theta = (90 - sunAltitude) * (Math.PI / 180);\r\n        const phi = (-sunAzimuth + 180) * (Math.PI / 180); // 考虑太阳在地平线以下的情况\r\n\r\n        const x = 1000 * Math.sin(theta) * Math.cos(phi);\r\n        const y = 1000 * Math.cos(theta);\r\n        const z = 1000 * Math.sin(theta) * Math.sin(phi);\r\n\r\n        // 时间推移\r\n        currentTime.setTime(currentTime.getTime() + timeInterval);\r\n\r\n        // 因为太阳是从底部出来，所以数据去反就好了;\r\n        const pointLight = scene.getObjectByName('pointLight_sun');\r\n        const directionalLight = scene.getObjectByName('directionalLight_sun');\r\n        if (!pointLight || !directionalLight) return\r\n        pointLight.position.set(-x, -y, -z);\r\n        directionalLight.position.set(-x, -y, -z);\r\n\r\n        const sunVector = new THREE.Vector3(-x, -y, -z);\r\n        const uniforms = sky.material.uniforms;\r\n        uniforms['sunPosition'].value.copy(sunVector);\r\n    }\r\n\r\n    return {\r\n        initSkyLights,\r\n        initSky,\r\n        updateSunPosition\r\n    }\r\n}\r\n\r\n//光晕\r\nfunction addLight(light: THREE.PointLight) {\r\n    const lensflare = new Lensflare()\r\n    const textureLoader = new THREE.TextureLoader()\r\n    const textureFlare0 = textureLoader.load('/images/lensflare0.png')\r\n    const textureFlare3 = textureLoader.load('/images/lensflare3.png')\r\n    lensflare.addElement(new LensflareElement(textureFlare0, 250, 0, light.color))\r\n    lensflare.addElement(new LensflareElement(textureFlare3, 60, 0.6))\r\n    lensflare.addElement(new LensflareElement(textureFlare3, 70, 0.7))\r\n    lensflare.addElement(new LensflareElement(textureFlare3, 120, 0.9))\r\n    lensflare.addElement(new LensflareElement(textureFlare3, 70, 1))\r\n    light.add(lensflare)\r\n}\r\n\r\nfunction getEnvFromScene(scene: THREE.Scene) {\r\n    let env = scene.getObjectByName('env')\r\n    if (!env) {\r\n        env = new THREE.Group()\r\n        env.name = 'env'\r\n        scene.add(env)\r\n    }\r\n    return env\r\n}\r\n\r\nexport default useSun","/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.8.2\n*/\n\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n","import {\n\tDataTextureLoader,\n\tDataUtils,\n\tFloatType,\n\tHalfFloatType,\n\tNoColorSpace,\n\tLinearFilter,\n\tLinearSRGBColorSpace,\n\tRedFormat,\n\tRGBAFormat\n} from 'three';\nimport * as fflate from '../libs/fflate.module.js';\n\n/**\n * OpenEXR loader currently supports uncompressed, ZIP(S), RLE, PIZ and DWA/B compression.\n * Supports reading as UnsignedByte, HalfFloat and Float type data texture.\n *\n * Referred to the original Industrial Light & Magic OpenEXR implementation and the TinyEXR / Syoyo Fujita\n * implementation, so I have preserved their copyright notices.\n */\n\n// /*\n// Copyright (c) 2014 - 2017, Syoyo Fujita\n// All rights reserved.\n\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//     * Neither the name of the Syoyo Fujita nor the\n//       names of its contributors may be used to endorse or promote products\n//       derived from this software without specific prior written permission.\n\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n// ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n// WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n// DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\n// DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n// (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n// LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n// ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n// SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n// */\n\n// // TinyEXR contains some OpenEXR code, which is licensed under ------------\n\n// ///////////////////////////////////////////////////////////////////////////\n// //\n// // Copyright (c) 2002, Industrial Light & Magic, a division of Lucas\n// // Digital Ltd. LLC\n// //\n// // All rights reserved.\n// //\n// // Redistribution and use in source and binary forms, with or without\n// // modification, are permitted provided that the following conditions are\n// // met:\n// // *       Redistributions of source code must retain the above copyright\n// // notice, this list of conditions and the following disclaimer.\n// // *       Redistributions in binary form must reproduce the above\n// // copyright notice, this list of conditions and the following disclaimer\n// // in the documentation and/or other materials provided with the\n// // distribution.\n// // *       Neither the name of Industrial Light & Magic nor the names of\n// // its contributors may be used to endorse or promote products derived\n// // from this software without specific prior written permission.\n// //\n// // THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// // \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// // LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// // A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// // OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// // SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// // LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// // DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// // THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// // (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// // OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n// //\n// ///////////////////////////////////////////////////////////////////////////\n\n// // End of OpenEXR license -------------------------------------------------\n\nclass EXRLoader extends DataTextureLoader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.type = HalfFloatType;\n\n\t}\n\n\tparse( buffer ) {\n\n\t\tconst USHORT_RANGE = ( 1 << 16 );\n\t\tconst BITMAP_SIZE = ( USHORT_RANGE >> 3 );\n\n\t\tconst HUF_ENCBITS = 16; // literal (value) bit length\n\t\tconst HUF_DECBITS = 14; // decoding bit size (>= 8)\n\n\t\tconst HUF_ENCSIZE = ( 1 << HUF_ENCBITS ) + 1; // encoding table size\n\t\tconst HUF_DECSIZE = 1 << HUF_DECBITS; // decoding table size\n\t\tconst HUF_DECMASK = HUF_DECSIZE - 1;\n\n\t\tconst NBITS = 16;\n\t\tconst A_OFFSET = 1 << ( NBITS - 1 );\n\t\tconst MOD_MASK = ( 1 << NBITS ) - 1;\n\n\t\tconst SHORT_ZEROCODE_RUN = 59;\n\t\tconst LONG_ZEROCODE_RUN = 63;\n\t\tconst SHORTEST_LONG_RUN = 2 + LONG_ZEROCODE_RUN - SHORT_ZEROCODE_RUN;\n\n\t\tconst ULONG_SIZE = 8;\n\t\tconst FLOAT32_SIZE = 4;\n\t\tconst INT32_SIZE = 4;\n\t\tconst INT16_SIZE = 2;\n\t\tconst INT8_SIZE = 1;\n\n\t\tconst STATIC_HUFFMAN = 0;\n\t\tconst DEFLATE = 1;\n\n\t\tconst UNKNOWN = 0;\n\t\tconst LOSSY_DCT = 1;\n\t\tconst RLE = 2;\n\n\t\tconst logBase = Math.pow( 2.7182818, 2.2 );\n\n\t\tfunction reverseLutFromBitmap( bitmap, lut ) {\n\n\t\t\tlet k = 0;\n\n\t\t\tfor ( let i = 0; i < USHORT_RANGE; ++ i ) {\n\n\t\t\t\tif ( ( i == 0 ) || ( bitmap[ i >> 3 ] & ( 1 << ( i & 7 ) ) ) ) {\n\n\t\t\t\t\tlut[ k ++ ] = i;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst n = k - 1;\n\n\t\t\twhile ( k < USHORT_RANGE ) lut[ k ++ ] = 0;\n\n\t\t\treturn n;\n\n\t\t}\n\n\t\tfunction hufClearDecTable( hdec ) {\n\n\t\t\tfor ( let i = 0; i < HUF_DECSIZE; i ++ ) {\n\n\t\t\t\thdec[ i ] = {};\n\t\t\t\thdec[ i ].len = 0;\n\t\t\t\thdec[ i ].lit = 0;\n\t\t\t\thdec[ i ].p = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst getBitsReturn = { l: 0, c: 0, lc: 0 };\n\n\t\tfunction getBits( nBits, c, lc, uInt8Array, inOffset ) {\n\n\t\t\twhile ( lc < nBits ) {\n\n\t\t\t\tc = ( c << 8 ) | parseUint8Array( uInt8Array, inOffset );\n\t\t\t\tlc += 8;\n\n\t\t\t}\n\n\t\t\tlc -= nBits;\n\n\t\t\tgetBitsReturn.l = ( c >> lc ) & ( ( 1 << nBits ) - 1 );\n\t\t\tgetBitsReturn.c = c;\n\t\t\tgetBitsReturn.lc = lc;\n\n\t\t}\n\n\t\tconst hufTableBuffer = new Array( 59 );\n\n\t\tfunction hufCanonicalCodeTable( hcode ) {\n\n\t\t\tfor ( let i = 0; i <= 58; ++ i ) hufTableBuffer[ i ] = 0;\n\t\t\tfor ( let i = 0; i < HUF_ENCSIZE; ++ i ) hufTableBuffer[ hcode[ i ] ] += 1;\n\n\t\t\tlet c = 0;\n\n\t\t\tfor ( let i = 58; i > 0; -- i ) {\n\n\t\t\t\tconst nc = ( ( c + hufTableBuffer[ i ] ) >> 1 );\n\t\t\t\thufTableBuffer[ i ] = c;\n\t\t\t\tc = nc;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < HUF_ENCSIZE; ++ i ) {\n\n\t\t\t\tconst l = hcode[ i ];\n\t\t\t\tif ( l > 0 ) hcode[ i ] = l | ( hufTableBuffer[ l ] ++ << 6 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction hufUnpackEncTable( uInt8Array, inOffset, ni, im, iM, hcode ) {\n\n\t\t\tconst p = inOffset;\n\t\t\tlet c = 0;\n\t\t\tlet lc = 0;\n\n\t\t\tfor ( ; im <= iM; im ++ ) {\n\n\t\t\t\tif ( p.value - inOffset.value > ni ) return false;\n\n\t\t\t\tgetBits( 6, c, lc, uInt8Array, p );\n\n\t\t\t\tconst l = getBitsReturn.l;\n\t\t\t\tc = getBitsReturn.c;\n\t\t\t\tlc = getBitsReturn.lc;\n\n\t\t\t\thcode[ im ] = l;\n\n\t\t\t\tif ( l == LONG_ZEROCODE_RUN ) {\n\n\t\t\t\t\tif ( p.value - inOffset.value > ni ) {\n\n\t\t\t\t\t\tthrow new Error( 'Something wrong with hufUnpackEncTable' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgetBits( 8, c, lc, uInt8Array, p );\n\n\t\t\t\t\tlet zerun = getBitsReturn.l + SHORTEST_LONG_RUN;\n\t\t\t\t\tc = getBitsReturn.c;\n\t\t\t\t\tlc = getBitsReturn.lc;\n\n\t\t\t\t\tif ( im + zerun > iM + 1 ) {\n\n\t\t\t\t\t\tthrow new Error( 'Something wrong with hufUnpackEncTable' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( zerun -- ) hcode[ im ++ ] = 0;\n\n\t\t\t\t\tim --;\n\n\t\t\t\t} else if ( l >= SHORT_ZEROCODE_RUN ) {\n\n\t\t\t\t\tlet zerun = l - SHORT_ZEROCODE_RUN + 2;\n\n\t\t\t\t\tif ( im + zerun > iM + 1 ) {\n\n\t\t\t\t\t\tthrow new Error( 'Something wrong with hufUnpackEncTable' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\twhile ( zerun -- ) hcode[ im ++ ] = 0;\n\n\t\t\t\t\tim --;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thufCanonicalCodeTable( hcode );\n\n\t\t}\n\n\t\tfunction hufLength( code ) {\n\n\t\t\treturn code & 63;\n\n\t\t}\n\n\t\tfunction hufCode( code ) {\n\n\t\t\treturn code >> 6;\n\n\t\t}\n\n\t\tfunction hufBuildDecTable( hcode, im, iM, hdecod ) {\n\n\t\t\tfor ( ; im <= iM; im ++ ) {\n\n\t\t\t\tconst c = hufCode( hcode[ im ] );\n\t\t\t\tconst l = hufLength( hcode[ im ] );\n\n\t\t\t\tif ( c >> l ) {\n\n\t\t\t\t\tthrow new Error( 'Invalid table entry' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( l > HUF_DECBITS ) {\n\n\t\t\t\t\tconst pl = hdecod[ ( c >> ( l - HUF_DECBITS ) ) ];\n\n\t\t\t\t\tif ( pl.len ) {\n\n\t\t\t\t\t\tthrow new Error( 'Invalid table entry' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpl.lit ++;\n\n\t\t\t\t\tif ( pl.p ) {\n\n\t\t\t\t\t\tconst p = pl.p;\n\t\t\t\t\t\tpl.p = new Array( pl.lit );\n\n\t\t\t\t\t\tfor ( let i = 0; i < pl.lit - 1; ++ i ) {\n\n\t\t\t\t\t\t\tpl.p[ i ] = p[ i ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpl.p = new Array( 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpl.p[ pl.lit - 1 ] = im;\n\n\t\t\t\t} else if ( l ) {\n\n\t\t\t\t\tlet plOffset = 0;\n\n\t\t\t\t\tfor ( let i = 1 << ( HUF_DECBITS - l ); i > 0; i -- ) {\n\n\t\t\t\t\t\tconst pl = hdecod[ ( c << ( HUF_DECBITS - l ) ) + plOffset ];\n\n\t\t\t\t\t\tif ( pl.len || pl.p ) {\n\n\t\t\t\t\t\t\tthrow new Error( 'Invalid table entry' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpl.len = l;\n\t\t\t\t\t\tpl.lit = im;\n\n\t\t\t\t\t\tplOffset ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst getCharReturn = { c: 0, lc: 0 };\n\n\t\tfunction getChar( c, lc, uInt8Array, inOffset ) {\n\n\t\t\tc = ( c << 8 ) | parseUint8Array( uInt8Array, inOffset );\n\t\t\tlc += 8;\n\n\t\t\tgetCharReturn.c = c;\n\t\t\tgetCharReturn.lc = lc;\n\n\t\t}\n\n\t\tconst getCodeReturn = { c: 0, lc: 0 };\n\n\t\tfunction getCode( po, rlc, c, lc, uInt8Array, inOffset, outBuffer, outBufferOffset, outBufferEndOffset ) {\n\n\t\t\tif ( po == rlc ) {\n\n\t\t\t\tif ( lc < 8 ) {\n\n\t\t\t\t\tgetChar( c, lc, uInt8Array, inOffset );\n\t\t\t\t\tc = getCharReturn.c;\n\t\t\t\t\tlc = getCharReturn.lc;\n\n\t\t\t\t}\n\n\t\t\t\tlc -= 8;\n\n\t\t\t\tlet cs = ( c >> lc );\n\t\t\t\tcs = new Uint8Array( [ cs ] )[ 0 ];\n\n\t\t\t\tif ( outBufferOffset.value + cs > outBufferEndOffset ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t\tconst s = outBuffer[ outBufferOffset.value - 1 ];\n\n\t\t\t\twhile ( cs -- > 0 ) {\n\n\t\t\t\t\toutBuffer[ outBufferOffset.value ++ ] = s;\n\n\t\t\t\t}\n\n\t\t\t} else if ( outBufferOffset.value < outBufferEndOffset ) {\n\n\t\t\t\toutBuffer[ outBufferOffset.value ++ ] = po;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tgetCodeReturn.c = c;\n\t\t\tgetCodeReturn.lc = lc;\n\n\t\t}\n\n\t\tfunction UInt16( value ) {\n\n\t\t\treturn ( value & 0xFFFF );\n\n\t\t}\n\n\t\tfunction Int16( value ) {\n\n\t\t\tconst ref = UInt16( value );\n\t\t\treturn ( ref > 0x7FFF ) ? ref - 0x10000 : ref;\n\n\t\t}\n\n\t\tconst wdec14Return = { a: 0, b: 0 };\n\n\t\tfunction wdec14( l, h ) {\n\n\t\t\tconst ls = Int16( l );\n\t\t\tconst hs = Int16( h );\n\n\t\t\tconst hi = hs;\n\t\t\tconst ai = ls + ( hi & 1 ) + ( hi >> 1 );\n\n\t\t\tconst as = ai;\n\t\t\tconst bs = ai - hi;\n\n\t\t\twdec14Return.a = as;\n\t\t\twdec14Return.b = bs;\n\n\t\t}\n\n\t\tfunction wdec16( l, h ) {\n\n\t\t\tconst m = UInt16( l );\n\t\t\tconst d = UInt16( h );\n\n\t\t\tconst bb = ( m - ( d >> 1 ) ) & MOD_MASK;\n\t\t\tconst aa = ( d + bb - A_OFFSET ) & MOD_MASK;\n\n\t\t\twdec14Return.a = aa;\n\t\t\twdec14Return.b = bb;\n\n\t\t}\n\n\t\tfunction wav2Decode( buffer, j, nx, ox, ny, oy, mx ) {\n\n\t\t\tconst w14 = mx < ( 1 << 14 );\n\t\t\tconst n = ( nx > ny ) ? ny : nx;\n\t\t\tlet p = 1;\n\t\t\tlet p2;\n\t\t\tlet py;\n\n\t\t\twhile ( p <= n ) p <<= 1;\n\n\t\t\tp >>= 1;\n\t\t\tp2 = p;\n\t\t\tp >>= 1;\n\n\t\t\twhile ( p >= 1 ) {\n\n\t\t\t\tpy = 0;\n\t\t\t\tconst ey = py + oy * ( ny - p2 );\n\t\t\t\tconst oy1 = oy * p;\n\t\t\t\tconst oy2 = oy * p2;\n\t\t\t\tconst ox1 = ox * p;\n\t\t\t\tconst ox2 = ox * p2;\n\t\t\t\tlet i00, i01, i10, i11;\n\n\t\t\t\tfor ( ; py <= ey; py += oy2 ) {\n\n\t\t\t\t\tlet px = py;\n\t\t\t\t\tconst ex = py + ox * ( nx - p2 );\n\n\t\t\t\t\tfor ( ; px <= ex; px += ox2 ) {\n\n\t\t\t\t\t\tconst p01 = px + ox1;\n\t\t\t\t\t\tconst p10 = px + oy1;\n\t\t\t\t\t\tconst p11 = p10 + ox1;\n\n\t\t\t\t\t\tif ( w14 ) {\n\n\t\t\t\t\t\t\twdec14( buffer[ px + j ], buffer[ p10 + j ] );\n\n\t\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\t\ti10 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec14( buffer[ p01 + j ], buffer[ p11 + j ] );\n\n\t\t\t\t\t\t\ti01 = wdec14Return.a;\n\t\t\t\t\t\t\ti11 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec14( i00, i01 );\n\n\t\t\t\t\t\t\tbuffer[ px + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p01 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec14( i10, i11 );\n\n\t\t\t\t\t\t\tbuffer[ p10 + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p11 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\twdec16( buffer[ px + j ], buffer[ p10 + j ] );\n\n\t\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\t\ti10 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec16( buffer[ p01 + j ], buffer[ p11 + j ] );\n\n\t\t\t\t\t\t\ti01 = wdec14Return.a;\n\t\t\t\t\t\t\ti11 = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec16( i00, i01 );\n\n\t\t\t\t\t\t\tbuffer[ px + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p01 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\t\twdec16( i10, i11 );\n\n\t\t\t\t\t\t\tbuffer[ p10 + j ] = wdec14Return.a;\n\t\t\t\t\t\t\tbuffer[ p11 + j ] = wdec14Return.b;\n\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( nx & p ) {\n\n\t\t\t\t\t\tconst p10 = px + oy1;\n\n\t\t\t\t\t\tif ( w14 )\n\t\t\t\t\t\t\twdec14( buffer[ px + j ], buffer[ p10 + j ] );\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twdec16( buffer[ px + j ], buffer[ p10 + j ] );\n\n\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\tbuffer[ p10 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\tbuffer[ px + j ] = i00;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ny & p ) {\n\n\t\t\t\t\tlet px = py;\n\t\t\t\t\tconst ex = py + ox * ( nx - p2 );\n\n\t\t\t\t\tfor ( ; px <= ex; px += ox2 ) {\n\n\t\t\t\t\t\tconst p01 = px + ox1;\n\n\t\t\t\t\t\tif ( w14 )\n\t\t\t\t\t\t\twdec14( buffer[ px + j ], buffer[ p01 + j ] );\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twdec16( buffer[ px + j ], buffer[ p01 + j ] );\n\n\t\t\t\t\t\ti00 = wdec14Return.a;\n\t\t\t\t\t\tbuffer[ p01 + j ] = wdec14Return.b;\n\n\t\t\t\t\t\tbuffer[ px + j ] = i00;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tp2 = p;\n\t\t\t\tp >>= 1;\n\n\t\t\t}\n\n\t\t\treturn py;\n\n\t\t}\n\n\t\tfunction hufDecode( encodingTable, decodingTable, uInt8Array, inOffset, ni, rlc, no, outBuffer, outOffset ) {\n\n\t\t\tlet c = 0;\n\t\t\tlet lc = 0;\n\t\t\tconst outBufferEndOffset = no;\n\t\t\tconst inOffsetEnd = Math.trunc( inOffset.value + ( ni + 7 ) / 8 );\n\n\t\t\twhile ( inOffset.value < inOffsetEnd ) {\n\n\t\t\t\tgetChar( c, lc, uInt8Array, inOffset );\n\n\t\t\t\tc = getCharReturn.c;\n\t\t\t\tlc = getCharReturn.lc;\n\n\t\t\t\twhile ( lc >= HUF_DECBITS ) {\n\n\t\t\t\t\tconst index = ( c >> ( lc - HUF_DECBITS ) ) & HUF_DECMASK;\n\t\t\t\t\tconst pl = decodingTable[ index ];\n\n\t\t\t\t\tif ( pl.len ) {\n\n\t\t\t\t\t\tlc -= pl.len;\n\n\t\t\t\t\t\tgetCode( pl.lit, rlc, c, lc, uInt8Array, inOffset, outBuffer, outOffset, outBufferEndOffset );\n\n\t\t\t\t\t\tc = getCodeReturn.c;\n\t\t\t\t\t\tlc = getCodeReturn.lc;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( ! pl.p ) {\n\n\t\t\t\t\t\t\tthrow new Error( 'hufDecode issues' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet j;\n\n\t\t\t\t\t\tfor ( j = 0; j < pl.lit; j ++ ) {\n\n\t\t\t\t\t\t\tconst l = hufLength( encodingTable[ pl.p[ j ] ] );\n\n\t\t\t\t\t\t\twhile ( lc < l && inOffset.value < inOffsetEnd ) {\n\n\t\t\t\t\t\t\t\tgetChar( c, lc, uInt8Array, inOffset );\n\n\t\t\t\t\t\t\t\tc = getCharReturn.c;\n\t\t\t\t\t\t\t\tlc = getCharReturn.lc;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( lc >= l ) {\n\n\t\t\t\t\t\t\t\tif ( hufCode( encodingTable[ pl.p[ j ] ] ) == ( ( c >> ( lc - l ) ) & ( ( 1 << l ) - 1 ) ) ) {\n\n\t\t\t\t\t\t\t\t\tlc -= l;\n\n\t\t\t\t\t\t\t\t\tgetCode( pl.p[ j ], rlc, c, lc, uInt8Array, inOffset, outBuffer, outOffset, outBufferEndOffset );\n\n\t\t\t\t\t\t\t\t\tc = getCodeReturn.c;\n\t\t\t\t\t\t\t\t\tlc = getCodeReturn.lc;\n\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( j == pl.lit ) {\n\n\t\t\t\t\t\t\tthrow new Error( 'hufDecode issues' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst i = ( 8 - ni ) & 7;\n\n\t\t\tc >>= i;\n\t\t\tlc -= i;\n\n\t\t\twhile ( lc > 0 ) {\n\n\t\t\t\tconst pl = decodingTable[ ( c << ( HUF_DECBITS - lc ) ) & HUF_DECMASK ];\n\n\t\t\t\tif ( pl.len ) {\n\n\t\t\t\t\tlc -= pl.len;\n\n\t\t\t\t\tgetCode( pl.lit, rlc, c, lc, uInt8Array, inOffset, outBuffer, outOffset, outBufferEndOffset );\n\n\t\t\t\t\tc = getCodeReturn.c;\n\t\t\t\t\tlc = getCodeReturn.lc;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'hufDecode issues' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tfunction hufUncompress( uInt8Array, inDataView, inOffset, nCompressed, outBuffer, nRaw ) {\n\n\t\t\tconst outOffset = { value: 0 };\n\t\t\tconst initialInOffset = inOffset.value;\n\n\t\t\tconst im = parseUint32( inDataView, inOffset );\n\t\t\tconst iM = parseUint32( inDataView, inOffset );\n\n\t\t\tinOffset.value += 4;\n\n\t\t\tconst nBits = parseUint32( inDataView, inOffset );\n\n\t\t\tinOffset.value += 4;\n\n\t\t\tif ( im < 0 || im >= HUF_ENCSIZE || iM < 0 || iM >= HUF_ENCSIZE ) {\n\n\t\t\t\tthrow new Error( 'Something wrong with HUF_ENCSIZE' );\n\n\t\t\t}\n\n\t\t\tconst freq = new Array( HUF_ENCSIZE );\n\t\t\tconst hdec = new Array( HUF_DECSIZE );\n\n\t\t\thufClearDecTable( hdec );\n\n\t\t\tconst ni = nCompressed - ( inOffset.value - initialInOffset );\n\n\t\t\thufUnpackEncTable( uInt8Array, inOffset, ni, im, iM, freq );\n\n\t\t\tif ( nBits > 8 * ( nCompressed - ( inOffset.value - initialInOffset ) ) ) {\n\n\t\t\t\tthrow new Error( 'Something wrong with hufUncompress' );\n\n\t\t\t}\n\n\t\t\thufBuildDecTable( freq, im, iM, hdec );\n\n\t\t\thufDecode( freq, hdec, uInt8Array, inOffset, nBits, iM, nRaw, outBuffer, outOffset );\n\n\t\t}\n\n\t\tfunction applyLut( lut, data, nData ) {\n\n\t\t\tfor ( let i = 0; i < nData; ++ i ) {\n\n\t\t\t\tdata[ i ] = lut[ data[ i ] ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction predictor( source ) {\n\n\t\t\tfor ( let t = 1; t < source.length; t ++ ) {\n\n\t\t\t\tconst d = source[ t - 1 ] + source[ t ] - 128;\n\t\t\t\tsource[ t ] = d;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction interleaveScalar( source, out ) {\n\n\t\t\tlet t1 = 0;\n\t\t\tlet t2 = Math.floor( ( source.length + 1 ) / 2 );\n\t\t\tlet s = 0;\n\t\t\tconst stop = source.length - 1;\n\n\t\t\twhile ( true ) {\n\n\t\t\t\tif ( s > stop ) break;\n\t\t\t\tout[ s ++ ] = source[ t1 ++ ];\n\n\t\t\t\tif ( s > stop ) break;\n\t\t\t\tout[ s ++ ] = source[ t2 ++ ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction decodeRunLength( source ) {\n\n\t\t\tlet size = source.byteLength;\n\t\t\tconst out = new Array();\n\t\t\tlet p = 0;\n\n\t\t\tconst reader = new DataView( source );\n\n\t\t\twhile ( size > 0 ) {\n\n\t\t\t\tconst l = reader.getInt8( p ++ );\n\n\t\t\t\tif ( l < 0 ) {\n\n\t\t\t\t\tconst count = - l;\n\t\t\t\t\tsize -= count + 1;\n\n\t\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\tout.push( reader.getUint8( p ++ ) );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst count = l;\n\t\t\t\t\tsize -= 2;\n\n\t\t\t\t\tconst value = reader.getUint8( p ++ );\n\n\t\t\t\t\tfor ( let i = 0; i < count + 1; i ++ ) {\n\n\t\t\t\t\t\tout.push( value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn out;\n\n\t\t}\n\n\t\tfunction lossyDctDecode( cscSet, rowPtrs, channelData, acBuffer, dcBuffer, outBuffer ) {\n\n\t\t\tlet dataView = new DataView( outBuffer.buffer );\n\n\t\t\tconst width = channelData[ cscSet.idx[ 0 ] ].width;\n\t\t\tconst height = channelData[ cscSet.idx[ 0 ] ].height;\n\n\t\t\tconst numComp = 3;\n\n\t\t\tconst numFullBlocksX = Math.floor( width / 8.0 );\n\t\t\tconst numBlocksX = Math.ceil( width / 8.0 );\n\t\t\tconst numBlocksY = Math.ceil( height / 8.0 );\n\t\t\tconst leftoverX = width - ( numBlocksX - 1 ) * 8;\n\t\t\tconst leftoverY = height - ( numBlocksY - 1 ) * 8;\n\n\t\t\tconst currAcComp = { value: 0 };\n\t\t\tconst currDcComp = new Array( numComp );\n\t\t\tconst dctData = new Array( numComp );\n\t\t\tconst halfZigBlock = new Array( numComp );\n\t\t\tconst rowBlock = new Array( numComp );\n\t\t\tconst rowOffsets = new Array( numComp );\n\n\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\trowOffsets[ comp ] = rowPtrs[ cscSet.idx[ comp ] ];\n\t\t\t\tcurrDcComp[ comp ] = ( comp < 1 ) ? 0 : currDcComp[ comp - 1 ] + numBlocksX * numBlocksY;\n\t\t\t\tdctData[ comp ] = new Float32Array( 64 );\n\t\t\t\thalfZigBlock[ comp ] = new Uint16Array( 64 );\n\t\t\t\trowBlock[ comp ] = new Uint16Array( numBlocksX * 64 );\n\n\t\t\t}\n\n\t\t\tfor ( let blocky = 0; blocky < numBlocksY; ++ blocky ) {\n\n\t\t\t\tlet maxY = 8;\n\n\t\t\t\tif ( blocky == numBlocksY - 1 )\n\t\t\t\t\tmaxY = leftoverY;\n\n\t\t\t\tlet maxX = 8;\n\n\t\t\t\tfor ( let blockx = 0; blockx < numBlocksX; ++ blockx ) {\n\n\t\t\t\t\tif ( blockx == numBlocksX - 1 )\n\t\t\t\t\t\tmaxX = leftoverX;\n\n\t\t\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\t\t\thalfZigBlock[ comp ].fill( 0 );\n\n\t\t\t\t\t\t// set block DC component\n\t\t\t\t\t\thalfZigBlock[ comp ][ 0 ] = dcBuffer[ currDcComp[ comp ] ++ ];\n\t\t\t\t\t\t// set block AC components\n\t\t\t\t\t\tunRleAC( currAcComp, acBuffer, halfZigBlock[ comp ] );\n\n\t\t\t\t\t\t// UnZigZag block to float\n\t\t\t\t\t\tunZigZag( halfZigBlock[ comp ], dctData[ comp ] );\n\t\t\t\t\t\t// decode float dct\n\t\t\t\t\t\tdctInverse( dctData[ comp ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( numComp == 3 ) {\n\n\t\t\t\t\t\tcsc709Inverse( dctData );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\t\t\tconvertToHalf( dctData[ comp ], rowBlock[ comp ], blockx * 64 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} // blockx\n\n\t\t\t\tlet offset = 0;\n\n\t\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\t\tconst type = channelData[ cscSet.idx[ comp ] ].type;\n\n\t\t\t\t\tfor ( let y = 8 * blocky; y < 8 * blocky + maxY; ++ y ) {\n\n\t\t\t\t\t\toffset = rowOffsets[ comp ][ y ];\n\n\t\t\t\t\t\tfor ( let blockx = 0; blockx < numFullBlocksX; ++ blockx ) {\n\n\t\t\t\t\t\t\tconst src = blockx * 64 + ( ( y & 0x7 ) * 8 );\n\n\t\t\t\t\t\t\tdataView.setUint16( offset + 0 * INT16_SIZE * type, rowBlock[ comp ][ src + 0 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 1 * INT16_SIZE * type, rowBlock[ comp ][ src + 1 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 2 * INT16_SIZE * type, rowBlock[ comp ][ src + 2 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 3 * INT16_SIZE * type, rowBlock[ comp ][ src + 3 ], true );\n\n\t\t\t\t\t\t\tdataView.setUint16( offset + 4 * INT16_SIZE * type, rowBlock[ comp ][ src + 4 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 5 * INT16_SIZE * type, rowBlock[ comp ][ src + 5 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 6 * INT16_SIZE * type, rowBlock[ comp ][ src + 6 ], true );\n\t\t\t\t\t\t\tdataView.setUint16( offset + 7 * INT16_SIZE * type, rowBlock[ comp ][ src + 7 ], true );\n\n\t\t\t\t\t\t\toffset += 8 * INT16_SIZE * type;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// handle partial X blocks\n\t\t\t\t\tif ( numFullBlocksX != numBlocksX ) {\n\n\t\t\t\t\t\tfor ( let y = 8 * blocky; y < 8 * blocky + maxY; ++ y ) {\n\n\t\t\t\t\t\t\tconst offset = rowOffsets[ comp ][ y ] + 8 * numFullBlocksX * INT16_SIZE * type;\n\t\t\t\t\t\t\tconst src = numFullBlocksX * 64 + ( ( y & 0x7 ) * 8 );\n\n\t\t\t\t\t\t\tfor ( let x = 0; x < maxX; ++ x ) {\n\n\t\t\t\t\t\t\t\tdataView.setUint16( offset + x * INT16_SIZE * type, rowBlock[ comp ][ src + x ], true );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} // comp\n\n\t\t\t} // blocky\n\n\t\t\tconst halfRow = new Uint16Array( width );\n\t\t\tdataView = new DataView( outBuffer.buffer );\n\n\t\t\t// convert channels back to float, if needed\n\t\t\tfor ( let comp = 0; comp < numComp; ++ comp ) {\n\n\t\t\t\tchannelData[ cscSet.idx[ comp ] ].decoded = true;\n\t\t\t\tconst type = channelData[ cscSet.idx[ comp ] ].type;\n\n\t\t\t\tif ( channelData[ comp ].type != 2 ) continue;\n\n\t\t\t\tfor ( let y = 0; y < height; ++ y ) {\n\n\t\t\t\t\tconst offset = rowOffsets[ comp ][ y ];\n\n\t\t\t\t\tfor ( let x = 0; x < width; ++ x ) {\n\n\t\t\t\t\t\thalfRow[ x ] = dataView.getUint16( offset + x * INT16_SIZE * type, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let x = 0; x < width; ++ x ) {\n\n\t\t\t\t\t\tdataView.setFloat32( offset + x * INT16_SIZE * type, decodeFloat16( halfRow[ x ] ), true );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction unRleAC( currAcComp, acBuffer, halfZigBlock ) {\n\n\t\t\tlet acValue;\n\t\t\tlet dctComp = 1;\n\n\t\t\twhile ( dctComp < 64 ) {\n\n\t\t\t\tacValue = acBuffer[ currAcComp.value ];\n\n\t\t\t\tif ( acValue == 0xff00 ) {\n\n\t\t\t\t\tdctComp = 64;\n\n\t\t\t\t} else if ( acValue >> 8 == 0xff ) {\n\n\t\t\t\t\tdctComp += acValue & 0xff;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thalfZigBlock[ dctComp ] = acValue;\n\t\t\t\t\tdctComp ++;\n\n\t\t\t\t}\n\n\t\t\t\tcurrAcComp.value ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction unZigZag( src, dst ) {\n\n\t\t\tdst[ 0 ] = decodeFloat16( src[ 0 ] );\n\t\t\tdst[ 1 ] = decodeFloat16( src[ 1 ] );\n\t\t\tdst[ 2 ] = decodeFloat16( src[ 5 ] );\n\t\t\tdst[ 3 ] = decodeFloat16( src[ 6 ] );\n\t\t\tdst[ 4 ] = decodeFloat16( src[ 14 ] );\n\t\t\tdst[ 5 ] = decodeFloat16( src[ 15 ] );\n\t\t\tdst[ 6 ] = decodeFloat16( src[ 27 ] );\n\t\t\tdst[ 7 ] = decodeFloat16( src[ 28 ] );\n\t\t\tdst[ 8 ] = decodeFloat16( src[ 2 ] );\n\t\t\tdst[ 9 ] = decodeFloat16( src[ 4 ] );\n\n\t\t\tdst[ 10 ] = decodeFloat16( src[ 7 ] );\n\t\t\tdst[ 11 ] = decodeFloat16( src[ 13 ] );\n\t\t\tdst[ 12 ] = decodeFloat16( src[ 16 ] );\n\t\t\tdst[ 13 ] = decodeFloat16( src[ 26 ] );\n\t\t\tdst[ 14 ] = decodeFloat16( src[ 29 ] );\n\t\t\tdst[ 15 ] = decodeFloat16( src[ 42 ] );\n\t\t\tdst[ 16 ] = decodeFloat16( src[ 3 ] );\n\t\t\tdst[ 17 ] = decodeFloat16( src[ 8 ] );\n\t\t\tdst[ 18 ] = decodeFloat16( src[ 12 ] );\n\t\t\tdst[ 19 ] = decodeFloat16( src[ 17 ] );\n\n\t\t\tdst[ 20 ] = decodeFloat16( src[ 25 ] );\n\t\t\tdst[ 21 ] = decodeFloat16( src[ 30 ] );\n\t\t\tdst[ 22 ] = decodeFloat16( src[ 41 ] );\n\t\t\tdst[ 23 ] = decodeFloat16( src[ 43 ] );\n\t\t\tdst[ 24 ] = decodeFloat16( src[ 9 ] );\n\t\t\tdst[ 25 ] = decodeFloat16( src[ 11 ] );\n\t\t\tdst[ 26 ] = decodeFloat16( src[ 18 ] );\n\t\t\tdst[ 27 ] = decodeFloat16( src[ 24 ] );\n\t\t\tdst[ 28 ] = decodeFloat16( src[ 31 ] );\n\t\t\tdst[ 29 ] = decodeFloat16( src[ 40 ] );\n\n\t\t\tdst[ 30 ] = decodeFloat16( src[ 44 ] );\n\t\t\tdst[ 31 ] = decodeFloat16( src[ 53 ] );\n\t\t\tdst[ 32 ] = decodeFloat16( src[ 10 ] );\n\t\t\tdst[ 33 ] = decodeFloat16( src[ 19 ] );\n\t\t\tdst[ 34 ] = decodeFloat16( src[ 23 ] );\n\t\t\tdst[ 35 ] = decodeFloat16( src[ 32 ] );\n\t\t\tdst[ 36 ] = decodeFloat16( src[ 39 ] );\n\t\t\tdst[ 37 ] = decodeFloat16( src[ 45 ] );\n\t\t\tdst[ 38 ] = decodeFloat16( src[ 52 ] );\n\t\t\tdst[ 39 ] = decodeFloat16( src[ 54 ] );\n\n\t\t\tdst[ 40 ] = decodeFloat16( src[ 20 ] );\n\t\t\tdst[ 41 ] = decodeFloat16( src[ 22 ] );\n\t\t\tdst[ 42 ] = decodeFloat16( src[ 33 ] );\n\t\t\tdst[ 43 ] = decodeFloat16( src[ 38 ] );\n\t\t\tdst[ 44 ] = decodeFloat16( src[ 46 ] );\n\t\t\tdst[ 45 ] = decodeFloat16( src[ 51 ] );\n\t\t\tdst[ 46 ] = decodeFloat16( src[ 55 ] );\n\t\t\tdst[ 47 ] = decodeFloat16( src[ 60 ] );\n\t\t\tdst[ 48 ] = decodeFloat16( src[ 21 ] );\n\t\t\tdst[ 49 ] = decodeFloat16( src[ 34 ] );\n\n\t\t\tdst[ 50 ] = decodeFloat16( src[ 37 ] );\n\t\t\tdst[ 51 ] = decodeFloat16( src[ 47 ] );\n\t\t\tdst[ 52 ] = decodeFloat16( src[ 50 ] );\n\t\t\tdst[ 53 ] = decodeFloat16( src[ 56 ] );\n\t\t\tdst[ 54 ] = decodeFloat16( src[ 59 ] );\n\t\t\tdst[ 55 ] = decodeFloat16( src[ 61 ] );\n\t\t\tdst[ 56 ] = decodeFloat16( src[ 35 ] );\n\t\t\tdst[ 57 ] = decodeFloat16( src[ 36 ] );\n\t\t\tdst[ 58 ] = decodeFloat16( src[ 48 ] );\n\t\t\tdst[ 59 ] = decodeFloat16( src[ 49 ] );\n\n\t\t\tdst[ 60 ] = decodeFloat16( src[ 57 ] );\n\t\t\tdst[ 61 ] = decodeFloat16( src[ 58 ] );\n\t\t\tdst[ 62 ] = decodeFloat16( src[ 62 ] );\n\t\t\tdst[ 63 ] = decodeFloat16( src[ 63 ] );\n\n\t\t}\n\n\t\tfunction dctInverse( data ) {\n\n\t\t\tconst a = 0.5 * Math.cos( 3.14159 / 4.0 );\n\t\t\tconst b = 0.5 * Math.cos( 3.14159 / 16.0 );\n\t\t\tconst c = 0.5 * Math.cos( 3.14159 / 8.0 );\n\t\t\tconst d = 0.5 * Math.cos( 3.0 * 3.14159 / 16.0 );\n\t\t\tconst e = 0.5 * Math.cos( 5.0 * 3.14159 / 16.0 );\n\t\t\tconst f = 0.5 * Math.cos( 3.0 * 3.14159 / 8.0 );\n\t\t\tconst g = 0.5 * Math.cos( 7.0 * 3.14159 / 16.0 );\n\n\t\t\tconst alpha = new Array( 4 );\n\t\t\tconst beta = new Array( 4 );\n\t\t\tconst theta = new Array( 4 );\n\t\t\tconst gamma = new Array( 4 );\n\n\t\t\tfor ( let row = 0; row < 8; ++ row ) {\n\n\t\t\t\tconst rowPtr = row * 8;\n\n\t\t\t\talpha[ 0 ] = c * data[ rowPtr + 2 ];\n\t\t\t\talpha[ 1 ] = f * data[ rowPtr + 2 ];\n\t\t\t\talpha[ 2 ] = c * data[ rowPtr + 6 ];\n\t\t\t\talpha[ 3 ] = f * data[ rowPtr + 6 ];\n\n\t\t\t\tbeta[ 0 ] = b * data[ rowPtr + 1 ] + d * data[ rowPtr + 3 ] + e * data[ rowPtr + 5 ] + g * data[ rowPtr + 7 ];\n\t\t\t\tbeta[ 1 ] = d * data[ rowPtr + 1 ] - g * data[ rowPtr + 3 ] - b * data[ rowPtr + 5 ] - e * data[ rowPtr + 7 ];\n\t\t\t\tbeta[ 2 ] = e * data[ rowPtr + 1 ] - b * data[ rowPtr + 3 ] + g * data[ rowPtr + 5 ] + d * data[ rowPtr + 7 ];\n\t\t\t\tbeta[ 3 ] = g * data[ rowPtr + 1 ] - e * data[ rowPtr + 3 ] + d * data[ rowPtr + 5 ] - b * data[ rowPtr + 7 ];\n\n\t\t\t\ttheta[ 0 ] = a * ( data[ rowPtr + 0 ] + data[ rowPtr + 4 ] );\n\t\t\t\ttheta[ 3 ] = a * ( data[ rowPtr + 0 ] - data[ rowPtr + 4 ] );\n\t\t\t\ttheta[ 1 ] = alpha[ 0 ] + alpha[ 3 ];\n\t\t\t\ttheta[ 2 ] = alpha[ 1 ] - alpha[ 2 ];\n\n\t\t\t\tgamma[ 0 ] = theta[ 0 ] + theta[ 1 ];\n\t\t\t\tgamma[ 1 ] = theta[ 3 ] + theta[ 2 ];\n\t\t\t\tgamma[ 2 ] = theta[ 3 ] - theta[ 2 ];\n\t\t\t\tgamma[ 3 ] = theta[ 0 ] - theta[ 1 ];\n\n\t\t\t\tdata[ rowPtr + 0 ] = gamma[ 0 ] + beta[ 0 ];\n\t\t\t\tdata[ rowPtr + 1 ] = gamma[ 1 ] + beta[ 1 ];\n\t\t\t\tdata[ rowPtr + 2 ] = gamma[ 2 ] + beta[ 2 ];\n\t\t\t\tdata[ rowPtr + 3 ] = gamma[ 3 ] + beta[ 3 ];\n\n\t\t\t\tdata[ rowPtr + 4 ] = gamma[ 3 ] - beta[ 3 ];\n\t\t\t\tdata[ rowPtr + 5 ] = gamma[ 2 ] - beta[ 2 ];\n\t\t\t\tdata[ rowPtr + 6 ] = gamma[ 1 ] - beta[ 1 ];\n\t\t\t\tdata[ rowPtr + 7 ] = gamma[ 0 ] - beta[ 0 ];\n\n\t\t\t}\n\n\t\t\tfor ( let column = 0; column < 8; ++ column ) {\n\n\t\t\t\talpha[ 0 ] = c * data[ 16 + column ];\n\t\t\t\talpha[ 1 ] = f * data[ 16 + column ];\n\t\t\t\talpha[ 2 ] = c * data[ 48 + column ];\n\t\t\t\talpha[ 3 ] = f * data[ 48 + column ];\n\n\t\t\t\tbeta[ 0 ] = b * data[ 8 + column ] + d * data[ 24 + column ] + e * data[ 40 + column ] + g * data[ 56 + column ];\n\t\t\t\tbeta[ 1 ] = d * data[ 8 + column ] - g * data[ 24 + column ] - b * data[ 40 + column ] - e * data[ 56 + column ];\n\t\t\t\tbeta[ 2 ] = e * data[ 8 + column ] - b * data[ 24 + column ] + g * data[ 40 + column ] + d * data[ 56 + column ];\n\t\t\t\tbeta[ 3 ] = g * data[ 8 + column ] - e * data[ 24 + column ] + d * data[ 40 + column ] - b * data[ 56 + column ];\n\n\t\t\t\ttheta[ 0 ] = a * ( data[ column ] + data[ 32 + column ] );\n\t\t\t\ttheta[ 3 ] = a * ( data[ column ] - data[ 32 + column ] );\n\n\t\t\t\ttheta[ 1 ] = alpha[ 0 ] + alpha[ 3 ];\n\t\t\t\ttheta[ 2 ] = alpha[ 1 ] - alpha[ 2 ];\n\n\t\t\t\tgamma[ 0 ] = theta[ 0 ] + theta[ 1 ];\n\t\t\t\tgamma[ 1 ] = theta[ 3 ] + theta[ 2 ];\n\t\t\t\tgamma[ 2 ] = theta[ 3 ] - theta[ 2 ];\n\t\t\t\tgamma[ 3 ] = theta[ 0 ] - theta[ 1 ];\n\n\t\t\t\tdata[ 0 + column ] = gamma[ 0 ] + beta[ 0 ];\n\t\t\t\tdata[ 8 + column ] = gamma[ 1 ] + beta[ 1 ];\n\t\t\t\tdata[ 16 + column ] = gamma[ 2 ] + beta[ 2 ];\n\t\t\t\tdata[ 24 + column ] = gamma[ 3 ] + beta[ 3 ];\n\n\t\t\t\tdata[ 32 + column ] = gamma[ 3 ] - beta[ 3 ];\n\t\t\t\tdata[ 40 + column ] = gamma[ 2 ] - beta[ 2 ];\n\t\t\t\tdata[ 48 + column ] = gamma[ 1 ] - beta[ 1 ];\n\t\t\t\tdata[ 56 + column ] = gamma[ 0 ] - beta[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction csc709Inverse( data ) {\n\n\t\t\tfor ( let i = 0; i < 64; ++ i ) {\n\n\t\t\t\tconst y = data[ 0 ][ i ];\n\t\t\t\tconst cb = data[ 1 ][ i ];\n\t\t\t\tconst cr = data[ 2 ][ i ];\n\n\t\t\t\tdata[ 0 ][ i ] = y + 1.5747 * cr;\n\t\t\t\tdata[ 1 ][ i ] = y - 0.1873 * cb - 0.4682 * cr;\n\t\t\t\tdata[ 2 ][ i ] = y + 1.8556 * cb;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction convertToHalf( src, dst, idx ) {\n\n\t\t\tfor ( let i = 0; i < 64; ++ i ) {\n\n\t\t\t\tdst[ idx + i ] = DataUtils.toHalfFloat( toLinear( src[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction toLinear( float ) {\n\n\t\t\tif ( float <= 1 ) {\n\n\t\t\t\treturn Math.sign( float ) * Math.pow( Math.abs( float ), 2.2 );\n\n\t\t\t} else {\n\n\t\t\t\treturn Math.sign( float ) * Math.pow( logBase, Math.abs( float ) - 1.0 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction uncompressRAW( info ) {\n\n\t\t\treturn new DataView( info.array.buffer, info.offset.value, info.size );\n\n\t\t}\n\n\t\tfunction uncompressRLE( info ) {\n\n\t\t\tconst compressed = info.viewer.buffer.slice( info.offset.value, info.offset.value + info.size );\n\n\t\t\tconst rawBuffer = new Uint8Array( decodeRunLength( compressed ) );\n\t\t\tconst tmpBuffer = new Uint8Array( rawBuffer.length );\n\n\t\t\tpredictor( rawBuffer ); // revert predictor\n\n\t\t\tinterleaveScalar( rawBuffer, tmpBuffer ); // interleave pixels\n\n\t\t\treturn new DataView( tmpBuffer.buffer );\n\n\t\t}\n\n\t\tfunction uncompressZIP( info ) {\n\n\t\t\tconst compressed = info.array.slice( info.offset.value, info.offset.value + info.size );\n\n\t\t\tconst rawBuffer = fflate.unzlibSync( compressed );\n\t\t\tconst tmpBuffer = new Uint8Array( rawBuffer.length );\n\n\t\t\tpredictor( rawBuffer ); // revert predictor\n\n\t\t\tinterleaveScalar( rawBuffer, tmpBuffer ); // interleave pixels\n\n\t\t\treturn new DataView( tmpBuffer.buffer );\n\n\t\t}\n\n\t\tfunction uncompressPIZ( info ) {\n\n\t\t\tconst inDataView = info.viewer;\n\t\t\tconst inOffset = { value: info.offset.value };\n\n\t\t\tconst outBuffer = new Uint16Array( info.columns * info.lines * ( info.inputChannels.length * info.type ) );\n\t\t\tconst bitmap = new Uint8Array( BITMAP_SIZE );\n\n\t\t\t// Setup channel info\n\t\t\tlet outBufferEnd = 0;\n\t\t\tconst pizChannelData = new Array( info.inputChannels.length );\n\t\t\tfor ( let i = 0, il = info.inputChannels.length; i < il; i ++ ) {\n\n\t\t\t\tpizChannelData[ i ] = {};\n\t\t\t\tpizChannelData[ i ][ 'start' ] = outBufferEnd;\n\t\t\t\tpizChannelData[ i ][ 'end' ] = pizChannelData[ i ][ 'start' ];\n\t\t\t\tpizChannelData[ i ][ 'nx' ] = info.columns;\n\t\t\t\tpizChannelData[ i ][ 'ny' ] = info.lines;\n\t\t\t\tpizChannelData[ i ][ 'size' ] = info.type;\n\n\t\t\t\toutBufferEnd += pizChannelData[ i ].nx * pizChannelData[ i ].ny * pizChannelData[ i ].size;\n\n\t\t\t}\n\n\t\t\t// Read range compression data\n\n\t\t\tconst minNonZero = parseUint16( inDataView, inOffset );\n\t\t\tconst maxNonZero = parseUint16( inDataView, inOffset );\n\n\t\t\tif ( maxNonZero >= BITMAP_SIZE ) {\n\n\t\t\t\tthrow new Error( 'Something is wrong with PIZ_COMPRESSION BITMAP_SIZE' );\n\n\t\t\t}\n\n\t\t\tif ( minNonZero <= maxNonZero ) {\n\n\t\t\t\tfor ( let i = 0; i < maxNonZero - minNonZero + 1; i ++ ) {\n\n\t\t\t\t\tbitmap[ i + minNonZero ] = parseUint8( inDataView, inOffset );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Reverse LUT\n\t\t\tconst lut = new Uint16Array( USHORT_RANGE );\n\t\t\tconst maxValue = reverseLutFromBitmap( bitmap, lut );\n\n\t\t\tconst length = parseUint32( inDataView, inOffset );\n\n\t\t\t// Huffman decoding\n\t\t\thufUncompress( info.array, inDataView, inOffset, length, outBuffer, outBufferEnd );\n\n\t\t\t// Wavelet decoding\n\t\t\tfor ( let i = 0; i < info.inputChannels.length; ++ i ) {\n\n\t\t\t\tconst cd = pizChannelData[ i ];\n\n\t\t\t\tfor ( let j = 0; j < pizChannelData[ i ].size; ++ j ) {\n\n\t\t\t\t\twav2Decode(\n\t\t\t\t\t\toutBuffer,\n\t\t\t\t\t\tcd.start + j,\n\t\t\t\t\t\tcd.nx,\n\t\t\t\t\t\tcd.size,\n\t\t\t\t\t\tcd.ny,\n\t\t\t\t\t\tcd.nx * cd.size,\n\t\t\t\t\t\tmaxValue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Expand the pixel data to their original range\n\t\t\tapplyLut( lut, outBuffer, outBufferEnd );\n\n\t\t\t// Rearrange the pixel data into the format expected by the caller.\n\t\t\tlet tmpOffset = 0;\n\t\t\tconst tmpBuffer = new Uint8Array( outBuffer.buffer.byteLength );\n\t\t\tfor ( let y = 0; y < info.lines; y ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < info.inputChannels.length; c ++ ) {\n\n\t\t\t\t\tconst cd = pizChannelData[ c ];\n\n\t\t\t\t\tconst n = cd.nx * cd.size;\n\t\t\t\t\tconst cp = new Uint8Array( outBuffer.buffer, cd.end * INT16_SIZE, n * INT16_SIZE );\n\n\t\t\t\t\ttmpBuffer.set( cp, tmpOffset );\n\t\t\t\t\ttmpOffset += n * INT16_SIZE;\n\t\t\t\t\tcd.end += n;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new DataView( tmpBuffer.buffer );\n\n\t\t}\n\n\t\tfunction uncompressPXR( info ) {\n\n\t\t\tconst compressed = info.array.slice( info.offset.value, info.offset.value + info.size );\n\n\t\t\tconst rawBuffer = fflate.unzlibSync( compressed );\n\n\t\t\tconst byteSize = info.inputChannels.length * info.lines * info.columns * info.totalBytes;\n\t\t\tconst tmpBuffer = new ArrayBuffer( byteSize );\n\t\t\tconst viewer = new DataView( tmpBuffer );\n\n\t\t\tlet tmpBufferEnd = 0;\n\t\t\tlet writePtr = 0;\n\t\t\tconst ptr = new Array( 4 );\n\n\t\t\tfor ( let y = 0; y < info.lines; y ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < info.inputChannels.length; c ++ ) {\n\n\t\t\t\t\tlet pixel = 0;\n\n\t\t\t\t\tconst type = info.inputChannels[ c ].pixelType;\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\tptr[ 0 ] = tmpBufferEnd;\n\t\t\t\t\t\t\tptr[ 1 ] = ptr[ 0 ] + info.columns;\n\t\t\t\t\t\t\ttmpBufferEnd = ptr[ 1 ] + info.columns;\n\n\t\t\t\t\t\t\tfor ( let j = 0; j < info.columns; ++ j ) {\n\n\t\t\t\t\t\t\t\tconst diff = ( rawBuffer[ ptr[ 0 ] ++ ] << 8 ) | rawBuffer[ ptr[ 1 ] ++ ];\n\n\t\t\t\t\t\t\t\tpixel += diff;\n\n\t\t\t\t\t\t\t\tviewer.setUint16( writePtr, pixel, true );\n\t\t\t\t\t\t\t\twritePtr += 2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\tptr[ 0 ] = tmpBufferEnd;\n\t\t\t\t\t\t\tptr[ 1 ] = ptr[ 0 ] + info.columns;\n\t\t\t\t\t\t\tptr[ 2 ] = ptr[ 1 ] + info.columns;\n\t\t\t\t\t\t\ttmpBufferEnd = ptr[ 2 ] + info.columns;\n\n\t\t\t\t\t\t\tfor ( let j = 0; j < info.columns; ++ j ) {\n\n\t\t\t\t\t\t\t\tconst diff = ( rawBuffer[ ptr[ 0 ] ++ ] << 24 ) | ( rawBuffer[ ptr[ 1 ] ++ ] << 16 ) | ( rawBuffer[ ptr[ 2 ] ++ ] << 8 );\n\n\t\t\t\t\t\t\t\tpixel += diff;\n\n\t\t\t\t\t\t\t\tviewer.setUint32( writePtr, pixel, true );\n\t\t\t\t\t\t\t\twritePtr += 4;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn viewer;\n\n\t\t}\n\n\t\tfunction uncompressDWA( info ) {\n\n\t\t\tconst inDataView = info.viewer;\n\t\t\tconst inOffset = { value: info.offset.value };\n\t\t\tconst outBuffer = new Uint8Array( info.columns * info.lines * ( info.inputChannels.length * info.type * INT16_SIZE ) );\n\n\t\t\t// Read compression header information\n\t\t\tconst dwaHeader = {\n\n\t\t\t\tversion: parseInt64( inDataView, inOffset ),\n\t\t\t\tunknownUncompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\tunknownCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\tacCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\tdcCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\trleCompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\trleUncompressedSize: parseInt64( inDataView, inOffset ),\n\t\t\t\trleRawSize: parseInt64( inDataView, inOffset ),\n\t\t\t\ttotalAcUncompressedCount: parseInt64( inDataView, inOffset ),\n\t\t\t\ttotalDcUncompressedCount: parseInt64( inDataView, inOffset ),\n\t\t\t\tacCompression: parseInt64( inDataView, inOffset )\n\n\t\t\t};\n\n\t\t\tif ( dwaHeader.version < 2 )\n\t\t\t\tthrow new Error( 'EXRLoader.parse: ' + EXRHeader.compression + ' version ' + dwaHeader.version + ' is unsupported' );\n\n\t\t\t// Read channel ruleset information\n\t\t\tconst channelRules = new Array();\n\t\t\tlet ruleSize = parseUint16( inDataView, inOffset ) - INT16_SIZE;\n\n\t\t\twhile ( ruleSize > 0 ) {\n\n\t\t\t\tconst name = parseNullTerminatedString( inDataView.buffer, inOffset );\n\t\t\t\tconst value = parseUint8( inDataView, inOffset );\n\t\t\t\tconst compression = ( value >> 2 ) & 3;\n\t\t\t\tconst csc = ( value >> 4 ) - 1;\n\t\t\t\tconst index = new Int8Array( [ csc ] )[ 0 ];\n\t\t\t\tconst type = parseUint8( inDataView, inOffset );\n\n\t\t\t\tchannelRules.push( {\n\t\t\t\t\tname: name,\n\t\t\t\t\tindex: index,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tcompression: compression,\n\t\t\t\t} );\n\n\t\t\t\truleSize -= name.length + 3;\n\n\t\t\t}\n\n\t\t\t// Classify channels\n\t\t\tconst channels = EXRHeader.channels;\n\t\t\tconst channelData = new Array( info.inputChannels.length );\n\n\t\t\tfor ( let i = 0; i < info.inputChannels.length; ++ i ) {\n\n\t\t\t\tconst cd = channelData[ i ] = {};\n\t\t\t\tconst channel = channels[ i ];\n\n\t\t\t\tcd.name = channel.name;\n\t\t\t\tcd.compression = UNKNOWN;\n\t\t\t\tcd.decoded = false;\n\t\t\t\tcd.type = channel.pixelType;\n\t\t\t\tcd.pLinear = channel.pLinear;\n\t\t\t\tcd.width = info.columns;\n\t\t\t\tcd.height = info.lines;\n\n\t\t\t}\n\n\t\t\tconst cscSet = {\n\t\t\t\tidx: new Array( 3 )\n\t\t\t};\n\n\t\t\tfor ( let offset = 0; offset < info.inputChannels.length; ++ offset ) {\n\n\t\t\t\tconst cd = channelData[ offset ];\n\n\t\t\t\tfor ( let i = 0; i < channelRules.length; ++ i ) {\n\n\t\t\t\t\tconst rule = channelRules[ i ];\n\n\t\t\t\t\tif ( cd.name == rule.name ) {\n\n\t\t\t\t\t\tcd.compression = rule.compression;\n\n\t\t\t\t\t\tif ( rule.index >= 0 ) {\n\n\t\t\t\t\t\t\tcscSet.idx[ rule.index ] = offset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcd.offset = offset;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlet acBuffer, dcBuffer, rleBuffer;\n\n\t\t\t// Read DCT - AC component data\n\t\t\tif ( dwaHeader.acCompressedSize > 0 ) {\n\n\t\t\t\tswitch ( dwaHeader.acCompression ) {\n\n\t\t\t\t\tcase STATIC_HUFFMAN:\n\n\t\t\t\t\t\tacBuffer = new Uint16Array( dwaHeader.totalAcUncompressedCount );\n\t\t\t\t\t\thufUncompress( info.array, inDataView, inOffset, dwaHeader.acCompressedSize, acBuffer, dwaHeader.totalAcUncompressedCount );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase DEFLATE:\n\n\t\t\t\t\t\tconst compressed = info.array.slice( inOffset.value, inOffset.value + dwaHeader.totalAcUncompressedCount );\n\t\t\t\t\t\tconst data = fflate.unzlibSync( compressed );\n\t\t\t\t\t\tacBuffer = new Uint16Array( data.buffer );\n\t\t\t\t\t\tinOffset.value += dwaHeader.totalAcUncompressedCount;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\t// Read DCT - DC component data\n\t\t\tif ( dwaHeader.dcCompressedSize > 0 ) {\n\n\t\t\t\tconst zlibInfo = {\n\t\t\t\t\tarray: info.array,\n\t\t\t\t\toffset: inOffset,\n\t\t\t\t\tsize: dwaHeader.dcCompressedSize\n\t\t\t\t};\n\t\t\t\tdcBuffer = new Uint16Array( uncompressZIP( zlibInfo ).buffer );\n\t\t\t\tinOffset.value += dwaHeader.dcCompressedSize;\n\n\t\t\t}\n\n\t\t\t// Read RLE compressed data\n\t\t\tif ( dwaHeader.rleRawSize > 0 ) {\n\n\t\t\t\tconst compressed = info.array.slice( inOffset.value, inOffset.value + dwaHeader.rleCompressedSize );\n\t\t\t\tconst data = fflate.unzlibSync( compressed );\n\t\t\t\trleBuffer = decodeRunLength( data.buffer );\n\n\t\t\t\tinOffset.value += dwaHeader.rleCompressedSize;\n\n\t\t\t}\n\n\t\t\t// Prepare outbuffer data offset\n\t\t\tlet outBufferEnd = 0;\n\t\t\tconst rowOffsets = new Array( channelData.length );\n\t\t\tfor ( let i = 0; i < rowOffsets.length; ++ i ) {\n\n\t\t\t\trowOffsets[ i ] = new Array();\n\n\t\t\t}\n\n\t\t\tfor ( let y = 0; y < info.lines; ++ y ) {\n\n\t\t\t\tfor ( let chan = 0; chan < channelData.length; ++ chan ) {\n\n\t\t\t\t\trowOffsets[ chan ].push( outBufferEnd );\n\t\t\t\t\toutBufferEnd += channelData[ chan ].width * info.type * INT16_SIZE;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Lossy DCT decode RGB channels\n\t\t\tlossyDctDecode( cscSet, rowOffsets, channelData, acBuffer, dcBuffer, outBuffer );\n\n\t\t\t// Decode other channels\n\t\t\tfor ( let i = 0; i < channelData.length; ++ i ) {\n\n\t\t\t\tconst cd = channelData[ i ];\n\n\t\t\t\tif ( cd.decoded ) continue;\n\n\t\t\t\tswitch ( cd.compression ) {\n\n\t\t\t\t\tcase RLE:\n\n\t\t\t\t\t\tlet row = 0;\n\t\t\t\t\t\tlet rleOffset = 0;\n\n\t\t\t\t\t\tfor ( let y = 0; y < info.lines; ++ y ) {\n\n\t\t\t\t\t\t\tlet rowOffsetBytes = rowOffsets[ i ][ row ];\n\n\t\t\t\t\t\t\tfor ( let x = 0; x < cd.width; ++ x ) {\n\n\t\t\t\t\t\t\t\tfor ( let byte = 0; byte < INT16_SIZE * cd.type; ++ byte ) {\n\n\t\t\t\t\t\t\t\t\toutBuffer[ rowOffsetBytes ++ ] = rleBuffer[ rleOffset + byte * cd.width * cd.height ];\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\trleOffset ++;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trow ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase LOSSY_DCT: // skip\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error( 'EXRLoader.parse: unsupported channel compression' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new DataView( outBuffer.buffer );\n\n\t\t}\n\n\t\tfunction parseNullTerminatedString( buffer, offset ) {\n\n\t\t\tconst uintBuffer = new Uint8Array( buffer );\n\t\t\tlet endOffset = 0;\n\n\t\t\twhile ( uintBuffer[ offset.value + endOffset ] != 0 ) {\n\n\t\t\t\tendOffset += 1;\n\n\t\t\t}\n\n\t\t\tconst stringValue = new TextDecoder().decode(\n\t\t\t\tuintBuffer.slice( offset.value, offset.value + endOffset )\n\t\t\t);\n\n\t\t\toffset.value = offset.value + endOffset + 1;\n\n\t\t\treturn stringValue;\n\n\t\t}\n\n\t\tfunction parseFixedLengthString( buffer, offset, size ) {\n\n\t\t\tconst stringValue = new TextDecoder().decode(\n\t\t\t\tnew Uint8Array( buffer ).slice( offset.value, offset.value + size )\n\t\t\t);\n\n\t\t\toffset.value = offset.value + size;\n\n\t\t\treturn stringValue;\n\n\t\t}\n\n\t\tfunction parseRational( dataView, offset ) {\n\n\t\t\tconst x = parseInt32( dataView, offset );\n\t\t\tconst y = parseUint32( dataView, offset );\n\n\t\t\treturn [ x, y ];\n\n\t\t}\n\n\t\tfunction parseTimecode( dataView, offset ) {\n\n\t\t\tconst x = parseUint32( dataView, offset );\n\t\t\tconst y = parseUint32( dataView, offset );\n\n\t\t\treturn [ x, y ];\n\n\t\t}\n\n\t\tfunction parseInt32( dataView, offset ) {\n\n\t\t\tconst Int32 = dataView.getInt32( offset.value, true );\n\n\t\t\toffset.value = offset.value + INT32_SIZE;\n\n\t\t\treturn Int32;\n\n\t\t}\n\n\t\tfunction parseUint32( dataView, offset ) {\n\n\t\t\tconst Uint32 = dataView.getUint32( offset.value, true );\n\n\t\t\toffset.value = offset.value + INT32_SIZE;\n\n\t\t\treturn Uint32;\n\n\t\t}\n\n\t\tfunction parseUint8Array( uInt8Array, offset ) {\n\n\t\t\tconst Uint8 = uInt8Array[ offset.value ];\n\n\t\t\toffset.value = offset.value + INT8_SIZE;\n\n\t\t\treturn Uint8;\n\n\t\t}\n\n\t\tfunction parseUint8( dataView, offset ) {\n\n\t\t\tconst Uint8 = dataView.getUint8( offset.value );\n\n\t\t\toffset.value = offset.value + INT8_SIZE;\n\n\t\t\treturn Uint8;\n\n\t\t}\n\n\t\tconst parseInt64 = function ( dataView, offset ) {\n\n\t\t\tlet int;\n\n\t\t\tif ( 'getBigInt64' in DataView.prototype ) {\n\n\t\t\t\tint = Number( dataView.getBigInt64( offset.value, true ) );\n\n\t\t\t} else {\n\n\t\t\t\tint = dataView.getUint32( offset.value + 4, true ) + Number( dataView.getUint32( offset.value, true ) << 32 );\n\n\t\t\t}\n\n\t\t\toffset.value += ULONG_SIZE;\n\n\t\t\treturn int;\n\n\t\t};\n\n\t\tfunction parseFloat32( dataView, offset ) {\n\n\t\t\tconst float = dataView.getFloat32( offset.value, true );\n\n\t\t\toffset.value += FLOAT32_SIZE;\n\n\t\t\treturn float;\n\n\t\t}\n\n\t\tfunction decodeFloat32( dataView, offset ) {\n\n\t\t\treturn DataUtils.toHalfFloat( parseFloat32( dataView, offset ) );\n\n\t\t}\n\n\t\t// https://stackoverflow.com/questions/5678432/decompressing-half-precision-floats-in-javascript\n\t\tfunction decodeFloat16( binary ) {\n\n\t\t\tconst exponent = ( binary & 0x7C00 ) >> 10,\n\t\t\t\tfraction = binary & 0x03FF;\n\n\t\t\treturn ( binary >> 15 ? - 1 : 1 ) * (\n\t\t\t\texponent ?\n\t\t\t\t\t(\n\t\t\t\t\t\texponent === 0x1F ?\n\t\t\t\t\t\t\tfraction ? NaN : Infinity :\n\t\t\t\t\t\t\tMath.pow( 2, exponent - 15 ) * ( 1 + fraction / 0x400 )\n\t\t\t\t\t) :\n\t\t\t\t\t6.103515625e-5 * ( fraction / 0x400 )\n\t\t\t);\n\n\t\t}\n\n\t\tfunction parseUint16( dataView, offset ) {\n\n\t\t\tconst Uint16 = dataView.getUint16( offset.value, true );\n\n\t\t\toffset.value += INT16_SIZE;\n\n\t\t\treturn Uint16;\n\n\t\t}\n\n\t\tfunction parseFloat16( buffer, offset ) {\n\n\t\t\treturn decodeFloat16( parseUint16( buffer, offset ) );\n\n\t\t}\n\n\t\tfunction parseChlist( dataView, buffer, offset, size ) {\n\n\t\t\tconst startOffset = offset.value;\n\t\t\tconst channels = [];\n\n\t\t\twhile ( offset.value < ( startOffset + size - 1 ) ) {\n\n\t\t\t\tconst name = parseNullTerminatedString( buffer, offset );\n\t\t\t\tconst pixelType = parseInt32( dataView, offset );\n\t\t\t\tconst pLinear = parseUint8( dataView, offset );\n\t\t\t\toffset.value += 3; // reserved, three chars\n\t\t\t\tconst xSampling = parseInt32( dataView, offset );\n\t\t\t\tconst ySampling = parseInt32( dataView, offset );\n\n\t\t\t\tchannels.push( {\n\t\t\t\t\tname: name,\n\t\t\t\t\tpixelType: pixelType,\n\t\t\t\t\tpLinear: pLinear,\n\t\t\t\t\txSampling: xSampling,\n\t\t\t\t\tySampling: ySampling\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\toffset.value += 1;\n\n\t\t\treturn channels;\n\n\t\t}\n\n\t\tfunction parseChromaticities( dataView, offset ) {\n\n\t\t\tconst redX = parseFloat32( dataView, offset );\n\t\t\tconst redY = parseFloat32( dataView, offset );\n\t\t\tconst greenX = parseFloat32( dataView, offset );\n\t\t\tconst greenY = parseFloat32( dataView, offset );\n\t\t\tconst blueX = parseFloat32( dataView, offset );\n\t\t\tconst blueY = parseFloat32( dataView, offset );\n\t\t\tconst whiteX = parseFloat32( dataView, offset );\n\t\t\tconst whiteY = parseFloat32( dataView, offset );\n\n\t\t\treturn { redX: redX, redY: redY, greenX: greenX, greenY: greenY, blueX: blueX, blueY: blueY, whiteX: whiteX, whiteY: whiteY };\n\n\t\t}\n\n\t\tfunction parseCompression( dataView, offset ) {\n\n\t\t\tconst compressionCodes = [\n\t\t\t\t'NO_COMPRESSION',\n\t\t\t\t'RLE_COMPRESSION',\n\t\t\t\t'ZIPS_COMPRESSION',\n\t\t\t\t'ZIP_COMPRESSION',\n\t\t\t\t'PIZ_COMPRESSION',\n\t\t\t\t'PXR24_COMPRESSION',\n\t\t\t\t'B44_COMPRESSION',\n\t\t\t\t'B44A_COMPRESSION',\n\t\t\t\t'DWAA_COMPRESSION',\n\t\t\t\t'DWAB_COMPRESSION'\n\t\t\t];\n\n\t\t\tconst compression = parseUint8( dataView, offset );\n\n\t\t\treturn compressionCodes[ compression ];\n\n\t\t}\n\n\t\tfunction parseBox2i( dataView, offset ) {\n\n\t\t\tconst xMin = parseInt32( dataView, offset );\n\t\t\tconst yMin = parseInt32( dataView, offset );\n\t\t\tconst xMax = parseInt32( dataView, offset );\n\t\t\tconst yMax = parseInt32( dataView, offset );\n\n\t\t\treturn { xMin: xMin, yMin: yMin, xMax: xMax, yMax: yMax };\n\n\t\t}\n\n\t\tfunction parseLineOrder( dataView, offset ) {\n\n\t\t\tconst lineOrders = [\n\t\t\t\t'INCREASING_Y',\n\t\t\t\t'DECREASING_Y',\n\t\t\t\t'RANDOM_Y',\n\t\t\t];\n\n\t\t\tconst lineOrder = parseUint8( dataView, offset );\n\n\t\t\treturn lineOrders[ lineOrder ];\n\n\t\t}\n\n\t\tfunction parseEnvmap( dataView, offset ) {\n\n\t\t\tconst envmaps = [\n\t\t\t\t'ENVMAP_LATLONG',\n\t\t\t\t'ENVMAP_CUBE'\n\t\t\t];\n\n\t\t\tconst envmap = parseUint8( dataView, offset );\n\n\t\t\treturn envmaps[ envmap ];\n\n\t\t}\n\n\t\tfunction parseTiledesc( dataView, offset ) {\n\n\t\t\tconst levelModes = [\n\t\t\t\t'ONE_LEVEL',\n\t\t\t\t'MIPMAP_LEVELS',\n\t\t\t\t'RIPMAP_LEVELS',\n\t\t\t];\n\n\t\t\tconst roundingModes = [\n\t\t\t\t'ROUND_DOWN',\n\t\t\t\t'ROUND_UP',\n\t\t\t];\n\n\t\t\tconst xSize = parseUint32( dataView, offset );\n\t\t\tconst ySize = parseUint32( dataView, offset );\n\t\t\tconst modes = parseUint8( dataView, offset );\n\n\t\t\treturn {\n\t\t\t\txSize: xSize,\n\t\t\t\tySize: ySize,\n\t\t\t\tlevelMode: levelModes[ modes & 0xf ],\n\t\t\t\troundingMode: roundingModes[ modes >> 4 ]\n\t\t\t};\n\n\t\t}\n\n\t\tfunction parseV2f( dataView, offset ) {\n\n\t\t\tconst x = parseFloat32( dataView, offset );\n\t\t\tconst y = parseFloat32( dataView, offset );\n\n\t\t\treturn [ x, y ];\n\n\t\t}\n\n\t\tfunction parseV3f( dataView, offset ) {\n\n\t\t\tconst x = parseFloat32( dataView, offset );\n\t\t\tconst y = parseFloat32( dataView, offset );\n\t\t\tconst z = parseFloat32( dataView, offset );\n\n\t\t\treturn [ x, y, z ];\n\n\t\t}\n\n\t\tfunction parseValue( dataView, buffer, offset, type, size ) {\n\n\t\t\tif ( type === 'string' || type === 'stringvector' || type === 'iccProfile' ) {\n\n\t\t\t\treturn parseFixedLengthString( buffer, offset, size );\n\n\t\t\t} else if ( type === 'chlist' ) {\n\n\t\t\t\treturn parseChlist( dataView, buffer, offset, size );\n\n\t\t\t} else if ( type === 'chromaticities' ) {\n\n\t\t\t\treturn parseChromaticities( dataView, offset );\n\n\t\t\t} else if ( type === 'compression' ) {\n\n\t\t\t\treturn parseCompression( dataView, offset );\n\n\t\t\t} else if ( type === 'box2i' ) {\n\n\t\t\t\treturn parseBox2i( dataView, offset );\n\n\t\t\t} else if ( type === 'envmap' ) {\n\n\t\t\t\treturn parseEnvmap( dataView, offset );\n\n\t\t\t} else if ( type === 'tiledesc' ) {\n\n\t\t\t\treturn parseTiledesc( dataView, offset );\n\n\t\t\t} else if ( type === 'lineOrder' ) {\n\n\t\t\t\treturn parseLineOrder( dataView, offset );\n\n\t\t\t} else if ( type === 'float' ) {\n\n\t\t\t\treturn parseFloat32( dataView, offset );\n\n\t\t\t} else if ( type === 'v2f' ) {\n\n\t\t\t\treturn parseV2f( dataView, offset );\n\n\t\t\t} else if ( type === 'v3f' ) {\n\n\t\t\t\treturn parseV3f( dataView, offset );\n\n\t\t\t} else if ( type === 'int' ) {\n\n\t\t\t\treturn parseInt32( dataView, offset );\n\n\t\t\t} else if ( type === 'rational' ) {\n\n\t\t\t\treturn parseRational( dataView, offset );\n\n\t\t\t} else if ( type === 'timecode' ) {\n\n\t\t\t\treturn parseTimecode( dataView, offset );\n\n\t\t\t} else if ( type === 'preview' ) {\n\n\t\t\t\toffset.value += size;\n\t\t\t\treturn 'skipped';\n\n\t\t\t} else {\n\n\t\t\t\toffset.value += size;\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction roundLog2( x, mode ) {\n\n\t\t\tconst log2 = Math.log2( x );\n\t\t\treturn mode == 'ROUND_DOWN' ? Math.floor( log2 ) : Math.ceil( log2 );\n\n\t\t}\n\n\t\tfunction calculateTileLevels( tiledesc, w, h ) {\n\n\t\t\tlet num = 0;\n\n\t\t\tswitch ( tiledesc.levelMode ) {\n\n\t\t\t\tcase 'ONE_LEVEL':\n\t\t\t\t\tnum = 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'MIPMAP_LEVELS':\n\t\t\t\t\tnum = roundLog2( Math.max( w, h ), tiledesc.roundingMode ) + 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RIPMAP_LEVELS':\n\t\t\t\t\tthrow new Error( 'THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.' );\n\n\t\t\t}\n\n\t\t\treturn num;\n\n\t\t}\n\n\t\tfunction calculateTiles( count, dataSize, size, roundingMode ) {\n\n\t\t\tconst tiles = new Array( count );\n\n\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\tconst b = ( 1 << i );\n\t\t\t\tlet s = ( dataSize / b ) | 0;\n\n\t\t\t\tif ( roundingMode == 'ROUND_UP' && s * b < dataSize ) s += 1;\n\n\t\t\t\tconst l = Math.max( s, 1 );\n\n\t\t\t\ttiles[ i ] = ( ( l + size - 1 ) / size ) | 0;\n\n\t\t\t}\n\n\t\t\treturn tiles;\n\n\t\t}\n\n\t\tfunction parseTiles() {\n\n\t\t\tconst EXRDecoder = this;\n\t\t\tconst offset = EXRDecoder.offset;\n\t\t\tconst tmpOffset = { value: 0 };\n\n\t\t\tfor ( let tile = 0; tile < EXRDecoder.tileCount; tile ++ ) {\n\n\t\t\t\tconst tileX = parseInt32( EXRDecoder.viewer, offset );\n\t\t\t\tconst tileY = parseInt32( EXRDecoder.viewer, offset );\n\t\t\t\toffset.value += 8; // skip levels - only parsing top-level\n\t\t\t\tEXRDecoder.size = parseUint32( EXRDecoder.viewer, offset );\n\n\t\t\t\tconst startX = tileX * EXRDecoder.blockWidth;\n\t\t\t\tconst startY = tileY * EXRDecoder.blockHeight;\n\t\t\t\tEXRDecoder.columns = ( startX + EXRDecoder.blockWidth > EXRDecoder.width ) ? EXRDecoder.width - startX : EXRDecoder.blockWidth;\n\t\t\t\tEXRDecoder.lines = ( startY + EXRDecoder.blockHeight > EXRDecoder.height ) ? EXRDecoder.height - startY : EXRDecoder.blockHeight;\n\n\t\t\t\tconst bytesBlockLine = EXRDecoder.columns * EXRDecoder.totalBytes;\n\t\t\t\tconst isCompressed = EXRDecoder.size < EXRDecoder.lines * bytesBlockLine;\n\t\t\t\tconst viewer = isCompressed ? EXRDecoder.uncompress( EXRDecoder ) : uncompressRAW( EXRDecoder );\n\n\t\t\t\toffset.value += EXRDecoder.size;\n\n\t\t\t\tfor ( let line = 0; line < EXRDecoder.lines; line ++ ) {\n\n\t\t\t\t\tconst lineOffset = line * EXRDecoder.columns * EXRDecoder.totalBytes;\n\n\t\t\t\t\tfor ( let channelID = 0; channelID < EXRDecoder.inputChannels.length; channelID ++ ) {\n\n\t\t\t\t\t\tconst name = EXRHeader.channels[ channelID ].name;\n\t\t\t\t\t\tconst lOff = EXRDecoder.channelByteOffsets[ name ] * EXRDecoder.columns;\n\t\t\t\t\t\tconst cOff = EXRDecoder.decodeChannels[ name ];\n\n\t\t\t\t\t\tif ( cOff === undefined ) continue;\n\n\t\t\t\t\t\ttmpOffset.value = lineOffset + lOff;\n\t\t\t\t\t\tconst outLineOffset = ( EXRDecoder.height - ( 1 + startY + line ) ) * EXRDecoder.outLineWidth;\n\n\t\t\t\t\t\tfor ( let x = 0; x < EXRDecoder.columns; x ++ ) {\n\n\t\t\t\t\t\t\tconst outIndex = outLineOffset + ( x + startX ) * EXRDecoder.outputChannels + cOff;\n\t\t\t\t\t\t\tEXRDecoder.byteArray[ outIndex ] = EXRDecoder.getter( viewer, tmpOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseScanline() {\n\n\t\t\tconst EXRDecoder = this;\n\t\t\tconst offset = EXRDecoder.offset;\n\t\t\tconst tmpOffset = { value: 0 };\n\n\t\t\tfor ( let scanlineBlockIdx = 0; scanlineBlockIdx < EXRDecoder.height / EXRDecoder.blockHeight; scanlineBlockIdx ++ ) {\n\n\t\t\t\tconst line = parseInt32( EXRDecoder.viewer, offset ) - EXRHeader.dataWindow.yMin; // line_no\n\t\t\t\tEXRDecoder.size = parseUint32( EXRDecoder.viewer, offset ); // data_len\n\t\t\t\tEXRDecoder.lines = ( ( line + EXRDecoder.blockHeight > EXRDecoder.height ) ? ( EXRDecoder.height - line ) : EXRDecoder.blockHeight );\n\n\t\t\t\tconst bytesPerLine = EXRDecoder.columns * EXRDecoder.totalBytes;\n\t\t\t\tconst isCompressed = EXRDecoder.size < EXRDecoder.lines * bytesPerLine;\n\t\t\t\tconst viewer = isCompressed ? EXRDecoder.uncompress( EXRDecoder ) : uncompressRAW( EXRDecoder );\n\n\t\t\t\toffset.value += EXRDecoder.size;\n\n\t\t\t\tfor ( let line_y = 0; line_y < EXRDecoder.blockHeight; line_y ++ ) {\n\n\t\t\t\t\tconst scan_y = scanlineBlockIdx * EXRDecoder.blockHeight;\n\t\t\t\t\tconst true_y = line_y + EXRDecoder.scanOrder( scan_y );\n\t\t\t\t\tif ( true_y >= EXRDecoder.height ) continue;\n\n\t\t\t\t\tconst lineOffset = line_y * bytesPerLine;\n\t\t\t\t\tconst outLineOffset = ( EXRDecoder.height - 1 - true_y ) * EXRDecoder.outLineWidth;\n\n\t\t\t\t\tfor ( let channelID = 0; channelID < EXRDecoder.inputChannels.length; channelID ++ ) {\n\n\t\t\t\t\t\tconst name = EXRHeader.channels[ channelID ].name;\n\t\t\t\t\t\tconst lOff = EXRDecoder.channelByteOffsets[ name ] * EXRDecoder.columns;\n\t\t\t\t\t\tconst cOff = EXRDecoder.decodeChannels[ name ];\n\n\t\t\t\t\t\tif ( cOff === undefined ) continue;\n\n\t\t\t\t\t\ttmpOffset.value = lineOffset + lOff;\n\n\t\t\t\t\t\tfor ( let x = 0; x < EXRDecoder.columns; x ++ ) {\n\n\t\t\t\t\t\t\tconst outIndex = outLineOffset + x * EXRDecoder.outputChannels + cOff;\n\t\t\t\t\t\t\tEXRDecoder.byteArray[ outIndex ] = EXRDecoder.getter( viewer, tmpOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseHeader( dataView, buffer, offset ) {\n\n\t\t\tconst EXRHeader = {};\n\n\t\t\tif ( dataView.getUint32( 0, true ) != 20000630 ) { // magic\n\n\t\t\t\tthrow new Error( 'THREE.EXRLoader: Provided file doesn\\'t appear to be in OpenEXR format.' );\n\n\t\t\t}\n\n\t\t\tEXRHeader.version = dataView.getUint8( 4 );\n\n\t\t\tconst spec = dataView.getUint8( 5 ); // fullMask\n\n\t\t\tEXRHeader.spec = {\n\t\t\t\tsingleTile: !! ( spec & 2 ),\n\t\t\t\tlongName: !! ( spec & 4 ),\n\t\t\t\tdeepFormat: !! ( spec & 8 ),\n\t\t\t\tmultiPart: !! ( spec & 16 ),\n\t\t\t};\n\n\t\t\t// start of header\n\n\t\t\toffset.value = 8; // start at 8 - after pre-amble\n\n\t\t\tlet keepReading = true;\n\n\t\t\twhile ( keepReading ) {\n\n\t\t\t\tconst attributeName = parseNullTerminatedString( buffer, offset );\n\n\t\t\t\tif ( attributeName == 0 ) {\n\n\t\t\t\t\tkeepReading = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst attributeType = parseNullTerminatedString( buffer, offset );\n\t\t\t\t\tconst attributeSize = parseUint32( dataView, offset );\n\t\t\t\t\tconst attributeValue = parseValue( dataView, buffer, offset, attributeType, attributeSize );\n\n\t\t\t\t\tif ( attributeValue === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( `THREE.EXRLoader: Skipped unknown header attribute type \\'${attributeType}\\'.` );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tEXRHeader[ attributeName ] = attributeValue;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( spec & ~ 0x06 ) != 0 ) { // unsupported deep-image, multi-part\n\n\t\t\t\tconsole.error( 'THREE.EXRHeader:', EXRHeader );\n\t\t\t\tthrow new Error( 'THREE.EXRLoader: Provided file is currently unsupported.' );\n\n\t\t\t}\n\n\t\t\treturn EXRHeader;\n\n\t\t}\n\n\t\tfunction setupDecoder( EXRHeader, dataView, uInt8Array, offset, outputType ) {\n\n\t\t\tconst EXRDecoder = {\n\t\t\t\tsize: 0,\n\t\t\t\tviewer: dataView,\n\t\t\t\tarray: uInt8Array,\n\t\t\t\toffset: offset,\n\t\t\t\twidth: EXRHeader.dataWindow.xMax - EXRHeader.dataWindow.xMin + 1,\n\t\t\t\theight: EXRHeader.dataWindow.yMax - EXRHeader.dataWindow.yMin + 1,\n\t\t\t\tinputChannels: EXRHeader.channels,\n\t\t\t\tchannelByteOffsets: {},\n\t\t\t\tscanOrder: null,\n\t\t\t\ttotalBytes: null,\n\t\t\t\tcolumns: null,\n\t\t\t\tlines: null,\n\t\t\t\ttype: null,\n\t\t\t\tuncompress: null,\n\t\t\t\tgetter: null,\n\t\t\t\tformat: null,\n\t\t\t\tcolorSpace: LinearSRGBColorSpace,\n\t\t\t};\n\n\t\t\tswitch ( EXRHeader.compression ) {\n\n\t\t\t\tcase 'NO_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 1;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressRAW;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RLE_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 1;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressRLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZIPS_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 1;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressZIP;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZIP_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 16;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressZIP;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PIZ_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 32;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressPIZ;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PXR24_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 16;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressPXR;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DWAA_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 32;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressDWA;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DWAB_COMPRESSION':\n\t\t\t\t\tEXRDecoder.blockHeight = 256;\n\t\t\t\t\tEXRDecoder.uncompress = uncompressDWA;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'EXRLoader.parse: ' + EXRHeader.compression + ' is unsupported' );\n\n\t\t\t}\n\n\t\t\tconst channels = {};\n\t\t\tfor ( const channel of EXRHeader.channels ) {\n\n\t\t\t\tswitch ( channel.name ) {\n\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\tcase 'R':\n\t\t\t\t\tcase 'G':\n\t\t\t\t\tcase 'B':\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tchannels[ channel.name ] = true;\n\t\t\t\t\t\tEXRDecoder.type = channel.pixelType;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// RGB images will be converted to RGBA format, preventing software emulation in select devices.\n\t\t\tlet fillAlpha = false;\n\n\t\t\tif ( channels.R && channels.G && channels.B ) {\n\n\t\t\t\tfillAlpha = ! channels.A;\n\t\t\t\tEXRDecoder.outputChannels = 4;\n\t\t\t\tEXRDecoder.decodeChannels = { R: 0, G: 1, B: 2, A: 3 };\n\n\t\t\t} else if ( channels.Y ) {\n\n\t\t\t\tEXRDecoder.outputChannels = 1;\n\t\t\t\tEXRDecoder.decodeChannels = { Y: 0 };\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'EXRLoader.parse: file contains unsupported data channels.' );\n\n\t\t\t}\n\n\t\t\tif ( EXRDecoder.type == 1 ) {\n\n\t\t\t\t// half\n\t\t\t\tswitch ( outputType ) {\n\n\t\t\t\t\tcase FloatType:\n\t\t\t\t\t\tEXRDecoder.getter = parseFloat16;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\t\t\t\t\t\tEXRDecoder.getter = parseUint16;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( EXRDecoder.type == 2 ) {\n\n\t\t\t\t// float\n\t\t\t\tswitch ( outputType ) {\n\n\t\t\t\t\tcase FloatType:\n\t\t\t\t\t\tEXRDecoder.getter = parseFloat32;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\t\t\t\t\t\tEXRDecoder.getter = decodeFloat32;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'EXRLoader.parse: unsupported pixelType ' + EXRDecoder.type + ' for ' + EXRHeader.compression + '.' );\n\n\t\t\t}\n\n\t\t\tEXRDecoder.columns = EXRDecoder.width;\n\t\t\tconst size = EXRDecoder.width * EXRDecoder.height * EXRDecoder.outputChannels;\n\n\t\t\tswitch ( outputType ) {\n\n\t\t\t\tcase FloatType:\n\t\t\t\t\tEXRDecoder.byteArray = new Float32Array( size );\n\n\t\t\t\t\t// Fill initially with 1s for the alpha value if the texture is not RGBA, RGB values will be overwritten\n\t\t\t\t\tif ( fillAlpha )\n\t\t\t\t\t\tEXRDecoder.byteArray.fill( 1, 0, size );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\t\t\t\t\tEXRDecoder.byteArray = new Uint16Array( size );\n\n\t\t\t\t\tif ( fillAlpha )\n\t\t\t\t\t\tEXRDecoder.byteArray.fill( 0x3C00, 0, size ); // Uint16Array holds half float data, 0x3C00 is 1\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error( 'THREE.EXRLoader: unsupported type: ', outputType );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlet byteOffset = 0;\n\t\t\tfor ( const channel of EXRHeader.channels ) {\n\n\t\t\t\tif ( EXRDecoder.decodeChannels[ channel.name ] !== undefined ) {\n\n\t\t\t\t\tEXRDecoder.channelByteOffsets[ channel.name ] = byteOffset;\n\n\t\t\t\t}\n\n\t\t\t\tbyteOffset += channel.pixelType * 2;\n\n\t\t\t}\n\n\t\t\tEXRDecoder.totalBytes = byteOffset;\n\t\t\tEXRDecoder.outLineWidth = EXRDecoder.width * EXRDecoder.outputChannels;\n\n\t\t\tif ( EXRHeader.lineOrder === 'INCREASING_Y' ) {\n\n\t\t\t\tEXRDecoder.scanOrder = ( y ) => y;\n\n\t\t\t} else {\n\n\t\t\t\tEXRDecoder.scanOrder = ( y ) => EXRDecoder.height - 1 - y;\n\n\t\t\t}\n\n\t\t\tif ( EXRDecoder.outputChannels == 4 ) {\n\n\t\t\t\tEXRDecoder.format = RGBAFormat;\n\t\t\t\tEXRDecoder.colorSpace = LinearSRGBColorSpace;\n\n\t\t\t} else {\n\n\t\t\t\tEXRDecoder.format = RedFormat;\n\t\t\t\tEXRDecoder.colorSpace = NoColorSpace;\n\n\t\t\t}\n\n\t\t\tif ( EXRHeader.spec.singleTile ) {\n\n\t\t\t\tEXRDecoder.blockHeight = EXRHeader.tiles.ySize;\n\t\t\t\tEXRDecoder.blockWidth = EXRHeader.tiles.xSize;\n\n\t\t\t\tconst numXLevels = calculateTileLevels( EXRHeader.tiles, EXRDecoder.width, EXRDecoder.height );\n\t\t\t\t// const numYLevels = calculateTileLevels( EXRHeader.tiles, EXRDecoder.width, EXRDecoder.height );\n\n\t\t\t\tconst numXTiles = calculateTiles( numXLevels, EXRDecoder.width, EXRHeader.tiles.xSize, EXRHeader.tiles.roundingMode );\n\t\t\t\tconst numYTiles = calculateTiles( numXLevels, EXRDecoder.height, EXRHeader.tiles.ySize, EXRHeader.tiles.roundingMode );\n\n\t\t\t\tEXRDecoder.tileCount = numXTiles[ 0 ] * numYTiles[ 0 ];\n\n\t\t\t\tfor ( let l = 0; l < numXLevels; l ++ )\n\t\t\t\t\tfor ( let y = 0; y < numYTiles[ l ]; y ++ )\n\t\t\t\t\t\tfor ( let x = 0; x < numXTiles[ l ]; x ++ )\n\t\t\t\t\t\t\tparseInt64( dataView, offset ); // tileOffset\n\n\t\t\t\tEXRDecoder.decode = parseTiles.bind( EXRDecoder );\n\n\t\t\t} else {\n\n\t\t\t\tEXRDecoder.blockWidth = EXRDecoder.width;\n\t\t\t\tconst blockCount = Math.ceil( EXRDecoder.height / EXRDecoder.blockHeight );\n\n\t\t\t\tfor ( let i = 0; i < blockCount; i ++ )\n\t\t\t\t\tparseInt64( dataView, offset ); // scanlineOffset\n\n\t\t\t\tEXRDecoder.decode = parseScanline.bind( EXRDecoder );\n\n\t\t\t}\n\n\t\t\treturn EXRDecoder;\n\n\t\t}\n\n\t\t// start parsing file [START]\n\t\tconst offset = { value: 0 };\n\t\tconst bufferDataView = new DataView( buffer );\n\t\tconst uInt8Array = new Uint8Array( buffer );\n\n\t\t// get header information and validate format.\n\t\tconst EXRHeader = parseHeader( bufferDataView, buffer, offset );\n\n\t\t// get input compression information and prepare decoding.\n\t\tconst EXRDecoder = setupDecoder( EXRHeader, bufferDataView, uInt8Array, offset, this.type );\n\n\t\t// parse input data\n\t\tEXRDecoder.decode();\n\n\t\treturn {\n\t\t\theader: EXRHeader,\n\t\t\twidth: EXRDecoder.width,\n\t\t\theight: EXRDecoder.height,\n\t\t\tdata: EXRDecoder.byteArray,\n\t\t\tformat: EXRDecoder.format,\n\t\t\tcolorSpace: EXRDecoder.colorSpace,\n\t\t\ttype: this.type,\n\t\t};\n\n\t}\n\n\tsetDataType( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\ttexture.colorSpace = texData.colorSpace;\n\t\t\ttexture.minFilter = LinearFilter;\n\t\t\ttexture.magFilter = LinearFilter;\n\t\t\ttexture.generateMipmaps = false;\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn super.load( url, onLoadCallback, onProgress, onError );\n\n\t}\n\n}\n\nexport { EXRLoader };\n","import {\n\tColor,\n\tFrontSide,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsLib,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\n/**\n * Work based on :\n * https://github.com/Slayvin: Flat mirror for three.js\n * https://home.adelphi.edu/~stemkoski/ : An implementation of water shader based on the flat mirror\n * http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nclass Water extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.isWater = true;\n\n\t\tconst scope = this;\n\n\t\tconst textureWidth = options.textureWidth !== undefined ? options.textureWidth : 512;\n\t\tconst textureHeight = options.textureHeight !== undefined ? options.textureHeight : 512;\n\n\t\tconst clipBias = options.clipBias !== undefined ? options.clipBias : 0.0;\n\t\tconst alpha = options.alpha !== undefined ? options.alpha : 1.0;\n\t\tconst time = options.time !== undefined ? options.time : 0.0;\n\t\tconst normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n\t\tconst sunDirection = options.sunDirection !== undefined ? options.sunDirection : new Vector3( 0.70707, 0.70707, 0.0 );\n\t\tconst sunColor = new Color( options.sunColor !== undefined ? options.sunColor : 0xffffff );\n\t\tconst waterColor = new Color( options.waterColor !== undefined ? options.waterColor : 0x7F7F7F );\n\t\tconst eye = options.eye !== undefined ? options.eye : new Vector3( 0, 0, 0 );\n\t\tconst distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n\t\tconst side = options.side !== undefined ? options.side : FrontSide;\n\t\tconst fog = options.fog !== undefined ? options.fog : false;\n\n\t\t//\n\n\t\tconst mirrorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst mirrorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\n\t\tconst mirrorCamera = new PerspectiveCamera();\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\tconst mirrorShader = {\n\n\t\t\tname: 'MirrorShader',\n\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib[ 'fog' ],\n\t\t\t\tUniformsLib[ 'lights' ],\n\t\t\t\t{\n\t\t\t\t\t'normalSampler': { value: null },\n\t\t\t\t\t'mirrorSampler': { value: null },\n\t\t\t\t\t'alpha': { value: 1.0 },\n\t\t\t\t\t'time': { value: 0.0 },\n\t\t\t\t\t'size': { value: 1.0 },\n\t\t\t\t\t'distortionScale': { value: 20.0 },\n\t\t\t\t\t'textureMatrix': { value: new Matrix4() },\n\t\t\t\t\t'sunColor': { value: new Color( 0x7F7F7F ) },\n\t\t\t\t\t'sunDirection': { value: new Vector3( 0.70707, 0.70707, 0 ) },\n\t\t\t\t\t'eye': { value: new Vector3() },\n\t\t\t\t\t'waterColor': { value: new Color( 0x555555 ) }\n\t\t\t\t}\n\t\t\t] ),\n\n\t\t\tvertexShader: /* glsl */`\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tworldPosition = mirrorCoord.xyzw;\n\t\t\t\t\tmirrorCoord = textureMatrix * mirrorCoord;\n\t\t\t\t\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t#include <fog_vertex>\n\t\t\t\t#include <shadowmap_vertex>\n\t\t\t}`,\n\n\t\t\tfragmentShader: /* glsl */`\n\t\t\t\tuniform sampler2D mirrorSampler;\n\t\t\t\tuniform float alpha;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform float size;\n\t\t\t\tuniform float distortionScale;\n\t\t\t\tuniform sampler2D normalSampler;\n\t\t\t\tuniform vec3 sunColor;\n\t\t\t\tuniform vec3 sunDirection;\n\t\t\t\tuniform vec3 eye;\n\t\t\t\tuniform vec3 waterColor;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\tvec4 getNoise( vec2 uv ) {\n\t\t\t\t\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n\t\t\t\t\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n\t\t\t\t\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n\t\t\t\t\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n\t\t\t\t\tvec4 noise = texture2D( normalSampler, uv0 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv1 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv2 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv3 );\n\t\t\t\t\treturn noise * 0.5 - 1.0;\n\t\t\t\t}\n\n\t\t\t\tvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n\t\t\t\t\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n\t\t\t\t\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n\t\t\t\t\tspecularColor += pow( direction, shiny ) * sunColor * spec;\n\t\t\t\t\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t\tvec4 noise = getNoise( worldPosition.xz * size );\n\t\t\t\t\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n\t\t\t\t\tvec3 diffuseLight = vec3(0.0);\n\t\t\t\t\tvec3 specularLight = vec3(0.0);\n\n\t\t\t\t\tvec3 worldToEye = eye-worldPosition.xyz;\n\t\t\t\t\tvec3 eyeDirection = normalize( worldToEye );\n\t\t\t\t\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\t\t\t\t\tfloat distance = length(worldToEye);\n\n\t\t\t\t\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n\t\t\t\t\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );\n\n\t\t\t\t\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n\t\t\t\t\tfloat rf0 = 0.3;\n\t\t\t\t\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n\t\t\t\t\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n\t\t\t\t\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\n\t\t\t\t\tvec3 outgoingLight = albedo;\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, alpha );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <colorspace_fragment>\n\t\t\t\t\t#include <fog_fragment>\t\n\t\t\t\t}`\n\n\t\t};\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tname: mirrorShader.name,\n\t\t\tuniforms: UniformsUtils.clone( mirrorShader.uniforms ),\n\t\t\tvertexShader: mirrorShader.vertexShader,\n\t\t\tfragmentShader: mirrorShader.fragmentShader,\n\t\t\tlights: true,\n\t\t\tside: side,\n\t\t\tfog: fog\n\t\t} );\n\n\t\tmaterial.uniforms[ 'mirrorSampler' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\t\tmaterial.uniforms[ 'alpha' ].value = alpha;\n\t\tmaterial.uniforms[ 'time' ].value = time;\n\t\tmaterial.uniforms[ 'normalSampler' ].value = normalSampler;\n\t\tmaterial.uniforms[ 'sunColor' ].value = sunColor;\n\t\tmaterial.uniforms[ 'waterColor' ].value = waterColor;\n\t\tmaterial.uniforms[ 'sunDirection' ].value = sunDirection;\n\t\tmaterial.uniforms[ 'distortionScale' ].value = distortionScale;\n\n\t\tmaterial.uniforms[ 'eye' ].value = eye;\n\n\t\tscope.material = material;\n\n\t\tscope.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\tmirrorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( mirrorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when mirror is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( mirrorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( mirrorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( mirrorWorldPosition );\n\n\t\t\tmirrorCamera.position.copy( view );\n\t\t\tmirrorCamera.up.set( 0, 1, 0 );\n\t\t\tmirrorCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tmirrorCamera.up.reflect( normal );\n\t\t\tmirrorCamera.lookAt( target );\n\n\t\t\tmirrorCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tmirrorCamera.updateMatrixWorld();\n\t\t\tmirrorCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( mirrorCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( mirrorCamera.matrixWorldInverse );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\tmirrorPlane.setFromNormalAndCoplanarPoint( normal, mirrorWorldPosition );\n\t\t\tmirrorPlane.applyMatrix4( mirrorCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( mirrorPlane.normal.x, mirrorPlane.normal.y, mirrorPlane.normal.z, mirrorPlane.constant );\n\n\t\t\tconst projectionMatrix = mirrorCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\teye.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\t// Render\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\tscope.visible = false;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification and recursion\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, mirrorCamera );\n\n\t\t\tscope.visible = true;\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n}\n\nexport { Water };\n","import * as THREE from 'three'\r\n// import * as THREE_GPU from 'three/webgpu'\r\n// 引入gltf模型加载库GLTFLoader.js\r\nimport { GLTF, GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\r\nimport { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\r\n\r\n// import { FirstPersonControls } from 'three/addons/controls/FirstPersonControls.js';\r\nimport { PointerLockControls } from 'three/addons/controls/PointerLockControls.js';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js';\r\n\r\n//解决线宽无法配置\r\nimport { Line2 } from 'three/addons/lines/Line2.js';\r\nimport { LineMaterial } from 'three/addons/lines/LineMaterial.js';\r\nimport { LineGeometry } from 'three/addons/lines/LineGeometry.js';\r\n\r\n// import { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js'\r\n//  引入后处理扩展库\r\nimport { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';\r\n// 引入渲染器通道RenderPass\r\nimport { RenderPass } from 'three/addons/postprocessing/RenderPass.js';\r\n// 引入OutlinePass通道\r\nimport { OutlinePass } from 'three/addons/postprocessing/OutlinePass.js';\r\nimport { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';\r\n// import { OutputPass } from 'three/addons/postprocessing/OutputPass.js';\r\nimport { FXAAShader } from 'three/addons/shaders/FXAAShader.js';\r\n// SMAA抗锯齿通道\r\n// import { SMAAPass } from 'three/addons/postprocessing/SMAAPass.js';\r\n// 引入UnrealBloomPass通道\r\n// import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';\r\n// 伽马校正后处理Shader\r\nimport { GammaCorrectionShader } from 'three/addons/shaders/GammaCorrectionShader.js';\r\nimport { CSS2DRenderer } from 'three/addons/renderers/CSS2DRenderer.js';\r\nimport { CSS3DRenderer, CSS3DObject } from 'three/addons/renderers/CSS3DRenderer.js';\r\nimport RainDrop from '../utils/rainDrop';\r\n\r\nimport Utils from '../utils'\r\nimport MyEventBus from '../utils/eventBus'\r\nimport PercentInterceptor from '../utils/percent-interceptor'\r\n\r\nimport Stats from 'three/examples/jsm/libs/stats.module.js'\r\n//引入动画库\r\nimport { Group, Tween } from '@tweenjs/tween.js'\r\nimport { ManagerBox, MyMixer, MyPostion, StressType, initOptions, TagMap, pointConfig, MyCSS3DObject, importUrlFormat, TagOptions, MyMesh, OrbitControlsOptions } from '../types/common';\r\nimport { MyWater } from '../utils/objects/myWater';\r\nimport { InitWaterOptions, MyWater as MyWater2 } from '../utils/objects/myWater2';\r\nimport { MyWaterCube } from '../utils/objects/waterCube';\r\nimport { WaterShaderParams, WaterCubeShaderParams, WaterShaderParams2 } from '../types/waterShaderParams';\r\nimport { ref, Ref, shallowRef, ShallowRef, watch } from '@vue/reactivity'\r\n\r\n//场外环境之太阳日出日落\r\nimport useSun from './useSun'\r\nimport { EXRLoader } from 'three/examples/jsm/loaders/EXRLoader.js';\r\nimport { Water } from 'three/examples/jsm/Addons.js';\r\n// import { WaterMesh } from 'three/addons/objects/WaterMesh.js';\r\n\r\nconst {\r\n    initSkyLights,\r\n    initSky,\r\n    updateSunPosition\r\n} = await useSun()\r\n\r\nfunction useThree() {\r\n    let renderer: THREE.WebGLRenderer | undefined = new THREE.WebGLRenderer({\r\n        antialias: true,\r\n        alpha: true,\r\n        logarithmicDepthBuffer: true,\r\n        preserveDrawingBuffer: true,\r\n    })  // 渲染器\r\n    let scene: ShallowRef<THREE.Scene | undefined> = shallowRef(new THREE.Scene()) // 场景\r\n    let camera: ShallowRef<THREE.PerspectiveCamera | undefined> = shallowRef()\r\n\r\n    //是否是指针锁定模式\r\n    let isFirstView = ref(false)\r\n    watch(isFirstView, (newVal) => {\r\n        if (orbitControls.value) {\r\n            if (newVal) {\r\n                console.log('isFirstView', newVal, orbitControls.value!.target);\r\n\r\n                disabledOrbitControls(true)\r\n                // camera.value!.lookAt(orbitControls.value!.target)\r\n\r\n                listenerAboutPointerLockControlsClick(true)\r\n            } else {\r\n                disabledOrbitControls(false)\r\n\r\n                listenerAboutPointerLockControlsClick(false)\r\n            }\r\n        }\r\n    })\r\n    // let mergeRule = ref(Function)\r\n    let mergeRule: Function\r\n\r\n\r\n    let orbitControls: ShallowRef<OrbitControls | undefined> = shallowRef()\r\n    let pointerLockControls: ShallowRef<PointerLockControls | undefined> = shallowRef()\r\n\r\n    let clock: THREE.Clock | undefined // 世界时钟\r\n    const raycasterWhiteList = ref([] as String[])   //射线拾取白名单\r\n    let centerInitCameraPosition = [new THREE.Vector3(), new THREE.Vector3()]\r\n\r\n    /**初始化模型后缓存每个模型对应的mixer */\r\n    let mixerMap: Map<string, MyMixer> | undefined = new Map()\r\n    /**自定义渲染器循环执行方法Map */\r\n    let renderMixins: Map<any, Function> | undefined = new Map()\r\n    /**循环渲染中需要自更新的队列 */\r\n    let mixers: ShallowRef<Array<MyMixer> | undefined> = shallowRef([])\r\n\r\n    let animationId = 0\r\n    /**是否开启测距模式 */\r\n    let allowMeasure: Ref<boolean> = ref(false)\r\n    /**是否是自定义的连续线段 */\r\n    let isContinue: Ref<boolean> = ref(false)\r\n    /**测距模式下生成的一系列点或线 */\r\n    const measureGroup: (THREE.Mesh<THREE.SphereGeometry, THREE.MeshBasicMaterial, THREE.Object3DEventMap> | THREE.Line | Line2)[] = []\r\n    /**已标记的点按顺序排列 */\r\n    const points: THREE.Vector3[] = []\r\n    let currentLine: THREE.Line | Line2 | undefined\r\n    let textScale: number = 0.01\r\n    /**防止拖拽事件触发点击事件 */\r\n    let beforeX: number, beforeY: number, afterX: number, afterY: number\r\n    let allowFocusAll = ref(true)\r\n\r\n    const tweenGroup = new Group()\r\n\r\n    /**储存CSS3D对象，主要是为了在循环渲染时让其始终面向相机 */\r\n    const tagMap: TagMap = {\r\n        currentTag: [],\r\n        measure: []\r\n    }\r\n\r\n    //全局事件总线\r\n    const eventBus = new MyEventBus().getEventBus()\r\n\r\n    //==============进度条相关变量===========\r\n    const percentInterceptor = new PercentInterceptor((percent: number) => {\r\n        Utils.slowlyGenerate2(percent, (percent: number) => {\r\n            // console.log('slowlyGenerate2 callback', percent);\r\n            eventBus.publish('loadPercentage', percent)\r\n        })\r\n    })\r\n    const percentMapProxy = percentInterceptor.percentMapProxy\r\n\r\n    const cacheModel = shallowRef([] as THREE.Group<THREE.Object3DEventMap>[] | THREE.Object3D<THREE.Object3DEventMap>[] | undefined)\r\n\r\n    //==========init方法相关变量=============\r\n    let canvasId: string\r\n    let highlightColor: number | string = 0x00be55\r\n    let cameraPosition: MyPostion, cameraTarget: MyPostion\r\n    let envMapIntensity = 1.0   //环境贴图亮度\r\n    let raining: boolean = false    //是否下雨场景\r\n    let showSky: boolean = false\r\n    let showHelper: boolean = false\r\n    let allowClick: boolean = true\r\n    let autoSetCamera: boolean = false   //是否自动设置相机使模型位于视角中心\r\n    let DISTANCE = ref(3)   //相机运动时最后距离目标的单位距离\r\n    let useComposer: boolean\r\n    let backgroundAlpha: number = 1.0\r\n    let containerWidth = 0, containerHeight = 0\r\n    let ambientItensity: number\r\n    let stressType: StressType = StressType.STROKE\r\n    let showBackImage = false\r\n    let useDirectLight = true\r\n    let backgroundImgPath: string\r\n    let environmentIntensity: number\r\n    let orbitControlsOptions: OrbitControlsOptions\r\n    let receiveShadow = true\r\n    let lightPosition: MyPostion | undefined\r\n    let bias: number\r\n    let envMap: THREE.Texture\r\n\r\n    function init(options: initOptions) {\r\n        let gltfUrls: importUrlFormat[] = [], showDefaultDialog = false\r\n        if (options) {\r\n            canvasId = options.canvasId ?? 'three-canvas'\r\n            gltfUrls = options.gltfUrls\r\n            highlightColor = options.highlightColor || 0x00be55\r\n            stressType = options.stressType || StressType.STROKE\r\n            showDefaultDialog = options.showDefaultDialog ?? false\r\n            cameraPosition = options.cameraPosition ?? { x: 100, y: 100, z: 100 }    //相机位置\r\n            cameraTarget = options.cameraTarget ?? { x: 0, y: 0, z: 0 }    //相机目标点\r\n            raining = options.raining || false\r\n            envMapIntensity = options.envMapIntensity || 1.0\r\n            showSky = options.showSky || false\r\n            showBackImage = options.showBackImage || false\r\n            backgroundImgPath = options.backgroundImgPath ?? ''\r\n            environmentIntensity = options.environmentIntensity ?? 1.0\r\n            useDirectLight = options.useDirectLight ?? true\r\n            bias = options.bias ?? -0.0005\r\n            autoSetCamera = options.autoSetCamera || false\r\n            raycasterWhiteList.value = options.raycasterWhiteList || []\r\n            allowClick = options.allowClick ?? true\r\n            useComposer = options.useComposer ?? false\r\n            backgroundAlpha = options.backgroundAlpha ?? 1.0\r\n            isFirstView.value = options.isFirstView ?? false\r\n            containerWidth = options.containerWidth || window.innerWidth\r\n            containerHeight = options.containerHeight || window.innerHeight\r\n            ambientItensity = options.ambientItensity ?? 2\r\n            mergeRule = options.mergeRule || function () { return false }\r\n            allowFocusAll.value = options.allowFocusAll ?? true\r\n            orbitControlsOptions = options.orbitControlsOptions || {}\r\n            receiveShadow = options.receiveShadow ?? true\r\n            lightPosition = options.lightPosition\r\n        }\r\n\r\n        addStyleSheet()\r\n        initRender()\r\n        initManager()\r\n        if (showBackImage) initBackground(false)\r\n        initLight()\r\n        Utils.resetProgress()\r\n        initLoader(gltfUrls, showDefaultDialog)\r\n        initCamera()\r\n        initClock()\r\n        if (showHelper) initHelper()\r\n        if (showStats) initStats()\r\n        initOrbitControls()\r\n        if (useComposer) initComposer()\r\n        if (showSky) initSky(scene.value!)\r\n        if (raining) addRainDrop()\r\n        updateRenderer()\r\n        initEventListener()\r\n    }\r\n    // 初始渲染器\r\n    let initRender = () => {\r\n        //logarithmicDepthBuffer解决缩放过大后模型忽闪忽闪\r\n        // renderer! = new THREE.WebGLRenderer({\r\n        //     antialias: true,\r\n        //     alpha: true,\r\n        //     logarithmicDepthBuffer: true,\r\n        //     preserveDrawingBuffer: true,\r\n        // })\r\n\r\n        renderer!.localClippingEnabled = true\r\n        renderer!.setPixelRatio(window.devicePixelRatio);\r\n        renderer!.setSize(containerWidth, containerHeight)\r\n        renderer!.shadowMap.enabled = true // 渲染器阴影渲染\r\n        renderer!.shadowMap.type = THREE.PCFSoftShadowMap // 阴影类型\r\n        let targetDom = document.getElementById(canvasId)\r\n        if (!targetDom) {\r\n            throw new Error(`Cannot find the dom with id '${canvasId}'`)\r\n        }\r\n        targetDom.appendChild(renderer!.domElement)\r\n        //灰色背景\r\n        // useComposer ? renderer!.setClearColor('rgb(7,7,7)', backgroundAlpha) : renderer!.setClearColor('#2d2d2d', backgroundAlpha)   //设置背景色\r\n        //黑色背景\r\n        useComposer ? renderer!.setClearColor('rgb(0, 0, 0)', backgroundAlpha) : renderer!.setClearColor('#2d2d2d', backgroundAlpha)   //设置背景色\r\n\r\n        labelRenderer = new CSS3DRenderer();\r\n        // labelRenderer = new CSS2DRenderer();\r\n\r\n        labelRenderer.setSize(containerWidth, containerHeight);\r\n        labelRenderer.domElement.style.position = 'absolute';\r\n        labelRenderer.domElement.style.top = '0px';\r\n        labelRenderer.domElement.style.pointerEvents = 'none';\r\n\r\n        targetDom.appendChild(labelRenderer.domElement);\r\n        targetDom = null\r\n    }\r\n\r\n    let managerBox: ManagerBox  // 加载器\r\n    let GltfLoader: GLTFLoader\r\n    let DracoManager: DRACOLoader\r\n    let initManager = () => {\r\n        // 加载器公共事件\r\n        let managerEvent = (_name: string, manager: THREE.LoadingManager) => {\r\n            manager.onStart = (_url, _itemsLoaded, _itemsTotal) => {\r\n            }\r\n            manager.onLoad = () => {\r\n            }\r\n            manager.onProgress = (_url, _itemsLoaded, _itemsTotal) => {\r\n            }\r\n            manager.onError = _url => {\r\n                // 兼容未加载完进行路由跳转\r\n                console.error('manager onError');\r\n            }\r\n        }\r\n        // 初始加载器\r\n        managerBox = {\r\n            GLTFManager: new THREE.LoadingManager(),\r\n            DRACOManager: new THREE.LoadingManager(),\r\n        }\r\n        managerEvent('GLTFManager', managerBox.GLTFManager)\r\n        managerEvent('DRACOManager', managerBox.DRACOManager)\r\n\r\n        GltfLoader = new GLTFLoader(managerBox.GltfManager)\r\n    }\r\n    // 渲染时钟\r\n    let initClock = () => {\r\n        clock = new THREE.Clock() // 世界时钟\r\n    }\r\n\r\n    let stats: Stats, showStats: boolean = true\r\n    let initStats = () => {\r\n        stats = new Stats()\r\n        stats.dom.style.position = 'absolute';\r\n        stats.dom.style.top = '0px';\r\n        stats.dom.style.left = (containerWidth - 100) + 'px';\r\n        // stats.showPanel(2)\r\n        document.body.appendChild(stats.dom);\r\n    }\r\n    function initLight() {\r\n        // let intensity = lightPosition.y + 100   // 光照强度\r\n        // const ambientLight = new THREE.AmbientLight(0xffffff, 5) // 环境光\r\n        const ambientLight = new THREE.AmbientLight(0xffffff, ambientItensity) // 环境光\r\n        // const spotLight = new THREE.SpotLight(0xffffff, intensity, 0, Math.PI / 2, 0.5, 1) // 聚光灯\r\n        const directionalLight = new THREE.DirectionalLight(0xffffff, 2)  //默认平行光\r\n\r\n        // 环境光\r\n        ambientLight.name = 'ambientLight'\r\n\r\n        //平行光\r\n        directionalLight.shadow.bias = bias\r\n        directionalLight.position.set(lightPosition?.x ?? 200, lightPosition?.y ?? 200, lightPosition?.z ?? -200)\r\n        directionalLight.name = 'directionalLight'\r\n        directionalLight.castShadow = true\r\n        directionalLight.shadow.mapSize.width = Math.pow(2, 13);\r\n        directionalLight.shadow.mapSize.height = Math.pow(2, 13);\r\n\r\n        const d = 1000\r\n        directionalLight.shadow.camera.left = -d\r\n        directionalLight.shadow.camera.right = d\r\n        directionalLight.shadow.camera.top = d\r\n        directionalLight.shadow.camera.bottom = -d\r\n\r\n        directionalLight.shadow.camera.far = 8000\r\n        directionalLight.shadow.camera.near = 10\r\n\r\n        scene.value!.add(ambientLight)\r\n        // scene.value!.add(spotLight)\r\n\r\n        if (showSky) {\r\n            initSkyLights(scene.value!)\r\n            // } else if (!showBackImage && useDirectLight) {\r\n        } else if (useDirectLight) {\r\n            // 默认平行光,最多一个平行光，不然castshadow计算阴影时对性能有相当大的损耗\r\n            scene.value!.add(directionalLight)\r\n        }\r\n    }\r\n    // 初始相机\r\n    let initCamera = () => {\r\n        camera.value = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100000)  // 相机\r\n\r\n        let x = 100, y = 100, z = 100, targetX = 0, targetY = 0, targetZ = 0\r\n        if (cameraPosition) {\r\n            x = cameraPosition.x ? cameraPosition.x : 100\r\n            y = cameraPosition.y ? cameraPosition.y : 100\r\n            z = cameraPosition.z ? cameraPosition.z : 100\r\n        }\r\n        if (cameraTarget && isFirstView.value) {\r\n            targetX = cameraTarget.x ? cameraTarget.x : 0\r\n            targetY = cameraTarget.y ? cameraTarget.y : 0\r\n            targetZ = cameraTarget.z ? cameraTarget.z : 0\r\n            const origin = new THREE.Vector3(x, y, z)\r\n            const target = new THREE.Vector3(targetX, targetY, targetZ)\r\n            const direction = new THREE.Vector3()\r\n            direction.subVectors(target, origin).normalize()\r\n            camera.value!.lookAt(direction)\r\n        }\r\n\r\n        // camera.value! = new THREE.PerspectiveCamera(35, containerWidth / containerHeight, 0.1, 100000) // 相机\r\n        camera.value!.aspect = containerWidth / containerHeight\r\n        camera.value!.position.set(x, y, z)\r\n        // camera.value!.up.set(0, 1, 0)\r\n        camera.value!.layers.enableAll();\r\n\r\n        centerInitCameraPosition[0] = camera.value!.position.clone()\r\n        console.log('initCamera centerInitCameraPosition', centerInitCameraPosition[0]);\r\n    }\r\n    // 加载相机插件\r\n    let eventControllers: AbortController[] = [] //点击事件的控制器\r\n    let initOrbitControls = () => {\r\n        if (!isFirstView.value) useOrbitControls()\r\n        else usePointerLockControls()\r\n    }\r\n\r\n    function useOrbitControls() {\r\n        let x = 0, y = 0, z = 0\r\n        if (cameraTarget) {\r\n            x = cameraTarget.x ? cameraTarget.x : 0\r\n            y = cameraTarget.y ? cameraTarget.y : 0\r\n            z = cameraTarget.z ? cameraTarget.z : 0\r\n\r\n            centerInitCameraPosition[1] = new THREE.Vector3(x, y, z)\r\n            console.log('useOrbitControls centerInitCameraPosition', centerInitCameraPosition[1]);\r\n        }\r\n        orbitControls.value = new OrbitControls(camera.value!, renderer!.domElement) // 相机控件\r\n        // orbitControls.value = new OrbitControls(camera.value!, renderer!.domElement)\r\n        orbitControls.value!.autoRotate = false // 是否开启相机自动旋转\r\n        // orbitControls.value.autoRotateSpeed  = 1 // 相机旋转速度，默认为2.0\r\n        // orbitControls.value!.panSpeed = zoomDegree // 移动幅度\r\n        // orbitControls.value!.zoomSpeed = zoomDegree // 缩放速度\r\n        orbitControls.value!.rotateSpeed = 0.5\r\n        orbitControls.value!.maxDistance = orbitControlsOptions.maxDistance || 1000\r\n        orbitControls.value!.maxTargetRadius = orbitControlsOptions.maxTargetRadius || 1000\r\n\r\n        orbitControls.value.maxPolarAngle = orbitControlsOptions.maxPolarAngle ?? Math.PI / 2 // 能够垂直旋转的角度的上限，默认值为Math.PI\r\n        // orbitControls.value.minPolarAngle = Math.PI / 4 // 能够垂直旋转的角度的上限，默认值为Math.PI\r\n        // orbitControls.value.minPolarAngle = 0\r\n        orbitControls.value!.target = new THREE.Vector3(x, y, z) // 初始相机的所看的位置\r\n        // orbitControls.value.target = new THREE.Vector3(6568, 310, 8831) // 初始相机的所看的位置\r\n        orbitControls.value!.enableDamping = orbitControlsOptions.enableDamping ?? false  // 是否开启阻尼\r\n        orbitControls.value!.dampingFactor = orbitControlsOptions.dampingFactor ?? 0.1   //阻尼系数\r\n        // if (customZoom) orbitControls.value!.enableZoom = false    // 是否开启缩放，这里禁用是因为原生的无法同步target，故手动实现缩放，禁用原生缩放\r\n        orbitControls.value!.enableZoom = true\r\n    }\r\n\r\n    let moveForward = false;\r\n    let moveBackward = false;\r\n    let moveLeft = false;\r\n    let moveRight = false;\r\n    let jump = false\r\n    let down = false\r\n    let prevTime = performance.now();\r\n    const velocity = new THREE.Vector3();\r\n    const direction = new THREE.Vector3();\r\n\r\n    let usePointerLockControls = () => {\r\n        let targetDom = document.getElementById(canvasId)\r\n        if (!targetDom) throw new Error(`Cannot find the dom with id '${canvasId}'`)\r\n        pointerLockControls = shallowRef(new PointerLockControls(camera.value!, targetDom)) // 相机控件\r\n\r\n        scene.value!.add(pointerLockControls.value!.object)\r\n\r\n        const onKeyDown = function (event: KeyboardEvent) {\r\n            switch (event.code) {\r\n\r\n                case 'ArrowUp':\r\n                case 'KeyW':\r\n                    moveForward = true;\r\n                    break;\r\n\r\n                case 'ArrowLeft':\r\n                case 'KeyA':\r\n                    moveLeft = true;\r\n                    break;\r\n\r\n                case 'ArrowDown':\r\n                case 'KeyS':\r\n                    moveBackward = true;\r\n                    break;\r\n\r\n                case 'ArrowRight':\r\n                case 'KeyD':\r\n                    moveRight = true;\r\n                    break;\r\n\r\n                case 'KeyQ':\r\n                    jump = true\r\n                    break;\r\n                case 'KeyE':\r\n                    down = true\r\n                    break\r\n            }\r\n\r\n        }\r\n\r\n        const onKeyUp = function (event: KeyboardEvent) {\r\n\r\n            switch (event.code) {\r\n\r\n                case 'ArrowUp':\r\n                case 'KeyW':\r\n                    moveForward = false;\r\n                    break;\r\n\r\n                case 'ArrowLeft':\r\n                case 'KeyA':\r\n                    moveLeft = false;\r\n                    break;\r\n\r\n                case 'ArrowDown':\r\n                case 'KeyS':\r\n                    moveBackward = false;\r\n                    break;\r\n\r\n                case 'ArrowRight':\r\n                case 'KeyD':\r\n                    moveRight = false;\r\n                    break;\r\n                case 'KeyQ':\r\n                    jump = false\r\n                    break;\r\n                case 'KeyE':\r\n                    down = false\r\n                    break\r\n\r\n            }\r\n\r\n        };\r\n\r\n        document.addEventListener('keydown', onKeyDown);\r\n        document.addEventListener('keyup', onKeyUp);\r\n        startPointerLockControls()\r\n        renderer!.setAnimationLoop(animate);\r\n    }\r\n    function startPointerLockControls() {\r\n        // console.log('startPointerLockControls', pointerLockControls.value);\r\n        if (pointerLockControls.value) {\r\n            pointerLockControls.value.lock()\r\n        }\r\n    }\r\n    function exitPointerLockControls() {\r\n        if (pointerLockControls.value) {\r\n            pointerLockControls.value.unlock()\r\n        }\r\n    }\r\n    function listenerAboutPointerLockControlsClick(init: boolean) {\r\n        let targetDom = document.getElementById(canvasId)\r\n        if (!targetDom) throw new Error(`Cannot find the dom with id '${canvasId}'`)\r\n        if (init) {\r\n            targetDom.addEventListener('click', startPointerLockControls)\r\n        } else {\r\n            targetDom.removeEventListener('click', startPointerLockControls)\r\n        }\r\n    }\r\n    let target = new THREE.Vector3(), cameraTarget2 = {\r\n        last: new THREE.Vector3(),\r\n        current: new THREE.Vector3()\r\n    }\r\n    let firstExit = true\r\n    function animate() {\r\n        const time = performance.now();\r\n        // console.log('isLocked', pointerLockControls.value!.isLocked)\r\n        if (pointerLockControls.value!.isLocked === true) {\r\n            firstExit = true\r\n            const delta = (time - prevTime) / 1000;\r\n\r\n            velocity.x -= velocity.x * 10.0 * delta;\r\n            velocity.z -= velocity.z * 10.0 * delta;\r\n            velocity.y -= velocity.y * 10.0 * delta;\r\n\r\n            direction.z = Number(moveForward) - Number(moveBackward);\r\n            direction.x = Number(moveRight) - Number(moveLeft);\r\n            direction.y = Number(jump) - Number(down);\r\n            direction.normalize(); // this ensures consistent movements in all directions\r\n\r\n            const speed = 20.0;\r\n            if (moveForward || moveBackward) velocity.z -= direction.z * speed * delta;\r\n            if (moveLeft || moveRight) velocity.x -= direction.x * speed * delta;\r\n            if (jump || down) velocity.y -= direction.y * speed * delta;\r\n\r\n            pointerLockControls.value!.moveRight(- velocity.x * delta);\r\n            pointerLockControls.value!.moveForward(- velocity.z * delta);\r\n\r\n            pointerLockControls.value!.object.position.y += (velocity.y * delta); // new behavior\r\n\r\n            const cameraPosition = camera.value!.position.clone()\r\n            const vec = new THREE.Vector3()\r\n            camera.value!.getWorldDirection(vec)\r\n            // console.log('vec', vec);\r\n            target = cameraPosition.clone().add(vec)\r\n            cameraTarget2.last = cameraTarget2.current.clone()\r\n            cameraTarget2.current = target.clone()\r\n            // console.log('current', cameraTarget2.current)\r\n        } else if (isFirstView.value && firstExit) {   //防止退出时相机朝向偏移\r\n            // const offset = Math.abs(cameraTarget2.last.angleTo(cameraTarget2.current))\r\n\r\n            const cameraPosition = camera.value!.position.clone()\r\n            const vec = new THREE.Vector3()\r\n            camera.value!.getWorldDirection(vec)\r\n            target = cameraPosition.clone().add(vec)\r\n            const offset = Math.abs(target.angleTo(cameraTarget2.last))\r\n\r\n            console.log('offset', offset, cameraTarget2.last);\r\n\r\n            if (offset > 0.0001) {  //视角纠正\r\n                camera.value!.lookAt(cameraTarget2.last)\r\n            }\r\n\r\n            firstExit = false\r\n        }\r\n\r\n        prevTime = time;\r\n\r\n        // renderer!.render(scene.value!, camera.value!);\r\n    }\r\n    let disabledOrbitControls = (disabled: boolean) => {\r\n        orbitControls.value!.enablePan = disabled ? false : true\r\n        orbitControls.value!.enableRotate = disabled ? false : true\r\n        orbitControls.value!.enableZoom = disabled ? false : true\r\n    }\r\n    let changeOrbitTarget = (x: number, y: number, z: number) => {\r\n        orbitControls.value!.target = new THREE.Vector3(x, y, z)\r\n    }\r\n\r\n    // 后处理相关变量\r\n    let composer: EffectComposer | undefined   //后处理对象\r\n    let renderPass: RenderPass | undefined // 渲染器通道\r\n    let outlinePass: OutlinePass | undefined  // outline通道\r\n    let effectFXAA: ShaderPass | undefined\r\n    let labelRenderer: CSS3DRenderer | CSS2DRenderer | undefined\r\n    // 初始化后处理效果\r\n    let initComposer = () => {\r\n        /**\r\n         * 模型描线默认配置\r\n         */\r\n        let defaultOutlinePass = () => {\r\n            outlinePass!.edgeStrength = 16       //描边强度\r\n            outlinePass!.edgeGlow = 1        //描边光晕\r\n            outlinePass!.edgeThickness = 3.0;    //描边厚度\r\n            outlinePass!.pulsePeriod = 2.0;  //描边呼吸频率\r\n            // outlinePass.visibleEdgeColor.set('rgb(255, 0, 0)')\r\n            outlinePass!.visibleEdgeColor.set(highlightColor)    //描边视觉上可见部分颜色,开启碰撞检测后此配置无效，只有不可见颜色，因为有一层透明球包裹在摄像机外面\r\n            outlinePass!.hiddenEdgeColor.set(highlightColor)       //描边视觉上不可见部分颜色\r\n            // outlinePass.hiddenEdgeColor.set(0x493827)       //描边视觉上不可见部分颜色\r\n        }\r\n        composer = new EffectComposer(renderer!);\r\n        // (composer as any).toneMapping = THREE.LinearToneMapping; // 设置色调映射为线性\r\n\r\n        renderPass = new RenderPass(scene.value!, camera.value!)\r\n        composer.addPass(renderPass)\r\n        const v2 = new THREE.Vector2(containerWidth, containerHeight)\r\n        outlinePass = new OutlinePass(v2, scene.value!, camera.value!)\r\n\r\n        defaultOutlinePass()\r\n        composer.addPass(outlinePass)\r\n        // const textureLoader = new THREE.TextureLoader();\r\n        // textureLoader.load( 'textures/tri_pattern.jpg', function ( texture ) {\r\n\r\n        //     outlinePass.patternTexture = texture;\r\n        //     texture.wrapS = THREE.RepeatWrapping;\r\n        //     texture.wrapT = THREE.RepeatWrapping;\r\n\r\n        // } );\r\n\r\n        // const outputPass = new OutputPass();\r\n        // composer.addPass( outputPass );\r\n\r\n\r\n        // 创建伽马校正通道\r\n        const gammaPass = new ShaderPass(GammaCorrectionShader);\r\n        composer.addPass(gammaPass);\r\n\r\n        // const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight));\r\n        // bloomPass.strength = 1.0;\r\n        // composer.addPass( bloomPass );\r\n\r\n        renderer!.setPixelRatio(window.devicePixelRatio);\r\n        //FXAA抗锯齿通道\r\n        effectFXAA = new ShaderPass(FXAAShader);\r\n        // `.getPixelRatio()`获取`renderer!.setPixelRatio()`设置的值\r\n        const pixelRatio = renderer!.getPixelRatio();//获取设备像素比 \r\n        // width、height是canva画布的宽高度\r\n        effectFXAA.material.uniforms['resolution'].value.x = 1 / (containerWidth * pixelRatio);\r\n        effectFXAA.material.uniforms['resolution'].value.y = 1 / (containerHeight * pixelRatio);\r\n        composer.addPass(effectFXAA);\r\n\r\n        // SMAA抗锯齿通道\r\n        // const pixelRatio = renderer!.getPixelRatio();//获取设备像素比 \r\n        // const smaaPass = new SMAAPass(window.innerWidth * pixelRatio, window.innerHeight * pixelRatio);\r\n        // composer.addPass(smaaPass);\r\n    }\r\n\r\n    // let FPS = 30\r\n    // const renderT = 1 / FPS\r\n    // let timeStep = 0\r\n    // 加载场景\r\n    let updateRenderer = () => {\r\n        animationId = requestAnimationFrame(updateRenderer)\r\n\r\n        // const T = clock!.getDelta()\r\n        // timeStep += T\r\n        // if(timeStep < renderT) return\r\n        // timeStep = 0\r\n\r\n        if (showSky) updateSunPosition(scene.value!)\r\n\r\n        if (raining) rainDrop!.animate()\r\n\r\n        tweenGroup.update()\r\n        camera.value!.updateProjectionMatrix()\r\n        if (!isFirstView.value) {\r\n            if (!orbitControls.value) useOrbitControls()\r\n            orbitControls.value!.update(clock!.getDelta())\r\n        } else if (isFirstView.value && !pointerLockControls.value) {\r\n            usePointerLockControls()\r\n        }\r\n\r\n        labelRenderer!.render(scene.value!, camera.value!);\r\n        updateLabel()\r\n\r\n        useComposer ? composer!.render() : renderer!.render(scene.value!, camera.value!)\r\n\r\n        if (showStats) stats.update()\r\n        mixers.value!.forEach((mixer) => mixer.update(clock!.getDelta()))\r\n        renderMixins!.forEach((mixin) => typeof mixin === 'function' && mixin())\r\n    }\r\n    function loadAnimation(mesh: THREE.Object3D, animations: THREE.AnimationClip[], animationName: string, parentName: string) {\r\n        const mixer = new THREE.AnimationMixer(mesh)\r\n        const clip = THREE.AnimationClip.findByName(animations, animationName)\r\n        if (!clip) return\r\n        const action = mixer.clipAction(clip)\r\n        action.timeScale = 10; // 将动画速度加倍\r\n        action.play()\r\n        mixerMap!.set(parentName, mixer)\r\n        return\r\n    }\r\n    function removeMixers(rootNames: string[]) {\r\n        mixers.value! = mixers.value!.filter(mixer => {\r\n            return !mixer._root || (mixer._root && !rootNames.includes(mixer._root.name))\r\n        })\r\n        console.log('removeMixers', rootNames, mixers.value!);\r\n    }\r\n    function loadGLTF(url: string) {\r\n        const onCompleted = (object: GLTF, resolve: any) => resolve(object)\r\n        // percentMapProxy.set(url, 95)\r\n        return new Promise((resolve) => {\r\n            GltfLoader.load(url, (object) => {\r\n                console.log('set percent complete 100');\r\n                percentMapProxy.set(url, 100)\r\n                onCompleted(object, resolve)\r\n            },\r\n                (xhr) => {\r\n                    console.log('xhr', xhr.loaded, xhr.total);\r\n                    // 当模型文件通过nginx压缩后，无法得到contentLength，即xhr.total\r\n                    let percent = 0\r\n                    percent = Math.floor(xhr.loaded / xhr.total * 100)\r\n                    console.log('set percent =>', percent);\r\n                    percentMapProxy.set(url, percent)\r\n                }),\r\n                (error: any) => {\r\n                    console.error('解析GLtf出现错误 => ', error);\r\n                }\r\n        })\r\n    }\r\n    function loadDraco(dracoBaseUrl: string = '/libs/draco/gltf/') {\r\n        DracoManager = new DRACOLoader(managerBox.DRACOManager)\r\n        DracoManager.setDecoderPath(dracoBaseUrl)\r\n        GltfLoader.setDRACOLoader(DracoManager)\r\n    }\r\n    function addModelGroupByObjects(modelGroup: THREE.Group, parentName: string | null = null, position: MyPostion | null = null) {\r\n        if (parentName) {\r\n            function scanToAdd(model: THREE.Scene | THREE.Group | THREE.Object3D) {\r\n                if (model.name === parentName) {\r\n                    if (position) modelGroup.position.set(position.x, position.y, position.z)\r\n                    model.add(modelGroup)\r\n                    return\r\n                }\r\n                if (model.children && model.children.length > 0) {\r\n                    for (let i = 0, len = model.children.length; i < len; i++) {\r\n                        scanToAdd(model.children[i])\r\n                    }\r\n                }\r\n            }\r\n            scanToAdd(scene.value!)\r\n        } else {\r\n            if (position) modelGroup.position.set(position.x, position.y, position.z)\r\n            scene.value!.add(modelGroup)\r\n        }\r\n        eventBus.publish('allLoaded')\r\n    }\r\n    async function addModelGroupByUrls(gltfUrls: importUrlFormat[], parentName: string | null = null, position: MyPostion | null = null) {\r\n        loadDraco()\r\n        const promiseQuery = []\r\n        for (let gltfUrl of gltfUrls) {\r\n            const gltf = loadGLTF(gltfUrl.url)\r\n            promiseQuery.push(gltf)\r\n        }\r\n        const resArr = await Promise.allSettled(promiseQuery)\r\n        DracoManager.dispose()\r\n        let modelGroup = scene.value!.getObjectByName('modelGroup') as THREE.Group\r\n        if (!modelGroup) {\r\n            modelGroup = new THREE.Group()\r\n            modelGroup.name = 'modelGroup'\r\n        }\r\n        for (let i = 0, len = resArr.length; i < len; i++) {\r\n            if (resArr[i].status === 'fulfilled') {\r\n                const gltf = (resArr[i] as PromiseFulfilledResult<GLTF>).value\r\n                console.log('控制台查看加载gltf文件返回的对象结构', gltf);\r\n                console.log('gltf对象场景属性', gltf.scene);\r\n\r\n                //对场景中的所有物体做统一处理\r\n                Utils.suffixTraverse(gltf.scene, envMapIntensity, mergeRule, receiveShadow)\r\n\r\n                //模型缩放配置\r\n                if (gltfUrls[i].needScale && gltfUrls[i].scale) gltf.scene.scale.set(...gltfUrls[i].scale as [number, number, number])\r\n                gltf.scene.position.set(0, 0, 0)\r\n\r\n                gltf.scene.name = gltfUrls[i].url;\r\n                for (let j = 0, len = gltf.animations.length; j < len; j++) {\r\n                    loadAnimation(gltf.scene, gltf.animations, gltf.animations[j].name, gltfUrls[i].url)\r\n                }\r\n                //对每一个加载的模型进行缓存\r\n                cacheModel.value!.push(gltf.scene)\r\n\r\n                if (gltfUrls[i].addToScene || gltfUrls[i].addToScene === undefined) {\r\n                    modelGroup.add(gltf.scene)\r\n                    const mixer = mixerMap!.get(gltfUrls[i].url)\r\n                    if (mixer) mixers.value!.push(mixer)\r\n                }\r\n            } else {\r\n                console.log('gltf加载失败 reason => ', (resArr[i] as PromiseRejectedResult).reason);\r\n            }\r\n        }\r\n        addModelGroupByObjects(modelGroup, parentName, position)\r\n        setTimeout(() => {\r\n            Utils.resetProgress()\r\n            percentMapProxy.clear()\r\n        }, 1000);\r\n    }\r\n    async function initLoader(gltfUrls: importUrlFormat[], showDefaultDialog = true) {\r\n        await addModelGroupByUrls(gltfUrls)\r\n\r\n        //移动相机观察场景中心\r\n        if (autoSetCamera) getCenterFromBounding()\r\n        if (showGui) initGui()\r\n        // 初始化点击事件\r\n        if (allowClick) initThreeclickObjEvent(showDefaultDialog)\r\n        // console.log('scene.value!', scene.value!);\r\n        // changeLight()\r\n    }\r\n    /**鼠标点击事件，获取对应世界坐标 */\r\n    function getVectorByClick(event: MouseEvent) {\r\n        if (isFirstView.value) return\r\n        event.preventDefault();\r\n        const vector = new THREE.Vector3();//三维坐标对象\r\n        vector.set(\r\n            (event.clientX / containerWidth) * 2 - 1,\r\n            - (event.clientY / containerHeight) * 2 + 1,\r\n            0.5);\r\n        vector.unproject(camera.value!);\r\n        const raycaster = new THREE.Raycaster(camera.value!.position, vector.sub(camera.value!.position).normalize());\r\n        const intersects = raycaster.intersectObjects(scene.value!.children);\r\n        if (intersects.length > 0) {\r\n            var selected = intersects[0];//取第一个物体\r\n            console.log('selected: ', selected)\r\n            console.log(\"x坐标:\" + selected.point.x);\r\n            console.log(\"y坐标:\" + selected.point.y);\r\n            console.log(\"z坐标:\" + selected.point.z);\r\n        }\r\n    }\r\n    function measureDistance(event: MouseEvent) {\r\n        if (isFirstView.value) return\r\n        if (!allowMeasure.value) return\r\n        if (Math.abs(afterX - beforeX) > 5 && Math.abs(afterY - beforeY) > 5) return\r\n        event.preventDefault();\r\n        const mouseX = event.clientX\r\n        const mouseY = event.clientY\r\n        const pointer = new THREE.Vector2()\r\n        pointer.x = (mouseX / containerWidth) * 2 - 1\r\n        pointer.y = -(mouseY / containerHeight) * 2 + 1\r\n        const raycaster = new THREE.Raycaster();\r\n        raycaster.params.Points.threshold = 0.3\r\n        raycaster.setFromCamera(pointer, camera.value!)\r\n        const intersects = raycaster.intersectObjects(scene.value!.children)\r\n        console.log('intersects', intersects);\r\n        let target\r\n        for (let i = 0, len = intersects.length; i < len; i++) {\r\n            let item = intersects[i]\r\n            if (item.object instanceof THREE.Line) continue\r\n            target = item\r\n            break\r\n        }\r\n        if (target) {\r\n            const selected = target.point\r\n            addPoint(selected.x, selected.y, selected.z)\r\n        }\r\n    }\r\n    function addPoint(x: number, y: number, z: number) {\r\n        const point = createPoint(x, y, z, { color: 0x005348, size: 0.03 })\r\n        scene.value!.add(point)\r\n        measureGroup.push(point)\r\n        points.push(new THREE.Vector3(x, y, z))\r\n\r\n        if (isContinue.value) generateLine()\r\n        else updateMeasurementLine();\r\n    }\r\n    function updateMeasurementLine() {\r\n        if (points.length < 2 || points.length % 2 !== 0) return\r\n        /* three.js基础版line，无法调整lineWidth \r\n        const lineGeometry = new THREE.BufferGeometry().setFromPoints(\r\n            [\r\n                points[points.length - 2],\r\n                points[points.length - 1]\r\n            ]\r\n        );\r\n        const lineMaterial = new THREE.LineBasicMaterial({\r\n            color: 0xf9f8ed,\r\n            linewidth:100.0,\r\n            linecap:'butt'\r\n        }); */\r\n        const last2 = points[points.length - 2], last1 = points[points.length - 1];\r\n        const positions = [last2.x, last2.y, last2.z, last1.x, last1.y, last1.z]\r\n        const lineColor = new THREE.Color(0xf9f8ed)\r\n\r\n        const geometry = new LineGeometry();\r\n        geometry.setPositions(positions);\r\n        geometry.setColors([lineColor.r, lineColor.g, lineColor.b, lineColor.r, lineColor.g, lineColor.b]);\r\n\r\n        const matLine = new LineMaterial({\r\n            color: 0x00d0dd,\r\n            linewidth: 4, // in world units with size attenuation, pixels otherwise\r\n            vertexColors: false,\r\n\r\n            //resolution:  // to be set by renderer!, eventually\r\n            dashed: false,\r\n            alphaToCoverage: true,\r\n        });\r\n        matLine.resolution.set(containerWidth, containerHeight)\r\n        //创建线对象\r\n        currentLine = new Line2(geometry, matLine)\r\n        // currentLine.computeLineDistances();\r\n        scene.value!.add(currentLine)\r\n        measureGroup.push(currentLine)\r\n\r\n        const distance = points[points.length - 2].distanceTo(points[points.length - 1])\r\n        console.log('距离: ', distance);\r\n\r\n        // 求中点坐标\r\n        let centerX = (points[points.length - 2].x + points[points.length - 1].x) / 2;\r\n        let centerY = (points[points.length - 2].y + points[points.length - 1].y) / 2;\r\n        let centerZ = (points[points.length - 2].z + points[points.length - 1].z) / 2;\r\n\r\n        const earthDiv = document.createElement(\"div\");\r\n        const customStyle = 'color: #f9f8ed;font-size: 16px;pointer-events:none !important;'\r\n        earthDiv.setAttribute('style', customStyle)\r\n        earthDiv.classList.add('no-pointer-events')\r\n        earthDiv.textContent = distance.toFixed(5) + \" m\";\r\n        // earthDiv.style.marginTop = \"-1em\";\r\n\r\n        const label3D = new CSS3DObject(earthDiv);\r\n        label3D.scale.set(textScale, textScale, textScale)\r\n        label3D.name = distance.toFixed(0);\r\n        label3D.position.set(centerX, centerY, centerZ); //标签标注在obj世界坐标\r\n        label3D.layers.set(1);\r\n\r\n        console.log('label3D', label3D);\r\n        scene.value!.add(label3D);\r\n        // measureGroup.push(label3D)\r\n        tagMap['measure'] ? tagMap['measure'].push(label3D) : [label3D]\r\n        // labelRenderer.render(scene.value!, camera.value!)\r\n    }\r\n    function generateLine() {\r\n        if (points.length < 2) return\r\n        /*  three.js基础版line，无法调整lineWidth \r\n        const lineGeometry = new THREE.BufferGeometry().setFromPoints(\r\n            [\r\n                points[points.length - 2],\r\n                points[points.length - 1]\r\n            ]\r\n        );\r\n        const lineMaterial = new THREE.LineBasicMaterial({\r\n            color: 0xca40ea,\r\n            linewidth: 2\r\n        });\r\n        //创建线对象\r\n        currentLine = new THREE.Line(lineGeometry, lineMaterial) */\r\n\r\n        //新的line\r\n        const last2 = points[points.length - 2], last1 = points[points.length - 1];\r\n        const positions = [last2.x, last2.y, last2.z, last1.x, last1.y, last1.z]\r\n        const lineColor = new THREE.Color(0xf9f8ed)\r\n\r\n        const geometry = new LineGeometry();\r\n        geometry.setPositions(positions);\r\n        geometry.setColors([lineColor.r, lineColor.g, lineColor.b, lineColor.r, lineColor.g, lineColor.b]);\r\n\r\n        const matLine = new LineMaterial({\r\n            color: 0x00d0dd,\r\n            linewidth: 4, // in world units with size attenuation, pixels otherwise\r\n            vertexColors: false,\r\n\r\n            //resolution:  // to be set by renderer!, eventually\r\n            dashed: false,\r\n            alphaToCoverage: true,\r\n        });\r\n        matLine.resolution.set(containerWidth, containerHeight)\r\n        //创建线对象\r\n        const currentLine = new Line2(geometry, matLine)\r\n        scene.value!.add(currentLine)\r\n        measureGroup.push(currentLine)\r\n    }\r\n    function clearMeasure() {\r\n        measureGroup.forEach(item => {\r\n            item.removeFromParent()\r\n            item.geometry.dispose()\r\n            if (item.material instanceof THREE.Material) item.material.dispose()\r\n        })\r\n        tagMap['measure'].forEach(item => {\r\n            item.removeFromParent()\r\n        })\r\n\r\n        tagMap['measure'] = []\r\n        points.splice(0, points.length)\r\n        measureGroup.splice(0, measureGroup.length)\r\n    }\r\n    function createPoint(x: number, y: number, z: number, config: pointConfig = { color: 0xf9f8ed, size: 0.8 }) {\r\n        let mat = new THREE.MeshBasicMaterial({\r\n            color: config.color || 0xf9f8ed,\r\n        });\r\n        let sphereGeometry = new THREE.SphereGeometry(config.size || 0.3, 32, 32);\r\n        let sphere = new THREE.Mesh(sphereGeometry, mat);\r\n        sphere.position.set(x, y, z);\r\n        return sphere;\r\n    }\r\n    let SELECTED: THREE.Object3D | undefined\r\n    // 点击事件\r\n    let initThreeclickObjEvent = (showDefaultDialog: boolean) => {\r\n        let targetDom = document.getElementById(canvasId)\r\n        if (!targetDom) throw new Error(`Cannot find the dom with id '${canvasId}'`)\r\n\r\n        //点击射线\r\n        let raycaster = new THREE.Raycaster();\r\n        let mouse = new THREE.Vector2(), mouseSelected: THREE.Object3D | undefined;\r\n        function onDocumentMouseDown(event: MouseEvent) {\r\n            if (isFirstView.value || !allowFocusAll.value) return\r\n            event.preventDefault();\r\n            mouse.x = (event.clientX / renderer!.domElement.clientWidth) * 2 - 1;\r\n            mouse.y = -(event.clientY / renderer!.domElement.clientHeight) * 2 + 1;\r\n\r\n            raycaster.setFromCamera(mouse, camera.value!);\r\n\r\n            const intersects = raycaster.intersectObjects(scene.value!.children);\r\n            // console.log('intersects', intersects);\r\n\r\n            const whiteList = ['isSky']  //射线拾取白名单\r\n            // const whiteList = ['isSky', 'isWater']\r\n\r\n            let pickedObject: THREE.Object3D | undefined;\r\n\r\n            if (intersects.length > 0) {\r\n                console.log('射线拾取实际上第一个拾取的物体: ', intersects[0].object);\r\n            }\r\n            const ignoreList = [...raycasterWhiteList.value, ...tagMap['currentTag']]\r\n            for (let i = 0, len = intersects.length; i < len; i++) {\r\n                const item = intersects[i].object\r\n\r\n                if (whiteList.every(key => !Object.hasOwn(item, key) && ignoreList.every(whiteName => item.name !== whiteName))) {\r\n                    pickedObject = item\r\n                    break\r\n                }\r\n            }\r\n            console.log('pickedObject', pickedObject);\r\n\r\n            console.log('whiteList', whiteList, ignoreList);\r\n\r\n            //拾取物体数大于0时\r\n            if (pickedObject) {\r\n                console.log('select');\r\n                //鼠标的变换\r\n                document.body.style.cursor = 'pointer';\r\n                //获取第一个物体，如果切换物体，将原先选中的物体材质复原\r\n                if (!mouseSelected) mouseSelected = pickedObject;\r\n                else {\r\n                    recoverMaterial(mouseSelected)\r\n                    mouseSelected = pickedObject;\r\n                }\r\n                eventBus.publish('clickMesh', event, mouseSelected)\r\n\r\n                //选中模型回调，默认展示模型相关信息\r\n                if (showDefaultDialog) {\r\n                    showSelectObjectInfo(event, mouseSelected)\r\n                }\r\n                focusModel(mouseSelected, DISTANCE.value)\r\n            } else {\r\n                recoverMaterial(SELECTED)\r\n            }\r\n        }\r\n\r\n        //如果已经绑定了事件监听器，则移除之前的\r\n        eventControllers.forEach(eventController => {\r\n            eventController.abort()\r\n        })\r\n        eventControllers = []\r\n\r\n        //双击\r\n        const controller = new AbortController()\r\n        const signal = controller.signal\r\n        eventControllers.push(controller)\r\n        //单击\r\n        const controller2 = new AbortController()\r\n        const signal2 = controller2.signal\r\n        eventControllers.push(controller2)\r\n        //鼠标按下\r\n        const controller3 = new AbortController()\r\n        const signal3 = controller3.signal\r\n        eventControllers.push(controller3)\r\n        //鼠标抬起\r\n        const controller4 = new AbortController()\r\n        const signal4 = controller4.signal\r\n        eventControllers.push(controller4)\r\n\r\n        targetDom.addEventListener('dblclick', onDocumentMouseDown, {\r\n            signal: signal\r\n        });\r\n        const clickEvent: number = 0\r\n        if (clickEvent == 0) {\r\n            targetDom.addEventListener('click', getVectorByClick, {\r\n                signal: signal2\r\n            });\r\n        } else if (clickEvent == 1) {\r\n            targetDom.addEventListener('click', measureDistance, {\r\n                signal: signal2\r\n            });\r\n        }\r\n\r\n        //控制拖拽时不触发点击事件\r\n        targetDom.addEventListener('mousedown', (e: MouseEvent) => {\r\n            [beforeX, beforeY] = [e.offsetX, e.offsetY]\r\n        }, { signal: signal3 })\r\n        targetDom.addEventListener('mouseup', (e: MouseEvent) => {\r\n            [afterX, afterY] = [e.offsetX, e.offsetY]\r\n        }, { signal: signal4 })\r\n\r\n        targetDom = null\r\n    }\r\n\r\n    // let cameraPos: THREE.Vector3\r\n    /** \r\n     * 通过场景中心与半径来定位相机的位置与朝向\r\n    */\r\n    let getCenterFromBounding = () => {\r\n        const boxHelper = new THREE.BoxHelper(new THREE.Object3D())\r\n        let item = scene.value!.getObjectByName('modelGroup')\r\n        if (!item) return\r\n        boxHelper.setFromObject(item)\r\n        console.log('boxHelper.geometry.boundingSphere => ', boxHelper.geometry.boundingSphere);\r\n        console.log('boxHelper.geometry.center() => ', boxHelper.geometry.center());\r\n        if (!boxHelper.geometry.boundingSphere) {\r\n            console.warn('boxHelper.geometry.boundingSphere is', boxHelper.geometry.boundingSphere);\r\n            return\r\n        }\r\n        let center = boxHelper.geometry.boundingSphere.center\r\n        let radius = boxHelper.geometry.boundingSphere.radius\r\n\r\n        item.position.set(-center.x, -center.y, -center.z)\r\n        const cameraDistance = radius * 1.8\r\n        camera.value!.position.set(cameraDistance, cameraDistance, cameraDistance)\r\n        console.log('getCenter centerInitCameraPosition');\r\n\r\n        centerInitCameraPosition = [camera.value!.position.clone(), new THREE.Vector3()]\r\n        orbitControls.value!.target.set(0, 0, 0)\r\n    }\r\n\r\n    let showGui: boolean = false\r\n    let initGui = () => {\r\n        // const gui = new GUI({ width: 310 })\r\n    }\r\n    // 初始辅助\r\n    let initHelper = () => {\r\n        const axesHelper = new THREE.AxesHelper(1000)\r\n        scene.value!.add(axesHelper)\r\n    }\r\n    async function resetCamera() {\r\n        //相机还原到初始位置\r\n        console.log('resetCamera', centerInitCameraPosition[0], centerInitCameraPosition[1]);\r\n\r\n        await changeCameraFocus(centerInitCameraPosition[0], centerInitCameraPosition[1])\r\n    }\r\n\r\n    let rainDrop: RainDrop | undefined\r\n    function addRainDrop() {\r\n        rainDrop = new RainDrop()\r\n        scene.value!.add(rainDrop.instance)\r\n    }\r\n    const recoverMaterial = (object: THREE.Object3D | undefined, includeOutline: boolean = false) => {\r\n        if (!includeOutline) {\r\n            console.log('recoverMaterial', object);\r\n            //清除高亮描边\r\n            outlinePass ? outlinePass.selectedObjects = [] : null\r\n            // removeTag('currentTag')\r\n            removeAllTag()\r\n            document.body.style.cursor = 'auto';\r\n\r\n            eventBus.publish('recoverMaterial', object)\r\n        }\r\n\r\n        if (object instanceof THREE.Mesh) {\r\n            const mesh = object as MyMesh\r\n            if (mesh._preMaterial) mesh.material = mesh._preMaterial  //复原物体材质\r\n        } else {\r\n            object?.children.forEach(child => {\r\n                recoverMaterial(child, true)\r\n            })\r\n        }\r\n    }\r\n    function recoverSelect() {\r\n        if (SELECTED) {\r\n            recoverMaterial(SELECTED)\r\n            SELECTED = undefined\r\n        }\r\n    }\r\n    function getTagName(obj: THREE.Object3D) {\r\n        return {\r\n            tagName: obj.name + '名称',\r\n            // tagName: obj.name,\r\n            modelName: obj.name\r\n        }\r\n    }\r\n    const highlightModel = (model: THREE.Object3D, stressType: StressType = StressType.STROKE, highlightColor: string = '0x00be55') => {\r\n        if (model instanceof THREE.Mesh) {\r\n            const mesh = model as MyMesh\r\n            //缓存模型初始材质\r\n            let _preMaterial\r\n            if (Array.isArray(mesh.material)) {\r\n                let arr = []\r\n                for (let i = 0, len = mesh.material.length; i < len; i++) {\r\n                    arr.push(mesh.material[i].clone())\r\n                }\r\n                _preMaterial = arr\r\n            } else {\r\n                _preMaterial = mesh.material;  //记录当前选择的材质\r\n            }\r\n            mesh._preMaterial = _preMaterial;     //缓存当前选择的材质\r\n        } else {\r\n            model.children.forEach(child => {\r\n                highlightModel(child, stressType, highlightColor)\r\n            })\r\n        }\r\n\r\n        //高亮模型材质\r\n        SELECTED = model\r\n        console.log('点击前的对象 => ', model, stressType)\r\n        switch (stressType) {\r\n            case StressType.STROKE:\r\n                outlinePass ? outlinePass.selectedObjects = [model] : null\r\n                break;\r\n            case StressType.WIREFRAM:\r\n                if (model instanceof THREE.Mesh) {\r\n                    // 创建发光材质\r\n                    const mesh = model as THREE.Mesh\r\n                    const glowingMaterial = new THREE.MeshBasicMaterial({\r\n                        color: highlightColor, // 发光的颜色\r\n                        wireframe: true, // 使用线条渲染模式\r\n                    });\r\n                    mesh.material = glowingMaterial\r\n                }\r\n                break;\r\n            case StressType.COLOR:\r\n                if (model instanceof THREE.Mesh) {\r\n                    //直接修改材质颜色\r\n                    if (Array.isArray(model.material)) {\r\n                        const newColor = new THREE.Color(highlightColor); // 修改拷贝的材质的颜色\r\n                        for (let i = 0, len = model.material.length; i < len; i++) {\r\n                            const cloneMaterial = model.material[i].clone()\r\n                            cloneMaterial.color = newColor\r\n                            model.material[i] = cloneMaterial\r\n\r\n                        }\r\n                    } else {\r\n                        if (!model.material) return\r\n                        const material = model.material.clone(); // 深拷贝物体的材质\r\n                        material.color = new THREE.Color(highlightColor); // 修改拷贝的材质的颜色\r\n                        model.material = material; // 将拷贝的材质应用到物体上\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                outlinePass!.selectedObjects = [model]\r\n                break;\r\n        }\r\n        console.log('点击后的对象 =>', model)\r\n\r\n        const tagName = getTagName(model).tagName\r\n        const modelName = getTagName(model).modelName\r\n        console.log('tagName ==> ', tagName);\r\n        // addTag(tagName, modelName, 0.02)\r\n        addTag(tagName, modelName)\r\n    }\r\n    const showSelectObjectInfo = (_event: MouseEvent, object: THREE.Object3D) => {\r\n        let objInfoEl = document.createElement('div')\r\n        objInfoEl.className = 'object-info'\r\n        objInfoEl.id = object.uuid\r\n        objInfoEl.innerHTML = '名称：' + object.name + '<br />' + '类型：' + object.type + '<br />' + 'id：' + object.id + '<br />' + 'uuid：' + object.uuid + '<br />'\r\n        objInfoEl.style.cssText = 'padding: 8px 16px;position:absolute;background-color: #A55E2F;color: #FFF2A1;border-radius: 5px'\r\n        objInfoEl.style.top = '16px'\r\n        objInfoEl.style.right = '16px'\r\n        document.body.appendChild(objInfoEl)\r\n    }\r\n    /**\r\n     * 改变相机焦点，默认开启动画，动画时长1s\r\n     * @param cameraPosition 相机位置{x,y,z}\r\n     * @param cameraTarget 相机目标{x,y,z}\r\n     * @param useTween 是否使用动画\r\n     */\r\n    const changeCameraFocus = (cameraPosition: MyPostion, cameraTarget: MyPostion, useTween: boolean = true) => {\r\n        return new Promise((resolve, _reject) => {\r\n            console.log('changeCameraFocus', cameraPosition, cameraTarget);\r\n            if (!useTween) {\r\n                camera.value!.position.set(cameraPosition.x, cameraPosition.y, cameraPosition.z)\r\n                orbitControls.value!.target.set(cameraTarget.x, cameraTarget.y, cameraTarget.z)\r\n                return\r\n            }\r\n            disabledOrbitControls(true)\r\n            const tween1 = new Tween(camera.value!.position)\r\n                .to({ x: cameraPosition.x, y: cameraPosition.y, z: cameraPosition.z }, 1000)\r\n                .start()\r\n                .onComplete(() => {\r\n                    disabledOrbitControls(false)\r\n                    tweenGroup.remove(tween1)\r\n                    resolve('动画完成')\r\n                })\r\n            tweenGroup.add(tween1)\r\n\r\n            const tween2 = new Tween(orbitControls.value!.target)\r\n                .to({ x: cameraTarget.x, y: cameraTarget.y, z: cameraTarget.z }, 1000)\r\n                .start()\r\n                .onComplete(() => {\r\n                    tweenGroup.remove(tween2)\r\n                })\r\n            tweenGroup.add(tween2)\r\n        })\r\n    }\r\n    const clearScene = () => {\r\n        while (scene.value!.children.length > 0) {\r\n            const child = scene.value!.children[0];\r\n            scene.value!.remove(child);\r\n        }\r\n    }\r\n    function myKeyboardEvent(e: KeyboardEvent) {\r\n        switch (e.code) {\r\n            case 'Space':\r\n                const vec = new THREE.Vector3()\r\n                camera.value!.getWorldDirection(vec)\r\n                const target = camera.value!.position.clone().add(vec)\r\n\r\n                console.log('camera.position', camera.value! && camera.value!.position);\r\n                console.log('camera.direction', vec);\r\n                console.log('target', target);\r\n                console.log('orbitControls.target', orbitControls.value && orbitControls.value.target);\r\n                break;\r\n            // case 'KeyR':\r\n            //     changeModelGroup()\r\n            //     break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    function watchTabVisibility() {\r\n        if (document.hidden) {\r\n            cancelAnimationFrame(animationId)\r\n        } else {\r\n            updateRenderer()\r\n        }\r\n    }\r\n    const initEventListener = () => {\r\n        window.addEventListener('resize', onWindowResize);\r\n        window.addEventListener('keydown', myKeyboardEvent)\r\n        document.addEventListener('visibilitychange', watchTabVisibility)\r\n    }\r\n    const removeEventListener = () => {\r\n        window.removeEventListener('resize', onWindowResize)\r\n        window.removeEventListener('keydown', myKeyboardEvent)\r\n        document.removeEventListener('visibilitychange', watchTabVisibility)\r\n    }\r\n    const destroy = () => {\r\n        cancelAnimationFrame(animationId)\r\n        renderer!.dispose()\r\n        renderer!.forceContextLoss()\r\n        scene.value!.traverse((child) => {\r\n            if (child instanceof THREE.Mesh) disposeMesh(child)\r\n        })\r\n        removeEventListener()\r\n        if (showStats) document.body.removeChild(stats.dom)\r\n        resetVariable()\r\n    }\r\n    /** 清除引用内存 */\r\n    function resetVariable() {\r\n        scene.value = undefined\r\n        camera.value = undefined\r\n        clock = undefined\r\n        renderer = undefined\r\n        mixerMap = undefined\r\n        renderMixins = undefined\r\n        mixers.value = undefined\r\n        measureGroup.splice(0, measureGroup.length)\r\n        points.splice(0, points.length)\r\n        currentLine = undefined\r\n        tagMap.currentTag = []\r\n        tagMap.measure = []\r\n        cacheModel.value = undefined\r\n        managerBox = {} as ManagerBox\r\n        orbitControls.value = undefined\r\n        composer = undefined\r\n        renderPass = undefined\r\n        outlinePass = undefined\r\n        effectFXAA = undefined\r\n        labelRenderer = undefined\r\n        rainDrop = undefined\r\n    }\r\n    function onWindowResize() {\r\n        let targetDom = document.getElementById(canvasId)\r\n        const width = targetDom ? targetDom.clientWidth : window.innerWidth\r\n        const height = targetDom ? targetDom.clientHeight : window.innerHeight\r\n        console.log('onWindowResize', width, height);\r\n\r\n        camera.value!.aspect = width / height;\r\n        camera.value!.updateProjectionMatrix();\r\n\r\n        renderer!.setSize(width, height);\r\n        // renderer!.setSize(window.innerWidth, window.innerHeight);\r\n        if (useComposer) {\r\n            composer!.setSize(width, height);\r\n            const pixelRatio = renderer!.getPixelRatio();\r\n            effectFXAA!.material.uniforms['resolution'].value.x = 1 / (width * pixelRatio);\r\n            effectFXAA!.material.uniforms['resolution'].value.y = 1 / (height * pixelRatio);\r\n        }\r\n        // composer.setSize(window.innerWidth, window.innerHeight);\r\n        labelRenderer!.setSize(width, height);\r\n        targetDom = null\r\n        if (showStats) stats.dom.style.left = (width - 100) + 'px';\r\n    }\r\n    function resize() {\r\n        onWindowResize()\r\n    }\r\n    async function initBackground(isCube = true, callback: Function | null = null) {\r\n        if (!isCube) {\r\n            // 创建一个PMREMGenerator以生成环境贴图\r\n            var pmremGenerator = new THREE.PMREMGenerator(renderer!);\r\n            pmremGenerator.compileEquirectangularShader();\r\n\r\n            const suffix = backgroundImgPath.split('.').slice(-1).join()\r\n            let loader\r\n            if (suffix === 'exr') {\r\n                loader = new EXRLoader();\r\n            } else if (suffix === 'hdr') {\r\n                loader = new RGBELoader();\r\n            } else return\r\n            loader.load(backgroundImgPath, function (texture) {\r\n                // 通过PMREMGenerator处理texture生成环境贴图\r\n                envMap = pmremGenerator.fromEquirectangular(texture).texture;\r\n                // 设置场景的环境贴图\r\n                scene.value!.environment = envMap;\r\n                scene.value!.environmentIntensity = environmentIntensity ?? 1.0;\r\n                // 设置场景的背景\r\n                scene.value!.background = envMap;\r\n                // 释放pmremGenerator的资源\r\n                console.log('背景解析配置完成');\r\n                pmremGenerator.dispose();\r\n                if (callback) callback()\r\n            });\r\n        } else {\r\n            console.log('load Cube background');\r\n            const textureCube = new THREE.CubeTextureLoader().setPath('/images/')\r\n                .load(['px.png', 'nx.png', 'py.png', 'ny.png', 'pz.png', 'nz.png'])\r\n            scene.value!.environment = textureCube;\r\n            scene.value!.background = textureCube;\r\n        }\r\n    }\r\n    function resetBg(isNull: boolean, clearBgLight: boolean = true) {\r\n        if (scene.value) {\r\n            if (isNull) {\r\n                scene.value.background = null\r\n                if (clearBgLight) scene.value.environment = null\r\n            } else {\r\n                scene.value.background = envMap\r\n                scene.value.environment = envMap\r\n            }\r\n        }\r\n    }\r\n    function addTag(TagName: string, content: string, scale: number = 1, customStyle: string = '') {\r\n        let item = scene.value!.getObjectByName(TagName)\r\n        if (!item) {\r\n            let temp = TagName.split('名称')\r\n            let newTagName = temp[0] + temp[1] + '名称'\r\n            item = scene.value!.getObjectByName(newTagName)\r\n            if (!item) {\r\n                return\r\n            }\r\n        }\r\n\r\n        const tabDiv = document.createElement('div');\r\n        const defaultStyle = 'position: absolute; color:white; padding: 10px 5px; background-color: rgba(14, 23, 32, 0.5); border-radius: 10px; box-shadow:   0 0 0 0 rgba(0,0,0,0), 0 0 0 0 rgba(0,0,0,0),inset 0 0 18px 8px rgba(255, 104, 0, 0.5); pointer-events:none !important;'\r\n        let tagStyle = defaultStyle\r\n        if (customStyle) tagStyle = customStyle\r\n\r\n        tabDiv.setAttribute('style', tagStyle)\r\n        tabDiv.classList.add('no-pointer-events')\r\n        tabDiv.textContent = content;\r\n\r\n        // const tag = new CSS2DObject(tabDiv);\r\n\r\n        const tag: MyCSS3DObject = new CSS3DObject(tabDiv);\r\n        // console.log('tag => ', tag);\r\n        tag.scale.set(scale, scale, scale)\r\n\r\n        // tag.name = 'currentTag'\r\n        tag.name = TagName\r\n\r\n        let center = new THREE.Vector3(0, 0, 0)\r\n\r\n        item.getWorldPosition(center)\r\n\r\n        item.worldToLocal(center)\r\n        tag.position.set(center.x, center.y, center.z);\r\n\r\n        item.add(tag);\r\n\r\n        tagMap['currentTag'] ? tagMap['currentTag'].push(tag) : tagMap['currentTag'] = [tag]\r\n        tag.layers.set(1);\r\n        console.log('addTag', item);\r\n    }\r\n    function addCustomTagByModelname(targetName: string, element: HTMLElement, scale: number = 1) {\r\n        let item = scene.value!.getObjectByName(targetName)\r\n        if (!item) {\r\n            console.warn('没有找到匹配的模型---', targetName)\r\n            return\r\n        }\r\n\r\n        const tag: MyCSS3DObject = new CSS3DObject(element);\r\n        tag.scale.set(scale, scale, scale)\r\n        tag.name = targetName + '_tag_' + Date.now()\r\n\r\n        let center = new THREE.Vector3(0, 0, 0)\r\n        item.getWorldPosition(center)\r\n        item.worldToLocal(center)\r\n        tag.position.set(center.x, center.y, center.z + 2.0);\r\n        item.add(tag);\r\n        return tag\r\n    }\r\n    function addCustomTagByConfig(element: HTMLElement, tagOptions: TagOptions) {\r\n        const { position, scale, tagName } = tagOptions\r\n\r\n        const tag: MyCSS3DObject = new CSS3DObject(element);\r\n\r\n        if (scale) tag.scale.set(scale, scale, scale)\r\n        else tag.scale.set(1, 1, 1)\r\n\r\n        if (tagName) tag.name = tagName\r\n        else tag.name = '_tag_' + Date.now()\r\n\r\n        tag.position.set(position.x, position.y, position.z);\r\n        scene.value!.add(tag)\r\n\r\n        tagMap['currentTag'] ? tagMap['currentTag'].push(tag) : tagMap['currentTag'] = [tag]\r\n        tag.layers.set(1);\r\n        return tag\r\n    }\r\n    function removeTag(TagName: string) {\r\n        // const item = scene.value!.getObjectByName(TagName)\r\n        //寻找要删除的CSSObject3D\r\n        let item, keys = Object.keys(tagMap), targetI = 0, targetJ = 0\r\n        for (let i = 0, len = keys.length; i < len; i++) {\r\n            for (let j = 0, len2 = tagMap[keys[i]].length; j < len2; j++) {\r\n                if (tagMap[keys[i]][j].name === TagName) {\r\n                    item = tagMap[keys[i]][j]\r\n                    targetI = i\r\n                    targetJ = j\r\n                }\r\n            }\r\n        }\r\n\r\n        if (item) {\r\n            console.log('removeTag ' + TagName, item);\r\n            item.removeFromParent()\r\n            // tagMap['currentTag'] = []\r\n            tagMap[keys[targetI]].splice(targetJ, 1)\r\n        }\r\n    }\r\n    function removeAllTag() {\r\n        let tagArr = Object.values(tagMap).flat()\r\n        tagArr.forEach(item => {\r\n            item.removeFromParent()\r\n        })\r\n        tagMap.currentTag = []\r\n    }\r\n    function updateLabel() {\r\n        let arr = Object.values(tagMap).flat()\r\n        if (arr.length === 0) return\r\n        const cameraPosition = camera.value!.position.clone()\r\n        arr.forEach(node => {\r\n            node.lookAt(cameraPosition)\r\n        })\r\n    }\r\n    /**\r\n     * \r\n     * @param item 几乎等同于THREE.Object3D\r\n     * @param opacity 透明度\r\n     * @param changeAlone 是否只改变指定object3D的透明度，防止污染同一材质的其他Object，默认为true\r\n     */\r\n    function changeMeshOpacity(item: THREE.Object3D, opacity: number, changeAlone = true) {\r\n        // console.log('changeMeshOpacity', item);\r\n        function scanAndChange(item: THREE.Object3D) {\r\n            if (item instanceof THREE.Mesh) {\r\n                if (Array.isArray(item.material)) {\r\n                    for (let i = 0, len = item.material.length; i < len; i++) {\r\n                        let material = item.material[i];\r\n                        item.material[i] = material.clone() //防止多模型共享材质导致的意外修改\r\n                        item.material[i].alphaTest = opacity    //对于有贴图的材质，设置alphaTest，使材质不透明\r\n                        item.material[i].opacity = opacity\r\n                        if (opacity < 1.0) {  //透明度小于1.0，则关闭深度检测\r\n                            item.material[i].transparent = true;\r\n                            item.material[i].depthTest = false\r\n                            item.material[i].depthWrite = false\r\n                        } else {\r\n                            item.material[i].transparent = false;\r\n                            item.material[i].depthTest = true\r\n                            item.material[i].depthWrite = true\r\n                        }\r\n                        //将透明度为0的模型添加到射线拾取白名单，非0则从白名单取出\r\n                        const index = raycasterWhiteList.value.indexOf(item.name)\r\n                        if (opacity === 0) {\r\n                            if (index === -1) raycasterWhiteList.value.push(item.name)\r\n                        } else {\r\n                            if (index !== -1) raycasterWhiteList.value.splice(index, 1)\r\n                        }\r\n                    }\r\n                } else {\r\n                    let material = item.material;\r\n                    if (!material) {\r\n                        console.warn('scanAndChange material is', material);\r\n                        return\r\n                    }\r\n                    if (changeAlone) item.material = material.clone() //防止多模型共享材质导致的意外修改\r\n                    if (item.material) {\r\n                        item.material.alphaTest = opacity    //对于有贴图的材质，设置alphaTest，使材质不透明\r\n                        item.material.opacity = opacity\r\n                        if (opacity < 1.0) {  //透明度小于1.0，则关闭深度检测\r\n                            item.material.transparent = true;\r\n                            item.material.depthTest = false\r\n                            item.material.depthWrite = false\r\n                        } else {\r\n                            item.material.transparent = false;\r\n                            item.material.depthTest = true\r\n                            item.material.depthWrite = true\r\n                        }\r\n                        //将透明度为0的模型添加到射线拾取白名单，非0则从白名单取出\r\n                        const index = raycasterWhiteList.value.indexOf(item.name)\r\n                        if (opacity === 0) {\r\n                            if (index === -1) raycasterWhiteList.value.push(item.name)\r\n                        } else {\r\n                            if (index !== -1) raycasterWhiteList.value.splice(index, 1)\r\n                        }\r\n                    }\r\n                }\r\n            } else if (item.type === 'Group' && item.children) {\r\n                for (let i = 0, len = item.children.length; i < len; i++) {\r\n                    scanAndChange(item.children[i])\r\n                }\r\n            }\r\n        }\r\n\r\n        scanAndChange(item)\r\n    }\r\n    function disposeMeshMaterial(meshMaterial: THREE.Material) {\r\n        if (meshMaterial instanceof THREE.MeshPhysicalMaterial || meshMaterial instanceof THREE.MeshStandardMaterial) {\r\n            if (meshMaterial.map) {\r\n                meshMaterial.map.dispose()\r\n                meshMaterial.map = null\r\n            }\r\n            if (meshMaterial.normalMap) {\r\n                meshMaterial.normalMap.dispose()\r\n                meshMaterial.normalMap = null\r\n            }\r\n            if (meshMaterial.roughnessMap) {\r\n                meshMaterial.roughnessMap.dispose()\r\n                meshMaterial.roughnessMap = null\r\n            }\r\n        }\r\n        meshMaterial.dispose()\r\n    }\r\n    function disposeMesh(mesh: THREE.Mesh) {\r\n        mesh.geometry.dispose();\r\n        if (mesh.material instanceof THREE.Material) {\r\n            disposeMeshMaterial(mesh.material)\r\n        } else if (mesh.material instanceof Array) {\r\n            mesh.material.forEach(m => {\r\n                disposeMeshMaterial(m)\r\n            })\r\n        }\r\n    }\r\n    function removeObject(name: string, _dispose: boolean = true) {\r\n        let positionArr: MyPostion[] = [], objArr: THREE.Object3D[] = [], parentNameArr: string[] = []\r\n        function scanToRemove(arr: THREE.Object3D[]) {\r\n            for (let i = 0, len = arr.length; i < len; i++) {\r\n                if (!arr[i]) continue\r\n                if (arr[i].name == name) {\r\n                    const center = arr[i].position\r\n                    let position = {\r\n                        x: center.x,\r\n                        y: center.y,\r\n                        z: center.z\r\n                    }\r\n                    positionArr.push(position)\r\n                    const parentName = arr[i].parent?.name ?? ''\r\n                    parentNameArr.push(parentName)\r\n\r\n                    if (_dispose) {\r\n                        arr[i].traverse((mesh: THREE.Object3D | THREE.Mesh | THREE.Sprite) => {\r\n                            if (mesh instanceof THREE.Mesh) {\r\n                                disposeMesh(mesh as THREE.Mesh)\r\n                            }\r\n                        })\r\n                    } else {\r\n                        objArr.push(arr[i])\r\n                    }\r\n                    arr[i].removeFromParent()\r\n                    break\r\n                }\r\n                if (arr[i].children && arr[i].children.length > 0) {\r\n                    scanToRemove(arr[i].children)\r\n                }\r\n            }\r\n        }\r\n        scanToRemove(scene.value!.children)\r\n        return {\r\n            objArr, positionArr, parentNameArr\r\n        }\r\n    }\r\n    function replaceObject(gltUrls: importUrlFormat[], name: string, parentName = null) {\r\n        let { positionArr } = removeObject(name)\r\n        console.log('positionArr => ', positionArr);\r\n        let promideQueue: Promise<any>[] = []\r\n        positionArr.forEach(position => {\r\n            promideQueue.push(addModelGroupByUrls(gltUrls, parentName, position))\r\n        })\r\n        return Promise.allSettled(promideQueue)\r\n    }\r\n    function exportImage() {\r\n        const canvas = renderer!.domElement\r\n        return canvas.toDataURL('image/png')\r\n    }\r\n    function showRaining(val: boolean) {\r\n        raining = val\r\n        const isRaining = scene.value!.getObjectByName('rain_instance')\r\n        if (!isRaining && val) {\r\n            addRainDrop()\r\n        }\r\n        if (isRaining && !val) {\r\n            removeObject('rain_instance', true)\r\n        }\r\n    }\r\n    function initWater(waterName: string, params?: WaterShaderParams | InitWaterOptions) {\r\n        const existWater = scene.value!.getObjectByName(waterName)\r\n        if (!existWater) {\r\n            console.log('没有找到水面对应物体--', waterName);\r\n            return\r\n        }\r\n        if (!(existWater instanceof THREE.Mesh)) {\r\n            console.log('水面不是mesh', existWater.name);\r\n            return\r\n        }\r\n\r\n        const mesh = existWater as THREE.Mesh\r\n        const parentName = existWater.parent?.name as string\r\n\r\n        let defaultParams, water: MyWater\r\n        if (params && params.type === 1) {\r\n            defaultParams = {\r\n                uWaresFrequency: 1.0,\r\n                uScale: 0.06,\r\n                uNoiseFrequency: 2.0,\r\n                uNoiseScale: 0.45,\r\n                uXzScale: 1.5,\r\n                uLowColor: 0x000000,\r\n                uHighColor: 0x95d5ff,\r\n                uOpacity: 0.8,\r\n                uTime: 1 / 36\r\n            }\r\n            const realParams = { ...defaultParams, ...params }\r\n\r\n            water = new MyWater(mesh.geometry, realParams)\r\n\r\n            const uid = Utils.generateUUID()\r\n            renderMixins!.set(uid, () => {\r\n                (water.material as THREE.ShaderMaterial).uniforms['uTime'].value += realParams.uTime\r\n                // (water.material as THREE.ShaderMaterial).uniforms['time'].value += 1.0 / 360.0   //three.js自带的water\r\n            })\r\n        } else {\r\n            defaultParams = {\r\n                // color:0x7fc3f0\r\n            }\r\n            const realParams = { ...defaultParams, ...params }\r\n            water = new MyWater2(mesh.geometry, realParams)\r\n        }\r\n\r\n        water.position.copy(mesh.position)\r\n        water.name = waterName + '_replaced'\r\n\r\n        removeObject(waterName)\r\n        let parentObj = scene.value!.getObjectByName(parentName)\r\n        if (parentObj) parentObj.add(water)\r\n        return water\r\n    }\r\n    function initWater2(waterName: string, params?: WaterShaderParams2) {\r\n        const existWater = scene.value!.getObjectByName(waterName)\r\n        if (!existWater) {\r\n            console.log('没有找到水面对应物体--', waterName);\r\n            return\r\n        }\r\n        if (!(existWater instanceof THREE.Mesh)) {\r\n            console.log('水面不是mesh', existWater.name);\r\n            return\r\n        }\r\n\r\n        const mesh = existWater as THREE.Mesh\r\n        const options = {\r\n            waterColor: params?.waterColor ?? 0x95d5ff,\r\n            flowSpeed: params?.flowSpeed ?? 1.0 / 60.0,\r\n            alpha: params?.alpha ?? 0.8\r\n        }\r\n\r\n        //webgl\r\n        const water = new Water(mesh.geometry, {\r\n            textureWidth: 512,\r\n            textureHeight: 512,\r\n            waterNormals: new THREE.TextureLoader().load('/images/waternormals.jpg', function (texture) {\r\n                texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\r\n            }),\r\n            sunDirection: new THREE.Vector3(),\r\n            sunColor: 0xffffff,\r\n            alpha: options.alpha,\r\n            waterColor: options.waterColor,\r\n        })\r\n        const uid = Utils.generateUUID()\r\n        renderMixins!.set(uid, () => {\r\n            water.material.uniforms['time'].value += options.flowSpeed\r\n        })\r\n\r\n        //webgpu\r\n        // const loader = new THREE_GPU.TextureLoader();\r\n        // const waterNormals = loader.load('textures/waternormals.jpg');\r\n        // waterNormals.wrapS = waterNormals.wrapT = THREE.RepeatWrapping;\r\n        // const water = new WaterMesh(existWater.geometry, {\r\n        //     waterNormals:waterNormals,\r\n        //     sunDirection: new THREE_GPU.Vector3(),\r\n        //     sunColor: 0xffffff,\r\n        //     alpha: options.alpha,\r\n        //     waterColor: options.waterColor,\r\n        // })\r\n\r\n        water.material.transparent = true\r\n        water.position.copy(mesh.position)\r\n        water.name = waterName + '_replaced'\r\n\r\n        const parentName = mesh.parent?.name as string\r\n        removeObject(waterName)\r\n        let parentObj = scene.value!.getObjectByName(parentName)\r\n        if (parentObj) parentObj.add(water)\r\n\r\n        return water\r\n    }\r\n    function initWaterCube(waterName: string, params?: WaterCubeShaderParams) {\r\n        const existWater = scene.value!.getObjectByName(waterName)\r\n        if (!existWater) {\r\n            console.log('没有找到水面对应物体--', waterName);\r\n            return\r\n        }\r\n        const box3 = new THREE.Box3().setFromObject(existWater)\r\n        const size = new THREE.Vector3();\r\n        box3.getSize(size);\r\n\r\n        const parentName = existWater.parent?.name as string\r\n        const width = size.x;\r\n        const height = size.y;\r\n        const depth = size.z\r\n\r\n        const geometry = new THREE.BoxGeometry(width, depth, height);\r\n\r\n        const defaultParams = params ? params : {\r\n            uLowColor: 0x6a7a81,\r\n            uHighColor: 0x6a7a81,\r\n            uOpacity: .5,\r\n            uRealLevel: height,\r\n            uNeedLevel: height,\r\n            reflectivity: 0.02,\r\n            noiseRatio: 0.446025403784438,\r\n            uOffset: 0.015,\r\n        }\r\n\r\n        const water = new MyWaterCube(geometry, defaultParams)\r\n        water.rotation.x = - Math.PI * 0.5;\r\n        water.position.copy(existWater.position)\r\n        water.name = waterName + '_replaced'\r\n\r\n        removeObject(waterName)\r\n        let parentObj = scene.value!.getObjectByName(parentName)\r\n        if (parentObj) parentObj.add(water)\r\n\r\n        const uid = Utils.generateUUID()\r\n        renderMixins!.set(uid, () => {\r\n            (water.material as THREE.ShaderMaterial).uniforms['iTime'].value += 1.0 / 36.0\r\n        })\r\n        return water\r\n\r\n    }\r\n    function addStyleSheet() {\r\n        let style = document.createElement('style');\r\n        document.head.appendChild(style);\r\n        let css = '.no-pointer-events { pointer-events: none !important; }'\r\n        style.sheet?.insertRule(css, 0)\r\n    }\r\n    function focusModel(item: THREE.Object3D, distance: number = 1, type: StressType = stressType) {\r\n        highlightModel(item, type)\r\n\r\n        // 沿当前视线前进到距离目标指定单位的位置\r\n        const pos = new THREE.Vector3()\r\n        item.getWorldPosition(pos)\r\n        const unitVector = new THREE.Vector3().subVectors(pos, camera.value!.position).normalize()\r\n        const pos2 = pos.clone().add(unitVector.multiplyScalar(-distance))\r\n\r\n        changeCameraFocus(pos2, pos)\r\n    }\r\n\r\n    return {\r\n        highlightColor,\r\n        camera,\r\n        eventBus,\r\n        scene,\r\n        renderMixins,\r\n        allowMeasure,\r\n        mixers,\r\n        mixerMap,\r\n        cacheModel,\r\n        points,\r\n        orbitControls,\r\n        isContinue,\r\n        isFirstView,\r\n        raycasterWhiteList,\r\n        centerInitCameraPosition,\r\n        DISTANCE,\r\n        tweenGroup,\r\n        startPointerLockControls,\r\n        exitPointerLockControls,\r\n        listenerAboutPointerLockControlsClick,\r\n        resetCamera,\r\n        addCustomTagByModelname,\r\n        addCustomTagByConfig,\r\n        disposeMesh,\r\n        init,\r\n        resetBg,\r\n        initLight,\r\n        initLoader,\r\n        disabledOrbitControls,\r\n        changeOrbitTarget,\r\n        recoverMaterial,\r\n        highlightModel,\r\n        changeCameraFocus,\r\n        clearScene,\r\n        destroy,\r\n        initWaterCube,\r\n        addTag,\r\n        removeTag,\r\n        removeAllTag,\r\n        clearMeasure,\r\n        changeMeshOpacity,\r\n        addModelGroupByUrls,\r\n        removeObject,\r\n        replaceObject,\r\n        exportImage,\r\n        getCenterFromBounding,\r\n        showRaining,\r\n        removeMixers,\r\n        initWater,\r\n        initWater2,\r\n        focusModel,\r\n        recoverSelect,\r\n        resize\r\n    }\r\n}\r\n\r\nexport default useThree","import {\r\n    Vector3,\r\n    Line,\r\n    Points,\r\n    Color,\r\n    BufferGeometry,\r\n    Float32BufferAttribute,\r\n    PointsMaterial\r\n} from \"three\";\r\n//解决线宽无法配置\r\nimport { Line2 } from 'three/examples/jsm/lines/Line2.js';\r\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial.js';\r\nimport { LineGeometry } from 'three/examples/jsm/lines/LineGeometry.js';\r\n\r\ninterface MyPathOptions{\r\n    /**行走速度，默认0.005 */\r\n    speed?:number,\r\n    /**转向速度，默认0.05 */\r\n    turnSpeedFactor?:number\r\n}\r\n\r\ninterface customObj{\r\n    position:Vector3,\r\n    direction: Vector3,\r\n\r\n    turn:boolean, //是否需要转向\r\n    preUp:Vector3, //当需要转向时的上次的方向\r\n    rotateData:[number, number, number, number], //模型沿y轴旋转角度\r\n    preRotate:[number, number, number, number]\r\n}\r\n\r\nfunction getRotationAxisAndAngle(a: [number, number, number], b: [number, number, number]):[number, number, number, number] {\r\n    // 计算旋转轴\r\n    const rotationAxis = [\r\n        a[1] * b[2] - a[2] * b[1],\r\n        a[2] * b[0] - a[0] * b[2],\r\n        a[0] * b[1] - a[1] * b[0]\r\n    ];\r\n\r\n    // 计算旋转角度\r\n    const dotProduct = a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n    const magnitudeA = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);\r\n    const magnitudeB = Math.sqrt(b[0] * b[0] + b[1] * b[1] + b[2] * b[2]);\r\n    const rotationAngle = Math.acos(dotProduct / (magnitudeA * magnitudeB));\r\n\r\n    // 考虑旋转方向\r\n    if ((rotationAxis[0] * a[0] + rotationAxis[1] * a[1] + rotationAxis[2] * a[2]) < 0) {\r\n        return [-rotationAxis[0], -rotationAxis[1], -rotationAxis[2], -rotationAngle];\r\n    } else {\r\n        return [rotationAxis[0], rotationAxis[1], rotationAxis[2], rotationAngle];\r\n    }\r\n}\r\n\r\n//自定义路径类\r\nexport default class myPath {\r\n    pointsArr: Vector3[];\r\n    line: Line | Line2 = new Line();\r\n    points: Points  = new Points();\r\n    pointPercentArr: number[] = [];\r\n    originUp: Vector3;\r\n    preUp: Vector3;\r\n    loop: boolean;\r\n    perce: number;\r\n    speed: number;\r\n    turnSpeedFactor: number;\r\n    alreadyRotate: number;\r\n    obj: customObj | null = null;\r\n    preTime: number;\r\n    firstTurn: boolean;\r\n    preRotate: [number, number, number, number];\r\n\r\n    constructor(array: number[], options:MyPathOptions = {}) {\r\n\r\n        //将传进来的数组转换为Vec3集合\r\n        let pointsArr = [];\r\n        if (array.length % 3 !== 0) {\r\n            throw new Error('错误，数据的个数非3的整数倍！');\r\n        }\r\n        for (let index = 0; index < array.length; index += 3) {\r\n            pointsArr.push(new Vector3(array[index], array[index + 1], array[index + 2]));\r\n        }\r\n\r\n        //顶点位置三维向量数组\r\n        this.pointsArr = pointsArr;\r\n\r\n        //折线几何体\r\n        {\r\n            /* 旧的线段，无法调节线宽\r\n            let lineMaterial = new LineBasicMaterial({\r\n                color: 0xff00ff\r\n            });\r\n            let lineGeometry = new BufferGeometry().setFromPoints(pointsArr);\r\n            this.line = new Line(lineGeometry, lineMaterial);\r\n            this.line.name = 'CharacterLine' */\r\n\r\n            //新的 线\r\n            let positions = pointsArr.map(item => [item.x, item.y, item.z]).flat()\r\n            const lineColor = new Color(0xf9f8ed)\r\n            let colors = pointsArr.map(_item => [lineColor.r, lineColor.g, lineColor.b]).flat()\r\n            const geometry = new LineGeometry();\r\n            geometry.setPositions( positions );\r\n            geometry.setColors( colors );\r\n\r\n            const matLine = new LineMaterial( {\r\n                color: 0x00d0dd,\r\n                linewidth: 4, // in world units with size attenuation, pixels otherwise\r\n                vertexColors: false,\r\n    \r\n                //resolution:  // to be set by renderer, eventually\r\n                dashed: false,\r\n                alphaToCoverage: true,\r\n            } );\r\n            matLine.resolution.set(window.innerWidth, window.innerHeight)\r\n            //创建线对象\r\n            this.line = new Line2(geometry, matLine)\r\n            this.line.name = 'CharacterLine'\r\n        }\r\n\r\n\r\n        //锚点几何体\r\n        {\r\n            let pointsBufferGeometry = new BufferGeometry();\r\n            pointsBufferGeometry.setAttribute('position', new Float32BufferAttribute(array, 3));\r\n            let pointsMaterial = new PointsMaterial({ color: 0xffff00, size: 10 });\r\n            this.points = new Points(pointsBufferGeometry, pointsMaterial);\r\n        }\r\n\r\n\r\n        //计算每个锚点在整条折线上所占的百分比\r\n        {\r\n            let distanceArr = []; //每段距离\r\n            let sumDistance = 0;  //总距离\r\n            for (let index = 0; index < pointsArr.length - 1; index++) {\r\n                distanceArr.push(pointsArr[index].distanceTo(pointsArr[index + 1]));\r\n            }\r\n            sumDistance = distanceArr.reduce(function (tmp, item) {\r\n                return tmp + item;\r\n            })\r\n\r\n\r\n            let disPerSumArr = [0];\r\n            disPerSumArr.push(distanceArr[0]);\r\n            distanceArr.reduce(function (tmp, item) {\r\n                disPerSumArr.push(tmp + item);\r\n                return tmp + item;\r\n            })\r\n\r\n            disPerSumArr.forEach((value, index) => {\r\n                disPerSumArr[index] = value / sumDistance;\r\n            })\r\n            this.pointPercentArr = disPerSumArr;\r\n        }\r\n        // console.log(this.pointPercentArr);\r\n\r\n\r\n        //上一次的朝向\r\n\r\n        // this.preUp = new Vector3(0, 0, 0);\r\n        this.originUp = this.preUp = new Vector3().subVectors(this.pointsArr[1], this.pointsArr[0]);\r\n        this.loop = true\r\n\r\n\r\n        //run函数需要的数据\r\n        this.perce = 0; //控制当前位置占整条线百分比\r\n        this.speed = options.speed ? options.speed : 0.0005;  //控制是否运动\r\n        this.turnSpeedFactor = options.turnSpeedFactor ? options.turnSpeedFactor : 0.05;  //转向速度因子\r\n        this.alreadyRotate = 0;  //已经转向的角度\r\n\r\n        this.preTime = new Date().getTime();\r\n        this.firstTurn = false;\r\n\r\n        this.preRotate = [0, 0, 0, 0]\r\n    }\r\n\r\n    //获取点，是否转弯，朝向等\r\n    getPoint(percent:number) {\r\n\r\n        let indexPre = 0;\r\n        let indexNext = 0;\r\n        let turn = false;\r\n        let rotateData:[number, number, number, number] = [0, 0, 0, 0]\r\n        const pointLen = this.pointPercentArr.length\r\n\r\n        for (let i = 0; i < pointLen; i++) {\r\n            if (percent >= this.pointPercentArr[i] && percent < this.pointPercentArr[i + 1]) {\r\n                indexNext = i + 1;\r\n                indexPre = i;\r\n            }\r\n            if (percent !== 0 && percent === this.pointPercentArr[i]) {\r\n                turn = true;\r\n            }\r\n        }\r\n\r\n        let factor = (percent - this.pointPercentArr[indexPre]) / (this.pointPercentArr[indexNext] - this.pointPercentArr[indexPre]);\r\n        let position = new Vector3();\r\n        position.lerpVectors(this.pointsArr[indexPre], this.pointsArr[indexNext], factor);\r\n\r\n        //计算朝向\r\n        let up = new Vector3().subVectors(this.pointsArr[indexNext], this.pointsArr[indexPre]);\r\n        up.setY(0)  //限制在XOZ平面旋转\r\n        let nextup = null\r\n        //如果存在下个转角，记录下个转角应旋转的角度\r\n        if (indexNext + 1 < this.pointsArr.length) {\r\n            nextup = new Vector3(0, 0, 0).subVectors(this.pointsArr[indexNext + 1], this.pointsArr[indexNext]);\r\n            nextup.setY(0)  //限制在XOZ平面旋转\r\n            //Mycode\r\n            rotateData = getRotationAxisAndAngle([up.x, up.y, up.z], [nextup.x, nextup.y, nextup.z])\r\n        }\r\n        const realUp = new Vector3(0, 1, 0)   //模型朝向为脚底到头顶，所以朝向应为指向世界坐标y轴向上\r\n\r\n        let preUp = this.preUp;\r\n        let preRotate = this.preRotate;\r\n        if (this.preUp.x != up.x || this.preUp.y != up.y || this.preUp.z != up.z) {\r\n            console.log('当前朝向与上次朝向不等，将turn置为true！', up, this.preUp);\r\n            turn = true;\r\n        }\r\n\r\n        this.preUp = up;\r\n        this.preRotate = rotateData;\r\n\r\n        return {\r\n            position,\r\n            direction: realUp,\r\n\r\n            turn, //是否需要转向\r\n            preUp, //当需要转向时的上次的方向\r\n            rotateData, //模型沿y轴旋转角度\r\n            preRotate\r\n\r\n        };\r\n\r\n    }\r\n\r\n\r\n    //参数：是否运动，运动的对象，是否运动到结尾\r\n    run(animata:boolean, camera:any, end:boolean) {\r\n\r\n        if (end) {\r\n\r\n            this.perce = 0.99999;\r\n            this.obj = this.getPoint(this.perce);\r\n\r\n            //修改位置\r\n            let posi = this.obj.position;\r\n\r\n            camera.position.set(posi.x, posi.y, posi.z); //相机漫游2\r\n        }\r\n\r\n        else if (animata) {\r\n            if (this.perce >= 1.0 && this.loop) {\r\n                this.perce = 0\r\n                this.preUp = this.originUp\r\n            }\r\n\r\n            //转弯时（线性过渡版）\r\n            if (this.obj && this.obj.turn) {\r\n                //逐渐修改朝向\r\n\r\n                console.log('alreadyRotate', (this.obj.preRotate[3] / 180 * Math.PI), this.alreadyRotate);\r\n                let rotateAxis = new Vector3(this.obj.preRotate[0], this.obj.preRotate[2], this.obj.preRotate[1]).normalize()\r\n                if (this.alreadyRotate + this.turnSpeedFactor > this.obj.preRotate[3]) {\r\n                // if (this.alreadyRotate + this.turnSpeedFactor > (this.obj.preRotate[3] / 180 * Math.PI)) {\r\n                    camera.rotateOnAxis(rotateAxis, this.obj.preRotate[3] - this.alreadyRotate)\r\n                    this.alreadyRotate = 0;\r\n                    this.perce += this.speed;\r\n                    this.obj = this.getPoint(this.perce);\r\n                } else {\r\n                    camera.rotateOnAxis(rotateAxis, this.turnSpeedFactor)\r\n                    this.alreadyRotate += this.turnSpeedFactor;\r\n                }\r\n            }\r\n\r\n            //非转弯时\r\n            else {\r\n\r\n                this.obj = this.getPoint(this.perce);\r\n\r\n                //修改位置\r\n                let posi = this.obj.position;\r\n\r\n                camera.position.set(posi.x, posi.y, posi.z); //相机漫游2\r\n\r\n                this.perce += this.speed;\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n}\r\n","/*\n (c) 2011-2015, Vladimir Agafonkin\n SunCalc is a JavaScript library for calculating sun/moon position and light phases.\n https://github.com/mourner/suncalc\n*/\n\n(function () { 'use strict';\n\n// shortcuts for easier to read formulas\n\nvar PI   = Math.PI,\n    sin  = Math.sin,\n    cos  = Math.cos,\n    tan  = Math.tan,\n    asin = Math.asin,\n    atan = Math.atan2,\n    acos = Math.acos,\n    rad  = PI / 180;\n\n// sun calculations are based on http://aa.quae.nl/en/reken/zonpositie.html formulas\n\n\n// date/time constants and conversions\n\nvar dayMs = 1000 * 60 * 60 * 24,\n    J1970 = 2440588,\n    J2000 = 2451545;\n\nfunction toJulian(date) { return date.valueOf() / dayMs - 0.5 + J1970; }\nfunction fromJulian(j)  { return new Date((j + 0.5 - J1970) * dayMs); }\nfunction toDays(date)   { return toJulian(date) - J2000; }\n\n\n// general calculations for position\n\nvar e = rad * 23.4397; // obliquity of the Earth\n\nfunction rightAscension(l, b) { return atan(sin(l) * cos(e) - tan(b) * sin(e), cos(l)); }\nfunction declination(l, b)    { return asin(sin(b) * cos(e) + cos(b) * sin(e) * sin(l)); }\n\nfunction azimuth(H, phi, dec)  { return atan(sin(H), cos(H) * sin(phi) - tan(dec) * cos(phi)); }\nfunction altitude(H, phi, dec) { return asin(sin(phi) * sin(dec) + cos(phi) * cos(dec) * cos(H)); }\n\nfunction siderealTime(d, lw) { return rad * (280.16 + 360.9856235 * d) - lw; }\n\nfunction astroRefraction(h) {\n    if (h < 0) // the following formula works for positive altitudes only.\n        h = 0; // if h = -0.08901179 a div/0 would occur.\n\n    // formula 16.4 of \"Astronomical Algorithms\" 2nd edition by Jean Meeus (Willmann-Bell, Richmond) 1998.\n    // 1.02 / tan(h + 10.26 / (h + 5.10)) h in degrees, result in arc minutes -> converted to rad:\n    return 0.0002967 / Math.tan(h + 0.00312536 / (h + 0.08901179));\n}\n\n// general sun calculations\n\nfunction solarMeanAnomaly(d) { return rad * (357.5291 + 0.98560028 * d); }\n\nfunction eclipticLongitude(M) {\n\n    var C = rad * (1.9148 * sin(M) + 0.02 * sin(2 * M) + 0.0003 * sin(3 * M)), // equation of center\n        P = rad * 102.9372; // perihelion of the Earth\n\n    return M + C + P + PI;\n}\n\nfunction sunCoords(d) {\n\n    var M = solarMeanAnomaly(d),\n        L = eclipticLongitude(M);\n\n    return {\n        dec: declination(L, 0),\n        ra: rightAscension(L, 0)\n    };\n}\n\n\nvar SunCalc = {};\n\n\n// calculates sun position for a given date and latitude/longitude\n\nSunCalc.getPosition = function (date, lat, lng) {\n\n    var lw  = rad * -lng,\n        phi = rad * lat,\n        d   = toDays(date),\n\n        c  = sunCoords(d),\n        H  = siderealTime(d, lw) - c.ra;\n\n    return {\n        azimuth: azimuth(H, phi, c.dec),\n        altitude: altitude(H, phi, c.dec)\n    };\n};\n\n\n// sun times configuration (angle, morning name, evening name)\n\nvar times = SunCalc.times = [\n    [-0.833, 'sunrise',       'sunset'      ],\n    [  -0.3, 'sunriseEnd',    'sunsetStart' ],\n    [    -6, 'dawn',          'dusk'        ],\n    [   -12, 'nauticalDawn',  'nauticalDusk'],\n    [   -18, 'nightEnd',      'night'       ],\n    [     6, 'goldenHourEnd', 'goldenHour'  ]\n];\n\n// adds a custom time to the times config\n\nSunCalc.addTime = function (angle, riseName, setName) {\n    times.push([angle, riseName, setName]);\n};\n\n\n// calculations for sun times\n\nvar J0 = 0.0009;\n\nfunction julianCycle(d, lw) { return Math.round(d - J0 - lw / (2 * PI)); }\n\nfunction approxTransit(Ht, lw, n) { return J0 + (Ht + lw) / (2 * PI) + n; }\nfunction solarTransitJ(ds, M, L)  { return J2000 + ds + 0.0053 * sin(M) - 0.0069 * sin(2 * L); }\n\nfunction hourAngle(h, phi, d) { return acos((sin(h) - sin(phi) * sin(d)) / (cos(phi) * cos(d))); }\nfunction observerAngle(height) { return -2.076 * Math.sqrt(height) / 60; }\n\n// returns set time for the given sun altitude\nfunction getSetJ(h, lw, phi, dec, n, M, L) {\n\n    var w = hourAngle(h, phi, dec),\n        a = approxTransit(w, lw, n);\n    return solarTransitJ(a, M, L);\n}\n\n\n// calculates sun times for a given date, latitude/longitude, and, optionally,\n// the observer height (in meters) relative to the horizon\n\nSunCalc.getTimes = function (date, lat, lng, height) {\n\n    height = height || 0;\n\n    var lw = rad * -lng,\n        phi = rad * lat,\n\n        dh = observerAngle(height),\n\n        d = toDays(date),\n        n = julianCycle(d, lw),\n        ds = approxTransit(0, lw, n),\n\n        M = solarMeanAnomaly(ds),\n        L = eclipticLongitude(M),\n        dec = declination(L, 0),\n\n        Jnoon = solarTransitJ(ds, M, L),\n\n        i, len, time, h0, Jset, Jrise;\n\n\n    var result = {\n        solarNoon: fromJulian(Jnoon),\n        nadir: fromJulian(Jnoon - 0.5)\n    };\n\n    for (i = 0, len = times.length; i < len; i += 1) {\n        time = times[i];\n        h0 = (time[0] + dh) * rad;\n\n        Jset = getSetJ(h0, lw, phi, dec, n, M, L);\n        Jrise = Jnoon - (Jset - Jnoon);\n\n        result[time[1]] = fromJulian(Jrise);\n        result[time[2]] = fromJulian(Jset);\n    }\n\n    return result;\n};\n\n\n// moon calculations, based on http://aa.quae.nl/en/reken/hemelpositie.html formulas\n\nfunction moonCoords(d) { // geocentric ecliptic coordinates of the moon\n\n    var L = rad * (218.316 + 13.176396 * d), // ecliptic longitude\n        M = rad * (134.963 + 13.064993 * d), // mean anomaly\n        F = rad * (93.272 + 13.229350 * d),  // mean distance\n\n        l  = L + rad * 6.289 * sin(M), // longitude\n        b  = rad * 5.128 * sin(F),     // latitude\n        dt = 385001 - 20905 * cos(M);  // distance to the moon in km\n\n    return {\n        ra: rightAscension(l, b),\n        dec: declination(l, b),\n        dist: dt\n    };\n}\n\nSunCalc.getMoonPosition = function (date, lat, lng) {\n\n    var lw  = rad * -lng,\n        phi = rad * lat,\n        d   = toDays(date),\n\n        c = moonCoords(d),\n        H = siderealTime(d, lw) - c.ra,\n        h = altitude(H, phi, c.dec),\n        // formula 14.1 of \"Astronomical Algorithms\" 2nd edition by Jean Meeus (Willmann-Bell, Richmond) 1998.\n        pa = atan(sin(H), tan(phi) * cos(c.dec) - sin(c.dec) * cos(H));\n\n    h = h + astroRefraction(h); // altitude correction for refraction\n\n    return {\n        azimuth: azimuth(H, phi, c.dec),\n        altitude: h,\n        distance: c.dist,\n        parallacticAngle: pa\n    };\n};\n\n\n// calculations for illumination parameters of the moon,\n// based on http://idlastro.gsfc.nasa.gov/ftp/pro/astro/mphase.pro formulas and\n// Chapter 48 of \"Astronomical Algorithms\" 2nd edition by Jean Meeus (Willmann-Bell, Richmond) 1998.\n\nSunCalc.getMoonIllumination = function (date) {\n\n    var d = toDays(date || new Date()),\n        s = sunCoords(d),\n        m = moonCoords(d),\n\n        sdist = 149598000, // distance from Earth to Sun in km\n\n        phi = acos(sin(s.dec) * sin(m.dec) + cos(s.dec) * cos(m.dec) * cos(s.ra - m.ra)),\n        inc = atan(sdist * sin(phi), m.dist - sdist * cos(phi)),\n        angle = atan(cos(s.dec) * sin(s.ra - m.ra), sin(s.dec) * cos(m.dec) -\n                cos(s.dec) * sin(m.dec) * cos(s.ra - m.ra));\n\n    return {\n        fraction: (1 + cos(inc)) / 2,\n        phase: 0.5 + 0.5 * inc * (angle < 0 ? -1 : 1) / Math.PI,\n        angle: angle\n    };\n};\n\n\nfunction hoursLater(date, h) {\n    return new Date(date.valueOf() + h * dayMs / 24);\n}\n\n// calculations for moon rise/set times are based on http://www.stargazing.net/kepler/moonrise.html article\n\nSunCalc.getMoonTimes = function (date, lat, lng, inUTC) {\n    var t = new Date(date);\n    if (inUTC) t.setUTCHours(0, 0, 0, 0);\n    else t.setHours(0, 0, 0, 0);\n\n    var hc = 0.133 * rad,\n        h0 = SunCalc.getMoonPosition(t, lat, lng).altitude - hc,\n        h1, h2, rise, set, a, b, xe, ye, d, roots, x1, x2, dx;\n\n    // go in 2-hour chunks, each time seeing if a 3-point quadratic curve crosses zero (which means rise or set)\n    for (var i = 1; i <= 24; i += 2) {\n        h1 = SunCalc.getMoonPosition(hoursLater(t, i), lat, lng).altitude - hc;\n        h2 = SunCalc.getMoonPosition(hoursLater(t, i + 1), lat, lng).altitude - hc;\n\n        a = (h0 + h2) / 2 - h1;\n        b = (h2 - h0) / 2;\n        xe = -b / (2 * a);\n        ye = (a * xe + b) * xe + h1;\n        d = b * b - 4 * a * h1;\n        roots = 0;\n\n        if (d >= 0) {\n            dx = Math.sqrt(d) / (Math.abs(a) * 2);\n            x1 = xe - dx;\n            x2 = xe + dx;\n            if (Math.abs(x1) <= 1) roots++;\n            if (Math.abs(x2) <= 1) roots++;\n            if (x1 < -1) x1 = x2;\n        }\n\n        if (roots === 1) {\n            if (h0 < 0) rise = i + x1;\n            else set = i + x1;\n\n        } else if (roots === 2) {\n            rise = i + (ye < 0 ? x2 : x1);\n            set = i + (ye < 0 ? x1 : x2);\n        }\n\n        if (rise && set) break;\n\n        h0 = h2;\n    }\n\n    var result = {};\n\n    if (rise) result.rise = hoursLater(t, rise);\n    if (set) result.set = hoursLater(t, set);\n\n    if (!rise && !set) result[ye > 0 ? 'alwaysUp' : 'alwaysDown'] = true;\n\n    return result;\n};\n\n\n// export as Node module / AMD module / browser variable\nif (typeof exports === 'object' && typeof module !== 'undefined') module.exports = SunCalc;\nelse if (typeof define === 'function' && define.amd) define(SunCalc);\nelse window.SunCalc = SunCalc;\n\n}());\n"],"names":["TRIANGLE_INTERSECT_COST","IS_LEAFNODE_FLAG","FLOAT32_EPSILON","Math","pow","SKIP_GENERATION","Symbol","getTriCount","geo","index","count","attributes","position","getVertexCount","ensureIndex","options","vertexCount","BufferConstructor","ArrayBuffer","Uint32Array","Uint16Array","getIndexArray","useSharedArrayBuffer","SharedArrayBuffer","setIndex","BufferAttribute","i","getFullGeometryRange","range","triCount","drawRange","start","end","offset","max","min","floor","getRootIndexRanges","groups","length","ranges","rangeBoundaries","Set","drawRangeStart","drawRangeEnd","group","groupStart","groupEnd","add","sortedBoundaries","Array","from","values","sort","a","b","push","getBounds","triangleBounds","target","centroidTarget","minx","Infinity","miny","minz","maxx","maxy","maxz","cminx","cminy","cminz","cmaxx","cmaxy","cmaxz","cx","hx","lx","rx","cy","hy","ly","ry","cz","hz","lz","rz","arrayToBox","nodeIndex32","array","x","y","z","getLongestEdgeIndex","bounds","splitDimIdx","splitDist","dist","copyBounds","source","set","unionBounds","aVal","bVal","d","d3","expandByTriangleBounds","startIndex","tCenter","tHalf","tMin","tMax","computeSurfaceArea","d0","d1","d2","BIN_COUNT","binsSort","candidate","sahBins","fill","map","Float32Array","rightCacheBounds","leftCacheBounds","leftBounds","MeshBVHNode","constructor","this","boundingData","partition","indirectBuffer","split","left","right","pos","axisOffset","axis","t0","tb","partition_indirect","t","IS_LEAF","n16","uint16Array","OFFSET","n32","uint32Array","COUNT","LEFT_NODE","RIGHT_NODE","SPLIT_AXIS","float32Array","uint8Array","MAX_POINTER","countNodes","node","populateBuffer","byteOffset","buffer","Uint8Array","_populateBuffer","stride4Offset","stride2Offset","isLeaf","l","byteLength","splitAxis","nextUnusedPointer","Error","buildTree","bvh","maxDepth","verbose","maxLeafTris","strategy","onProgress","indirect","_indirectBuffer","geometry","indexArray","partionFunc","totalTriangles","cacheCentroidBoundingData","reachedMaxDepth","root","splitNode","centroidBoundingData","depth","console","warn","triggerProgress","nodeBoundingData","avg","getAverage","rootSurfaceArea","bestCost","cStart","cEnd","axisLeft","binWidth","truncatedBins","c","bin","splitCount","bi","splice","center","leftCount","rightCount","rightBounds","leftProb","rightProb","cost","binIndex","lastBin","nextBin","binCount","getOptimalSplit","splitOffset","lstart","lcount","rstart","rcount","trianglesProcessed","buildPackedTree","useUint32","byteCount","generateIndirectBuffer","finalGroup","total","forEach","hasGroupGaps","posAttr","normalized","posArr","bufferOffset","stride","isInterleavedBufferAttribute","data","getters","tri","tri3","tri6","ai","ci","el","halfExtents","el2","abs","computeTriangleBounds","geometryRanges","_roots","nodeCount","SeparatingAxisBounds","setFromPointsField","points","field","val","setFromPoints","p","dot","isSeparated","other","prototype","setFromBox","Vector3","box","boxMin","boxMax","closestPointLineToLine","dir1","dir2","v02","l1","l2","result","v0","v10","v2","v32","subVectors","d0232","d3210","d3232","d0210","denom","closestPointsSegmentToSegment","paramResult","Vector2","temp1","temp2","target1","target2","at","closestPointToPoint","p2","closestPoint","closestPoint2","distanceToSquared","copy","sphereIntersectTriangle","closestPointTemp","projectedPointTemp","planeTemp","Plane","lineTemp","Line3","sphere","triangle","radius","distanceTo","plane","getPlane","distanceToPoint","pp","projectPoint","containsPoint","isNearZero","value","ExtendedTriangle","Triangle","args","super","isExtendedTriangle","satAxes","satBounds","Sphere","needsUpdate","intersectsSphere","update","axis0","sab0","getNormal","axis1","sab1","axis2","sab2","axis3","sab3","setFromNormalAndCoplanarPoint","closestPointToSegment","point1","point2","edge","segment","distSq","closestDistanceSq","nexti","sqrt","intersectsTriangle","saTri2","arr1","arr2","cachedSatBounds","cachedSatBounds2","cachedAxis","dir","tempDir","edge1","edge2","tempPoint","triIntersectPlane","targetEdge","startPointIntersection","delta","startIntersects","normal","doesIntersect","intersectLine","suppressLog","plane1","plane2","satBounds1","satAxes1","sb","sa","satBounds2","satAxes2","sa1","i2","sa2","crossVectors","count1","count2","tmp","s1","e1","s2","e2","point","distanceToTriangle","cornerFields","line1","line2","lineTarget","getCenter","otherVec","thisVec","f11","f12","f21","f22","OrientedBox","matrix","isOrientedBox","Matrix4","invMatrix","alignedSatBounds","v","applyMatrix4","minVec","pi","invert","intersectsBox","aabbBounds","saTri","pointsArr","triSatBounds","triSatAxes","clamp","distanceToBox","xyzFields","segments1","segments2","threshold","threshold2","i1","nextIndex","nextIndex2","index2","p1","f1","f2","f3","PrimitivePool","getNewPrimitive","_getNewPrimitive","_primitives","getPrimitive","primitives","pop","releasePrimitive","primitive","ExtendedTrianglePoolBase","ExtendedTrianglePool","BufferStack","stack","prevBuffer","setBuffer","clearBuffer","_box1","_box2","boxStack","boxPool","Box3","shapecast","intersectsBounds","intersectsRange","boundsTraverseOrder","shapecastTraverse","intersectsBoundsFunc","intersectsRangeFunc","nodeScoreFunc","nodeIndexByteOffset","nodeIndex16","score1","score2","box1","box2","c1","c2","temp","c1Intersection","c1StopTraversal","getLeftOffset","getRightEndOffset","c2Intersection","c2StopTraversal","IS_GT_REVISION_169","parseInt","REVISION","_vA","_vB","_vC","_uvA","_uvB","_uvC","_normalA","_normalB","_normalC","_intersectionPoint","checkBufferGeometryIntersection","ray","uv","uv1","side","near","far","fromBufferAttribute","intersection","pA","pB","pC","intersect","BackSide","intersectTriangle","DoubleSide","distance","origin","clone","checkIntersection","barycoord","getBarycoord","getInterpolation","direction","multiplyScalar","face","materialIndex","faceIndex","intersectTri","intersections","triOffset","getX","setTriangle","ta","tc","i0","getY","getZ","iterateOverTriangles","intersectsTriangleFunc","contained","refit","nodeIndices","isArray","indexArr","roots","_traverse","node32Index","force","node16Index","offsetLeft","offsetRight","forceChildren","includesLeft","includesRight","has","traverseRight","leftChange","rightChange","didChange","lefti","righti","minLeftValue","maxLeftValue","minRightValue","maxRightValue","intersectRay","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","ox","oy","oz","isNaN","iterateOverTriangles_indirect","resolveTriangleIndex","raycast","intersects","_raycast","intersectTris","leftIndex","rightIndex","_xyzFields","raycastFirst","_raycastFirst","res","intersectClosestTri","xyzAxis","leftToRight","c1Result","c2Result","boundingBox","triangle2","invertedMat","obb","obb2","intersectsGeometry","otherGeometry","geometryToBvh","_intersectsGeometry","cachedObb","computeBoundingBox","thisGeometry","thisIndex","thisPos","boundsTree","tempMatrix","temp3","temp4","closestPointToGeometry","minThreshold","maxThreshold","otherPos","otherIndex","tempTarget1","tempTargetDest1","tempTarget2","tempTargetDest2","closestDistance","closestDistanceTriIndex","closestDistanceOtherTriIndex","score","otherOffset","otherCount","sub","refit_indirect","j","raycast_indirect","intersectTris_indirect","raycastFirst_indirect","intersectClosestTri_indirect","intersectsGeometry_indirect","ti","closestPointToGeometry_indirect","otherBvh","ti2","_bufferStack1","_bufferStack2","_boxPool","_leftBox1","_rightBox1","_leftBox2","_rightBox2","_active","node1Index32","node2Index32","matrix2to1","matrix1to2","intersectsRangesFunc","node1IndexByteOffset","node2IndexByteOffset","depth1","depth2","currBox","reversed","bufferStack1","bufferStack2","float32Array1","uint32Array1","uint16Array1","float32Array2","uint32Array2","uint16Array2","node2Index16","isLeaf1","isLeaf2","newBox","cl1","cr1","intersectCl1","intersectCr1","cl2","cr2","leftIntersects","rightIntersects","tempBox","DEFAULT_OPTIONS","setBoundingBox","MeshBVH","serialize","cloneBuffers","rootData","indexAttribute","getIndex","slice","deserialize","Boolean","newIndex","isBufferGeometry","Object","assign","getBoundingBox","traverse","callback","rootIndex","BYTES_PER_NODE","materialOrSide","FrontSide","isMaterial","isArrayMaterial","raycastFunc","materialSide","startCount","jl","closestResult","raycastFirstFunc","geomToMesh","intersectsGeometryFunc","callbacks","iterateFunc","originalIntersectsRange","nodeIndex","bvhcast","matrixToLocal","intersectsRanges","intersectsTriangles","triangle1","indexAttr1","positionAttr1","assignTriangle1","indexAttr2","positionAttr2","assignTriangle2","iterateOverDoubleTriangles","offset1","offset2","index1","originalIntersectsRanges","otherRoots","invMat","il","localBox","boxToMesh","minThresholdSq","maxThresholdSq","triIndex","makeEmpty","union","convertRaycastIntersect","hit","object","raycaster","matrixWorld","Ray","tmpInverseMatrix","origMeshRaycastFunc","Mesh","origBatchedRaycastFunc","BatchedMesh","_worldScale","_mesh","_batchIntersects","acceleratedBatchedMeshRaycast","boundsTrees","drawInfo","_drawInfo","_instanceInfo","drawRanges","_drawRanges","_geometryInfo","material","oldBoundsTree","oldDrawRange","boundingSphere","getVisibleAt","geometryId","geometryIndex","getMatrixAt","premultiply","getBoundingBoxAt","getBoundingSphereAt","setDrawRange","batchId","call","acceleratedMeshRaycast","undefined","setFromMatrixScale","multiply","scaleFactor","firstHitOnly","hits","useMeshBvh","cameraSphere","targetMeshArray","isFirstHist","getBoundsTree","scene","targetMeshName","targetMesh","getObjectByName","hasOwn","mesh","computeBoundsTree","log","addSphereToCamera","camera","cameraGroup","THREE","Group","name","shapeMaterial","MeshStandardMaterial","metalness","transparent","opacity","premultipliedAlpha","SphereGeometry","needIgnore","removeCameraSphere","removeFromParent","dispose","checkHit","hitArray","radiusArr","len","transformMatrix","sphereArr","findIndex","hitInfo","mergeAttributes","TypedArray","itemSize","gpuType","arrayLength","attribute","error","tupleOffset","getComponent","setComponent","toTrianglesDrawMode","drawMode","TrianglesDrawMode","TriangleFanDrawMode","TriangleStripDrawMode","indices","getAttribute","numberOfTriangles","newIndices","newGeometry","clearGroups","isBatchedMesh","BufferGeometry","disposeBoundsTree","GLTFLoader","Loader","manager","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFMaterialsDispersionExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsAnisotropyExtension","GLTFMaterialsBumpExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","load","url","onLoad","onError","scope","resourcePath","path","relativeUrl","LoaderUtils","extractUrlBase","resolveURL","itemStart","_onError","e","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","parse","gltf","setDRACOLoader","setKTX2Loader","setMeshoptDecoder","indexOf","unregister","json","extensions","plugins","textDecoder","TextDecoder","JSON","decode","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","content","asset","version","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","Promise","resolve","reject","GLTFRegistry","objects","get","key","remove","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_DISPERSION","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_MATERIALS_BUMP","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","cache","refs","uses","_markDefs","nodeDefs","nodes","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightDef","lights","lightNode","color","Color","setRGB","LinearSRGBColorSpace","type","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","PI","angle","penumbra","decay","assignExtrasToUserData","intensity","createUniqueName","getDependency","createNodeAttachment","self","then","_getNodeRef","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","SRGBColorSpace","all","extendMaterialParams","materials","emissiveStrength","emissiveIntensity","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","dispersion","iridescenceFactor","iridescence","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessRange","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture","sheenColor","sheenRoughness","sheen","sheenColorFactor","colorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","bumpScale","bumpFactor","bumpTexture","anisotropyStrength","anisotropy","anisotropyRotation","anisotropyTexture","loadTexture","textureIndex","textureDef","textures","loadTextureImage","isSupported","images","textureLoader","uri","handler","getHandler","detectSupport","image","Image","src","onload","onerror","height","loadBufferView","bufferView","bufferViews","extensionDef","decoder","supported","byteStride","decodeGltfBufferAsync","mode","filter","ready","decodeGltfBuffer","createNodeMesh","meshDef","meshes","WEBGL_CONSTANTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","accessor","results","nodeObject","isGroup","children","instancedMeshes","m","q","Quaternion","s","instancedMesh","InstancedMesh","TRANSLATION","ROTATION","SCALE","setMatrixAt","compose","attributeName","attr","instanceColor","InstancedBufferAttribute","setAttribute","Object3D","assignFinalMaterial","clear","BINARY_EXTENSION_CHUNK_TYPES","body","headerView","DataView","header","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","decodePrimitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","decodeDracoFile","extendTexture","texture","transform","texCoord","channel","rotation","fromArray","repeat","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","copySampleValue_","valueSize","interpolate_","t1","stride2","stride3","td","ppp","offset0","s3","s0","p0","m0","m1","_q","GLTFCubicSplineQuaternionInterpolant","normalize","toArray","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","UNSIGNED_BYTE","UNSIGNED_SHORT","Int8Array","Int16Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","TEXCOORD_3","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","gltfDef","extras","updateMorphTargets","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","targets","attributesKey","keys","getNormalizedComponentScale","_identityMatrix","associations","Map","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","safariVersion","isFirefox","firefoxVersion","navigator","userAgent","test","safariMatch","match","createImageBitmap","TextureLoader","ImageBitmapLoader","setCrossOrigin","_invokeAll","ext","beforeRoot","getDependencies","dependencies","scenes","animations","cameras","afterRoot","updateMatrixWorld","catch","skinDefs","skins","meshDefs","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","ref","updateMappings","original","mappings","child","entries","_invokeOne","func","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","bufferViewDef","accessorIndex","sparse","pendingBufferViews","elementBytes","BYTES_PER_ELEMENT","itemBytes","bufferAttribute","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sourceIndex","sourceDef","sampler","promise","loadImageSource","flipY","startsWith","samplers","magFilter","minFilter","wrapS","wrapT","generateMipmaps","isCompressedTexture","URL","webkitURL","sourceURI","isObjectURL","blob","Blob","mimeType","createObjectURL","isImageBitmapLoader","imageBitmap","Texture","revokeObjectURL","search","mapName","mapDef","colorSpace","gltfReference","useDerivativeTangents","tangent","useVertexColors","useFlatShading","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","vertexColors","flatShading","normalScale","materialType","kmuExtension","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","doubleSided","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","aoMapIntensity","emissiveFactor","emissive","emissiveTexture","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","loadGeometries","createDracoPrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","depthTest","geometries","SkinnedMesh","normalizeSkinWeights","LineSegments","Line","LineLoop","Points","morphAttributes","cameraIndex","cameraDef","params","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","updateMatrix","createdTracks","_createAnimationTracks","k","AnimationClip","o","isMesh","nodePending","childPending","childrenDef","skeletonPending","skeleton","bind","nodeName","meshPromise","Bone","quaternion","sceneIndex","sceneDef","nodeIds","reducedAssociations","reduceAssociations","targetName","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","interpolation","outputArray","_getArrayFromAccessor","track","_createCubicSplineTrackInterpolant","scaled","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","assignAttributeAccessor","gltfAttributeName","ColorManagement","workingColorSpace","boxScale","maxDisplacement","vector","expandByVector","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","morphPositions","morphNormals","morphColors","morphTargetsRelative","addMorphTargets","_taskCache","WeakMap","DRACOLoader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","attributeIDs","attributeTypes","vertexColorSpace","taskConfig","useUniqueIDs","decodeGeometry","taskKey","stringify","cachedTask","worker","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","id","message","_createGeometry","_releaseTask","geometryData","_assignVertexColorSpace","inputColorSpace","_color","toWorkingColorSpace","setXYZ","r","g","_loadLibrary","responseType","_initDecoder","useJS","WebAssembly","librariesPending","libraries","jsContent","wasmBinary","fn","DRACOWorker","toString","substring","lastIndexOf","join","Worker","_taskCosts","_taskLoad","onmessage","debug","terminate","decodeAttribute","draco","dracoGeometry","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","Int32Array","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","module","Decoder","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeArrayToMesh","POINT_CLOUD","PointCloud","DecodeArrayToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","attributeResult","numFaces","num_faces","numIndices","GetTrianglesUInt32Array","decodeIndex","destroy","_euler","Euler","_vector","_changeEvent","_lockEvent","_unlockEvent","_PI_2","PointerLockControls","Controls","domElement","isLocked","minPolarAngle","maxPolarAngle","pointerSpeed","_onMouseMove","onMouseMove","_onPointerlockChange","onPointerlockChange","_onPointerlockError","onPointerlockError","connect","ownerDocument","addEventListener","disconnect","removeEventListener","getObject","getDirection","applyQuaternion","moveForward","enabled","setFromMatrixColumn","up","addScaledVector","moveRight","lock","requestPointerLock","unlock","exitPointerLock","event","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","setFromEuler","dispatchEvent","pointerLockElement","_startEvent","_endEvent","_ray","_plane","_TILT_LIMIT","cos","DEG2RAD","_v","_twoPI","_STATE","_EPS","OrbitControls","state","cursor","minDistance","maxDistance","minZoom","maxZoom","minTargetRadius","maxTargetRadius","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","zoomToCursor","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","position0","zoom0","zoom","_domElementKeyEvents","_lastPosition","_lastQuaternion","_lastTargetPosition","_quat","setFromUnitVectors","_quatInverse","_spherical","Spherical","_sphericalDelta","_scale","_panOffset","_rotateStart","_rotateEnd","_rotateDelta","_panStart","_panEnd","_panDelta","_dollyStart","_dollyEnd","_dollyDelta","_dollyDirection","_mouse","_performCursorZoom","_pointers","_pointerPositions","_controlActive","_onPointerMove","onPointerMove","_onPointerDown","onPointerDown","_onPointerUp","onPointerUp","_onContextMenu","onContextMenu","_onMouseWheel","onMouseWheel","_onKeyDown","onKeyDown","_onTouchStart","onTouchStart","_onTouchMove","onTouchMove","_onMouseDown","onMouseDown","_interceptControlDown","interceptControlDown","_interceptControlUp","interceptControlUp","passive","getRootNode","capture","style","touchAction","stopListenToKeyEvents","getPolarAngle","phi","getAzimuthalAngle","theta","getDistance","listenToKeyEvents","saveState","reset","updateProjectionMatrix","deltaTime","setFromVector3","_rotateLeft","_getAutoRotationAngle","isFinite","makeSafe","clampLength","zoomChanged","isOrthographicCamera","_clampDistance","prevRadius","setFromSpherical","lookAt","newRadius","isPerspectiveCamera","radiusDelta","mouseBefore","unproject","prevZoom","mouseAfter","transformDirection","intersectPlane","_getZoomScale","normalizedDelta","_rotateUp","_panLeft","objectMatrix","_panUp","_pan","deltaX","deltaY","element","targetDistance","tan","fov","clientHeight","clientWidth","top","bottom","_dollyOut","dollyScale","_dollyIn","_updateZoomParameters","rect","getBoundingClientRect","dx","dy","w","width","h","_handleMouseDownRotate","clientX","clientY","_handleMouseDownDolly","_handleMouseDownPan","_handleMouseMoveRotate","_handleMouseMoveDolly","_handleMouseMovePan","_handleMouseWheel","_handleKeyDown","code","ctrlKey","metaKey","shiftKey","preventDefault","_handleTouchStartRotate","pageX","pageY","_getSecondPointerPosition","_handleTouchStartPan","_handleTouchStartDolly","_handleTouchStartDollyPan","_handleTouchStartDollyRotate","_handleTouchMoveRotate","_handleTouchMovePan","_handleTouchMoveDolly","centerX","centerY","_handleTouchMoveDollyPan","_handleTouchMoveDollyRotate","_addPointer","pointerId","_removePointer","_isTrackingPointer","_trackPointer","_customWheelEvent","deltaMode","newEvent","setPointerCapture","pointerType","releasePointerCapture","mouseAction","button","DOLLY_ROTATE","RGBELoader","DataTextureLoader","HalfFloatType","rgbe_error","rgbe_error_code","msg","fgets","lineLimit","consume","chunk","String","fromCharCode","apply","subarray","RGBEByteToRGBFloat","sourceArray","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","DataUtils","toHalfFloat","byteArray","rgbe_header_info","gamma_re","exposure_re","format_re","dimensions_re","valid","string","comments","programtype","format","gamma","exposure","line","charAt","parseFloat","RGBE_ReadHeader","image_rgba_data","scanline_width","data_rgba","ptr_end","rgbeStart","scanline_buffer","num_scanlines","isEncodedRun","byteValue","off","RGBE_ReadPixels_RLE","numElements","FloatType","floatArray","halfArray","setDataType","texData","_box","LineSegmentsGeometry","InstancedBufferGeometry","isLineSegmentsGeometry","Float32BufferAttribute","instanceStart","instanceEnd","computeBoundingSphere","setPositions","lineSegments","instanceBuffer","InstancedInterleavedBuffer","instanceCount","setColors","colors","instanceColorBuffer","fromWireframeGeometry","fromEdgesGeometry","fromMesh","WireframeGeometry","fromLineSegments","setFromBufferAttribute","maxRadiusSq","toJSON","applyMatrix","UniformsLib","worldUnits","linewidth","resolution","dashOffset","dashScale","dashSize","gapSize","ShaderLib","uniforms","UniformsUtils","merge","common","fog","vertexShader","fragmentShader","LineMaterial","ShaderMaterial","clipping","isLineMaterial","setValues","diffuse","defines","WORLD_UNITS","dashed","USE_DASH","alphaToCoverage","USE_ALPHA_TO_COVERAGE","_viewport","Vector4","_start","_end","_start4","_end4","_ssOrigin","_ssOrigin3","_mvMatrix","_line","_closestPoint","_sphere","_clipToWorldVector","_lineWidth","getWorldSpaceHalfWidth","projectionMatrix","projectionMatrixInverse","LineSegments2","random","isLineSegments2","computeLineDistances","lineDistances","instanceDistanceBuffer","Line2","sphereMargin","boxMargin","expandByScalar","pointOnLine","distanceSqToSegment","raycastWorldUnits","segmentCount","matrixWorldInverse","multiplyMatrices","deltaDist","lerp","param","closestPointToPointParameter","zPos","isInClipSpace","isInside","raycastScreenSpace","onBeforeRender","renderer","getViewport","LineGeometry","isLineGeometry","fromLine","isLine2","CopyShader","tDiffuse","Pass","isPass","needsSwap","renderToScreen","setSize","render","_camera","_geometry","FullScreenQuad","ShaderPass","shader","textureID","fsQuad","writeBuffer","readBuffer","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","MaskPass","inverse","context","getContext","writeValue","clearValue","setMask","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","ClearMaskPass","EffectComposer","renderTarget","_pixelRatio","getPixelRatio","size","getSize","_width","_height","WebGLRenderTarget","renderTarget1","renderTarget2","passes","copyPass","blending","NoBlending","clock","Clock","swapBuffers","addPass","pass","insertPass","removePass","isLastEnabledPass","passIndex","getDelta","currentRenderTarget","getRenderTarget","maskActive","NOTEQUAL","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","RenderPass","overrideMaterial","clearColor","clearAlpha","clearDepth","_oldClearColor","oldAutoClear","autoClear","oldClearAlpha","oldOverrideMaterial","getClearColor","setClearColor","getClearAlpha","setClearAlpha","OutlinePass","selectedObjects","renderScene","renderCamera","visibleEdgeColor","hiddenEdgeColor","edgeGlow","usePatternTexture","edgeThickness","edgeStrength","downSampleRatio","pulsePeriod","_visibilityCache","_selectionCache","resx","round","resy","renderTargetMaskBuffer","depthMaterial","MeshDepthMaterial","depthPacking","RGBADepthPacking","prepareMaskMaterial","getPrepareMaskMaterial","replace","replaceDepthToViewZ","renderTargetDepthBuffer","renderTargetMaskDownSampleBuffer","renderTargetBlurBuffer1","renderTargetBlurBuffer2","edgeDetectionMaterial","getEdgeDetectionMaterial","renderTargetEdgeBuffer1","renderTargetEdgeBuffer2","separableBlurMaterial1","getSeperableBlurMaterial","separableBlurMaterial2","overlayMaterial","getOverlayMaterial","copyShader","copyUniforms","materialCopy","tempPulseColor1","tempPulseColor2","textureMatrix","updateSelectionCache","gatherSelectedMeshesCallBack","changeVisibilityOfSelectedObjects","bVisible","visible","changeVisibilityOfNonSelectedObjects","visibilityCache","selectionCache","isSprite","visibility","updateTextureMatrix","currentBackground","background","scalar","performance","now","BlurDirectionX","BlurDirectionY","patternTexture","depthTexture","cameraNearFar","maskTexture","texSize","maxRadius","MAX_RADIUS","colorTexture","kernelRadius","edgeTexture1","edgeTexture2","AdditiveBlending","FXAAShader","GammaCorrectionShader","_position","_quaternion","CSS3DObject","document","createElement","isCSS3DObject","pointerEvents","userSelect","defaultView","Element","parentNode","recursive","cloneNode","_matrix","_matrix2","CSS3DRenderer","_this","_widthHalf","_heightHalf","overflow","viewElement","transformOrigin","appendChild","cameraElement","epsilon","getCameraCSSMatrix","elements","getObjectCSSMatrix","hideObject","display","renderObject","cameraCSSMatrix","layers","isCSS3DSprite","transpose","rotation2D","makeRotationZ","decompose","setPosition","cachedObject","objectData","onAfterRender","transformStyle","tx","ty","view","offsetX","offsetY","fullWidth","fullHeight","matrixWorldAutoUpdate","parent","scaleByViewOffset","RainDrop","drops","geom","velocityY","instance","positions","animate","mergeMeshs","meshName","geometryArray","materialArray","mergedGeometries","useGroups","isIndexed","attributesUsed","morphAttributesUsed","mergedGeometry","attributesCount","addGroup","indexOffset","mergedIndex","mergedAttribute","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","BufferGeometryUtils.mergeGeometries","singleMergeMesh","handleMaterial","envMapIntensity","currentPercent","newEnd","isGenerating","cbQuery","_lut","Utils","slowlyGenerate","cb","interval","requestAnimationFrame","queueMicrotask","window","cancelAnimationFrame","slowlyGenerate2","intervalFunc","clearInterval","setInterval","resetProgress","generateUUID","suffixTraverse","mergeRule","receiveShadow","obj","castShadow","equipName","EventBus","eventObject","callbackId","publish","eventName","callbackObject","subscribe","isOnce","unSubscribe","MyEventBus","myEventBus","getEventBus","PercentInterceptor","percentMap","percentMapProxy","Proxy","property","_receiver","percent","iterator","next","done","num","realPercent","handlerPercent","Reflect","Stats","container","addPanel","panel","dom","showPanel","cssText","beginTime","Date","prevTime","frames","fpsPanel","Panel","msPanel","memory","memPanel","begin","time","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","drawImage","StressType","Easing","freeze","Linear","None","amount","In","Out","InOut","Quadratic","Cubic","Quartic","Quintic","Sinusoidal","sin","Exponential","Circular","Elastic","Back","Bounce","generatePow","power","Number","EPSILON","tweens","_i","arguments","_tweens","_tweensAddedDuringUpdate","getAll","tweenId","_a","_b","tweens_1","tween","_group","getId","tweens_2","allStopped","every","isPlaying","preserve","tweenIds","autoStart","Interpolation","f","Bezier","n","pw","bn","Bernstein","CatmullRom","fc","Factorial","p3","v1","t2","Sequence","nextId","_nextId","mainGroup","Tween","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_isDynamic","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_onEveryStartCallbackFired","_id","_isChainStopped","_propertiesAreSetUp","_goToEnd","_object","isPaused","getDuration","to","duration","dynamic","overrideStartingValues","_swapEndStartRepeatValues","prop","_setupProperties","startFromCurrentValues","startValue","startValueIsArray","propType","isInterpolationList","endValues","_handleRelativeValue","reverse","nestedObject","stop","stopChainedTweens","_onStopCallback","pause","resume","numChainedTweens","delay","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolationFunction","chain","onStart","_onStartCallback","onEveryStart","_onEveryStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","autoStartOnUpdate","elapsedTime","durationAndDelay","totalTime","elapsed","timesRepeated","trunc","timeIntoCurrentRepeat","portion","calculateElapsedPortion","_updateProperties","completeCount","startIsArray","endIsArray","endValue","TWEEN","isWater","uWaresFrequency","uScale","uNoiseFrequency","uNoiseScale","uXzScale","uLowColor","uHighColor","uOpacity","uTime","MyWater","texture1","texture2","texture3","speed","uColor","uSpeed","_renderer","_scene","getElapsedTime","Reflector","isReflector","textureWidth","textureHeight","clipBias","ReflectorShader","multisample","reflectorPlane","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","virtualCamera","samples","setFromMatrixPosition","extractRotation","reflect","negate","constant","sign","currentXrEnabled","xr","currentShadowAutoUpdate","shadowMap","autoUpdate","viewport","Refractor","isRefractor","RefractorShader","matrixAutoUpdate","refractor","refractorPlane","refractorWorldPosition","updateRefractorPlane","updateVirtualCamera","clipVector","MyWaterCube","reflector","uRealLevel","uNeedLevel","reflectivity","noiseRatio","uOffset","iTime","iResolution","tReflectionMap","tRefractionMap","NormalBlending","makeMap","str","create","EMPTY_OBJ","process","env","NODE_ENV","NOOP","extend","hasOwnProperty","isMap","toTypeString","isFunction","isSymbol","isObject","objectToString","toRawType","isIntegerKey","capitalize","cacheStringFunction","toUpperCase","hasChanged","oldValue","is","activeSub","pausedQueueEffects","WeakSet","ReactiveEffect","deps","depsTail","flags","cleanup","scheduler","delete","trigger","notify","isComputed","batchedComputed","batchedSub","batch","run","cleanupEffect","prepareDeps","prevEffect","prevShouldTrack","shouldTrack","cleanupDeps","link","nextDep","removeSub","runIfDirty","isDirty","dirty","batchDepth","startBatch","endBatch","err","prevActiveLink","dep","activeLink","head","tail","prev","prevDep","removeDep","computed","refreshComputed","_dirty","globalVersion","isSSR","prevSub","_value","soft","nextSub","subsHead","subs","sc","trackStack","pauseTracking","resetTracking","last","Link","Dep","debugInfo","addSub","onTrack","effect","onTrigger","currentTail","targetMap","ITERATE_KEY","MAP_KEY_ITERATE_KEY","ARRAY_ITERATE_KEY","depsMap","newValue","oldTarget","targetIsArray","isArrayIndex","newLength","key2","reactiveReadArray","raw","toRaw","isShallow","toReactive","shallowReadArray","arr","arrayInstrumentations","__proto__","concat","thisArg","find","findLast","findLastIndex","includes","searchProxy","separator","noTracking","reduce","reduceRight","shift","some","toReversed","toSorted","comparer","toSpliced","method","wrapValue","iter","_next","arrayProto","wrappedRetFn","needsWrap","methodFn","result2","wrappedFn","item","acc","isNonTrackableKeys","builtInSymbols","getOwnPropertyNames","BaseReactiveHandler","_isReadonly","_isShallow","receiver","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","getPrototypeOf","isRef","readonly","reactive","MutableReactiveHandler","isOldValueReadonly","isReadonly","hadKey","deleteProperty","ownKeys","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","toShallow","getProto","createReadonlyMethod","createInstrumentations","shallow","instrumentations","rawTarget","rawKey","wrap","toReadonly","observed","checkIdentityKeys","hadItems","targetIsMap","isPair","isKeyOnly","innerIterator","createIterableMethod","createInstrumentationGetter","mutableCollectionHandlers","readonlyCollectionHandlers","createReactiveObject","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","isExtensible","rawType","targetTypeMap","proxy","isReactive","createRef","shallowRef","rawValue","RefImpl","_rawValue","useDirectValue","INITIAL_WATCHER_VALUE","cleanupMap","activeWatcher","watch","immediate","deep","once","augmentJob","warnInvalidSource","onWarn","reactiveGetter","source2","getter","boundCleanup","forceTrigger","isMultiSource","currentEffect","baseGetter","watchHandle","_cb","job","immediateFirstRun","currentWatcher","cleanupFn","failSilently","owner","cleanups","onWatcherCleanup","cleanup2","seen","isPlainObject","getOwnPropertySymbols","propertyIsEnumerable","Lensflare","Geometry","isLensflare","frustumCulled","renderOrder","positionScreen","positionView","tempMap","FramebufferTexture","occlusionMap","currentType","UnsignedByteType","material1a","RawShaderMaterial","screenPosition","material1b","mesh1","LensflareElement","Shader","material2","mesh2","addElement","screenPositionPixels","validArea","Box2","getCurrentViewport","invAspect","halfViewportWidth","halfViewportHeight","copyFramebufferToTexture","renderBufferDirect","vecX","vecY","uniformsNeedUpdate","interleavedBuffer","Sky","SkyShader","BoxGeometry","isSky","getEnvFromScene","turbidity","rayleigh","mieCoefficient","mieDirectionalG","sunPosition","suncalc","u8","u16","i32","fleb","fdeb","clim","freb","eb","fl","revfl","fd","rev","hMap","cd","mb","co","le","rvb","sv","r_1","flt","fdt","flrm","fdrm","bits","bits16","ec","ind","nt","captureStackTrace","inflt","dat","st","buf","dict","sl","noBuf","resize","noSt","cbuf","bl","nbuf","final","bt","lm","dm","lbt","dbt","tbts","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","dsym","dend","slc","et","unzlibSync","opts","stream","EXRLoader","USHORT_RANGE","HUF_DECBITS","HUF_ENCSIZE","HUF_DECSIZE","logBase","getBitsReturn","lc","getBits","nBits","uInt8Array","inOffset","parseUint8Array","hufTableBuffer","hufUnpackEncTable","ni","im","iM","hcode","zerun","nc","hufCanonicalCodeTable","hufLength","hufCode","getCharReturn","getChar","getCodeReturn","getCode","po","rlc","outBuffer","outBufferOffset","outBufferEndOffset","cs","UInt16","Int16","wdec14Return","wdec14","ls","hs","as","bs","wdec16","bb","aa","wav2Decode","nx","ny","mx","w14","py","ey","oy1","oy2","ox1","ox2","i00","i01","i10","i11","px","ex","p01","p10","p11","hufUncompress","inDataView","nCompressed","nRaw","initialInOffset","parseUint32","freq","hdec","lit","hufClearDecTable","hdecod","pl","plOffset","hufBuildDecTable","encodingTable","decodingTable","no","outOffset","inOffsetEnd","hufDecode","predictor","interleaveScalar","out","decodeRunLength","reader","getInt8","getUint8","unRleAC","currAcComp","acBuffer","halfZigBlock","acValue","dctComp","unZigZag","dst","decodeFloat16","dctInverse","alpha","beta","row","rowPtr","column","csc709Inverse","cr","convertToHalf","idx","toLinear","float","uncompressRAW","info","uncompressRLE","compressed","viewer","rawBuffer","tmpBuffer","uncompressZIP","fflate.unzlibSync","uncompressPIZ","columns","lines","inputChannels","bitmap","outBufferEnd","pizChannelData","minNonZero","parseUint16","maxNonZero","parseUint8","lut","reverseLutFromBitmap","nData","applyLut","tmpOffset","cp","uncompressPXR","byteSize","totalBytes","tmpBufferEnd","writePtr","pixel","pixelType","setUint16","setUint32","uncompressDWA","dwaHeader","parseInt64","unknownUncompressedSize","unknownCompressedSize","acCompressedSize","dcCompressedSize","rleCompressedSize","rleUncompressedSize","rleRawSize","totalAcUncompressedCount","totalDcUncompressedCount","acCompression","EXRHeader","compression","channelRules","ruleSize","parseNullTerminatedString","channelData","decoded","pLinear","cscSet","rule","dcBuffer","rleBuffer","zlibInfo","rowOffsets","chan","rowPtrs","dataView","numFullBlocksX","numBlocksX","ceil","numBlocksY","leftoverX","leftoverY","currDcComp","dctData","rowBlock","comp","blocky","maxY","maxX","blockx","halfRow","getUint16","setFloat32","lossyDctDecode","rleOffset","rowOffsetBytes","byte","uintBuffer","endOffset","stringValue","parseInt32","Int32","getInt32","Uint32","Uint8","int","getBigInt64","parseFloat32","getFloat32","decodeFloat32","binary","exponent","fraction","NaN","Uint16","parseFloat16","parseValue","parseFixedLengthString","startOffset","xSampling","ySampling","parseChlist","redX","redY","greenX","greenY","blueX","blueY","whiteX","whiteY","parseChromaticities","parseCompression","xMin","yMin","xMax","yMax","parseBox2i","parseEnvmap","xSize","ySize","modes","levelMode","roundingMode","parseTiledesc","parseLineOrder","parseV2f","parseV3f","parseRational","parseTimecode","calculateTileLevels","tiledesc","log2","roundLog2","calculateTiles","dataSize","tiles","parseTiles","EXRDecoder","tile","tileCount","tileX","tileY","startX","blockWidth","startY","blockHeight","bytesBlockLine","uncompress","lineOffset","channelID","lOff","channelByteOffsets","cOff","decodeChannels","outLineOffset","outLineWidth","outIndex","outputChannels","parseScanline","scanlineBlockIdx","dataWindow","bytesPerLine","line_y","scan_y","true_y","scanOrder","bufferDataView","spec","singleTile","longName","deepFormat","multiPart","keepReading","attributeValue","parseHeader","outputType","fillAlpha","R","G","B","A","Y","lineOrder","RGBAFormat","RedFormat","NoColorSpace","numXLevels","numXTiles","numYTiles","blockCount","setupDecoder","Water","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","mirrorPlane","mirrorWorldPosition","mirrorCamera","mirrorShader","mirrorSampler","initSkyLights","initSky","updateSunPosition","async","sky","sun","dirColor","currentTime","setHours","directionalLight_sun","shadow","mapSize","bias","d_sun","pointLight","hemisphereLight","HemisphereLight","setHSL","groundColor","lensflare","textureFlare0","textureFlare3","addLight","setScalar","effectController","degToRad","setFromSphericalCoords","utcTime","getTime","getTimezoneOffset","SunCalc","getPosition","sunAltitude","altitude","sunAzimuth","azimuth","setTime","directionalLight","sunVector","useSun","useThree","WebGLRenderer","antialias","logarithmicDepthBuffer","preserveDrawingBuffer","Scene","isFirstView","newVal","orbitControls","disabledOrbitControls","listenerAboutPointerLockControlsClick","pointerLockControls","raycasterWhiteList","centerInitCameraPosition","mixerMap","renderMixins","mixers","animationId","allowMeasure","isContinue","measureGroup","allowFocusAll","tweenGroup","tagMap","currentTag","measure","eventBus","cacheModel","canvasId","cameraPosition","cameraTarget","useComposer","ambientItensity","backgroundImgPath","environmentIntensity","orbitControlsOptions","lightPosition","envMap","highlightColor","raining","showSky","allowClick","autoSetCamera","DISTANCE","backgroundAlpha","containerWidth","containerHeight","stressType","STROKE","showBackImage","useDirectLight","managerBox","GltfLoader","DracoManager","stats","initRender","localClippingEnabled","PCFSoftShadowMap","targetDom","getElementById","labelRenderer","initManager","managerEvent","_name","_url","_itemsLoaded","_itemsTotal","GLTFManager","LoadingManager","DRACOManager","GltfManager","initClock","initStats","initLight","ambientLight","AmbientLight","initCamera","innerWidth","innerHeight","targetX","targetY","targetZ","aspect","enableAll","eventControllers","initOrbitControls","usePointerLockControls","useOrbitControls","moveBackward","moveLeft","jump","down","velocity","startPointerLockControls","setAnimationLoop","init","cameraTarget2","current","firstExit","vec","getWorldDirection","angleTo","composer","renderPass","outlinePass","effectFXAA","SELECTED","disabled","initComposer","gammaPass","updateRenderer","rainDrop","flat","updateLabel","mixer","mixin","parentName","AnimationMixer","clip","findByName","action","clipAction","timeScale","play","loadGLTF","onCompleted","xhr","loaded","addModelGroupByUrls","gltfUrls","dracoBaseUrl","loadDraco","promiseQuery","gltfUrl","resArr","allSettled","modelGroup","status","needScale","addToScene","reason","scanToAdd","model","addModelGroupByObjects","setTimeout","initLoader","showDefaultDialog","getCenterFromBounding","initThreeclickObjEvent","getVectorByClick","Raycaster","intersectObjects","selected","mouseSelected","mouse","eventController","abort","controller","AbortController","signal","controller2","signal2","controller3","signal3","controller4","signal4","setFromCamera","whiteList","pickedObject","ignoreList","whiteName","recoverMaterial","showSelectObjectInfo","focusModel","boxHelper","BoxHelper","setFromObject","cameraDistance","addRainDrop","includeOutline","removeAllTag","_preMaterial","getTagName","tagName","modelName","highlightModel","WIREFRAM","glowingMaterial","wireframe","COLOR","newColor","cloneMaterial","addTag","_event","objInfoEl","className","innerHTML","changeCameraFocus","useTween","_reject","tween1","tween2","myKeyboardEvent","watchTabVisibility","hidden","initEventListener","onWindowResize","TagName","customStyle","newTagName","tabDiv","tagStyle","classList","textContent","tag","getWorldPosition","worldToLocal","disposeMeshMaterial","meshMaterial","normalMap","roughnessMap","disposeMesh","removeObject","_dispose","positionArr","objArr","parentNameArr","scanToRemove","unitVector","pos2","exitPointerLockControls","resetCamera","addCustomTagByModelname","addCustomTagByConfig","tagOptions","css","sheet","insertRule","addStyleSheet","isCube","textureCube","CubeTextureLoader","environment","pmremGenerator","PMREMGenerator","compileEquirectangularShader","suffix","fromEquirectangular","initBackground","resetBg","isNull","clearBgLight","changeOrbitTarget","clearScene","forceContextLoss","removeChild","initWaterCube","waterName","existWater","box3","water","parentObj","uid","removeTag","targetI","targetJ","len2","clearMeasure","changeMeshOpacity","changeAlone","scanAndChange","replaceObject","gltUrls","promideQueue","exportImage","toDataURL","showRaining","isRaining","removeMixers","rootNames","_root","initWater","defaultParams","realParams","MyWater2","initWater2","flowSpeed","recoverSelect","myPath","pointPercentArr","originUp","preUp","loop","perce","turnSpeedFactor","alreadyRotate","preTime","firstTurn","preRotate","lineColor","_item","matLine","pointsBufferGeometry","distanceArr","sumDistance","disPerSumArr","getPoint","indexPre","indexNext","turn","rotateData","pointLen","factor","lerpVectors","nextup","rotationAxis","dotProduct","magnitudeA","magnitudeB","rotationAngle","acos","getRotationAxisAndAngle","realUp","animata","posi","rotateAxis","rotateOnAxis","asin","atan","atan2","rad","dayMs","J1970","J2000","fromJulian","toDays","date","valueOf","toJulian","rightAscension","declination","H","dec","siderealTime","lw","solarMeanAnomaly","eclipticLongitude","M","sunCoords","L","ra","lat","lng","addTime","riseName","setName","J0","approxTransit","Ht","solarTransitJ","ds","getSetJ","hourAngle","moonCoords","F","hoursLater","getTimes","Jset","Jrise","dh","observerAngle","julianCycle","Jnoon","solarNoon","nadir","getMoonPosition","pa","astroRefraction","parallacticAngle","getMoonIllumination","sdist","inc","phase","getMoonTimes","inUTC","setUTCHours","h1","h2","rise","xe","ye","x1","x2","hc","h0","exports","define","amd"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,67,68,75,76,78,79,80,81,83,84,85,88]}